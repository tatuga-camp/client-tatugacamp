!function(){"use strict";let t,r,n,o;var a,l,i,s,d,c,u,m,g,f,p,h,b,v=function(t){if(null===t)return"null";if(void 0===t)return"undefined";var r=typeof t;return"object"===r&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===r&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":r},y=function(t){return{eq:t}},C=y(function(t,r){return t===r}),E=function(t){return y(function(r,n){if(r.length!==n.length)return!1;for(var o=r.length,a=0;a<o;a++)if(!t.eq(r[a],n[a]))return!1;return!0})},w=function(t){return y(function(r,n){var o,a,l=Object.keys(r),i=Object.keys(n);if(!(o=E(C),a=function(t){return Array.prototype.slice.call(t).sort(void 0)},y(function(t,r){return o.eq(a(t),a(r))})).eq(l,i))return!1;for(var s=l.length,d=0;d<s;d++){var c=l[d];if(!t.eq(r[c],n[c]))return!1}return!0})},x=y(function(t,r){if(t===r)return!0;var n=v(t);return n===v(r)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?t===r:"array"===n?E(x).eq(t,r):"object"===n&&w(x).eq(t,r))});let _=Object.getPrototypeOf,k=(t,r,n)=>{var o;return!!n(t,r.prototype)||(null===(o=t.constructor)||void 0===o?void 0:o.name)===r.name},S=t=>r=>(t=>{let r=typeof t;return null===t?"null":"object"===r&&Array.isArray(t)?"array":"object"===r&&k(t,String,(t,r)=>r.isPrototypeOf(t))?"string":r})(r)===t,N=t=>r=>typeof r===t,R=t=>r=>t===r,A=(t,r)=>O(t)&&k(t,r,(t,r)=>_(t)===r),T=S("string"),O=S("object"),B=t=>A(t,Object),P=S("array"),D=R(null),L=N("boolean"),M=R(void 0),F=t=>null==t,I=t=>!F(t),U=N("function"),z=N("number"),j=(t,r)=>{if(P(t)){for(let n=0,o=t.length;n<o;++n)if(!r(t[n]))return!1;return!0}return!1},H=()=>{},$=(t,r)=>(...n)=>t(r.apply(null,n)),V=(t,r)=>n=>t(r(n)),q=t=>()=>t,W=t=>t,K=(t,r)=>t===r;function Y(t,...r){return(...n)=>{let o=r.concat(n);return t.apply(null,o)}}let G=t=>r=>!t(r),X=t=>()=>{throw Error(t)},Z=t=>t(),Q=t=>{t()},J=q(!1),ee=q(!0);class et{constructor(t,r){this.tag=t,this.value=r}static some(t){return new et(!0,t)}static none(){return et.singletonNone}fold(t,r){return this.tag?r(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?et.some(t(this.value)):et.none()}bind(t){return this.tag?t(this.value):et.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:et.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw Error(null!=t?t:"Called getOrDie on None")}static from(t){return I(t)?et.some(t):et.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}et.singletonNone=new et(!1);let er=Array.prototype.slice,en=Array.prototype.indexOf,eo=Array.prototype.push,ea=(t,r)=>en.call(t,r),el=(t,r)=>ea(t,r)>-1,ei=(t,r)=>{for(let n=0,o=t.length;n<o;n++)if(r(t[n],n))return!0;return!1},es=(t,r)=>{let n=t.length,o=Array(n);for(let a=0;a<n;a++){let n=t[a];o[a]=r(n,a)}return o},ed=(t,r)=>{for(let n=0,o=t.length;n<o;n++)r(t[n],n)},ec=(t,r)=>{for(let n=t.length-1;n>=0;n--)r(t[n],n)},eu=(t,r)=>{let n=[],o=[];for(let a=0,l=t.length;a<l;a++){let l=t[a];(r(l,a)?n:o).push(l)}return{pass:n,fail:o}},em=(t,r)=>{let n=[];for(let o=0,a=t.length;o<a;o++){let a=t[o];r(a,o)&&n.push(a)}return n},eg=(t,r,n)=>(ec(t,(t,o)=>{n=r(n,t,o)}),n),ef=(t,r,n)=>(ed(t,(t,o)=>{n=r(n,t,o)}),n),ep=(t,r,n)=>{for(let o=0,a=t.length;o<a;o++){let a=t[o];if(r(a,o))return et.some(a);if(n(a,o))break}return et.none()},eh=(t,r)=>ep(t,r,J),eb=(t,r)=>{for(let n=0,o=t.length;n<o;n++)if(r(t[n],n))return et.some(n);return et.none()},ev=t=>{let r=[];for(let n=0,o=t.length;n<o;++n){if(!P(t[n]))throw Error("Arr.flatten item "+n+" was not an array, input: "+t);eo.apply(r,t[n])}return r},ey=(t,r)=>ev(es(t,r)),eC=(t,r)=>{for(let n=0,o=t.length;n<o;++n)if(!0!==r(t[n],n))return!1;return!0},eE=t=>{let r=er.call(t,0);return r.reverse(),r},ew=(t,r)=>em(t,t=>!el(r,t)),ex=(t,r)=>{let n={};for(let o=0,a=t.length;o<a;o++){let a=t[o];n[String(a)]=r(a,o)}return n},e_=(t,r)=>{let n=er.call(t,0);return n.sort(r),n},ek=(t,r)=>r>=0&&r<t.length?et.some(t[r]):et.none(),eS=t=>ek(t,0),eN=t=>ek(t,t.length-1),eR=U(Array.from)?Array.from:t=>er.call(t),eA=(t,r)=>{for(let n=0;n<t.length;n++){let o=r(t[n],n);if(o.isSome())return o}return et.none()},eT=(t,r)=>{let n=[],o=U(r)?t=>ei(n,n=>r(n,t)):t=>el(n,t);for(let r=0,a=t.length;r<a;r++){let a=t[r];o(a)||n.push(a)}return n},eO=Object.keys,eB=Object.hasOwnProperty,eP=(t,r)=>{let n=eO(t);for(let o=0,a=n.length;o<a;o++){let a=n[o];r(t[a],a)}},eD=(t,r)=>eL(t,(t,n)=>({k:n,v:r(t,n)})),eL=(t,r)=>{let n={};return eP(t,(t,o)=>{let a=r(t,o);n[a.k]=a.v}),n},eM=t=>(r,n)=>{t[n]=r},eF=(t,r,n,o)=>{eP(t,(t,a)=>{(r(t,a)?n:o)(t,a)})},eI=(t,r)=>{let n={};return eF(t,r,eM(n),H),n},eU=(t,r)=>{let n=[];return eP(t,(t,o)=>{n.push(r(t,o))}),n},ez=t=>eU(t,W),ej=(t,r)=>eH(t,r)?et.from(t[r]):et.none(),eH=(t,r)=>eB.call(t,r),e$=(t,r)=>eH(t,r)&&void 0!==t[r]&&null!==t[r],eV=t=>{let r={};return ed(t,t=>{r[t]={}}),eO(r)},eq=t=>void 0!==t.length,eW=Array.isArray,eK=(t,r,n)=>{if(!t)return!1;if(n=n||t,eq(t)){for(let o=0,a=t.length;o<a;o++)if(!1===r.call(n,t[o],o,t))return!1}else for(let o in t)if(eH(t,o)&&!1===r.call(n,t[o],o,t))return!1;return!0},eY=(t,r)=>{let n=[];return eK(t,(o,a)=>{n.push(r(o,a,t))}),n},eG=(t,r)=>{let n=[];return eK(t,(o,a)=>{r&&!r(o,a,t)||n.push(o)}),n},eX=(t,r,n,o)=>{let a=M(n)?t[0]:n;for(let n=0;n<t.length;n++)a=r.call(o,a,t[n],n);return a},eZ=(t,r,n)=>{for(let o=0,a=t.length;o<a;o++)if(r.call(n,t[o],o,t))return o;return -1},eQ=t=>t[t.length-1],eJ=t=>{let r,n=!1;return(...o)=>(n||(n=!0,r=t.apply(null,o)),r)},e0=()=>e1(0,0),e1=(t,r)=>({major:t,minor:r}),e2={nu:e1,detect:(t,r)=>{let n=String(r).toLowerCase();return 0===t.length?e0():((t,r)=>{let n=((t,r)=>{for(let n=0;n<t.length;n++){let o=t[n];if(o.test(r))return o}})(t,r);if(!n)return{major:0,minor:0};let o=t=>Number(r.replace(n,"$"+t));return e1(o(1),o(2))})(t,n)},unknown:e0},e3=(t,r)=>{let n=String(r).toLowerCase();return eh(t,t=>t.search(n))},e8=(t,r,n)=>""===r||t.length>=r.length&&t.substr(n,n+r.length)===r,e5=(t,r)=>{var n;return e4(t,r)?(n=r.length,t.substring(n)):t},e6=(t,r,n=0,o)=>{let a=t.indexOf(r,n);return -1!==a&&(!!M(o)||a+r.length<=o)},e4=(t,r)=>e8(t,r,0),e9=(t,r)=>e8(t,r,t.length-r.length),e7=t=>r=>r.replace(t,""),te=e7(/^\s+|\s+$/g),tt=e7(/^\s+/g),tr=e7(/\s+$/g),tn=t=>t.length>0,to=t=>!tn(t),ta=(t,r=10)=>{let n=parseInt(t,r);return isNaN(n)?et.none():et.some(n)},tl=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ti=t=>r=>e6(r,t),ts=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>e6(t,"edge/")&&e6(t,"chrome")&&e6(t,"safari")&&e6(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,tl],search:t=>e6(t,"chrome")&&!e6(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>e6(t,"msie")||e6(t,"trident")},{name:"Opera",versionRegexes:[tl,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ti("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ti("firefox")},{name:"Safari",versionRegexes:[tl,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(e6(t,"safari")||e6(t,"mobile/"))&&e6(t,"applewebkit")}],td=[{name:"Windows",search:ti("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>e6(t,"iphone")||e6(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ti("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ti("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ti("linux"),versionRegexes:[]},{name:"Solaris",search:ti("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ti("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ti("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],tc={browsers:q(ts),oses:q(td)},tu="Edge",tm="Chromium",tg="Opera",tf="Firefox",tp="Safari",th=t=>{let r=t.current,n=t.version,o=t=>()=>r===t;return{current:r,version:n,isEdge:o(tu),isChromium:o(tm),isIE:o("IE"),isOpera:o(tg),isFirefox:o(tf),isSafari:o(tp)}},tb=()=>th({current:void 0,version:e2.unknown()}),tv=(q(tu),q(tm),q("IE"),q(tg),q(tf),q(tp),"Windows"),ty="Android",tC="Linux",tE="macOS",tw="Solaris",tx="FreeBSD",t_="ChromeOS",tk=t=>{let r=t.current,n=t.version,o=t=>()=>r===t;return{current:r,version:n,isWindows:o(tv),isiOS:o("iOS"),isAndroid:o(ty),isMacOS:o(tE),isLinux:o(tC),isSolaris:o(tw),isFreeBSD:o(tx),isChromeOS:o(t_)}},tS=()=>tk({current:void 0,version:e2.unknown()}),tN=(q(tv),q("iOS"),q(ty),q(tC),q(tE),q(tw),q(tx),q(t_),t=>window.matchMedia(t).matches),tR=eJ(()=>((t,r,n)=>{let o=tc.browsers(),a=tc.oses(),l=r.bind(t=>eA(t.brands,t=>{let r=t.brand.toLowerCase();return eh(o,t=>{var n;return r===(null===(n=t.brand)||void 0===n?void 0:n.toLowerCase())}).map(r=>({current:r.name,version:e2.nu(parseInt(t.version,10),0)}))})).orThunk(()=>e3(o,t).map(r=>{let n=e2.detect(r.versionRegexes,t);return{current:r.name,version:n}})).fold(tb,th),i=e3(a,t).map(r=>{let n=e2.detect(r.versionRegexes,t);return{current:r.name,version:n}}).fold(tS,tk),s=((t,r,n,o)=>{let a=t.isiOS()&&!0===/ipad/i.test(n),l=t.isiOS()&&!a,i=t.isiOS()||t.isAndroid(),s=i||o("(pointer:coarse)"),d=a||!l&&i&&o("(min-device-width:768px)"),c=l||i&&!d,u=r.isSafari()&&t.isiOS()&&!1===/safari/i.test(n);return{isiPad:q(a),isiPhone:q(l),isTablet:q(d),isPhone:q(c),isTouch:q(s),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:q(u),isDesktop:q(!c&&!d&&!u)}})(i,l,t,n);return{browser:l,os:i,deviceType:s}})(navigator.userAgent,et.from(navigator.userAgentData),tN)),tA=()=>tR(),tT=navigator.userAgent,tO=tA(),tB=tO.browser,tP=tO.os,tD=tO.deviceType,tL=-1!==tT.indexOf("Windows Phone"),tM={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:tB.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!tB.isIE(),windowsPhone:tL,browser:{current:tB.current,version:tB.version,isChromium:tB.isChromium,isEdge:tB.isEdge,isFirefox:tB.isFirefox,isIE:tB.isIE,isOpera:tB.isOpera,isSafari:tB.isSafari},os:{current:tP.current,version:tP.version,isAndroid:tP.isAndroid,isChromeOS:tP.isChromeOS,isFreeBSD:tP.isFreeBSD,isiOS:tP.isiOS,isLinux:tP.isLinux,isMacOS:tP.isMacOS,isSolaris:tP.isSolaris,isWindows:tP.isWindows},deviceType:{isDesktop:tD.isDesktop,isiPad:tD.isiPad,isiPhone:tD.isiPhone,isPhone:tD.isPhone,isTablet:tD.isTablet,isTouch:tD.isTouch,isWebView:tD.isWebView}},tF=/^\s*|\s*$/g,tI=t=>F(t)?"":(""+t).replace(tF,""),tU=function(t,r,n,o){o=o||this,t&&(n&&(t=t[n]),eK(t,(t,a)=>!1!==r.call(o,t,a,n)&&(tU(t,r,n,o),!0)))},tz={trim:tI,isArray:eW,is:(t,r)=>r?!("array"!==r||!eW(t))||typeof t===r:void 0!==t,toArray:t=>{if(eW(t))return t;{let r=[];for(let n=0,o=t.length;n<o;n++)r[n]=t[n];return r}},makeMap:(t,r,n={})=>{let o=T(t)?t.split(r||","):t||[],a=o.length;for(;a--;)n[o[a]]={};return n},each:eK,map:eY,grep:eG,inArray:(t,r)=>{if(t){for(let n=0,o=t.length;n<o;n++)if(t[n]===r)return n}return -1},hasOwn:eH,extend:(t,...r)=>{for(let n=0;n<r.length;n++){let o=r[n];for(let r in o)if(eH(o,r)){let n=o[r];void 0!==n&&(t[r]=n)}}return t},walk:tU,resolve:(t,r=window)=>{let n=t.split(".");for(let t=0,o=n.length;t<o&&(r=r[n[t]]);t++);return r},explode:(t,r)=>P(t)?t:""===t?[]:eY(t.split(r||","),tI),_addCacheSuffix:t=>{let r=tM.cacheSuffix;return r&&(t+=(-1===t.indexOf("?")?"?":"&")+r),t}},tj=(t,r,n=K)=>t.exists(t=>n(t,r)),tH=(t,r,n=K)=>t$(t,r,n).getOr(t.isNone()&&r.isNone()),t$=(t,r,n)=>t.isSome()&&r.isSome()?et.some(n(t.getOrDie(),r.getOrDie())):et.none(),tV=(t,r)=>t?et.some(r):et.none(),tq="undefined"!=typeof window?window:Function("return this;")(),tW=(t,r)=>((t,r)=>{let n=null!=r?r:tq;for(let r=0;r<t.length&&null!=n;++r)n=n[t[r]];return n})(t.split("."),r),tK=Object.getPrototypeOf,tY=t=>{let r=tW("ownerDocument.defaultView",t);return O(t)&&(((t,r)=>{let n=tW(t,r);if(null==n)throw Error(t+" not available on this browser");return n})("HTMLElement",r).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(tK(t).constructor.name))},tG=t=>t.dom.nodeName.toLowerCase(),tX=t=>t.dom.nodeType,tZ=t=>r=>tX(r)===t,tQ=t=>tJ(t)&&tY(t.dom),tJ=tZ(1),t0=tZ(3),t1=tZ(9),t2=tZ(11),t3=t=>r=>tJ(r)&&tG(r)===t,t8=(t,r,n)=>{if(!(T(n)||L(n)||z(n)))throw console.error("Invalid call to Attribute.set. Key ",r,":: Value ",n,":: Element ",t),Error("Attribute value was not simple");t.setAttribute(r,n+"")},t5=(t,r,n)=>{t8(t.dom,r,n)},t6=(t,r)=>{let n=t.dom;eP(r,(t,r)=>{t8(n,r,t)})},t4=(t,r)=>{let n=t.dom.getAttribute(r);return null===n?void 0:n},t9=(t,r)=>et.from(t4(t,r)),t7=(t,r)=>{let n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(r)},re=(t,r)=>{t.dom.removeAttribute(r)},rt=t=>ef(t.dom.attributes,(t,r)=>(t[r.name]=r.value,t),{}),rr=(t,r)=>{let n=t4(t,r);return void 0===n||""===n?[]:n.split(" ")},rn=t=>void 0!==t.dom.classList,ro=t=>rr(t,"class"),ra=(t,r)=>((t,r,n)=>{let o=rr(t,r).concat([n]);return t5(t,r,o.join(" ")),!0})(t,"class",r),rl=(t,r)=>((t,r,n)=>{let o=em(rr(t,r),t=>t!==n);return o.length>0?t5(t,r,o.join(" ")):re(t,r),!1})(t,"class",r),ri=(t,r)=>{rn(t)?t.dom.classList.add(r):ra(t,r)},rs=t=>{0===(rn(t)?t.dom.classList:ro(t)).length&&re(t,"class")},rd=(t,r)=>{rn(t)?t.dom.classList.remove(r):rl(t,r),rs(t)},rc=(t,r)=>rn(t)&&t.dom.classList.contains(r),ru=t=>{if(null==t)throw Error("Node cannot be null or undefined");return{dom:t}},rm=(t,r)=>{let n=(r||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1){let r="HTML does not have a single root node";throw console.error(r,t),Error(r)}return ru(n.childNodes[0])},rg=(t,r)=>ru((r||document).createElement(t)),rf=(t,r)=>ru((r||document).createTextNode(t)),rp=(t,r,n)=>et.from(t.dom.elementFromPoint(r,n)).map(ru),rh=(t,r)=>{let n=[],o=t=>(n.push(t),r(t)),a=r(t);do a=a.bind(o);while(a.isSome());return n},rb=(t,r)=>{let n=t.dom;if(1!==n.nodeType)return!1;if(void 0!==n.matches)return n.matches(r);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(r);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(r);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(r);throw Error("Browser lacks native selectors")},rv=t=>1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount,ry=(t,r)=>t.dom===r.dom,rC=(t,r)=>{let n=t.dom,o=r.dom;return n!==o&&n.contains(o)},rE=t=>ru(t.dom.ownerDocument),rw=t=>t1(t)?t:rE(t),rx=t=>ru(rw(t).dom.defaultView),r_=t=>et.from(t.dom.parentNode).map(ru),rk=t=>et.from(t.dom.parentElement).map(ru),rS=(t,r)=>{let n=U(r)?r:J,o=t.dom,a=[];for(;null!==o.parentNode&&void 0!==o.parentNode;){let t=o.parentNode,r=ru(t);if(a.push(r),!0===n(r))break;o=t}return a},rN=t=>et.from(t.dom.previousSibling).map(ru),rR=t=>et.from(t.dom.nextSibling).map(ru),rA=t=>eE(rh(t,rN)),rT=t=>rh(t,rR),rO=t=>es(t.dom.childNodes,ru),rB=(t,r)=>{let n=t.dom.childNodes;return et.from(n[r]).map(ru)},rP=t=>rB(t,0),rD=t=>rB(t,t.dom.childNodes.length-1),rL=t=>t.dom.childNodes.length,rM=t=>t2(t)&&I(t.dom.host),rF=U(Element.prototype.attachShadow)&&U(Node.prototype.getRootNode),rI=q(rF),rU=rF?t=>ru(t.dom.getRootNode()):rw,rz=t=>rM(t)?t:(t=>{let r=t.dom.head;if(null==r)throw Error("Head is not available yet");return ru(r)})(rw(t)),rj=t=>ru(t.dom.host),rH=t=>{if(rI()&&I(t.target)){let r=ru(t.target);if(tJ(r)&&r$(r)&&t.composed&&t.composedPath){let r=t.composedPath();if(r)return eS(r)}}return et.from(t.target)},r$=t=>I(t.dom.shadowRoot),rV=t=>{let r=t0(t)?t.dom.parentNode:t.dom;if(null==r||null===r.ownerDocument)return!1;let n=r.ownerDocument;return(t=>{let r=rU(t);return rM(r)?et.some(r):et.none()})(ru(r)).fold(()=>n.body.contains(r),V(rV,rj))};var rq=(t,r,n,o,a)=>t(n,o)?et.some(n):U(a)&&a(n)?et.none():r(n,o,a);let rW=(t,r,n)=>{let o=t.dom,a=U(n)?n:J;for(;o.parentNode;){let t=ru(o=o.parentNode);if(r(t))return et.some(t);if(a(t))break}return et.none()},rK=(t,r,n)=>rq((t,r)=>r(t),rW,t,r,n),rY=(t,r)=>{let n=t=>{for(let o=0;o<t.childNodes.length;o++){let a=ru(t.childNodes[o]);if(r(a))return et.some(a);let l=n(t.childNodes[o]);if(l.isSome())return l}return et.none()};return n(t.dom)},rG=(t,r,n)=>rW(t,t=>rb(t,r),n),rX=(t,r)=>((t,r)=>{let n=void 0===r?document:r.dom;return rv(n)?et.none():et.from(n.querySelector(t)).map(ru)})(r,t),rZ=(t,r,n)=>rq((t,r)=>rb(t,r),rG,t,r,n),rQ=(t,r=!1)=>rV(t)?t.dom.isContentEditable:rZ(t,"[contenteditable]").fold(q(r),t=>"true"===rJ(t)),rJ=t=>t.dom.contentEditable,r0=t=>void 0!==t.style&&U(t.style.getPropertyValue),r1=(t,r,n)=>{if(!T(n))throw console.error("Invalid call to CSS.set. Property ",r,":: Value ",n,":: Element ",t),Error("CSS value must be a string: "+n);r0(t)&&t.style.setProperty(r,n)},r2=(t,r,n)=>{r1(t.dom,r,n)},r3=(t,r)=>{let n=t.dom;eP(r,(t,r)=>{r1(n,r,t)})},r8=(t,r)=>{let n=t.dom,o=window.getComputedStyle(n).getPropertyValue(r);return""!==o||rV(t)?o:r5(n,r)},r5=(t,r)=>r0(t)?t.style.getPropertyValue(r):"",r6=(t,r)=>{let n=r5(t.dom,r);return et.from(n).filter(t=>t.length>0)},r4=t=>{let r={},n=t.dom;if(r0(n))for(let t=0;t<n.style.length;t++){let o=n.style.item(t);r[o]=n.style[o]}return r},r9=(t,r)=>{var n;r0(n=t.dom)&&n.style.removeProperty(r),tj(t9(t,"style").map(te),"")&&re(t,"style")},r7=(t,r)=>{r_(t).each(n=>{n.dom.insertBefore(r.dom,t.dom)})},ne=(t,r)=>{rR(t).fold(()=>{r_(t).each(t=>{nr(t,r)})},t=>{r7(t,r)})},nt=(t,r)=>{rP(t).fold(()=>{nr(t,r)},n=>{t.dom.insertBefore(r.dom,n.dom)})},nr=(t,r)=>{t.dom.appendChild(r.dom)},nn=(t,r)=>{r7(t,r),nr(r,t)},no=(t,r)=>{ed(r,r=>{nr(t,r)})},na=t=>{t.dom.textContent="",ed(rO(t),t=>{nl(t)})},nl=t=>{let r=t.dom;null!==r.parentNode&&r.parentNode.removeChild(r)},ni=t=>{let r=rO(t);r.length>0&&ed(r,(n,o)=>{ne(0===o?t:r[o-1],n)}),nl(t)},ns=t=>es(t,ru),nd=t=>t.dom.innerHTML,nc=(t,r)=>{let n=rE(t).dom,o=ru(n.createDocumentFragment());no(o,((t,r)=>{let n=(r||document).createElement("div");return n.innerHTML=t,rO(ru(n))})(r,n)),na(t),nr(t,o)},nu=(t,r,n,o)=>((t,r,n,o,a)=>{let l=t=>{n(t)&&o((t=>{let r=ru(rH(t).getOr(t.target)),n=()=>t.stopPropagation(),o=()=>t.preventDefault(),a=$(o,n);return{target:r,x:t.clientX,y:t.clientY,stop:n,prevent:o,kill:a,raw:t}})(t))};return t.dom.addEventListener(r,l,!1),{unbind:Y(nm,t,r,l,!1)}})(t,r,n,o),nm=(t,r,n,o)=>{t.dom.removeEventListener(r,n,o)},ng=(t,r)=>({left:t,top:r,translate:(n,o)=>ng(t+n,r+o)}),nf=(t,r)=>void 0!==t?t:void 0!==r?r:0,np=t=>{let r=t.dom,n=r.ownerDocument.body;return n===r?ng(n.offsetLeft,n.offsetTop):rV(t)?(t=>{let r=t.getBoundingClientRect();return ng(r.left,r.top)})(r):ng(0,0)},nh=t=>{let r=void 0!==t?t.dom:document;return ng(r.body.scrollLeft||r.documentElement.scrollLeft,r.body.scrollTop||r.documentElement.scrollTop)},nb=(t,r,n)=>{let o=(void 0!==n?n.dom:document).defaultView;o&&o.scrollTo(t,r)},nv=(t,r)=>{tA().browser.isSafari()&&U(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(r)},ny=(t,r,n,o)=>({x:t,y:r,width:n,height:o,right:t+n,bottom:r+o}),nC=t=>{let r=void 0===t?window:t,n=nh(ru(r.document));return(t=>{let r=void 0===t?window:t;return tA().browser.isFirefox()?et.none():et.from(r.visualViewport)})(r).fold(()=>{let t=r.document.documentElement,o=t.clientWidth,a=t.clientHeight;return ny(n.left,n.top,o,a)},t=>ny(Math.max(t.pageLeft,n.left),Math.max(t.pageTop,n.top),t.width,t.height))},nE=(t,r)=>{let n=[];return ed(rO(t),t=>{r(t)&&(n=n.concat([t])),n=n.concat(nE(t,r))}),n},nw=(t,r)=>((t,r)=>{let n=void 0===r?document:r.dom;return rv(n)?[]:es(n.querySelectorAll(t),ru)})(r,t),nx=(t,r,n)=>rW(t,r,n).isSome(),n_=(t,r)=>((t,r)=>{var n,o;let a=t.dom;return a.parentNode?(n=ru(a.parentNode),o=n=>!ry(t,n)&&r(n),eh(n.dom.childNodes,t=>o(ru(t))).map(ru)):et.none()})(t,r).isSome(),nk=(t,r)=>rY(t,r).isSome();class nS{constructor(t,r){this.node=t,this.rootNode=r,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,r,n,o){if(t){if(!o&&t[r])return t[r];if(t!==this.rootNode){let r=t[n];if(r)return r;for(let o=t.parentNode;o&&o!==this.rootNode;o=o.parentNode)if(r=o[n])return r}}}findPreviousNode(t,r){if(t){let n=t.previousSibling;if(this.rootNode&&n===this.rootNode)return;if(n){if(!r){for(let t=n.lastChild;t;t=t.lastChild)if(!t.lastChild)return t}return n}let o=t.parentNode;if(o&&o!==this.rootNode)return o}}}let nN=t=>"\uFEFF"===t,nR=/^[ \t\r\n]*$/,nA=t=>nR.test(t),nT=t=>"\n"===t||"\r"===t,nO=(t,r=4,n=!0,o=!0)=>{let a=r<=0?"":Array(r+1).join(" "),l=t.replace(/\t/g,a);return ef(l,(t,r)=>{var a;return -1!==" \f	\v".indexOf(r)||"\xa0"===r?t.pcIsSpace||""===t.str&&n||t.str.length===l.length-1&&o||(a=t.str.length+1)<l.length&&a>=0&&nT(l[a])?{pcIsSpace:!1,str:t.str+"\xa0"}:{pcIsSpace:!0,str:t.str+" "}:{pcIsSpace:nT(r),str:t.str+r}},{pcIsSpace:!1,str:""}).str},nB=t=>r=>!!r&&r.nodeType===t,nP=t=>!!t&&!Object.getPrototypeOf(t),nD=nB(1),nL=t=>nD(t)&&tQ(ru(t)),nM=t=>{let r=t.toLowerCase();return t=>I(t)&&t.nodeName.toLowerCase()===r},nF=t=>{let r=t.map(t=>t.toLowerCase());return t=>!!t&&!!t.nodeName&&el(r,t.nodeName.toLowerCase())},nI=(t,r)=>{let n=r.toLowerCase().split(" ");return r=>{if(nD(r)){let o=r.ownerDocument.defaultView;if(o)for(let a=0;a<n.length;a++){let l=o.getComputedStyle(r,null);if((l?l.getPropertyValue(t):null)===n[a])return!0}}return!1}},nU=t=>nD(t)&&t.hasAttribute("data-mce-bogus"),nz=t=>nD(t)&&"TABLE"===t.tagName,nj=t=>r=>!!nL(r)&&(r.contentEditable===t||r.getAttribute("data-mce-contenteditable")===t),nH=nF(["textarea","input"]),n$=nB(3),nV=nB(4),nq=nB(7),nW=nB(8),nK=nB(9),nY=nB(11),nG=nM("br"),nX=nM("img"),nZ=nj("true"),nQ=nj("false"),nJ=nF(["td","th"]),n0=nF(["td","th","caption"]),n1=nF(["video","audio","object","embed"]),n2=nM("li"),n3=nM("details"),n8=nM("summary"),n5={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},n6=t=>nD(t)&&t.hasAttribute("data-mce-bookmark"),n4=(t,r,n,o)=>n$(t)&&(!nA(t.data)||!!((t,r,n)=>{let o=ru(r),a=ru(t),l=n.getWhitespaceElements();return nx(a,t=>eH(l,tG(t)),Y(ry,o))})(t,r,n))&&(!o.includeZwsp||!(t=>{for(let r of t)if(!nN(r))return!1;return!0})(t.data)),n9=(t,r,n,o)=>U(o.isContent)&&o.isContent(r)||nD(r)&&eH(t.getNonEmptyElements(),r.nodeName)||n6(r)||nD(r)&&"A"===r.nodeName&&!r.hasAttribute("href")&&(r.hasAttribute("name")||r.hasAttribute("id"))||n4(r,n,t,o)||nQ(r)||nZ(r)&&rk(ru(r)).exists(t=>!rQ(t)),n7=(t,r,n)=>{let o={...n5,...n};if(o.checkRootAsContent&&n9(t,r,r,o))return!1;let a=r.firstChild,l=0;if(!a)return!0;let i=new nS(a,r);do{if(o.skipBogus&&nD(a)){let t=a.getAttribute("data-mce-bogus");if(t){a=i.next("all"===t);continue}}if(nW(a))a=i.next(!0);else if(nG(a))l++,a=i.next();else{if(n9(t,a,r,o))return!1;a=i.next()}}while(a);return l<=1},oe=(t,r,n)=>n7(t,r.dom,{checkRootAsContent:!0,...n}),ot=(t,r,n)=>n9(t,r,r,{includeZwsp:n5.includeZwsp,...n}),or=t=>"svg"===t.toLowerCase(),on=t=>or(t.nodeName),oo=t=>"svg"===(null==t?void 0:t.nodeName)?"svg":"html",oa=["svg"],ol="data-mce-block",oi=t=>es(em(eO(t),t=>!/[A-Z]/.test(t)),t=>`${t}:`+es(oa,r=>`not(${r} ${t})`).join(":")).join(","),os=(t,r)=>I(r.querySelector(t))?(r.setAttribute(ol,"true"),"inline-boundary"===r.getAttribute("data-mce-selected")&&r.removeAttribute("data-mce-selected"),!0):(r.removeAttribute(ol),!1),od=(t,r)=>{let n=oi(t.getTransparentElements()),o=oi(t.getBlockElements());return em(r.querySelectorAll(n),t=>os(o,t))},oc=(t,r,n)=>{var o;let a=n?"lastChild":"firstChild";for(let n=r[a];n;n=n[a])if(n7(t,n,{checkRootAsContent:!0}))return void(null===(o=n.parentNode)||void 0===o||o.removeChild(n))},ou=(t,r,n)=>{let o=t.getBlockElements(),a=ru(r),l=t=>tG(t) in o,i=t=>ry(t,a);ed(ns(n),r=>{rW(r,l,i).each(n=>{let o=em(rO(r),r=>l(r)&&!t.isValidChild(tG(n),tG(r)));if(o.length>0){let r=rk(n);ed(o,r=>{rW(r,l,i).each(n=>{((t,r,n)=>{let o=document.createRange(),a=r.parentNode;if(a){o.setStartBefore(r),o.setEndBefore(n);let l=o.extractContents();oc(t,l,!0),o.setStartAfter(n),o.setEndAfter(r);let i=o.extractContents();oc(t,i,!1),n7(t,l,{checkRootAsContent:!0})||a.insertBefore(l,r),n7(t,n,{checkRootAsContent:!0})||a.insertBefore(n,r),n7(t,i,{checkRootAsContent:!0})||a.insertBefore(i,r),a.removeChild(r)}})(t,n.dom,r.dom)})}),r.each(r=>od(t,r.dom))}})})},om=(t,r)=>{let n=od(t,r);ou(t,r,n),ed([...n,...ob(t,r)?[r]:[]],r=>ed(nw(ru(r),r.nodeName.toLowerCase()),r=>{ov(t,r.dom)&&ni(r)}))},og=(t,r)=>{oh(t,r)&&os(oi(t.getBlockElements()),r)},of=t=>t.hasAttribute(ol),op=(t,r)=>eH(t.getTransparentElements(),r),oh=(t,r)=>nD(r)&&op(t,r.nodeName),ob=(t,r)=>oh(t,r)&&of(r),ov=(t,r)=>oh(t,r)&&!of(r),oy=(t,r)=>1===r.type&&op(t,r.name)&&T(r.attr(ol)),oC=tA().browser,oE=t=>eh(t,tJ),ow=(t,r)=>t.children&&el(t.children,r),ox=(t,r={})=>{let n=0,o={},a=ru(t),l=rw(a),i=t=>{nr(rz(a),t)},s=t=>{rX(rz(a),"#"+t).each(nl)},d=t=>ej(o,t).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),c=t=>new Promise((n,a)=>{let s;let c=tz._addCacheSuffix(t),u=d(c);o[c]=u,u.count++;let m=(t,r)=>{ed(t,Q),u.status=r,u.passed=[],u.failed=[],s&&(s.onload=null,s.onerror=null,s=null)},g=()=>m(u.passed,2),f=()=>m(u.failed,3);if(n&&u.passed.push(n),a&&u.failed.push(a),1===u.status)return;if(2===u.status)return void g();if(3===u.status)return void f();u.status=1;let p=rg("link",l.dom);t6(p,{rel:"stylesheet",type:"text/css",id:u.id}),r.contentCssCors&&t5(p,"crossOrigin","anonymous"),r.referrerPolicy&&t5(p,"referrerpolicy",r.referrerPolicy),(s=p.dom).onload=g,s.onerror=f,i(p),t5(p,"href",c)}),u=t=>{let r=tz._addCacheSuffix(t);ej(o,r).each(t=>{0==--t.count&&(delete o[r],s(t.id))})};return{load:c,loadRawCss:(t,r)=>{let n=d(t);o[t]=n,n.count++;let a=rg("style",l.dom);t6(a,{rel:"stylesheet",type:"text/css",id:n.id}),a.dom.innerHTML=r,i(a)},loadAll:t=>Promise.allSettled(es(t,t=>c(t).then(q(t)))).then(t=>{let r=eu(t,t=>"fulfilled"===t.status);return r.fail.length>0?Promise.reject(es(r.fail,t=>t.reason)):es(r.pass,t=>t.value)}),unload:u,unloadRawCss:t=>{ej(o,t).each(r=>{0==--r.count&&(delete o[t],s(r.id))})},unloadAll:t=>{ed(t,t=>{u(t)})},_setReferrerPolicy:t=>{r.referrerPolicy=t},_setContentCssCors:t=>{r.contentCssCors=t}}},o_=(()=>{let t=new WeakMap;return{forElement:(r,n)=>{let o=rU(r).dom;return et.from(t.get(o)).getOrThunk(()=>{let r=ox(o,n);return t.set(o,r),r})}}})(),ok=(t,r)=>I(t)&&(ot(r,t)||r.isInline(t.nodeName.toLowerCase())),oS=t=>"span"===t.nodeName.toLowerCase()&&"bookmark"===t.getAttribute("data-mce-type"),oN=(t,r,n,o)=>{var a;let l=o||r;if(nD(r)&&oS(r))return r;let i=r.childNodes;for(let r=i.length-1;r>=0;r--)oN(t,i[r],n,l);if(nD(r)){let t=r.childNodes;1===t.length&&oS(t[0])&&(null===(a=r.parentNode)||void 0===a||a.insertBefore(t[0],r))}return nY(r)||nK(r)||ot(n,r)||nD(r)&&r.childNodes.length>0||n$(r)&&r.data.length>0&&((t,r,n)=>{let o=new nS(t,r).prev(!1),a=new nS(t,r).next(!1),l=M(o)||ok(o,n),i=M(a)||ok(a,n);return l&&i})(r,l,n)||t.remove(r),r},oR=tz.makeMap,oA=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,oT=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,oO=/[<>&\"\']/g,oB=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,oP={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},oD={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},oL={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},oM=(t,r)=>{let n={};if(t){let o=t.split(",");r=r||10;for(let t=0;t<o.length;t+=2){let a=String.fromCharCode(parseInt(o[t],r));if(!oD[a]){let r="&"+o[t+1]+";";n[a]=r,n[r]=a}}return n}},oF=oM("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),oI=(t,r)=>t.replace(r?oA:oT,t=>oD[t]||t),oU=(t,r)=>t.replace(r?oA:oT,t=>t.length>1?"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";":oD[t]||"&#"+t.charCodeAt(0)+";"),oz=(t,r,n)=>{let o=n||oF;return t.replace(r?oA:oT,t=>oD[t]||o[t]||t)},oj={encodeRaw:oI,encodeAllRaw:t=>(""+t).replace(oO,t=>oD[t]||t),encodeNumeric:oU,encodeNamed:oz,getEncodeFunc:(t,r)=>{let n=oM(r)||oF,o=oR(t.replace(/\+/g,","));return o.named&&o.numeric?(t,r)=>t.replace(r?oA:oT,t=>void 0!==oD[t]?oD[t]:void 0!==n[t]?n[t]:t.length>1?"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";":"&#"+t.charCodeAt(0)+";"):o.named?r?(t,r)=>oz(t,r,n):oz:o.numeric?oU:oI},decode:t=>t.replace(oB,(t,r)=>r?(r="x"===r.charAt(0).toLowerCase()?parseInt(r.substr(1),16):parseInt(r,10))>65535?String.fromCharCode(55296+((r-=65536)>>10),56320+(1023&r)):oP[r]||String.fromCharCode(r):oL[t]||oF[t]||(t=>{let r=rg("div").dom;return r.innerHTML=t,r.textContent||r.innerText||t})(t))},oH=(t,r)=>(t=tz.trim(t))?t.split(r||" "):[],o$=t=>RegExp("^"+t.replace(/([?+*])/g,".$1")+"$"),oV=t=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",..."html4"!==t?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate"]:[],..."html5-strict"!==t?["xml:lang"]:[]]),oq=t=>{let r,n;r="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",n="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==t&&(r+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",n+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),"html5-strict"!==t&&(n=[n,"acronym applet basefont big font strike tt"].join(" "),r=[r,"center dir isindex noframes"].join(" "));let o=[r,n].join(" ");return{blockContent:r,phrasingContent:n,flowContent:o}},oW=t=>{let{blockContent:r,phrasingContent:n,flowContent:o}=oq(t),a=t=>Object.freeze(t.split(" "));return Object.freeze({blockContent:a(r),phrasingContent:a(n),flowContent:a(o)})},oK={html4:eJ(()=>oW("html4")),html5:eJ(()=>oW("html5")),"html5-strict":eJ(()=>oW("html5-strict"))},oY=(t,r)=>{let{blockContent:n,phrasingContent:o,flowContent:a}=oK[t]();return"blocks"===r?et.some(n):"phrasing"===r?et.some(o):"flow"===r?et.some(a):et.none()},oG=t=>et.from(/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/.exec(t)).map(t=>({preset:"@"===t[1],name:t[2]})),oX={},oZ=tz.makeMap,oQ=tz.each,oJ=tz.extend,o0=tz.explode,o1=(t,r={})=>oJ(oZ(t," ",oZ(t.toUpperCase()," ")),r),o2=t=>o1("td th li dt dd figcaption caption details summary",t.getTextBlockElements()),o3=(t,r)=>{if(t){let n={};return T(t)&&(t={"*":t}),oQ(t,(t,o)=>{n[o]=n[o.toUpperCase()]="map"===r?oZ(t,/[, ]/):o0(t,/[, ]/)}),n}},o8=(t={})=>{var r;let n={},o={},a=[],l={},i={},s=(r,n,o)=>{let a=t[r];if(a)return oZ(a,/[, ]/,oZ(a.toUpperCase(),/[, ]/));{let t=oX[r];return t||(t=o1(n,o),oX[r]=t),t}},d=null!==(r=t.schema)&&void 0!==r?r:"html5",c=(t=>{let r=oV(t),{phrasingContent:n,flowContent:o}=oq(t),a={},l=(t,r,n)=>{a[t]={attributes:ex(r,q({})),attributesOrder:r,children:ex(n,q({}))}},i=(t,n="",o="")=>{let a=oH(o),i=oH(t),s=i.length,d=[...r,...oH(n)];for(;s--;)l(i[s],d.slice(),a)},s=(t,r)=>{let n=oH(t),o=oH(r),l=n.length;for(;l--;){let t=a[n[l]];for(let r=0,n=o.length;r<n;r++)t.attributes[o[r]]={},t.attributesOrder.push(o[r])}};return"html5-strict"!==t&&(ed(oH("acronym applet basefont big font strike tt"),t=>{i(t,"",n)}),ed(oH("center dir isindex noframes"),t=>{i(t,"",o)})),i("html","manifest","head body"),i("head","","base command link meta noscript script style title"),i("title hr noscript br"),i("base","href target"),i("link","href rel media hreflang type sizes hreflang"),i("meta","name http-equiv content charset"),i("style","media type scoped"),i("script","src async defer type charset"),i("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",o),i("dd div","",o),i("address dt caption","","html4"===t?n:o),i("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",n),i("blockquote","cite",o),i("ol","reversed start type","li"),i("ul","","li"),i("li","value",o),i("dl","","dt dd"),i("a","href target rel media hreflang type","html4"===t?n:o),i("q","cite",n),i("ins del","cite datetime",o),i("img","src sizes srcset alt usemap ismap width height"),i("iframe","src name width height",o),i("embed","src type width height"),i("object","data type typemustmatch name usemap form width height",[o,"param"].join(" ")),i("param","name value"),i("map","name",[o,"area"].join(" ")),i("area","alt coords shape href target rel media hreflang type"),i("table","border","caption colgroup thead tfoot tbody tr"+("html4"===t?" col":"")),i("colgroup","span","col"),i("col","span"),i("tbody thead tfoot","","tr"),i("tr","","td th"),i("td","colspan rowspan headers",o),i("th","colspan rowspan headers scope abbr",o),i("form","accept-charset action autocomplete enctype method name novalidate target",o),i("fieldset","disabled form name",[o,"legend"].join(" ")),i("label","form for",n),i("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),i("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===t?o:n),i("select","disabled form multiple name required size","option optgroup"),i("optgroup","disabled label","option"),i("option","disabled label selected value"),i("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),i("menu","type label",[o,"li"].join(" ")),i("noscript","",o),"html4"!==t&&(i("wbr"),i("ruby","",[n,"rt rp"].join(" ")),i("figcaption","",o),i("mark rt rp bdi","",n),i("summary","",[n,"h1 h2 h3 h4 h5 h6"].join(" ")),i("canvas","width height",o),i("data","value",n),i("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[o,"track source"].join(" ")),i("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[o,"track source"].join(" ")),i("picture","","img source"),i("source","src srcset type media sizes"),i("track","kind src srclang label default"),i("datalist","",[n,"option"].join(" ")),i("article section nav aside main header footer","",o),i("hgroup","","h1 h2 h3 h4 h5 h6"),i("figure","",[o,"figcaption"].join(" ")),i("time","datetime",n),i("dialog","open",o),i("command","type label icon disabled checked radiogroup command"),i("output","for form name",n),i("progress","value max",n),i("meter","value min max low high optimum",n),i("details","open",[o,"summary"].join(" ")),i("keygen","autofocus challenge disabled form keytype name"),l("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),"html5-strict"!==t&&(s("script","language xml:space"),s("style","xml:space"),s("object","declare classid code codebase codetype archive standby align border hspace vspace"),s("embed","align name hspace vspace"),s("param","valuetype type"),s("a","charset name rev shape coords"),s("br","clear"),s("applet","codebase archive code object alt name width height align hspace vspace"),s("img","name longdesc align border hspace vspace"),s("iframe","longdesc frameborder marginwidth marginheight scrolling align"),s("font basefont","size color face"),s("input","usemap align"),s("select"),s("textarea"),s("h1 h2 h3 h4 h5 h6 div p legend caption","align"),s("ul","type compact"),s("li","type"),s("ol dl menu dir","compact"),s("pre","width xml:space"),s("hr","align noshade size width"),s("isindex","prompt"),s("table","summary width frame rules cellspacing cellpadding align bgcolor"),s("col","width align char charoff valign"),s("colgroup","width align char charoff valign"),s("thead","align char charoff valign"),s("tr","align char charoff valign bgcolor"),s("th","axis align char charoff valign nowrap bgcolor width height"),s("form","accept"),s("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),s("tfoot","align char charoff valign"),s("tbody","align char charoff valign"),s("area","nohref"),s("body","background bgcolor text link vlink alink")),"html4"!==t&&(s("input button select textarea","autofocus"),s("input textarea","placeholder"),s("a","download"),s("link script img","crossorigin"),s("img","loading"),s("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==t&&ed([a.video,a.audio],t=>{delete t.children.audio,delete t.children.video}),ed(oH("a form meter progress dfn"),t=>{a[t]&&delete a[t].children[t]}),delete a.caption.children.table,delete a.script,a})(d);!1===t.verify_html&&(t.valid_elements="*[*]");let u=o3(t.valid_styles),m=o3(t.invalid_styles,"map"),g=o3(t.valid_classes,"map"),f=s("whitespace_elements","pre script noscript style textarea video audio iframe object code"),p=s("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),h=s("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),b=s("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),v="td th iframe video audio object script code",y=s("non_empty_elements",v+" pre svg textarea summary",h),C=s("move_caret_before_on_enter_elements",v+" table",h),E="h1 h2 h3 h4 h5 h6",w=s("text_block_elements",E+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),x=s("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",w),_=s("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),k=s("transparent_elements","a ins del canvas map"),S=s("wrap_block_elements","pre "+E);oQ("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),t=>{i[t]=RegExp("</"+t+"[^>]*>","gi")});let N=t=>{let r=et.from(n["@"]),o=/[*?+]/;ed(((t,r)=>{let n=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return ey(oH(r,","),r=>{let o=n.exec(r);if(o){let r=o[1],n=o[2],a=o[3],l=o[4],i=o[5],s={attributes:{},attributesOrder:[]};if(t.each(t=>{eP(t.attributes,(t,r)=>{s.attributes[r]=t}),s.attributesOrder.push(...t.attributesOrder)}),"#"===r?s.paddEmpty=!0:"-"===r&&(s.removeEmpty=!0),"!"===l&&(s.removeEmptyAttrs=!0),i&&((t,r)=>{let n=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,o=/[*?+]/,{attributes:a,attributesOrder:l}=r;ed(oH(t,"|"),t=>{let i=n.exec(t);if(i){let t={},n=i[1],s=i[2].replace(/[\\:]:/g,":"),d=i[3],c=i[4];if("!"===n&&(r.attributesRequired=r.attributesRequired||[],r.attributesRequired.push(s),t.required=!0),"-"===n)return delete a[s],void l.splice(tz.inArray(l,s),1);(d&&("="===d?(r.attributesDefault=r.attributesDefault||[],r.attributesDefault.push({name:s,value:c}),t.defaultValue=c):"~"===d?(r.attributesForced=r.attributesForced||[],r.attributesForced.push({name:s,value:c}),t.forcedValue=c):"<"===d&&(t.validValues=tz.makeMap(c,"?"))),o.test(s))?(r.attributePatterns=r.attributePatterns||[],t.pattern=o$(s),r.attributePatterns.push(t)):(a[s]||l.push(s),a[s]=t)}})})(i,s),a&&(s.outputName=n),"@"===n){if(!t.isNone())return[];t=et.some(s)}return[a?{name:n,element:s,aliasName:a}:{name:n,element:s}]}return[]})})(r,null!=t?t:""),({name:t,element:r,aliasName:l})=>{(l&&(n[l]=r),o.test(t))?(r.pattern=o$(t),a.push(r)):n[t]=r})},R=t=>{a=[],ed(eO(n),t=>{delete n[t]}),N(t)},A=(t,r)=>{var a,i;delete oX.text_block_elements,delete oX.block_elements;let s=!!r.extends&&!ee(r.extends),c=r.extends;if(o[t]=c?o[c]:{},l[t]=null!=c?c:t,y[t.toUpperCase()]={},y[t]={},s||(x[t.toUpperCase()]={},x[t]={}),c&&!n[t]&&n[c]){let r=(t=>{let r=t=>P(t)?es(t,r):O(t)&&t.source&&"[object RegExp]"===Object.prototype.toString.call(t)?new RegExp(t.source,t.flags):O(t)?eD(t,r):t;return r(t)})(n[c]);delete r.removeEmptyAttrs,delete r.removeEmpty,n[t]=r}else n[t]={attributesOrder:[],attributes:{}};if(P(r.attributes)){let o=t=>{l.attributesOrder.push(t),l.attributes[t]={}},l=null!==(a=n[t])&&void 0!==a?a:{};delete l.attributesDefault,delete l.attributesForced,delete l.attributePatterns,delete l.attributesRequired,l.attributesOrder=[],l.attributes={},ed(r.attributes,t=>{let r=oV(d);oG(t).each(({preset:t,name:n})=>{t?"global"===n&&ed(r,o):o(n)})}),n[t]=l}if(L(r.padEmpty)){let o=null!==(i=n[t])&&void 0!==i?i:{};o.paddEmpty=r.padEmpty,n[t]=o}if(P(r.children)){let n={},a=t=>{n[t]={}},l=t=>{oY(d,t).each(t=>{ed(t,a)})};ed(r.children,t=>{oG(t).each(({preset:t,name:r})=>{t?l(r):a(r)})}),o[t]=n}c&&eP(o,(r,n)=>{r[c]&&(o[n]=r=oJ({},o[n]),r[t]=r[c])})},B=t=>{O(t)?eP(t,(t,r)=>A(r,t)):T(t)&&ed((t=>{let r=/^(~)?(.+)$/;return ey(oH(t,","),t=>{let n=r.exec(t);return n?[{cloneName:"~"===n[1]?"span":"div",name:n[2]}]:[]})})(null!=t?t:""),({name:t,cloneName:r})=>{A(t,{extends:r})})},D=t=>{ed((t=>{let r=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return ey(oH(t,","),t=>{let n=r.exec(t);if(n){let t=n[1];return[{operation:t?"-"===t?"remove":"add":"replace",name:n[2],validChildren:ey(oH(n[3],"|"),t=>oG(t).toArray())}]}return[]})})(null!=t?t:""),({operation:t,name:r,validChildren:n})=>{let a="replace"===t?{"#comment":{}}:o[r],l=r=>{"remove"===t?delete a[r]:a[r]={}};ed(n,({preset:t,name:r})=>{t?(t=>{oY(d,t).each(t=>{ed(t,l)})})(r):l(r)}),o[r]=a})},M=t=>{let r=n[t];if(r)return r;let o=a.length;for(;o--;){let r=a[o];if(r.pattern.test(t))return r}},F=q(u),I=q(m),U=q(g),z=q(b),j=q(x),H=q(w),$=q(_),V=q(Object.seal(h)),W=q(p),K=q(y),Y=q(C),G=q(f),X=q(k),Z=q(S),Q=q(Object.seal(i)),J=(t,r)=>{let n=M(t);if(n){if(!r)return!0;{if(n.attributes[r])return!0;let t=n.attributePatterns;if(t){let n=t.length;for(;n--;)if(t[n].pattern.test(r))return!0}}}return!1},ee=t=>eH(j(),t),er=t=>!e4(t,"#")&&J(t)&&!ee(t),en=q(l);return t.valid_elements?(R(t.valid_elements),oQ(c,(t,r)=>{o[r]=t.children})):(oQ(c,(t,r)=>{n[r]={attributes:t.attributes,attributesOrder:t.attributesOrder},o[r]=t.children}),oQ(oH("strong/b em/i"),t=>{let r=oH(t,"/");n[r[1]].outputName=r[0]}),oQ(_,(r,o)=>{n[o]&&(t.padd_empty_block_inline_children&&(n[o].paddInEmptyBlock=!0),n[o].removeEmpty=!0)}),oQ(oH("ol ul blockquote a table tbody"),t=>{n[t]&&(n[t].removeEmpty=!0)}),oQ(oH("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),t=>{n[t]&&(n[t].paddEmpty=!0)}),oQ(oH("span"),t=>{n[t].removeEmptyAttrs=!0})),delete n.svg,B(t.custom_elements),D(t.valid_children),N(t.extended_valid_elements),D("+ol[ul|ol],+ul[ul|ol]"),oQ({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(t,r)=>{n[r]&&(n[r].parentsRequired=oH(t))}),t.invalid_elements&&oQ(o0(t.invalid_elements),t=>{n[t]&&delete n[t]}),M("span")||N("span[!data-mce-type|*]"),{type:d,children:o,elements:n,getValidStyles:F,getValidClasses:U,getBlockElements:j,getInvalidStyles:I,getVoidElements:V,getTextBlockElements:H,getTextInlineElements:$,getBoolAttrs:z,getElementRule:M,getSelfClosingElements:W,getNonEmptyElements:K,getMoveCaretBeforeOnEnterElements:Y,getWhitespaceElements:G,getTransparentElements:X,getSpecialElements:Q,isValidChild:(t,r)=>{let n=o[t.toLowerCase()];return!(!n||!n[r.toLowerCase()])},isValid:J,isBlock:ee,isInline:er,isWrapper:t=>eH(Z(),t)||er(t),getCustomElements:en,addValidElements:N,setValidElements:R,addCustomElements:B,addValidChildren:D}},o5=t=>{let r=t.toString(16);return(1===r.length?"0"+r:r).toUpperCase()},o6=t=>({value:e5(o5(t.red)+o5(t.green)+o5(t.blue),"#").toUpperCase()}),o4=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,o9=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,o7=(t,r,n,o)=>({red:t,green:r,blue:n,alpha:o}),ae=(t,r,n,o)=>{let a=parseInt(t,10);return o7(a,parseInt(r,10),parseInt(n,10),parseFloat(o))},at=t=>{if("transparent"===t)return et.some(o7(0,0,0,0));let r=o4.exec(t);if(null!==r)return et.some(ae(r[1],r[2],r[3],"1"));let n=o9.exec(t);return null!==n?et.some(ae(n[1],n[2],n[3],n[4])):et.none()},ar=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,an=t=>at(t).map(o6).map(t=>"#"+t.value).getOr(t),ao=(t={},r)=>{let n,o;let a=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,l=/\s*([^:]+):\s*([^;]+);?/g,i=/\s+$/,s=/rgba *\(/i,d={};r&&(n=r.getValidStyles(),o=r.getInvalidStyles());let c="\\\" \\' \\; \\: ; : \uFEFF".split(" ");for(let t=0;t<c.length;t++)d[c[t]]="\uFEFF"+t,d["\uFEFF"+t]=c[t];let u={parse:r=>{var n,o,c;let m={},g=!1,f=t.url_converter,p=t.url_converter_scope||u,h=(t,r,n)=>{let o=m[t+"-top"+r];if(!o)return;let a=m[t+"-right"+r];if(!a)return;let l=m[t+"-bottom"+r];if(!l)return;let i=m[t+"-left"+r];if(!i)return;let s=[o,a,l,i],d=s.length-1;for(;d--&&s[d]===s[d+1];);d>-1&&n||(m[t+r]=-1===d?s[0]:s.join(" "),delete m[t+"-top"+r],delete m[t+"-right"+r],delete m[t+"-bottom"+r],delete m[t+"-left"+r])},b=t=>{let r=m[t];if(!r)return;let n=r.indexOf(",")>-1?[r]:r.split(" "),o=n.length;for(;o--;)if(n[o]!==n[0])return!1;return m[t]=n[0],!0},v=t=>(g=!0,d[t]),y=(t,r)=>(g&&(t=t.replace(/\uFEFF[0-9]/g,t=>d[t])),r||(t=t.replace(/\\([\'\";:])/g,"$1")),t),C=t=>String.fromCharCode(parseInt(t.slice(1),16)),E=t=>t.replace(/\\[0-9a-f]+/gi,C),w=(r,n,o,a,l,i)=>{if(l=l||i)return"'"+(l=y(l)).replace(/\'/g,"\\'")+"'";if(n=y(n||o||a||""),!t.allow_script_urls){let r=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(r)||!t.allow_svg_data_urls&&/^data:image\/svg/i.test(r))return""}return f&&(n=f.call(p,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"};if(r){let d;for(r=(r=r.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,v).replace(/\"[^\"]+\"|\'[^\']+\'/g,t=>t.replace(/[;:]/g,v));d=l.exec(r);){l.lastIndex=d.index+d[0].length;let r=d[1].replace(i,"").toLowerCase(),n=d[2].replace(i,"");if(r&&n){if(r=E(r),n=E(n),-1!==r.indexOf("\uFEFF")||-1!==r.indexOf('"')||!t.allow_script_urls&&("behavior"===r||/expression\s*\(|\/\*|\*\//.test(n)))continue;"font-weight"===r&&"700"===n?n="bold":"color"!==r&&"background-color"!==r||(n=n.toLowerCase()),s.test(n)||at(n).each(t=>{n=an(ar(t)).toLowerCase()}),n=n.replace(a,w),m[r]=g?y(n,!0):n}}h("border","",!0),h("border","-width"),h("border","-color"),h("border","-style"),h("padding",""),h("margin",""),o="border-style",c="border-color",b(n="border-width")&&b(o)&&b(c)&&(m.border=m[n]+" "+m[o]+" "+m[c],delete m[n],delete m[o],delete m[c]),"medium none"===m.border&&delete m.border,"none"===m["border-image"]&&delete m["border-image"]}return m},serialize:(t,r)=>{let a="",l=(r,n)=>{let o=n[r];if(o)for(let r=0,n=o.length;r<n;r++){let n=o[r],l=t[n];l&&(a+=(a.length>0?" ":"")+n+": "+l+";")}};return r&&n?(l("*",n),l(r,n)):eP(t,(t,n)=>{t&&((t,r)=>{if(!o||!r)return!0;let n=o["*"];return!(n&&n[t]||(n=o[r])&&n[t])})(n,r)&&(a+=(a.length>0?" ":"")+n+": "+t+";")}),a}};return u},aa={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},al=(t,r)=>{let n=null!=r?r:{};for(let r in t)eH(aa,r)||(n[r]=t[r]);return I(t.composedPath)&&(n.composedPath=()=>t.composedPath()),I(t.getModifierState)&&(n.getModifierState=r=>t.getModifierState(r)),I(t.getTargetRanges)&&(n.getTargetRanges=()=>t.getTargetRanges()),n},ai=(t,r,n,o)=>{var a,l;let i=al(r,o);return i.type=t,F(i.target)&&(i.target=null!==(a=i.srcElement)&&void 0!==a?a:n),(F(r.preventDefault)||(l=r)instanceof Event||U(l.initEvent))&&(i.preventDefault=()=>{i.defaultPrevented=!0,i.isDefaultPrevented=ee,U(r.preventDefault)&&r.preventDefault()},i.stopPropagation=()=>{i.cancelBubble=!0,i.isPropagationStopped=ee,U(r.stopPropagation)&&r.stopPropagation()},i.stopImmediatePropagation=()=>{i.isImmediatePropagationStopped=ee,i.stopPropagation()},i.isDefaultPrevented===ee||i.isDefaultPrevented===J||(i.isDefaultPrevented=!0===i.defaultPrevented?ee:J,i.isPropagationStopped=!0===i.cancelBubble?ee:J,i.isImmediatePropagationStopped=J)),i},as=/^(?:mouse|contextmenu)|click/,ad=(t,r,n,o)=>{t.addEventListener(r,n,o||!1)},ac=(t,r,n,o)=>{t.removeEventListener(r,n,o||!1)},au=(t,r)=>{let n=ai(t.type,t,document,r);if(I(t)&&as.test(t.type)&&M(t.pageX)&&!M(t.clientX)){let r=n.target.ownerDocument||document,o=r.documentElement,a=r.body;n.pageX=t.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),n.pageY=t.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}return n},am=(t,r,n)=>{let o=t.document,a={type:"ready"};if(n.domLoaded)return void r(a);let l=()=>{ac(t,"DOMContentLoaded",l),ac(t,"load",l),n.domLoaded||(n.domLoaded=!0,r(a)),t=null};"complete"===o.readyState||"interactive"===o.readyState&&o.body?l():ad(t,"DOMContentLoaded",l),n.domLoaded||ad(t,"load",l)};class ag{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,r,n,o){let a,l;let i=this,s=window,d=t=>{i.executeHandlers(au(t||s.event),l)};if(!t||n$(t)||nW(t))return n;t[i.expando]?l=t[i.expando]:(l=i.count++,t[i.expando]=l,i.events[l]={}),o=o||t;let c=r.split(" "),u=c.length;for(;u--;){let r=c[u],m=d,g=!1,f=!1;"DOMContentLoaded"===r&&(r="ready"),i.domLoaded&&"ready"===r&&"complete"===t.readyState?n.call(o,au({type:r})):(i.hasFocusIn||"focusin"!==r&&"focusout"!==r||(g=!0,f="focusin"===r?"focus":"blur",m=t=>{let r=au(t||s.event);r.type="focus"===r.type?"focusin":"focusout",i.executeHandlers(r,l)}),(a=i.events[l][r])?"ready"===r&&i.domLoaded?n(au({type:r})):a.push({func:n,scope:o}):(i.events[l][r]=a=[{func:n,scope:o}],a.fakeName=f,a.capture=g,a.nativeHandler=m,"ready"===r?am(t,m,i):ad(t,f||r,m,g)))}return t=a=null,n}unbind(t,r,n){if(!t||n$(t)||nW(t))return this;let o=t[this.expando];if(o){let a=this.events[o];if(r){let o=r.split(" "),l=o.length;for(;l--;){let r=o[l],i=a[r];if(i){if(n){let t=i.length;for(;t--;)if(i[t].func===n){let n=i.nativeHandler,o=i.fakeName,l=i.capture,s=i.slice(0,t).concat(i.slice(t+1));s.nativeHandler=n,s.fakeName=o,s.capture=l,a[r]=s}}n&&0!==i.length||(delete a[r],ac(t,i.fakeName||r,i.nativeHandler,i.capture))}}}else eP(a,(r,n)=>{ac(t,r.fakeName||n,r.nativeHandler,r.capture)}),a={};for(let t in a)if(eH(a,t))return this;delete this.events[o];try{delete t[this.expando]}catch(r){t[this.expando]=null}}return this}fire(t,r,n){return this.dispatch(t,r,n)}dispatch(t,r,n){if(!t||n$(t)||nW(t))return this;let o=au({type:r,target:t},n);do{let r=t[this.expando];r&&this.executeHandlers(o,r),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!o.isPropagationStopped());return this}clean(t){if(!t||n$(t)||nW(t))return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t);let r=t.getElementsByTagName("*"),n=r.length;for(;n--;)(t=r[n])[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,r){let n=this.events[r],o=n&&n[t.type];if(o)for(let r=0,n=o.length;r<n;r++){let n=o[r];if(n&&!1===n.func.call(n.scope,t)&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}ag.Event=new ag;let af=tz.each,ap=tz.grep,ah="data-mce-style",ab=tz.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),av=(t,r,n)=>{F(n)||""===n?re(t,r):t5(t,r,n)},ay=t=>t.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),aC=(t,r)=>{let n=0;if(t)for(let o=t.nodeType,a=t.previousSibling;a;a=a.previousSibling){let t=a.nodeType;r&&n$(a)&&(t===o||!a.data.length)||(n++,o=t)}return n},aE=(t,r)=>{let n=t4(r,"style"),o=t.serialize(t.parse(n),tG(r));av(r,ah,o)},aw=(t,r,n)=>{let o=ay(r);F(n)||""===n?r9(t,o):r2(t,o,z(n)?eH(ab,o)?n+"":n+"px":n)},ax=(t,r={})=>{let n={},o=window,a={},l=0,i=o_.forElement(ru(t),{contentCssCors:r.contentCssCors,referrerPolicy:r.referrerPolicy}),s=[],d=r.schema?r.schema:o8({}),c=ao({url_converter:r.url_converter,url_converter_scope:r.url_converter_scope},r.schema),u=r.ownEvents?new ag:ag.Event,m=d.getBlockElements(),g=r=>r&&t&&T(r)?t.getElementById(r):r,f=t=>{let r=g(t);return I(r)?ru(r):null},p=(t,r,n="")=>{let o;let a=f(t);if(I(a)&&tJ(a)){let t=K[r];o=t&&t.get?t.get(a.dom,r):t4(a,r)}return I(o)?o:n},h=t=>{let r=g(t);return F(r)?[]:r.attributes},b=(t,n,o)=>{k(t,t=>{if(nD(t)){let a=ru(t),l=""===o?null:o,i=t4(a,n),s=K[n];s&&s.set?s.set(a.dom,l,n):av(a,n,l),i!==l&&r.onSetAttrib&&r.onSetAttrib({attrElm:a.dom,attrName:n,attrValue:l})}})},v=()=>r.root_element||t.body,y=(r,n)=>((t,r,n)=>{let o=0,a=0,l=t.ownerDocument;if(n=n||t,r){var i;if(n===t&&r.getBoundingClientRect&&"static"===r8(ru(t),"position")){let n=r.getBoundingClientRect();return{x:o=n.left+(l.documentElement.scrollLeft||t.scrollLeft)-l.documentElement.clientLeft,y:a=n.top+(l.documentElement.scrollTop||t.scrollTop)-l.documentElement.clientTop}}let s=r;for(;s&&s!==n&&s.nodeType&&!ow(s,n);){let t=s;o+=t.offsetLeft||0,a+=t.offsetTop||0,s=t.offsetParent}for(s=r.parentNode;s&&s!==n&&s.nodeType&&!ow(s,n);)o-=s.scrollLeft||0,a-=s.scrollTop||0,s=s.parentNode;a+=(i=ru(r),oC.isFirefox()&&"table"===tG(i)?oE(rO(i)).filter(t=>"caption"===tG(t)).bind(t=>oE(rT(t)).map(r=>{let n=r.dom.offsetTop,o=t.dom.offsetTop,a=t.dom.offsetHeight;return n<=o?-a:0})).getOr(0):0)}return{x:o,y:a}})(t.body,g(r),n),C=(t,r,n)=>{let o=g(t);if(!F(o)&&(nL(o)||nD(o)&&"http://www.w3.org/2000/svg"===o.namespaceURI))return n?r8(ru(o),ay(r)):("float"===(r=r.replace(/-(\D)/g,(t,r)=>r.toUpperCase()))&&(r="cssFloat"),o.style?o.style[r]:void 0)},E=t=>{let r=g(t);if(!r)return{w:0,h:0};let n=C(r,"width"),o=C(r,"height");return n&&-1!==n.indexOf("px")||(n="0"),o&&-1!==o.indexOf("px")||(o="0"),{w:parseInt(n,10)||r.offsetWidth||r.clientWidth,h:parseInt(o,10)||r.offsetHeight||r.clientHeight}},w=(t,r)=>!!t&&ei(P(t)?t:[t],t=>rb(ru(t),r)),x=(t,r,n,o)=>{let a=[],l=g(t);o=void 0===o;let i=n||("BODY"!==v().nodeName?v().parentNode:null);if(T(r)){if("*"===r)r=nD;else{let t=r;r=r=>w(r,t)}}for(;l&&!(l===i||F(l.nodeType)||nK(l)||nY(l));){if(!r||r(l)){if(!o)return[l];a.push(l)}l=l.parentNode}return o?a:null},_=(t,r,n)=>{let o=r;if(t){T(r)&&(o=t=>w(t,r));for(let r=t[n];r;r=r[n])if(U(o)&&o(r))return r}return null},k=function(t,r,n){let o=null!=n?n:this;if(P(t)){let n=[];return af(t,(t,a)=>{let l=g(t);l&&n.push(r.call(o,l,a))}),n}{let n=g(t);return!!n&&r.call(o,n)}},S=(t,r)=>{k(t,t=>{eP(r,(r,n)=>{b(t,n,r)})})},N=(t,r)=>{k(t,t=>{nc(ru(t),r)})},R=(r,n,o,a,l)=>k(r,r=>{let i=T(n)?t.createElement(n):n;return I(o)&&S(i,o),a&&(!T(a)&&a.nodeType?i.appendChild(a):T(a)&&N(i,a)),l?i:r.appendChild(i)}),A=(r,n,o)=>R(t.createElement(r),r,n,o,!0),O=oj.encodeAllRaw,D=(t,r)=>k(t,t=>{let n=ru(t);return r&&ed(rO(n),t=>{t0(t)&&0===t.dom.length?nl(t):r7(n,t)}),nl(n),n.dom}),L=(t,r,n)=>{k(t,t=>{if(nD(t)){let o=ru(t);ed(r.split(" "),t=>{I(n)?(n?ri:rd)(o,t):(rn(o)?o.dom.classList.toggle(t):el(ro(o),t)?rl(o,t):ra(o,t),rs(o))})}})},M=(t,r,n)=>k(r,o=>{var a;let l=P(r)?t.cloneNode(!0):t;return n&&af(ap(o.childNodes),t=>{l.appendChild(t)}),null===(a=o.parentNode)||void 0===a||a.replaceChild(l,o),o}),z=()=>t.createRange(),j=(n,a,l,i)=>{if(P(n)){let t=n.length,r=[];for(;t--;)r[t]=j(n[t],a,l,i);return r}return r.collect&&(n===t||n===o)&&s.push([n,a,l,i]),u.bind(n,a,l,i||W)},$=(r,n,a)=>{if(P(r)){let t=r.length,o=[];for(;t--;)o[t]=$(r[t],n,a);return o}if(s.length>0&&(r===t||r===o)){let t=s.length;for(;t--;){let[o,l,i]=s[t];r!==o||n&&n!==l||a&&a!==i||u.unbind(o,l,i)}}return u.unbind(r,n,a)},V=t=>{if(t&&nL(t)){let r=t.getAttribute("data-mce-contenteditable");return r&&"inherit"!==r?r:"inherit"!==t.contentEditable?t.contentEditable:null}return null},W={doc:t,settings:r,win:o,files:a,stdMode:!0,boxModel:!0,styleSheetLoader:i,boundEvents:s,styles:c,schema:d,events:u,isBlock:t=>T(t)?eH(m,t):nD(t)&&(eH(m,t.nodeName)||ob(d,t)),root:null,clone:(t,r)=>t.cloneNode(r),getRoot:v,getViewPort:t=>{let r=nC(t);return{x:r.x,y:r.y,w:r.width,h:r.height}},getRect:t=>{let r=g(t),n=y(r),o=E(r);return{x:n.x,y:n.y,w:o.w,h:o.h}},getSize:E,getParent:(t,r,n)=>{let o=x(t,r,n,!1);return o&&o.length>0?o[0]:null},getParents:x,get:g,getNext:(t,r)=>_(t,r,"nextSibling"),getPrev:(t,r)=>_(t,r,"previousSibling"),select:(n,o)=>{var a,l;let i=null!==(l=null!==(a=g(o))&&void 0!==a?a:r.root_element)&&void 0!==l?l:t;return U(i.querySelectorAll)?eR(i.querySelectorAll(n)):[]},is:w,add:R,create:A,createHTML:(t,r,n="")=>{let o="<"+t;for(let t in r)e$(r,t)&&(o+=" "+t+'="'+O(r[t])+'"');return to(n)&&eH(d.getVoidElements(),t)?o+" />":o+">"+n+"</"+t+">"},createFragment:r=>{let n;let o=t.createElement("div"),a=t.createDocumentFragment();for(a.appendChild(o),r&&(o.innerHTML=r);n=o.firstChild;)a.appendChild(n);return a.removeChild(o),a},remove:D,setStyle:(t,n,o)=>{k(t,t=>{let a=ru(t);aw(a,n,o),r.update_styles&&aE(c,a)})},getStyle:C,setStyles:(t,n)=>{k(t,t=>{let o=ru(t);eP(n,(t,r)=>{aw(o,r,t)}),r.update_styles&&aE(c,o)})},removeAllAttribs:t=>k(t,t=>{let r=t.attributes;for(let n=r.length-1;n>=0;n--)t.removeAttributeNode(r.item(n))}),setAttrib:b,setAttribs:S,getAttrib:p,getPos:y,parseStyle:t=>c.parse(t),serializeStyle:(t,r)=>c.serialize(t,r),addStyle:r=>{if(W!==ax.DOM&&t===document){if(n[r])return;n[r]=!0}let o=t.getElementById("mceDefaultStyles");if(!o){(o=t.createElement("style")).id="mceDefaultStyles",o.type="text/css";let r=t.head;r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o)}o.styleSheet?o.styleSheet.cssText+=r:o.appendChild(t.createTextNode(r))},loadCSS:t=>{t||(t=""),ed(t.split(","),t=>{a[t]=!0,i.load(t).catch(H)})},addClass:(t,r)=>{L(t,r,!0)},removeClass:(t,r)=>{L(t,r,!1)},hasClass:(t,r)=>{let n=f(t),o=r.split(" ");return I(n)&&eC(o,t=>rc(n,t))},toggleClass:L,show:t=>{k(t,t=>r9(ru(t),"display"))},hide:t=>{k(t,t=>r2(ru(t),"display","none"))},isHidden:t=>{let r=f(t);return I(r)&&tj(r6(r,"display"),"none")},uniqueId:t=>(t||"mce_")+l++,setHTML:N,getOuterHTML:t=>{let r=f(t);return I(r)?nD(r.dom)?r.dom.outerHTML:(t=>{let r=rg("div");return nr(r,ru(t.dom.cloneNode(!0))),nd(r)})(r):""},setOuterHTML:(t,r)=>{k(t,t=>{nD(t)&&(t.outerHTML=r)})},decode:oj.decode,encode:O,insertAfter:(t,r)=>{let n=g(r);return k(t,t=>{let r=null==n?void 0:n.parentNode,o=null==n?void 0:n.nextSibling;return r&&(o?r.insertBefore(t,o):r.appendChild(t)),t})},replace:M,rename:(t,r)=>{if(t.nodeName!==r.toUpperCase()){let n=A(r);return af(h(t),r=>{b(n,r.nodeName,p(t,r.nodeName))}),M(n,t,!0),n}return t},findCommonAncestor:(t,r)=>{let n=t;for(;n;){let t=r;for(;t&&n!==t;)t=t.parentNode;if(n===t)break;n=n.parentNode}return!n&&t.ownerDocument?t.ownerDocument.documentElement:n},run:k,getAttribs:h,isEmpty:(t,r,n)=>B(r)?n7(d,t,{...n,isContent:t=>!!r[t.nodeName.toLowerCase()]}):n7(d,t,n),createRng:z,nodeIndex:aC,split:(t,r,n)=>{let o,a,l=z();if(t&&r&&t.parentNode&&r.parentNode){let i=t.parentNode;return l.setStart(i,aC(t)),l.setEnd(r.parentNode,aC(r)),o=l.extractContents(),(l=z()).setStart(r.parentNode,aC(r)+1),l.setEnd(i,aC(t)+1),a=l.extractContents(),i.insertBefore(oN(W,o,d),t),n?i.insertBefore(n,t):i.insertBefore(r,t),i.insertBefore(oN(W,a,d),t),D(t),n||r}},bind:j,unbind:$,fire:(t,r,n)=>u.dispatch(t,r,n),dispatch:(t,r,n)=>u.dispatch(t,r,n),getContentEditable:V,getContentEditableParent:t=>{let r=v(),n=null;for(let o=t;o&&o!==r&&null===(n=V(o));o=o.parentNode);return n},isEditable:t=>{if(I(t)){let r=nD(t)?t:t.parentElement;return I(r)&&nL(r)&&rQ(ru(r))}return!1},destroy:()=>{if(s.length>0){let t=s.length;for(;t--;){let[r,n,o]=s[t];u.unbind(r,n,o)}}eP(a,(t,r)=>{i.unload(r),delete a[r]})},isChildOf:(t,r)=>t===r||r.contains(t),dumpRng:t=>"startContainer: "+t.startContainer.nodeName+", startOffset: "+t.startOffset+", endContainer: "+t.endContainer.nodeName+", endOffset: "+t.endOffset},K=((t,r,n)=>{let o=r.keep_values,a={set:(t,o,a)=>{let l=ru(t);U(r.url_converter)&&I(o)&&(o=r.url_converter.call(r.url_converter_scope||n(),String(o),a,t)),av(l,"data-mce-"+a,o),av(l,a,o)},get:(t,r)=>{let n=ru(t);return t4(n,"data-mce-"+r)||t4(n,r)}},l={style:{set:(r,n)=>{let a=ru(r);o&&av(a,ah,n),re(a,"style"),T(n)&&r3(a,t.parse(n))},get:r=>{let n=ru(r),o=t4(n,ah)||t4(n,"style");return t.serialize(t.parse(o),tG(n))}}};return o&&(l.href=l.src=a),l})(c,r,q(W));return W};ax.DOM=ax(document),ax.nodeIndex=aC;let a_=ax.DOM;class ak{constructor(t={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}loadScript(t){return new Promise((r,n)=>{let o;let a=()=>{a_.remove(l),o&&(o.onerror=o.onload=o=null)},l=a_.uniqueId();(o=document.createElement("script")).id=l,o.type="text/javascript",o.src=tz._addCacheSuffix(t),this.settings.referrerPolicy&&a_.setAttrib(o,"referrerpolicy",this.settings.referrerPolicy),o.onload=()=>{a(),r()},o.onerror=()=>{a(),n("Failed to load script: "+t)},(document.getElementsByTagName("head")[0]||document.body).appendChild(o)})}isDone(t){return 2===this.states[t]}markDone(t){this.states[t]=2}add(t){let r=this;return r.queue.push(t),void 0===r.states[t]&&(r.states[t]=0),new Promise((n,o)=>{r.scriptLoadedCallbacks[t]||(r.scriptLoadedCallbacks[t]=[]),r.scriptLoadedCallbacks[t].push({resolve:n,reject:o})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){let t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){let r=this,n=(t,n)=>{ej(r.scriptLoadedCallbacks,n).each(r=>{ed(r,r=>r[t](n))}),delete r.scriptLoadedCallbacks[n]},o=t=>{let r=em(t,t=>"rejected"===t.status);return r.length>0?Promise.reject(ey(r,({reason:t})=>P(t)?t:[t])):Promise.resolve()},a=t=>Promise.allSettled(es(t,t=>2===r.states[t]?(n("resolve",t),Promise.resolve()):3===r.states[t]?(n("reject",t),Promise.reject(t)):(r.states[t]=1,r.loadScript(t).then(()=>{r.states[t]=2,n("resolve",t);let l=r.queue;return l.length>0?(r.queue=[],a(l).then(o)):Promise.resolve()},()=>(r.states[t]=3,n("reject",t),Promise.reject(t)))))),l=t=>(r.loading=!0,a(t).then(t=>{r.loading=!1;let n=r.queueLoadedCallbacks.shift();return et.from(n).each(Q),o(t)})),i=eV(t);return r.loading?new Promise((t,n)=>{r.queueLoadedCallbacks.push(()=>{l(i).then(t,n)})}):l(i)}}ak.ScriptLoader=new ak;let aS=t=>{let r=t;return{get:()=>r,set:t=>{r=t}}},aN={},aR=aS("en"),aA=()=>ej(aN,aR.get()),aT={getData:()=>eD(aN,t=>({...t})),setCode:t=>{t&&aR.set(t)},getCode:()=>aR.get(),add:(t,r)=>{let n=aN[t];n||(aN[t]=n={});let o=es(eO(r),t=>t.toLowerCase());eP(r,(t,a)=>{let l=a.toLowerCase();l!==a&&((t,r)=>{let n=t.indexOf(r);return -1!==n&&t.indexOf(r,n+1)>n})(o,l)?(eH(r,l)||(n[l]=t),n[a]=t):n[l]=t})},translate:t=>{let r=aA().getOr({}),n=t=>U(t)?Object.prototype.toString.call(t):o(t)?"":""+t,o=t=>""===t||null==t,a=t=>{let o=n(t);return eH(r,o)?n(r[o]):ej(r,o.toLowerCase()).map(n).getOr(o)},l=t=>t.replace(/{context:\w+}$/,"");if(o(t))return"";if(O(t)&&eH(t,"raw"))return n(t.raw);if(P(t)&&t.length>1){let r=t.slice(1);return l(a(t[0]).replace(/\{([0-9]+)\}/g,(t,o)=>eH(r,o)?n(r[o]):t))}return l(a(t))},isRtl:()=>aA().bind(t=>ej(t,"_dir")).exists(t=>"rtl"===t),hasCode:t=>eH(aN,t)},aO=()=>{let t=[],r={},n={},o=[],a=(t,r)=>{ed(em(o,n=>n.name===t&&n.state===r),t=>t.resolve())},l=t=>eH(r,t),i=(t,n)=>{let o=aT.getCode();!o||n&&-1===(","+(n||"")+",").indexOf(","+o+",")||ak.ScriptLoader.add(r[t]+"/langs/"+o+".js")},s=(t,r="added")=>"added"===r&&eH(n,t)||"loaded"===r&&l(t)?Promise.resolve():new Promise(n=>{o.push({name:t,state:r,resolve:n})});return{items:t,urls:r,lookup:n,get:t=>{if(n[t])return n[t].instance},requireLangPack:(t,r)=>{!1!==aO.languageLoad&&(l(t)?i(t,r):s(t,"loaded").then(()=>i(t,r)))},add:(r,o)=>(t.push(o),n[r]={instance:o},a(r,"added"),o),remove:t=>{delete r[t],delete n[t]},createUrl:(t,r)=>T(r)?T(t)?{prefix:"",resource:r,suffix:""}:{prefix:t.prefix,resource:r,suffix:t.suffix}:r,load:(t,o)=>{if(r[t])return Promise.resolve();let l=T(o)?o:o.prefix+o.resource+o.suffix;0!==l.indexOf("/")&&-1===l.indexOf("://")&&(l=aO.baseURL+"/"+l),r[t]=l.substring(0,l.lastIndexOf("/"));let i=()=>(a(t,"loaded"),Promise.resolve());return n[t]?i():ak.ScriptLoader.add(l).then(i)},waitFor:s}};aO.languageLoad=!0,aO.baseURL="",aO.PluginManager=aO(),aO.ThemeManager=aO(),aO.ModelManager=aO();let aB=t=>{let r=aS(et.none()),n=()=>r.get().each(t=>clearInterval(t));return{clear:()=>{n(),r.set(et.none())},isSet:()=>r.get().isSome(),get:()=>r.get(),set:o=>{n(),r.set(et.some(setInterval(o,t)))}}},aP=()=>{let t=(t=>{let r=aS(et.none()),n=()=>r.get().each(t);return{clear:()=>{n(),r.set(et.none())},isSet:()=>r.get().isSome(),get:()=>r.get(),set:t=>{n(),r.set(et.some(t))}}})(H);return{...t,on:r=>t.get().each(r)}},aD=(t,r)=>{let n=null;return{cancel:()=>{D(n)||(clearTimeout(n),n=null)},throttle:(...o)=>{D(n)&&(n=setTimeout(()=>{n=null,t.apply(null,o)},r))}}},aL=(t,r)=>{let n=null,o=()=>{D(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...a)=>{o(),n=setTimeout(()=>{n=null,t.apply(null,a)},r)}}},aM=q("mce-annotation"),aF=q("data-mce-annotation"),aI=q("data-mce-annotation-uid"),aU=q("data-mce-annotation-active"),az=q("data-mce-annotation-classes"),aj=q("data-mce-annotation-attrs"),aH=t=>r=>ry(r,t),a$=(t,r)=>{let n=t.selection.getRng(),o=ru(n.startContainer),a=ru(t.getBody()),l=r.fold(()=>"."+aM(),t=>`[${aF()}="${t}"]`);return rZ(rB(o,n.startOffset).getOr(o),l,aH(a)).bind(r=>t9(r,`${aI()}`).bind(n=>t9(r,`${aF()}`).map(r=>{let o=aq(t,n);return{uid:n,name:r,elements:o}})))},aV=(t,r)=>t7(t,"data-mce-bogus")||rG(t,'[data-mce-bogus="all"]',aH(r)).isSome(),aq=(t,r)=>{let n=ru(t.getBody());return em(nw(n,`[${aI()}="${r}"]`),t=>!aV(t,n))},aW=(t,r)=>{let n=ru(t.getBody()),o=nw(n,`[${aF()}="${r}"]`),a={};return ed(o,t=>{if(!aV(t,n)){let r=t4(t,aI()),n=ej(a,r).getOr([]);a[r]=n.concat([t])}}),a},aK=0,aY=t=>{let r=(new Date).getTime();return t+"_"+Math.floor(1e9*Math.random())+ ++aK+String(r)},aG=(t,r)=>ru(t.dom.cloneNode(r)),aX=t=>aG(t,!1),aZ=t=>aG(t,!0),aQ=(t,r,n=J)=>{let o=new nS(t,r),a=t=>{let r;do r=o[t]();while(r&&!n$(r)&&!n(r));return et.from(r).filter(n$)};return{current:()=>et.from(o.current()).filter(n$),next:()=>a("next"),prev:()=>a("prev"),prev2:()=>a("prev2")}},aJ=(t,r)=>{let n=r||(r=>t.isBlock(r)||nG(r)||nQ(r)),o=(t,r,n,a)=>{if(n$(t)){let n=a(t,r,t.data);if(-1!==n)return et.some({container:t,offset:n})}return n().bind(t=>o(t.container,t.offset,n,a))};return{backwards:(r,a,l,i)=>{let s=aQ(r,null!=i?i:t.getRoot(),n);return o(r,a,()=>s.prev().map(t=>({container:t,offset:t.length})),l).getOrNull()},forwards:(r,a,l,i)=>{let s=aQ(r,null!=i?i:t.getRoot(),n);return o(r,a,()=>s.next().map(t=>({container:t,offset:0})),l).getOrNull()}}},a0=((t,r)=>{let n=r=>t(r)?et.from(r.dom.nodeValue):et.none();return{get:r=>{if(!t(r))throw Error("Can only get text value of a text node");return n(r).getOr("")},getOption:n,set:(r,n)=>{if(!t(r))throw Error("Can only set raw text value of a text node");r.dom.nodeValue=n}}})(t0),a1=t=>a0.get(t),a2=t=>{let r;return n=>eH(r=r||ex(t,ee),tG(n))},a3=t=>tJ(t)&&"br"===tG(t),a8=a2(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),a5=a2(["ul","ol","dl"]),a6=a2(["li","dd","dt"]),a4=a2(["thead","tbody","tfoot"]),a9=a2(["td","th"]),a7=a2(["pre","script","textarea","style"]),le=()=>{let t=rg("br");return t5(t,"data-mce-bogus","1"),t},lt=t=>{na(t),nr(t,le())},lr=t=>t.replace(/\uFEFF/g,""),ln=t=>(n$(t)&&(t=t.parentNode),nD(t)&&t.hasAttribute("data-mce-caret")),lo=t=>n$(t)&&nN(t.data),la=t=>ln(t)||lo(t),ll=t=>t.firstChild!==t.lastChild||!nG(t.firstChild),li=t=>{let r=t.container();return!!n$(r)&&("\uFEFF"===r.data.charAt(t.offset())||t.isAtStart()&&lo(r.previousSibling))},ls=t=>{let r=t.container();return!!n$(r)&&("\uFEFF"===r.data.charAt(t.offset()-1)||t.isAtEnd()&&lo(r.nextSibling))},ld=t=>n$(t)&&"\uFEFF"===t.data[0],lc=t=>n$(t)&&"\uFEFF"===t.data[t.data.length-1],lu=t=>t&&t.hasAttribute("data-mce-caret")?((t=>{var r;let n=t.getElementsByTagName("br"),o=n[n.length-1];nU(o)&&(null===(r=o.parentNode)||void 0===r||r.removeChild(o))})(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("data-mce-style"),t.removeAttribute("_moz_abspos"),t):null,lm=t=>ln(t.startContainer),lg=Math.round,lf=t=>t?{left:lg(t.left),top:lg(t.top),bottom:lg(t.bottom),right:lg(t.right),width:lg(t.width),height:lg(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},lp=(t,r)=>(t=lf(t),r||(t.left=t.left+t.width),t.right=t.left,t.width=0,t),lh=(t,r,n)=>t>=0&&t<=Math.min(r.height,n.height)/2,lb=(t,r)=>{let n=Math.min(r.height/2,t.height/2);return t.bottom-n<r.top||!(t.top>r.bottom)&&lh(r.top-t.bottom,t,r)},lv=(t,r)=>t.top>r.bottom||!(t.bottom<r.top)&&lh(r.bottom-t.top,t,r),ly=(t,r,n)=>{let o=Math.max(Math.min(r,t.left+t.width),t.left),a=Math.max(Math.min(n,t.top+t.height),t.top);return Math.sqrt((r-o)*(r-o)+(n-a)*(n-a))},lC=t=>{let r=t.startContainer,n=t.startOffset;return r===t.endContainer&&r.hasChildNodes()&&t.endOffset===n+1?r.childNodes[n]:null},lE=(t,r)=>{if(nD(t)&&t.hasChildNodes()){let n=t.childNodes,o=Math.min(Math.max(r,0),n.length-1);return n[o]}return t},lw=RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),lx=t=>T(t)&&t.charCodeAt(0)>=768&&lw.test(t),l_=nF(["script","style","textarea"]),lk=nF(["img","input","textarea","hr","iframe","video","audio","object","embed"]),lS=nF(["table"]),lN=t=>!la(t)&&(n$(t)?!l_(t.parentNode):lk(t)||nG(t)||lS(t)||lR(t)),lR=t=>!(nD(t)&&"true"===t.getAttribute("unselectable"))&&nQ(t),lA=(t,r)=>lN(t)&&((t,r)=>{for(let n=t.parentNode;n&&n!==r;n=n.parentNode){if(lR(n))return!1;if(nZ(n))break}return!0})(t,r),lT=nI("display","block table"),lO=((...t)=>r=>{for(let n=0;n<t.length;n++)if(!t[n](r))return!1;return!0})(nD,lN,G(nI("float","left right"))),lB=G(nI("white-space","pre pre-line pre-wrap")),lP=ax.nodeIndex,lD=(t,r)=>r<0&&nD(t)&&t.hasChildNodes()?void 0:lE(t,r),lL=t=>t?t.createRange():ax.DOM.createRng(),lM=t=>T(t)&&/[\r\n\t ]/.test(t),lF=t=>!!t.setStart&&!!t.setEnd,lI=t=>{let r=t.startContainer,n=t.startOffset;if(lM(t.toString())&&lB(r.parentNode)&&n$(r)){let t=r.data;if(lM(t[n-1])||lM(t[n+1]))return!0}return!1},lU=t=>0===t.left&&0===t.right&&0===t.top&&0===t.bottom,lz=t=>{var r;let n;let o=t.getClientRects();return n=o.length>0?lf(o[0]):lf(t.getBoundingClientRect()),!lF(t)&&nG(t)&&lU(n)?(t=>{let r=t.ownerDocument,n=lL(r),o=r.createTextNode("\xa0"),a=t.parentNode;a.insertBefore(o,t),n.setStart(o,0),n.setEnd(o,1);let l=lf(n.getBoundingClientRect());return a.removeChild(o),l})(t):lU(n)&&lF(t)&&null!==(r=(t=>{let r=t.startContainer,n=t.endContainer,o=t.startOffset,a=t.endOffset;if(r===n&&n$(n)&&0===o&&1===a){let r=t.cloneRange();return r.setEndAfter(n),lz(r)}return null})(t))&&void 0!==r?r:n},lj=(t,r)=>{let n=lp(t,r);return n.width=1,n.right=n.left+1,n},lH=(t,r,n)=>{let o=()=>(n||(n=(t=>{let r=[],n=t=>{var n;0!==t.height&&(r.length>0&&(n=r[r.length-1],t.left===n.left&&t.top===n.top&&t.bottom===n.bottom&&t.right===n.right)||r.push(t))},o=(t,r)=>{let o=lL(t.ownerDocument);if(r<t.data.length){if(lx(t.data[r]))return;if(lx(t.data[r-1])&&(o.setStart(t,r),o.setEnd(t,r+1),!lI(o)))return void n(lj(lz(o),!1))}r>0&&(o.setStart(t,r-1),o.setEnd(t,r),lI(o)||n(lj(lz(o),!1))),r<t.data.length&&(o.setStart(t,r),o.setEnd(t,r+1),lI(o)||n(lj(lz(o),!0)))},a=t.container(),l=t.offset();if(n$(a))return o(a,l),r;if(nD(a)){if(t.isAtEnd()){let t=lD(a,l);n$(t)&&o(t,t.data.length),lO(t)&&!nG(t)&&n(lj(lz(t),!1))}else{let i=lD(a,l);if(n$(i)&&o(i,0),lO(i)&&t.isAtEnd())return n(lj(lz(i),!1)),r;let s=lD(t.container(),t.offset()-1);lO(s)&&!nG(s)&&(lT(s)||lT(i)||!lO(i))&&n(lj(lz(s),!1)),lO(i)&&n(lj(lz(i),!0))}}return r})(lH(t,r))),n);return{container:q(t),offset:q(r),toRange:()=>{let n=lL(t.ownerDocument);return n.setStart(t,r),n.setEnd(t,r),n},getClientRects:o,isVisible:()=>o().length>0,isAtStart:()=>(n$(t),0===r),isAtEnd:()=>n$(t)?r>=t.data.length:r>=t.childNodes.length,isEqual:n=>n&&t===n.container()&&r===n.offset(),getNode:n=>lD(t,n?r-1:r)}};lH.fromRangeStart=t=>lH(t.startContainer,t.startOffset),lH.fromRangeEnd=t=>lH(t.endContainer,t.endOffset),lH.after=t=>lH(t.parentNode,lP(t)+1),lH.before=t=>lH(t.parentNode,lP(t)),lH.isAbove=(t,r)=>t$(eS(r.getClientRects()),eN(t.getClientRects()),lb).getOr(!1),lH.isBelow=(t,r)=>t$(eN(r.getClientRects()),eS(t.getClientRects()),lv).getOr(!1),lH.isAtStart=t=>!!t&&t.isAtStart(),lH.isAtEnd=t=>!!t&&t.isAtEnd(),lH.isTextPosition=t=>!!t&&n$(t.container()),lH.isElementPosition=t=>!lH.isTextPosition(t);let l$=(t,r)=>{n$(r)&&0===r.data.length&&t.remove(r)},lV=(t,r,n)=>{nY(n)?((t,r,n)=>{let o=et.from(n.firstChild),a=et.from(n.lastChild);r.insertNode(n),o.each(r=>l$(t,r.previousSibling)),a.each(r=>l$(t,r.nextSibling))})(t,r,n):(r.insertNode(n),l$(t,n.previousSibling),l$(t,n.nextSibling))},lq=ax.nodeIndex,lW=t=>{let r=t.parentNode;return nU(r)?lW(r):r},lK=t=>t?eX(t.childNodes,(t,r)=>(nU(r)&&"BR"!==r.nodeName?t=t.concat(lK(r)):t.push(r),t),[]):[],lY=t=>r=>t===r,lG=t=>(n$(t)?"text()":t.nodeName.toLowerCase())+"["+(t=>{let r,n;n=eZ(r=lK(lW(t)),lY(t),t);let o=eX(r=r.slice(0,n+1),(t,n,o)=>(n$(n)&&n$(r[o-1])&&t++,t),0);return(n=eZ(r=eG(r,nF([t.nodeName])),lY(t),t))-o})(t)+"]",lX=(t,r)=>{let n,o=[],a=r.container(),l=r.offset();if(n$(a))n=((t,r)=>{let n=t;for(;(n=n.previousSibling)&&n$(n);)r+=n.data.length;return r})(a,l);else{let t=a.childNodes;l>=t.length?(n="after",l=t.length-1):n="before",a=t[l]}o.push(lG(a));let i=((t,r,n)=>{let o=[];for(let n=r.parentNode;n&&n!==t;n=n.parentNode)o.push(n);return o})(t,a);return i=eG(i,G(nU)),(o=o.concat(eY(i,t=>lG(t)))).reverse().join("/")+","+n},lZ=(t,r)=>{if(!r)return null;let n=r.split(","),o=n[0].split("/"),a=n.length>1?n[1]:"before",l=eX(o,(t,r)=>{var n,o;let a;let l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(r);return l?("text()"===l[1]&&(l[1]="#text"),n=l[1],o=parseInt(l[2],10),a=eG(a=lK(t),(t,r)=>!n$(t)||!n$(a[r-1])),(a=eG(a,nF([n])))[o]):null},t);if(!l)return null;if(!n$(l)&&l.parentNode){let t;return t="after"===a?lq(l)+1:lq(l),lH(l.parentNode,t)}return((t,r)=>{let n=t,o=0;for(;n$(n);){let a=n.data.length;if(r>=o&&r<=o+a){t=n,r-=o;break}if(!n$(n.nextSibling)){t=n,r=a;break}o+=a,n=n.nextSibling}return n$(t)&&r>t.data.length&&(r=t.data.length),lH(t,r)})(l,parseInt(a,10))},lQ=(t,r,n,o,a)=>{let l=a?o.startContainer:o.endContainer,i=a?o.startOffset:o.endOffset,s=[],d=t.getRoot();if(n$(l))s.push(n?((t,r,n)=>{let o=t(r.data.slice(0,n)).length;for(let n=r.previousSibling;n&&n$(n);n=n.previousSibling)o+=t(n.data).length;return o})(r,l,i):i);else{let r=0,o=l.childNodes;i>=o.length&&o.length&&(r=1,i=Math.max(0,o.length-1)),s.push(t.nodeIndex(o[i],n)+r)}for(let r=l;r&&r!==d;r=r.parentNode)s.push(t.nodeIndex(r,n));return s},lJ=(t,r,n)=>{let o=0;return tz.each(t.select(r),t=>"all"===t.getAttribute("data-mce-bogus")?void 0:t!==n&&void o++),o},l0=(t,r)=>{let n=r?t.startContainer:t.endContainer,o=r?t.startOffset:t.endOffset;if(nD(n)&&"TR"===n.nodeName){let a=n.childNodes;(n=a[Math.min(r?o:o-1,a.length-1)])&&(o=r?0:n.childNodes.length,r?t.setStart(n,o):t.setEnd(n,o))}},l1=t=>(l0(t,!0),l0(t,!1),t),l2=(t,r)=>{if(nD(t)&&nQ(t=lE(t,r)))return t;if(la(t)){n$(t)&&ln(t)&&(t=t.parentNode);let r=t.previousSibling;if(nQ(r)||nQ(r=t.nextSibling))return r}},l3=(t,r,n)=>{let o=n.getNode(),a=n.getRng();if("IMG"===o.nodeName||nQ(o)){let t=o.nodeName;return{name:t,index:lJ(n.dom,t,o)}}let l=l2(a.startContainer,a.startOffset)||l2(a.endContainer,a.endOffset);if(l){let t=l.tagName;return{name:t,index:lJ(n.dom,t,l)}}return((t,r,n,o)=>{let a=r.dom,l=lQ(a,t,n,o,!0),i=r.isForward(),s=lm(o)?{isFakeCaret:!0}:{};return r.isCollapsed()?{start:l,forward:i,...s}:{start:l,end:lQ(a,t,n,o,!1),forward:i,...s}})(t,n,r,a)},l8=(t,r,n)=>{let o={"data-mce-type":"bookmark",id:r,style:"overflow:hidden;line-height:0px"};return n?t.create("span",o,"&#xFEFF;"):t.create("span",o)},l5=(t,r)=>{let n=t.dom,o=t.getRng(),a=n.uniqueId(),l=t.isCollapsed(),i=t.getNode(),s=i.nodeName,d=t.isForward();if("IMG"===s)return{name:s,index:lJ(n,s,i)};let c=l1(o.cloneRange());if(!l){c.collapse(!1);let t=l8(n,a+"_end",r);lV(n,c,t)}(o=l1(o)).collapse(!0);let u=l8(n,a+"_start",r);return lV(n,o,u),t.moveToBookmark({id:a,keep:!0,forward:d}),{id:a,forward:d}},l6=Y(l3,W,!0),l4=t=>{let r=r=>r(t),n=q(t),o=()=>a,a={tag:!0,inner:t,fold:(r,n)=>n(t),isValue:ee,isError:J,map:r=>l7.value(r(t)),mapError:o,bind:r,exists:r,forall:r,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:r=>{r(t)},toOptional:()=>et.some(t)};return a},l9=t=>{let r=()=>n,n={tag:!1,inner:t,fold:(r,n)=>r(t),isValue:J,isError:ee,map:r,mapError:r=>l7.error(r(t)),bind:r,exists:J,forall:ee,getOr:W,or:W,getOrThunk:Z,orThunk:Z,getOrDie:X(String(t)),each:H,toOptional:et.none};return n},l7={value:l4,error:l9,fromOption:(t,r)=>t.fold(()=>l9(r),l4)},ie=t=>{if(!P(t))throw Error("cases must be an array");if(0===t.length)throw Error("there must be at least one case");let r=[],n={};return ed(t,(o,a)=>{let l=eO(o);if(1!==l.length)throw Error("one and only one name per case");let i=l[0],s=o[i];if(void 0!==n[i])throw Error("duplicate key detected:"+i);if("cata"===i)throw Error("cannot have a case named cata (sorry)");if(!P(s))throw Error("case arguments must be an array");r.push(i),n[i]=(...n)=>{let o=n.length;if(o!==s.length)throw Error("Wrong number of arguments to case "+i+". Expected "+s.length+" ("+s+"), got "+o);return{fold:(...r)=>{if(r.length!==t.length)throw Error("Wrong number of arguments to fold. Expected "+t.length+", got "+r.length);return r[a].apply(null,n)},match:t=>{let o=eO(t);if(r.length!==o.length)throw Error("Wrong number of arguments to match. Expected: "+r.join(",")+"\nActual: "+o.join(","));if(!eC(r,t=>el(o,t)))throw Error("Not all branches were specified when using match. Specified: "+o.join(", ")+"\nRequired: "+r.join(", "));return t[i].apply(null,n)},log:t=>{console.log(t,{constructors:r,constructor:i,params:n})}}}}),n};ie([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);let it=t=>"inline-command"===t.type||"inline-format"===t.type,ir=t=>"block-command"===t.type||"block-format"===t.type,io=t=>{var r;let n=r=>l7.error({message:r,pattern:t}),o=(r,o,a)=>{if(void 0!==t.format){let a;if(P(t.format)){if(!eC(t.format,T))return n(r+" pattern has non-string items in the `format` array");a=t.format}else{if(!T(t.format))return n(r+" pattern has non-string `format` parameter");a=[t.format]}return l7.value(o(a))}return void 0!==t.cmd?T(t.cmd)?l7.value(a(t.cmd,t.value)):n(r+" pattern has non-string `cmd` parameter"):n(r+" pattern is missing both `format` and `cmd` parameters")};if(!O(t))return n("Raw pattern is not an object");if(!T(t.start))return n("Raw pattern is missing `start` parameter");if(void 0!==t.end){if(!T(t.end))return n("Inline pattern has non-string `end` parameter");if(0===t.start.length&&0===t.end.length)return n("Inline pattern has empty `start` and `end` parameters");let r=t.start,a=t.end;return 0===a.length&&(a=r,r=""),o("Inline",t=>({type:"inline-format",start:r,end:a,format:t}),(t,n)=>({type:"inline-command",start:r,end:a,cmd:t,value:n}))}if(void 0!==t.replacement)return T(t.replacement)?0===t.start.length?n("Replacement pattern has empty `start` parameter"):l7.value({type:"inline-command",start:"",end:t.start,cmd:"mceInsertContent",value:t.replacement}):n("Replacement pattern has non-string `replacement` parameter");{let a=null!==(r=t.trigger)&&void 0!==r?r:"space";return 0===t.start.length?n("Block pattern has empty `start` parameter"):o("Block",r=>({type:"block-format",start:t.start,format:r[0],trigger:a}),(r,n)=>({type:"block-command",start:t.start,cmd:r,value:n,trigger:a}))}},ia=t=>em(t,ir),il=t=>em(t,it),ii=(t,r)=>({...t,blockPatterns:em(t.blockPatterns,t=>("block-command"===t.type||"block-format"===t.type)&&t.trigger===r)}),is=t=>{let r=(t=>{let r=[],n=[];return ed(t,t=>{t.fold(t=>{r.push(t)},t=>{n.push(t)})}),{errors:r,values:n}})(es(t,io));return ed(r.errors,t=>console.error(t.message,t.pattern)),r.values},id=tA().deviceType,ic=id.isTouch(),iu=ax.DOM,im=t=>A(t,RegExp),ig=t=>r=>r.options.get(t),ip=t=>T(t)||O(t),ih=(t,r="")=>n=>{let o=T(n);if(o)return -1!==n.indexOf("=")?{value:ej(ef(n.indexOf("=")>0?n.split(/[;,](?![^=;,]*(?:[;,]|$))/):n.split(","),(t,r)=>{let n=r.split("="),o=n[0],a=n.length>1?n[1]:o;return t[te(o)]=te(a),t},{}),t.id).getOr(r),valid:o}:{value:n,valid:o};return{valid:!1,message:"Must be a string."}},ib=ig("iframe_attrs"),iv=ig("doctype"),iy=ig("document_base_url"),iC=ig("body_id"),iE=ig("body_class"),iw=ig("content_security_policy"),ix=ig("br_in_pre"),i_=ig("forced_root_block"),ik=ig("forced_root_block_attrs"),iS=ig("newline_behavior"),iN=ig("br_newline_selector"),iR=ig("no_newline_selector"),iA=ig("keep_styles"),iT=ig("end_container_on_empty_block"),iO=ig("automatic_uploads"),iB=ig("images_reuse_filename"),iP=ig("images_replace_blob_uris"),iD=ig("icons"),iL=ig("icons_url"),iM=ig("images_upload_url"),iF=ig("images_upload_base_path"),iI=ig("images_upload_credentials"),iU=ig("images_upload_handler"),iz=ig("content_css_cors"),ij=ig("referrer_policy"),iH=ig("language"),i$=ig("language_url"),iV=ig("indent_use_margin"),iq=ig("indentation"),iW=ig("content_css"),iK=ig("content_style"),iY=ig("font_css"),iG=ig("directionality"),iX=ig("inline_boundaries_selector"),iZ=ig("object_resizing"),iQ=ig("resize_img_proportional"),iJ=ig("placeholder"),i0=ig("event_root"),i1=ig("service_message"),i2=ig("theme"),i3=ig("theme_url"),i8=ig("model"),i5=ig("model_url"),i6=ig("inline_boundaries"),i4=ig("formats"),i9=ig("preview_styles"),i7=ig("format_empty_lines"),se=ig("format_noneditable_selector"),st=ig("custom_ui_selector"),sr=ig("inline"),sn=ig("hidden_input"),so=ig("submit_patch"),sa=ig("add_form_submit_trigger"),sl=ig("add_unload_trigger"),si=ig("custom_undo_redo_levels"),ss=ig("disable_nodechange"),sd=ig("readonly"),sc=ig("editable_root"),su=ig("content_css_cors"),sm=ig("plugins"),sg=ig("external_plugins"),sf=ig("block_unsupported_drop"),sp=ig("visual"),sh=ig("visual_table_class"),sb=ig("visual_anchor_class"),sv=ig("iframe_aria_text"),sy=ig("setup"),sC=ig("init_instance_callback"),sE=ig("urlconverter_callback"),sw=ig("auto_focus"),sx=ig("browser_spellcheck"),s_=ig("protect"),sk=ig("paste_block_drop"),sS=ig("paste_data_images"),sN=ig("paste_preprocess"),sR=ig("paste_postprocess"),sA=ig("newdocument_content"),sT=ig("paste_webkit_styles"),sO=ig("paste_remove_styles_if_webkit"),sB=ig("paste_merge_formats"),sP=ig("smart_paste"),sD=ig("paste_as_text"),sL=ig("paste_tab_spaces"),sM=ig("allow_html_data_urls"),sF=ig("text_patterns"),sI=ig("text_patterns_lookup"),sU=ig("noneditable_class"),sz=ig("editable_class"),sj=ig("noneditable_regexp"),sH=ig("preserve_cdata"),s$=ig("highlight_on_focus"),sV=ig("xss_sanitization"),sq=ig("init_content_sync"),sW=t=>tz.explode(t.options.get("images_file_types")),sK=ig("table_tab_navigation"),sY=ig("details_initial_state"),sG=ig("details_serialized_state"),sX=ig("sandbox_iframes"),sZ=t=>t.options.get("sandbox_iframes_exclusions"),sQ=ig("convert_unsafe_embeds"),sJ=ig("license_key"),s0=ig("api_key"),s1=t=>{let r=t.parentNode;r&&r.removeChild(t)},s2=t=>{let r=lr(t);return{count:t.length-r.length,text:r}},s3=t=>{let r;for(;-1!==(r=t.data.lastIndexOf("\uFEFF"));)t.deleteData(r,1)},s8=(t,r)=>(s6(t),r),s5=(t,r)=>lH.isTextPosition(r)?n$(t)&&r.container()===t?((t,r)=>{let n=s2(t.data.substr(0,r.offset())),o=s2(t.data.substr(r.offset()));return(n.text+o.text).length>0?(s3(t),lH(t,r.offset()-n.count)):r})(t,r):s8(t,r):r.container()===t.parentNode?((t,r)=>{let n=r.container(),o=((t,r)=>{let n=ea(t,r);return -1===n?et.none():et.some(n)})(eR(n.childNodes),t).map(t=>t<r.offset()?lH(n,r.offset()-1):r).getOr(r);return s6(t),o})(t,r):s8(t,r),s6=t=>{nD(t)&&la(t)&&(ll(t)?t.removeAttribute("data-mce-caret"):s1(t)),n$(t)&&(s3(t),0===t.data.length&&s1(t))},s4=(t,r,n)=>{let o,a;let l=lp(r.getBoundingClientRect(),n);if("BODY"===t.tagName){let r=t.ownerDocument.documentElement;o=t.scrollLeft||r.scrollLeft,a=t.scrollTop||r.scrollTop}else{let r=t.getBoundingClientRect();o=t.scrollLeft-r.left,a=t.scrollTop-r.top}l.left+=o,l.right+=o,l.top+=a,l.bottom+=a,l.width=1;let i=r.offsetWidth-r.clientWidth;return i>0&&(n&&(i*=-1),l.left+=i,l.right+=i),l},s9=(t,r,n,o)=>{let a,l;let i=aP(),s=i_(t),d=t.dom,c=()=>{(t=>{var r,n;let o=nw(ru(t),"*[contentEditable=false],video,audio,embed,object");for(let t=0;t<o.length;t++){let a=o[t].dom,l=a.previousSibling;if(lc(l)){let t=l.data;1===t.length?null===(r=l.parentNode)||void 0===r||r.removeChild(l):l.deleteData(t.length-1,1)}ld(l=a.nextSibling)&&(1===l.data.length?null===(n=l.parentNode)||void 0===n||n.removeChild(l):l.deleteData(0,1))}})(r),l&&(s6(l),l=null),i.on(t=>{d.remove(t.caret),i.clear()}),a&&(clearInterval(a),a=void 0)};return{show:(t,u)=>{let m;if(c(),nJ(u))return null;if(!n(u))return l=((t,r)=>{var n;let o=(null!==(n=t.ownerDocument)&&void 0!==n?n:document).createTextNode("\uFEFF"),a=t.parentNode;if(r){let r=t.previousSibling;if(n$(r)){if(la(r))return r;if(lc(r))return r.splitText(r.data.length-1)}null==a||a.insertBefore(o,t)}else{let r=t.nextSibling;if(n$(r)){if(la(r))return r;if(ld(r))return r.splitText(1),r}t.nextSibling?null==a||a.insertBefore(o,t.nextSibling):null==a||a.appendChild(o)}return o})(u,t),m=u.ownerDocument.createRange(),de(l.nextSibling)?(m.setStart(l,0),m.setEnd(l,0)):(m.setStart(l,1),m.setEnd(l,1)),m;{let n=((t,r,n)=>{var o;let a=(null!==(o=r.ownerDocument)&&void 0!==o?o:document).createElement(t);a.setAttribute("data-mce-caret",n?"before":"after"),a.setAttribute("data-mce-bogus","all"),a.appendChild(le().dom);let l=r.parentNode;return n?null==l||l.insertBefore(a,r):r.nextSibling?null==l||l.insertBefore(a,r.nextSibling):null==l||l.appendChild(a),a})(s,u,t),c=s4(r,u,t);d.setStyle(n,"top",c.top),d.setStyle(n,"caret-color","transparent"),l=n;let g=d.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});d.setStyles(g,{...c}),d.add(r,g),i.set({caret:g,element:u,before:t}),t&&d.addClass(g,"mce-visual-caret-before"),a=setInterval(()=>{i.on(t=>{o()?d.toggleClass(t.caret,"mce-visual-caret-hidden"):d.addClass(t.caret,"mce-visual-caret-hidden")})},500),(m=u.ownerDocument.createRange()).setStart(n,0),m.setEnd(n,0)}return m},hide:c,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{i.on(t=>{let n=s4(r,t.element,t.before);d.setStyles(t.caret,{...n})})},destroy:()=>clearInterval(a)}},s7=()=>tM.browser.isFirefox(),de=t=>nQ(t)||n1(t),dt=t=>(de(t)||nz(t)&&s7())&&rk(ru(t)).exists(rQ),dr=nI("display","block table table-cell table-caption list-item"),dn=t=>t>0,da=t=>t<0,dl=(t,r)=>{let n;for(;n=t(r);)if(!ln(n))return n;return null},di=(t,r,n,o,a)=>{let l;let i=new nS(t,o),s=nQ(t)||ln(t);if(da(r)){if(s&&n(l=dl(i.prev.bind(i),!0)))return l;for(;l=dl(i.prev.bind(i),a);)if(n(l))return l}if(dn(r)){if(s&&n(l=dl(i.next.bind(i),!0)))return l;for(;l=dl(i.next.bind(i),a);)if(n(l))return l}return null},ds=(t,r)=>{for(;t&&t!==r;){if(dr(t))return t;t=t.parentNode}return null},dd=(t,r,n)=>ds(t.container(),n)===ds(r.container(),n),dc=(t,r)=>{if(!r)return et.none();let n=r.container(),o=r.offset();return nD(n)?et.from(n.childNodes[o+t]):et.none()},du=(t,r)=>{var n;let o=(null!==(n=r.ownerDocument)&&void 0!==n?n:document).createRange();return t?(o.setStartBefore(r),o.setEndBefore(r)):(o.setStartAfter(r),o.setEndAfter(r)),o},dm=(t,r,n)=>ds(r,t)===ds(n,t),dg=(t,r,n)=>{let o=t?"previousSibling":"nextSibling",a=n;for(;a&&a!==r;){let t=a[o];if(t&&la(t)&&(t=t[o]),nQ(t)||n1(t)){if(dm(r,t,a))return t;break}if(lN(t))break;a=a.parentNode}return null},df=Y(du,!0),dp=Y(du,!1),dh=(t,r,n)=>{let o;let a=Y(dg,!0,r),l=Y(dg,!1,r),i=n.startContainer,s=n.startOffset;if(ln(i)){let t=n$(i)?i.parentNode:i,r=t.getAttribute("data-mce-caret");if("before"===r&&dt(o=t.nextSibling))return df(o);if("after"===r&&dt(o=t.previousSibling))return dp(o)}if(!n.collapsed)return n;if(n$(i)){if(la(i)){if(1===t){if(o=l(i))return df(o);if(o=a(i))return dp(o)}if(-1===t){if(o=a(i))return dp(o);if(o=l(i))return df(o)}return n}if(lc(i)&&s>=i.data.length-1)return 1===t&&(o=l(i))?df(o):n;if(ld(i)&&s<=1)return -1===t&&(o=a(i))?dp(o):n;if(s===i.data.length)return(o=l(i))?df(o):n;if(0===s)return(o=a(i))?dp(o):n}return n},db=(t,r)=>dc(t?0:-1,r).filter(nQ),dv=(t,r,n)=>{let o=dh(t,r,n);return -1===t?lH.fromRangeStart(o):lH.fromRangeEnd(o)},dy=t=>et.from(t.getNode()).map(ru),dC=(t,r)=>{let n=r;for(;(n=t(n))&&!n.isVisible(););return n},dE=(t,r)=>{let n=dd(t,r);return!(n||!nG(t.getNode()))||n};(a=m||(m={}))[a.Backwards=-1]="Backwards",a[a.Forwards=1]="Forwards";let dw=t=>lk(t)||!!lR(t)&&!ef(eR(t.getElementsByTagName("*")),(t,r)=>t||nZ(r),!1),dx=(t,r)=>t.hasChildNodes()&&r<t.childNodes.length?t.childNodes[r]:null,d_=(t,r)=>{if(dn(t)){if(lN(r.previousSibling)&&!n$(r.previousSibling))return lH.before(r);if(n$(r))return lH(r,0)}if(da(t)){if(lN(r.nextSibling)&&!n$(r.nextSibling))return lH.after(r);if(n$(r))return lH(r,r.data.length)}return da(t)?nG(r)?lH.before(r):lH.after(r):lH.before(r)},dk=(t,r,n)=>{let o,a,l,i;if(!nD(n)||!r)return null;if(r.isEqual(lH.after(n))&&n.lastChild){if(i=lH.after(n.lastChild),da(t)&&lN(n.lastChild)&&nD(n.lastChild))return nG(n.lastChild)?lH.before(n.lastChild):i}else i=r;let s=i.container(),d=i.offset();if(n$(s)){if(da(t)&&d>0)return lH(s,--d);if(dn(t)&&d<s.length)return lH(s,++d);o=s}else{if(da(t)&&d>0&&lN(a=dx(s,d-1)))return!dw(a)&&(l=di(a,t,lA,a))?n$(l)?lH(l,l.data.length):lH.after(l):n$(a)?lH(a,a.data.length):lH.before(a);if(dn(t)&&d<s.childNodes.length&&lN(a=dx(s,d)))return nG(a)?((t,r)=>{let n=r.nextSibling;return n&&lN(n)?n$(n)?lH(n,0):lH.before(n):dk(m.Forwards,lH.after(r),t)})(n,a):!dw(a)&&(l=di(a,t,lA,a))?n$(l)?lH(l,0):lH.before(l):n$(a)?lH(a,0):lH.after(a);o=a||i.getNode()}if(o&&(dn(t)&&i.isAtEnd()||da(t)&&i.isAtStart())&&lA(o=di(o,t,ee,n,!0),n))return d_(t,o);a=o?di(o,t,lA,n):o;let c=eQ(em(((t,r)=>{let n=[],o=t;for(;o&&o!==r;)n.push(o),o=o.parentNode;return n})(s,n),nQ));return!c||a&&c.contains(a)?a?d_(t,a):null:i=dn(t)?lH.after(c):lH.before(c)},dS=t=>({next:r=>dk(m.Forwards,r,t),prev:r=>dk(m.Backwards,r,t)}),dN=t=>lH.isTextPosition(t)?0===t.offset():lN(t.getNode()),dR=t=>{if(lH.isTextPosition(t)){let r=t.container();return t.offset()===r.data.length}return lN(t.getNode(!0))},dA=(t,r)=>!lH.isTextPosition(t)&&!lH.isTextPosition(r)&&t.getNode()===r.getNode(!0),dT=(t,r,n)=>{let o=dS(r);return et.from(t?o.next(n):o.prev(n))},dO=(t,r,n)=>dT(t,r,n).bind(o=>dd(n,o,r)&&(t?!dA(n,o)&&!(!lH.isTextPosition(n)&&nG(n.getNode()))&&dR(n)&&dN(o):!dA(o,n)&&dN(n)&&dR(o))?dT(t,r,o):et.some(o)),dB=(t,r,n,o)=>dO(t,r,n).bind(n=>o(n)?dB(t,r,n,o):et.some(n)),dP=(t,r)=>{let n=t?r.firstChild:r.lastChild;return n$(n)?et.some(lH(n,t?0:n.data.length)):n?lN(n)?et.some(t?lH.before(n):nG(n)?lH.before(n):lH.after(n)):((t,r,n)=>{let o=t?lH.before(n):lH.after(n);return dT(t,r,o)})(t,r,n):et.none()},dD=Y(dT,!0),dL=Y(dT,!1),dM=Y(dP,!0),dF=Y(dP,!1),dI="_mce_caret",dU=t=>nD(t)&&t.id===dI,dz=(t,r)=>{let n=r;for(;n&&n!==t;){if(dU(n))return n;n=n.parentNode}return null},dj=t=>eH(t,"name"),dH=t=>tz.isArray(t.start),d$=t=>!(!dj(t)&&L(t.forward))||t.forward,dV=(t,r)=>(nD(r)&&t.isBlock(r)&&!r.innerHTML&&(r.innerHTML='<br data-mce-bogus="1" />'),r),dq=(t,r)=>dF(t).fold(J,t=>(r.setStart(t.container(),t.offset()),r.setEnd(t.container(),t.offset()),!0)),dW=(t,r,n)=>!(r.hasChildNodes()||!dz(t,r)||(((t,r)=>{var n;let o=(null!==(n=t.ownerDocument)&&void 0!==n?n:document).createTextNode("\uFEFF");t.appendChild(o),r.setStart(o,0),r.setEnd(o,0)})(r,n),0)),dK=(t,r,n,o)=>{let a=n[r?"start":"end"],l=t.getRoot();if(a){let t=l,n=a[0];for(let r=a.length-1;t&&r>=1;r--){let n=t.childNodes;if(dW(l,t,o))return!0;if(a[r]>n.length-1)return!!dW(l,t,o)||dq(t,o);t=n[a[r]]}n$(t)&&(n=Math.min(a[0],t.data.length)),nD(t)&&(n=Math.min(a[0],t.childNodes.length)),r?o.setStart(t,n):o.setEnd(t,n)}return!0},dY=t=>n$(t)&&t.data.length>0,dG=(t,r,n)=>{let o=t.get(n.id+"_"+r),a=null==o?void 0:o.parentNode,l=n.keep;if(o&&a){let i,s;if("start"===r?l?o.hasChildNodes()?(i=o.firstChild,s=1):dY(o.nextSibling)?(i=o.nextSibling,s=0):dY(o.previousSibling)?(i=o.previousSibling,s=o.previousSibling.data.length):(i=a,s=t.nodeIndex(o)+1):(i=a,s=t.nodeIndex(o)):l?o.hasChildNodes()?(i=o.firstChild,s=1):dY(o.previousSibling)?(i=o.previousSibling,s=o.previousSibling.data.length):(i=a,s=t.nodeIndex(o)):(i=a,s=t.nodeIndex(o)),!l){let a;let l=o.previousSibling,d=o.nextSibling;for(tz.each(tz.grep(o.childNodes),t=>{n$(t)&&(t.data=t.data.replace(/\uFEFF/g,""))});a=t.get(n.id+"_"+r);)t.remove(a,!0);if(n$(d)&&n$(l)&&!tM.browser.isOpera()){let r=l.data.length;l.appendData(d.data),t.remove(d),i=l,s=r}}return et.some(lH(i,s))}return et.none()},dX=(t,r,n)=>((t,r,n=!1)=>2===r?l3(lr,n,t):3===r?(t=>{let r=t.getRng();return{start:lX(t.dom.getRoot(),lH.fromRangeStart(r)),end:lX(t.dom.getRoot(),lH.fromRangeEnd(r)),forward:t.isForward()}})(t):r?{rng:t.getRng(),forward:t.isForward()}:l5(t,!1))(t,r,n),dZ=(t,r)=>{((t,r)=>{let n=t.dom;if(r){if(dH(r))return((t,r)=>{let n=t.createRng();return dK(t,!0,r,n)&&dK(t,!1,r,n)?et.some({range:n,forward:d$(r)}):et.none()})(n,r);if(T(r.start))return t$(et.from(lZ(n.getRoot(),r.start)),et.from(lZ(n.getRoot(),r.end)),(t,o)=>{let a=n.createRng();return a.setStart(t.container(),t.offset()),a.setEnd(o.container(),o.offset()),{range:a,forward:d$(r)}});if(eH(r,"id"))return((t,r)=>{let n=dG(t,"start",r);return t$(n,dG(t,"end",r).or(n),(n,o)=>{let a=t.createRng();return a.setStart(dV(t,n.container()),n.offset()),a.setEnd(dV(t,o.container()),o.offset()),{range:a,forward:d$(r)}})})(n,r);if(dj(r))return et.from(n.select(r.name)[r.index]).map(t=>{let r=n.createRng();return r.selectNode(t),{range:r,forward:!0}});if(eH(r,"rng"))return et.some({range:r.rng,forward:d$(r)})}return et.none()})(t,r).each(({range:r,forward:n})=>{t.setRng(r,n)})},dQ=t=>nD(t)&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type"),dJ=t=>"\xa0"===t,d0=t=>""!==t&&-1!==" \f\n\r	\v".indexOf(t),d1=t=>!d0(t)&&!dJ(t)&&!nN(t),d2=t=>{let r=[];if(t)for(let n=0;n<t.rangeCount;n++)r.push(t.getRangeAt(n));return r},d3=(t,r)=>{let n=nw(r,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:em(ey(t,t=>{let r=lC(t);return r?[ru(r)]:[]}),a9)},d8=t=>d3(d2(t.selection.getSel()),ru(t.getBody())),d5=(t,r)=>rG(t,"table",r),d6=t=>rP(t).fold(q([t]),r=>[t].concat(d6(r))),d4=t=>rD(t).fold(q([t]),r=>"br"===tG(r)?rN(r).map(r=>[t].concat(d4(r))).getOr([]):[t].concat(d4(r))),d9=(t,r)=>t$((t=>{let r=t.startContainer,n=t.startOffset;return n$(r)?0===n?et.some(ru(r)):et.none():et.from(r.childNodes[n]).map(ru)})(r),(t=>{let r=t.endContainer,n=t.endOffset;return n$(r)?n===r.data.length?et.some(ru(r)):et.none():et.from(r.childNodes[n-1]).map(ru)})(r),(r,n)=>{let o=eh(d6(t),Y(ry,r)),a=eh(d4(t),Y(ry,n));return o.isSome()&&a.isSome()}).getOr(!1),d7=(t,r,n,o)=>{let a=new nS(n,n),l=eI(t.schema.getMoveCaretBeforeOnEnterElements(),(t,r)=>!el(["td","th","table"],r.toLowerCase())),i=n;do{if(n$(i)&&0!==tz.trim(i.data).length)return void(o?r.setStart(i,0):r.setEnd(i,i.data.length));if(l[i.nodeName])return void(o?r.setStartBefore(i):"BR"===i.nodeName?r.setEndBefore(i):r.setEndAfter(i))}while(i=o?a.next():a.prev());"BODY"===n.nodeName&&(o?r.setStart(n,0):r.setEnd(n,n.childNodes.length))},ce=t=>{let r=t.selection.getSel();return I(r)&&r.rangeCount>0},ct=(t,r)=>{let n=d8(t);n.length>0?ed(n,n=>{let o=n.dom,a=t.dom.createRng();a.setStartBefore(o),a.setEndAfter(o),r(a,!0)}):r(t.selection.getRng(),!1)},cr=(t,r,n)=>{let o=l5(t,r);n(o),t.moveToBookmark(o)},cn=t=>z(null==t?void 0:t.nodeType),co=t=>nD(t)&&!dQ(t)&&!dU(t)&&!nU(t),ca=(t,r,n)=>{let{selection:o,dom:a}=t,l=o.getNode(),i=nQ(l);cr(o,!0,()=>{r()}),i&&nQ(l)&&a.isChildOf(l,t.getBody())?t.selection.select(l):n(o.getStart())&&cl(a,o)},cl=(t,r)=>{var n,o;let a=r.getRng(),{startContainer:l,startOffset:i}=a;if(!((t,r)=>{if(co(r)&&!/^(TD|TH)$/.test(r.nodeName)){let n=parseInt(t.getAttrib(r,"data-mce-selected"),10);return!isNaN(n)&&n>0}return!1})(t,r.getNode())&&nD(l)){let s;let d=l.childNodes,c=t.getRoot();if(i<d.length){let r=d[i];s=new nS(r,null!==(n=t.getParent(r,t.isBlock))&&void 0!==n?n:c)}else{let r=d[d.length-1];(s=new nS(r,null!==(o=t.getParent(r,t.isBlock))&&void 0!==o?o:c)).next(!0)}for(let n=s.current();n;n=s.next()){if("false"===t.getContentEditable(n))return;if(n$(n)&&!cc(n))return a.setStart(n,0),void r.setRng(a)}}},ci=(t,r,n)=>{if(t){let o=r?"nextSibling":"previousSibling";for(t=n?t:t[o];t;t=t[o])if(nD(t)||!cc(t))return t}},cs=(t,r)=>!!t.getTextBlockElements()[r.nodeName.toLowerCase()]||ob(t,r),cd=(t,r,n)=>t.schema.isValidChild(r,n),cc=(t,r=!1)=>!!(I(t)&&n$(t))&&nA(r?t.data.replace(/ /g,"\xa0"):t.data),cu=(t,r)=>{let n=t.dom;return co(r)&&"false"===n.getContentEditable(r)&&((t,r)=>{let n="[data-mce-cef-wrappable]",o=se(t),a=to(o)?n:`${n},${o}`;return rb(ru(r),a)})(t,r)&&0===n.select('[contenteditable="true"]',r).length},cm=(t,r)=>U(t)?t(r):(I(r)&&(t=t.replace(/%(\w+)/g,(t,n)=>r[n]||t)),t),cg=(t,r)=>(r=r||"",t=""+((t=t||"").nodeName||t),r=""+(r.nodeName||r),t.toLowerCase()===r.toLowerCase()),cf=(t,r)=>{if(F(t))return null;{let n=String(t);return"color"!==r&&"backgroundColor"!==r||(n=an(n)),"fontWeight"===r&&700===t&&(n="bold"),"fontFamily"===r&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},cp=(t,r,n)=>cf(t.getStyle(r,n),n),ch=(t,r)=>{let n;return t.getParent(r,r=>!!nD(r)&&!!(n=t.getStyle(r,"text-decoration"))&&"none"!==n),n},cb=(t,r,n)=>t.getParents(r,n,t.getRoot()),cv=(t,r,n)=>{let o=t.formatter.get(r);return I(o)&&ei(o,n)},cy=t=>e$(t,"block"),cC=t=>e$(t,"selector"),cE=t=>e$(t,"inline"),cw=t=>cC(t)&&!1!==t.expand&&!cE(t),cx=t=>(t=>{let r=[],n=t;for(;n;){if(n$(n)&&"\uFEFF"!==n.data||n.childNodes.length>1)return[];nD(n)&&r.push(n),n=n.firstChild}return r})(t).length>0,c_=t=>dU(t.dom)&&cx(t.dom),ck=(t,r)=>{let n=r;for(;n;){if(nD(n)&&t.getContentEditable(n))return"false"===t.getContentEditable(n)?n:r;n=n.parentNode}return r},cS=(t,r,n,o)=>{let a=r.data;if(t){for(let t=n;t>0;t--)if(o(a.charAt(t-1)))return t}else for(let t=n;t<a.length;t++)if(o(a.charAt(t)))return t;return -1},cN=(t,r,n)=>cS(t,r,n,t=>dJ(t)||d0(t)),cR=(t,r,n)=>cS(t,r,n,d1),cA=(t,r,n,o,a,l)=>{let i;let s=t.getParent(n,t.isBlock)||r,d=(r,n,o)=>{let l=aJ(t),d=a?l.backwards:l.forwards;return et.from(d(r,n,(t,r)=>dQ(t.parentNode)?-1:(i=t,o(a,t,r)),s))};return d(n,o,cN).bind(t=>l?d(t.container,t.offset+(a?-1:0),cR):et.some(t)).orThunk(()=>i?et.some({container:i,offset:a?0:i.length}):et.none())},cT=(t,r,n,o,a)=>{let l=o[a];n$(o)&&to(o.data)&&l&&(o=l);let i=cb(t,o);for(let o=0;o<i.length;o++)for(let a=0;a<r.length;a++){let l=r[a];if((!I(l.collapsed)||l.collapsed===n.collapsed)&&cC(l)&&t.is(i[o],l.selector))return i[o]}return o},cO=(t,r,n,o)=>{var a;let l=n,i=t.getRoot(),s=r[0];if(cy(s)&&(l=s.wrapper?null:t.getParent(n,s.block,i)),!l){let r=null!==(a=t.getParent(n,"LI,TD,TH,SUMMARY"))&&void 0!==a?a:i;l=t.getParent(n$(n)?n.parentNode:n,r=>r!==i&&cs(t.schema,r),r)}if(l&&cy(s)&&s.wrapper&&(l=cb(t,l,"ul,ol").reverse()[0]||l),!l)for(l=n;l&&l[o]&&!t.isBlock(l[o])&&!cg(l=l[o],"br"););return l||n},cB=(t,r,n,o)=>{let a=n.parentNode;return!I(n[o])&&(!(a!==r&&!F(a)&&!t.isBlock(a))||cB(t,r,a,o))},cP=(t,r,n,o,a)=>{var l;let i=n,s=a?"previousSibling":"nextSibling",d=t.getRoot();if(n$(n)&&!cc(n)&&(a?o>0:o<n.data.length))return n;for(;i;){if(!r[0].block_expand&&t.isBlock(i))return i;for(let r=i[s];r;r=r[s]){let n=n$(r)&&!cB(t,d,r,s);if(!dQ(r)&&(!nG(l=r)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!cc(r,n))return i}if(i===d||i.parentNode===d){n=i;break}i=i.parentNode}return n},cD=t=>dQ(t.parentNode)||dQ(t),cL=(t,r,n,o=!1)=>{let{startContainer:a,startOffset:l,endContainer:i,endOffset:s}=r,d=n[0];return nD(a)&&a.hasChildNodes()&&n$(a=lE(a,l))&&(l=0),nD(i)&&i.hasChildNodes()&&n$(i=lE(i,r.collapsed?s:s-1))&&(s=i.data.length),a=ck(t,a),i=ck(t,i),cD(a)&&(a=dQ(a)?a:a.parentNode,n$(a=r.collapsed?a.previousSibling||a:a.nextSibling||a)&&(l=r.collapsed?a.length:0)),cD(i)&&(i=dQ(i)?i:i.parentNode,n$(i=r.collapsed?i.nextSibling||i:i.previousSibling||i)&&(s=r.collapsed?0:i.length)),r.collapsed&&(cA(t,t.getRoot(),a,l,!0,o).each(({container:t,offset:r})=>{a=t,l=r}),cA(t,t.getRoot(),i,s,!1,o).each(({container:t,offset:r})=>{i=t,s=r})),(cE(d)||d.block_expand)&&(cE(d)&&n$(a)&&0!==l||(a=cP(t,n,a,l,!0)),cE(d)&&n$(i)&&s!==i.data.length||(i=cP(t,n,i,s,!1))),cw(d)&&(a=cT(t,n,r,a,"previousSibling"),i=cT(t,n,r,i,"nextSibling")),(cy(d)||cC(d))&&(a=cO(t,n,a,"previousSibling"),i=cO(t,n,i,"nextSibling"),cy(d)&&(t.isBlock(a)||n$(a=cP(t,n,a,l,!0))&&(l=0),t.isBlock(i)||n$(i=cP(t,n,i,s,!1))&&(s=i.data.length))),nD(a)&&a.parentNode&&(l=t.nodeIndex(a),a=a.parentNode),nD(i)&&i.parentNode&&(s=t.nodeIndex(i)+1,i=i.parentNode),{startContainer:a,startOffset:l,endContainer:i,endOffset:s}},cM=(t,r,n)=>{var o;let a=r.startOffset,l=lE(r.startContainer,a),i=r.endOffset,s=lE(r.endContainer,i-1),d=t=>{let r=t[0];n$(r)&&r===l&&a>=r.data.length&&t.splice(0,1);let n=t[t.length-1];return 0===i&&t.length>0&&n===s&&n$(n)&&t.splice(t.length-1,1),t},c=(t,r,n)=>{let o=[];for(;t&&t!==n;t=t[r])o.push(t);return o},u=(r,n)=>t.getParent(r,t=>t.parentNode===n,n),m=(t,r,o)=>{let a=o?"nextSibling":"previousSibling";for(let l=t,i=l.parentNode;l&&l!==r;l=i){i=l.parentNode;let r=c(l===t?l:l[a],a);r.length&&(o||r.reverse(),n(d(r)))}};if(l===s)return n(d([l]));let g=null!==(o=t.findCommonAncestor(l,s))&&void 0!==o?o:t.getRoot();if(t.isChildOf(l,s))return m(l,g,!0);if(t.isChildOf(s,l))return m(s,g);let f=u(l,g)||l,p=u(s,g)||s;m(l,f,!0);let h=c(f===l?f:f.nextSibling,"nextSibling",p===s?p.nextSibling:p);h.length&&n(d(h)),m(s,p)},cF=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],cI=(t,r,n,o,a,l)=>{let{uid:i=r,...s}=n;ri(t,aM()),t5(t,`${aI()}`,i),t5(t,`${aF()}`,o);let{attributes:d={},classes:c=[]}=a(i,s);if(t6(t,d),ed(c,r=>{ri(t,r)}),l){c.length>0&&t5(t,`${az()}`,c.join(","));let r=eO(d);r.length>0&&t5(t,`${aj()}`,r.join(","))}},cU=(t,r,n,o,a)=>{let l=rg("span",t);return cI(l,r,n,o,a,!1),l},cz=(t,r,n,o,a,l)=>{let i=[],s=cU(t.getDoc(),n,l,o,a),d=aP(),c=()=>{d.clear()},u=t=>{ed(t,m)},m=r=>{var m,g;switch(m="span",g=tG(r),r_(r).fold(()=>"skipping",n=>"br"===g||t0(r)&&"\uFEFF"===a1(r)?"valid":tJ(r)&&rc(r,aM())?"existing":dU(r.dom)?"caret":ei(cF,t=>rb(r,t))?"valid-block":cd(t,m,g)&&cd(t,tG(n),m)?"valid":"invalid-child")){case"invalid-child":c(),u(rO(r)),c();break;case"valid-block":c(),cI(r,n,l,o,a,!0);break;case"valid":nn(r,d.get().getOrThunk(()=>{let t=aX(s);return i.push(t),d.set(t),t}))}};return cM(t.dom,r,t=>{c(),u(es(t,ru))}),i},cj=t=>{let r=(()=>{let t={};return{register:(r,n)=>{t[r]={name:r,settings:n}},lookup:r=>ej(t,r).map(t=>t.settings),getNames:()=>eO(t)}})();((t,r)=>{let n=aF(),o=t=>et.from(t.attr(n)).bind(r.lookup),a=t=>{var r,n;t.attr(aI(),null),t.attr(aF(),null),t.attr(aU(),null);let o=et.from(t.attr(aj())).map(t=>t.split(",")).getOr([]),a=et.from(t.attr(az())).map(t=>t.split(",")).getOr([]);ed(o,r=>t.attr(r,null));let l=ew(null!==(n=null===(r=t.attr("class"))||void 0===r?void 0:r.split(" "))&&void 0!==n?n:[],[aM()].concat(a));t.attr("class",l.length>0?l.join(" "):null),t.attr(az(),null),t.attr(aj(),null)};t.serializer.addTempAttr(aU()),t.serializer.addAttributeFilter(n,t=>{for(let r of t)o(r).each(t=>{!1===t.persistent&&("span"===r.name?r.unwrap():a(r))})})})(t,r);let n=((t,r)=>{let n=aS({}),o=()=>({listeners:[],previous:aP()}),a=(t,r)=>{l(t,t=>(r(t),t))},l=(t,r)=>{let a=n.get(),l=r(ej(a,t).getOrThunk(o));a[t]=l,n.set(a)},i=(r,n)=>{ed(aq(t,r),t=>{n?t5(t,aU(),"true"):re(t,aU())})},s=aL(()=>{ed(e_(r.getNames()),r=>{l(r,n=>{let o=n.previous.get();return a$(t,et.some(r)).fold(()=>{o.each(t=>{a(r,t=>{ed(t.listeners,t=>t(!1,r))}),n.previous.clear(),i(t,!1)})},({uid:t,name:r,elements:l})=>{tj(o,t)||(o.each(t=>i(t,!1)),a(r,n=>{ed(n.listeners,n=>n(!0,r,{uid:t,nodes:es(l,t=>t.dom)}))}),n.previous.set(t),i(t,!0))}),{previous:n.previous,listeners:n.listeners}})})},30);return t.on("remove",()=>{s.cancel()}),t.on("NodeChange",()=>{s.throttle()}),{addListener:(t,r)=>{l(t,t=>({previous:t.previous,listeners:t.listeners.concat([r])}))}}})(t,r),o=t3("span"),a=t=>{ed(t,t=>{o(t)?ni(t):(t=>{rd(t,aM()),re(t,`${aI()}`),re(t,`${aF()}`),re(t,`${aU()}`);let r=t9(t,`${aj()}`).map(t=>t.split(",")).getOr([]),n=t9(t,`${az()}`).map(t=>t.split(",")).getOr([]);ed(r,r=>re(t,r)),ed(n,r=>{rd(t,r)}),re(t,`${az()}`),re(t,`${aj()}`)})(t)})};return{register:(t,n)=>{r.register(t,n)},annotate:(n,o)=>{r.lookup(n).each(r=>{((t,r,n,o)=>{t.undoManager.transact(()=>{let a=t.selection,l=a.getRng(),i=d8(t).length>0,s=aY("mce-annotation");if(l.collapsed&&!i&&((t,r)=>{let n=cL(t.dom,r,[{inline:"span"}]);r.setStart(n.startContainer,n.startOffset),r.setEnd(n.endContainer,n.endOffset),t.selection.setRng(r)})(t,l),a.getRng().collapsed&&!i){let l=cU(t.getDoc(),s,o,r,n.decorate);nc(l,"\xa0"),a.getRng().insertNode(l.dom),a.select(l.dom)}else cr(a,!1,()=>{ct(t,a=>{cz(t,a,s,r,n.decorate,o)})})})})(t,n,r,o)})},annotationChanged:(t,r)=>{n.addListener(t,r)},remove:r=>{a$(t,et.some(r)).each(({elements:r})=>{let n=t.selection.getBookmark();a(r),t.selection.moveToBookmark(n)})},removeAll:r=>{let n=t.selection.getBookmark();eP(aW(t,r),(t,r)=>{a(t)}),t.selection.moveToBookmark(n)},getAll:r=>eD(aW(t,r),t=>es(t,t=>t.dom))}},cH=t=>({getBookmark:Y(dX,t),moveToBookmark:Y(dZ,t)});cH.isBookmarkNode=dQ;let c$=(t,r,n)=>!n.collapsed&&ei(n.getClientRects(),n=>t>=n.left&&t<=n.right&&r>=n.top&&r<=n.bottom),cV=(t,r,n)=>{t.dispatch(r,n)},cq=(t,r,n,o)=>{t.dispatch("FormatApply",{format:r,node:n,vars:o})},cW=(t,r,n,o)=>{t.dispatch("FormatRemove",{format:r,node:n,vars:o})},cK=(t,r)=>t.dispatch("SetContent",r),cY=(t,r)=>t.dispatch("GetContent",r),cG=(t,r)=>{t.dispatch("AutocompleterUpdateActiveRange",r)},cX=(t,r)=>t.dispatch("PastePlainTextToggle",{state:r}),cZ={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:t=>t.shiftKey||t.ctrlKey||t.altKey||cZ.metaKeyPressed(t),metaKeyPressed:t=>tM.os.isMacOS()||tM.os.isiOS()?t.metaKey:t.ctrlKey&&!t.altKey},cQ="data-mce-selected",cJ=Math.abs,c0=Math.round,c1={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},c2=(t,r)=>{let n,o,a,l,i,s,d,c,u,m,g,f,p,h,b;let v=r.dom,y=r.getDoc(),C=document,E=r.getBody(),w=t=>I(t)&&(nX(t)||v.is(t,"figure.image")),x=t=>n1(t)||v.hasClass(t,"mce-preview-object"),_=t=>{let n=t.target;((t,r)=>{if("longpress"===t.type||0===t.type.indexOf("touch")){let n=t.touches[0];return w(t.target)&&!c$(n.clientX,n.clientY,r)}return w(t.target)&&!c$(t.clientX,t.clientY,r)})(t,r.selection.getRng())&&!t.isDefaultPrevented()&&r.selection.select(n)},k=t=>v.hasClass(t,"mce-preview-object")&&I(t.firstElementChild)?[t,t.firstElementChild]:v.is(t,"figure.image")?[t.querySelector("img")]:[t],S=t=>{let n=iZ(r);return!!n&&"false"!==t.getAttribute("data-mce-resize")&&t!==r.getBody()&&(v.hasClass(t,"mce-preview-object")&&I(t.firstElementChild)?rb(ru(t.firstElementChild),n):rb(ru(t),n))},N=(t,n,o)=>{I(o)&&ed(k(t),t=>{t.style[n]||!r.schema.isValid(t.nodeName.toLowerCase(),n)?v.setStyle(t,n,o):v.setAttrib(t,n,""+o)})},R=(t,r,n)=>{N(t,"width",r),N(t,"height",n)},A=t=>{let i,y,C,_;i=t.screenX-s,y=t.screenY-d,f=i*l[2]+c,p=y*l[3]+u,f=f<5?5:f,p=p<5?5:p,((w(n)||x(n))&&!1!==iQ(r)?!cZ.modifierPressed(t):cZ.modifierPressed(t))&&(cJ(i)>cJ(y)?(p=c0(f*m),f=c0(p/m)):(f=c0(p/m),p=c0(f*m))),R(o,f,p),C=l.startPos.x+i,_=l.startPos.y+y,C=C>0?C:0,_=_>0?_:0,v.setStyles(a,{left:C,top:_,display:"block"}),a.innerHTML=f+" &times; "+p,l[2]<0&&o.clientWidth<=f&&v.setStyle(o,"left",(void 0)+(c-f)),l[3]<0&&o.clientHeight<=p&&v.setStyle(o,"top",(void 0)+(u-p)),(i=E.scrollWidth-h)+(y=E.scrollHeight-b)!=0&&v.setStyles(a,{left:C-i,top:_-y}),g||(((t,r,n,o,a)=>{t.dispatch("ObjectResizeStart",{target:r,width:n,height:o,origin:a})})(r,n,c,u,"corner-"+l.name),g=!0)},T=()=>{let t=g;g=!1,t&&(N(n,"width",f),N(n,"height",p)),v.unbind(y,"mousemove",A),v.unbind(y,"mouseup",T),C!==y&&(v.unbind(C,"mousemove",A),v.unbind(C,"mouseup",T)),v.remove(o),v.remove(a),v.remove(i),O(n),t&&(((t,r,n,o,a)=>{t.dispatch("ObjectResized",{target:r,width:n,height:o,origin:a})})(r,n,f,p,"corner-"+l.name),v.setAttrib(n,"style",v.getAttrib(n,"style"))),r.nodeChanged()},O=t=>{M();let g=v.getPos(t,E),w=g.x,_=g.y,N=t.getBoundingClientRect(),O=N.width||N.right-N.left,B=N.height||N.bottom-N.top;n!==t&&(P(),n=t,f=p=0);let D=r.dispatch("ObjectSelected",{target:t});S(t)&&!D.isDefaultPrevented()?eP(c1,(t,r)=>{let g=v.get("mceResizeHandle"+r);g&&v.remove(g),g=v.add(E,"div",{id:"mceResizeHandle"+r,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+r+"-resize; margin:0; padding:0"}),v.bind(g,"mousedown",g=>{g.stopImmediatePropagation(),g.preventDefault(),(g=>{let f=k(n)[0];s=g.screenX,d=g.screenY,c=f.clientWidth,m=(u=f.clientHeight)/c,(l=t).name=r,l.startPos={x:O*t[0]+w,y:B*t[1]+_},h=E.scrollWidth,b=E.scrollHeight,i=v.add(E,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),v.setStyles(i,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),o=((t,r)=>{if(x(r))return t.create("img",{src:tM.transparentSrc});if(nz(r)){let n=e4(l.name,"n")?eS:eN,o=r.cloneNode(!0);return n(t.select("tr",o)).each(r=>{let n=t.select("td,th",r);t.setStyle(r,"height",null),ed(n,r=>t.setStyle(r,"height",null))}),o}return r.cloneNode(!0)})(v,n),v.addClass(o,"mce-clonedresizable"),v.setAttrib(o,"data-mce-bogus","all"),o.contentEditable="false",v.setStyles(o,{left:w,top:_,margin:0}),R(o,O,B),o.removeAttribute(cQ),E.appendChild(o),v.bind(y,"mousemove",A),v.bind(y,"mouseup",T),C!==y&&(v.bind(C,"mousemove",A),v.bind(C,"mouseup",T)),a=v.add(E,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},c+" &times; "+u)})(g)}),t.elm=g,v.setStyles(g,{left:O*t[0]+w-g.offsetWidth/2,top:B*t[1]+_-g.offsetHeight/2})}):P(!1)},B=aD(O,0),P=(t=!0)=>{B.cancel(),M(),n&&t&&n.removeAttribute(cQ),eP(c1,(t,r)=>{let n=v.get("mceResizeHandle"+r);n&&(v.unbind(n),v.remove(n))})},D=(t,r)=>v.isChildOf(t,r),L=n=>{if(g||r.removed||r.composing)return;let o=rZ(ru("mousedown"===n.type?n.target:t.getNode()),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(t=>t.dom).filter(t=>v.isEditable(t.parentElement)||"IMG"===t.nodeName&&v.isEditable(t)).getOrUndefined(),a=I(o)?v.getAttrib(o,cQ,"1"):"1";if(ed(v.select(`img[${cQ}],hr[${cQ}]`),t=>{t.removeAttribute(cQ)}),I(o)&&D(o,E)&&r.hasFocus()&&(F(),D(t.getStart(!0),o)&&D(t.getEnd(!0),o)))return v.setAttrib(o,cQ,a),void B.throttle(o);P()},M=()=>{eP(c1,t=>{t.elm&&(v.unbind(t.elm),delete t.elm)})},F=()=>{try{r.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(t){}};return r.on("init",()=>{F(),r.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",L),r.on("keyup compositionend",t=>{n&&"TABLE"===n.nodeName&&L(t)}),r.on("hide blur",P),r.on("contextmenu longpress",_,!0)}),r.on("remove",M),{isResizable:S,showResizeRect:O,hideResizeRect:P,updateResizeRect:L,destroy:()=>{B.cancel(),n=o=i=null}}},c3=(t,r,n)=>{let o=t.document.createRange();return r.fold(t=>{o.setStartBefore(t.dom)},(t,r)=>{o.setStart(t.dom,r)},t=>{o.setStartAfter(t.dom)}),((t,r)=>{r.fold(r=>{t.setEndBefore(r.dom)},(r,n)=>{t.setEnd(r.dom,n)},r=>{t.setEndAfter(r.dom)})})(o,n),o},c8=(t,r,n,o,a)=>{let l=t.document.createRange();return l.setStart(r.dom,n),l.setEnd(o.dom,a),l},c5=ie([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),c6=(t,r,n)=>r(ru(n.startContainer),n.startOffset,ru(n.endContainer),n.endOffset);c5.ltr,c5.rtl;let c4=(t,r,n,o)=>({start:t,soffset:r,finish:n,foffset:o}),c9=document.caretPositionFromPoint?(t,r,n)=>{var o,a;return et.from(null===(a=(o=t.dom).caretPositionFromPoint)||void 0===a?void 0:a.call(o,r,n)).bind(r=>{if(null===r.offsetNode)return et.none();let n=t.dom.createRange();return n.setStart(r.offsetNode,r.offset),n.collapse(),et.some(n)})}:document.caretRangeFromPoint?(t,r,n)=>{var o,a;return et.from(null===(a=(o=t.dom).caretRangeFromPoint)||void 0===a?void 0:a.call(o,r,n))}:et.none,c7=ie([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),ue={before:c7.before,on:c7.on,after:c7.after,cata:(t,r,n,o)=>t.fold(r,n,o),getStart:t=>t.fold(W,W,W)},ut=ie([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ur={domRange:ut.domRange,relative:ut.relative,exact:ut.exact,exactFromRange:t=>ut.exact(t.start,t.soffset,t.finish,t.foffset),getWin:t=>rx(t.match({domRange:t=>ru(t.startContainer),relative:(t,r)=>ue.getStart(t),exact:(t,r,n,o)=>t})),range:c4},un=(t,r)=>{let n=tG(t);return"input"===n?ue.after(t):el(["br","img"],n)?0===r?ue.before(t):ue.after(t):ue.on(t,r)},uo=(t,r)=>{let n=t.fold(ue.before,un,ue.after),o=r.fold(ue.before,un,ue.after);return ur.relative(n,o)},ua=(t,r,n,o)=>{let a=un(t,r),l=un(n,o);return ur.relative(a,l)},ul=(t,r)=>{let n=(r||document).createDocumentFragment();return ed(t,t=>{n.appendChild(t.dom)}),ru(n)},ui=t=>{let r=ur.getWin(t).dom,n=(t,n,o,a)=>c8(r,t,n,o,a);return((t,r)=>{let n=r.ltr();return n.collapsed?r.rtl().filter(t=>!1===t.collapsed).map(t=>c5.rtl(ru(t.endContainer),t.endOffset,ru(t.startContainer),t.startOffset)).getOrThunk(()=>c6(0,c5.ltr,n)):c6(0,c5.ltr,n)})(0,t.match({domRange:t=>{let r=ru(t.startContainer),n=ru(t.endContainer);return ua(r,t.startOffset,n,t.endOffset)},relative:uo,exact:ua}).match({domRange:t=>({ltr:q(t),rtl:et.none}),relative:(t,n)=>({ltr:eJ(()=>c3(r,t,n)),rtl:eJ(()=>et.some(c3(r,n,t)))}),exact:(t,n,o,a)=>({ltr:eJ(()=>c8(r,t,n,o,a)),rtl:eJ(()=>et.some(c8(r,o,a,t,n)))})})).match({ltr:n,rtl:n})},us=(t,r,n)=>{var o;return(o=rx(ru(n)).dom,c9(ru(o.document),t,r).map(t=>c4(ru(t.startContainer),t.startOffset,ru(t.endContainer),t.endOffset))).map(t=>{let r=n.createRange();return r.setStart(t.start.dom,t.soffset),r.setEnd(t.finish.dom,t.foffset),r}).getOrUndefined()},ud=(t,r)=>I(t)&&I(r)&&t.startContainer===r.startContainer&&t.startOffset===r.startOffset&&t.endContainer===r.endContainer&&t.endOffset===r.endOffset,uc=(t,r,n)=>null!==((t,r,n)=>{let o=t;for(;o&&o!==r;){if(n(o))return o;o=o.parentNode}return null})(t,r,n),uu=(t,r,n)=>uc(t,r,t=>t.nodeName===n),um=(t,r)=>la(t)&&!uc(t,r,dU),ug=(t,r,n)=>{let o=r.parentNode;if(o){let a;let l=new nS(r,t.getParent(o,t.isBlock)||t.getRoot());for(;a=l[n?"prev":"next"]();)if(nG(a))return!0}return!1},uf=(t,r,n,o,a)=>{let l,i;let s=t.getRoot(),d=t.schema.getNonEmptyElements(),c=a.parentNode;if(!c)return et.none();let u=t.getParent(c,t.isBlock)||s;if(o&&nG(a)&&r&&t.isEmpty(u))return et.some(lH(c,t.nodeIndex(a)));let m=new nS(a,u);for(;i=m[o?"prev":"next"]();){if("false"===t.getContentEditableParent(i)||um(i,s))return et.none();if(n$(i)&&i.data.length>0)return uu(i,s,"A")?et.none():et.some(lH(i,o?i.data.length:0));if(t.isBlock(i)||d[i.nodeName.toLowerCase()])return et.none();l=i}return nW(l)?et.none():n&&l?et.some(lH(l,0)):et.none()},up=(t,r,n,o)=>{var a;let l=t.getRoot(),i,s=!1,d=n?o.startContainer:o.endContainer,c=n?o.startOffset:o.endOffset,u=nD(d)&&c===d.childNodes.length,m=t.schema.getNonEmptyElements(),g=n;if(la(d))return et.none();if(nD(d)&&c>d.childNodes.length-1&&(g=!1),nK(d)&&(d=l,c=0),d===l){if(g&&(i=d.childNodes[c>0?c-1:0])&&(la(i)||m[i.nodeName]||nz(i)))return et.none();if(d.hasChildNodes()){if(c=Math.min(!g&&c>0?c-1:c,d.childNodes.length-1),c=n$(d=d.childNodes[c])&&u?d.data.length:0,!r&&d===l.lastChild&&nz(d)||((t,r)=>{let n=r;for(;n&&n!==t;){if(nQ(n))return!0;n=n.parentNode}return!1})(l,d)||la(d)||n3(d))return et.none();if(d.hasChildNodes()&&!nz(d)){i=d;let r=new nS(d,l);do{if(nQ(i)||la(i)){s=!1;break}if(n$(i)&&i.data.length>0){c=g?0:i.data.length,d=i,s=!0;break}if(m[i.nodeName.toLowerCase()]&&!n0(i)){c=t.nodeIndex(i),d=i.parentNode,g||c++,s=!0;break}}while(i=g?r.next():r.prev())}}}return r&&(n$(d)&&0===c&&uf(t,u,r,!0,d).each(t=>{d=t.container(),c=t.offset(),s=!0}),nD(d)&&((i=d.childNodes[c])||(i=d.childNodes[c-1]),!i||!nG(i)||"A"===(null===(a=i.previousSibling)||void 0===a?void 0:a.nodeName)||ug(t,i,!1)||ug(t,i,!0)||uf(t,u,r,!0,i).each(t=>{d=t.container(),c=t.offset(),s=!0}))),g&&!r&&n$(d)&&c===d.data.length&&uf(t,u,r,!1,d).each(t=>{d=t.container(),c=t.offset(),s=!0}),s&&d?et.some(lH(d,c)):et.none()},uh=(t,r)=>{let n=r.collapsed,o=r.cloneRange(),a=lH.fromRangeStart(r);return up(t,n,!0,o).each(t=>{n&&lH.isAbove(a,t)||o.setStart(t.container(),t.offset())}),n||up(t,n,!1,o).each(t=>{o.setEnd(t.container(),t.offset())}),n&&o.collapse(!0),ud(r,o)?et.none():et.some(o)},ub=(t,r)=>t.splitText(r),uv=t=>{let r=t.startContainer,n=t.startOffset,o=t.endContainer,a=t.endOffset;if(r===o&&n$(r)){if(n>0&&n<r.data.length){if(r=(o=ub(r,n)).previousSibling,a>n){let t=ub(o,a-=n).previousSibling;r=o=t,a=t.data.length,n=0}else a=0}}else if(n$(r)&&n>0&&n<r.data.length&&(r=ub(r,n),n=0),n$(o)&&a>0&&a<o.data.length){let t=ub(o,a).previousSibling;o=t,a=t.data.length}return{startContainer:r,startOffset:n,endContainer:o,endOffset:a}},uy=t=>({walk:(r,n)=>cM(t,r,n),split:uv,expand:(r,n={type:"word"})=>{if("word"===n.type){let n=cL(t,r,[{inline:"span"}]),o=t.createRng();return o.setStart(n.startContainer,n.startOffset),o.setEnd(n.endContainer,n.endOffset),o}return r},normalize:r=>uh(t,r).fold(J,t=>(r.setStart(t.startContainer,t.startOffset),r.setEnd(t.endContainer,t.endOffset),!0))});uy.compareRanges=ud,uy.getCaretRangeFromPoint=us,uy.getSelectedNode=lC,uy.getNode=lE;let uC=((t,r)=>{let n=r=>{let n=(t=>{let r=t.dom;return rV(t)?r.getBoundingClientRect().height:r.offsetHeight})(r);return n<=0||null===n?parseFloat(r8(r,t))||0:n},o=(t,r)=>ef(r,(r,n)=>{let o=r8(t,n),a=void 0===o?0:parseInt(o,10);return isNaN(a)?r:r+a},0);return{set:(r,n)=>{if(!z(n)&&!n.match(/^[0-9]+$/))throw Error(t+".set accepts only positive integer values. Value was "+n);let o=r.dom;r0(o)&&(o.style[t]=n+"px")},get:n,getOuter:n,aggregate:o,max:(t,r,n)=>{let a=o(t,n);return r>a?r-a:0}}})("height"),uE=()=>ru(document),uw=(t,r)=>t.view(r).fold(q([]),r=>{let n=t.owner(r);return[r].concat(uw(t,n))});var ux=Object.freeze({__proto__:null,view:t=>{var r;return(t.dom===document?et.none():et.from(null===(r=t.dom.defaultView)||void 0===r?void 0:r.frameElement)).map(ru)},owner:t=>rw(t)});let u_=t=>"textarea"===tG(t),uk=(t,r)=>{let n=(t=>{let r=t.dom.ownerDocument,n=r.body,o=r.defaultView,a=r.documentElement;if(n===t.dom)return ng(n.offsetLeft,n.offsetTop);let l=nf(null==o?void 0:o.pageYOffset,a.scrollTop),i=nf(null==o?void 0:o.pageXOffset,a.scrollLeft),s=nf(a.clientTop,n.clientTop),d=nf(a.clientLeft,n.clientLeft);return np(t).translate(i-d,l-s)})(t),o=uC.get(t);return{element:t,bottom:n.top+o,height:o,pos:n,cleanup:r}},uS=(t,r,n,o)=>{uT(t,(a,l)=>uR(t,r,n,o),n)},uN=(t,r,n,o,a)=>{let l={elm:o.element.dom,alignToTop:a};t.dispatch("ScrollIntoView",l).isDefaultPrevented()||(n(t,r,nh(r).top,o,a),((t,r)=>{t.dispatch("AfterScrollIntoView",r)})(t,l))},uR=(t,r,n,o)=>{let a=ru(t.getBody()),l=ru(t.getDoc());a.dom.offsetWidth;let i=((t,r)=>{let n=((t,r)=>{let n=rO(t);if(0===n.length||u_(t))return{element:t,offset:r};if(r<n.length&&!u_(n[r]))return{element:n[r],offset:0};{let o=n[n.length-1];return u_(o)?{element:t,offset:r}:"img"===tG(o)?{element:o,offset:1}:t0(o)?{element:o,offset:a1(o).length}:{element:o,offset:rO(o).length}}})(t,r),o=rm('<span data-mce-bogus="all" style="display: inline-block;">\uFEFF</span>');return r7(n.element,o),uk(o,()=>nl(o))})(ru(n.startContainer),n.startOffset);uN(t,l,r,i,o),i.cleanup()},uA=(t,r,n,o)=>{let a=ru(t.getDoc());uN(t,a,n,uk(ru(r),H),o)},uT=(t,r,n)=>{let o=n.startContainer,a=n.startOffset,l=n.endContainer,i=n.endOffset;r(ru(o),ru(l));let s=t.dom.createRng();s.setStart(o,a),s.setEnd(l,i),t.selection.setRng(n)},uO=(t,r,n,o,a)=>{let l=r.pos;if(o)nb(l.left,l.top,a);else{let o=l.top-n+r.height;nb(-t.getBody().getBoundingClientRect().left,o,a)}},uB=(t,r,n,o,a,l)=>{let i=o+n,s=a.pos.top,d=a.bottom,c=d-s>=o;s<n?uO(t,a,o,!1!==l,r):s>i?uO(t,a,o,c?!1!==l:!0===l,r):d>i&&!c&&uO(t,a,o,!0===l,r)},uP=(t,r,n,o,a)=>{let l=rx(r).dom.innerHeight;uB(t,r,n,l,o,a)},uD=(t,r,n,o,a)=>{let l=rx(r).dom.innerHeight;uB(t,r,n,l,o,a);let i=(t=>{let r=nh(uE()),n=((t,r)=>{let n=r.owner(t);return uw(r,n)})(t,ux),o=np(t),a=eg(n,(t,r)=>{let n=np(r);return{left:t.left+n.left,top:t.top+n.top}},{left:0,top:0});return ng(a.left+o.left+r.left,a.top+o.top+r.top)})(o.element),s=nC(window);i.top<s.y?nv(o.element,!1!==a):i.top>s.bottom&&nv(o.element,!0===a)},uL=(t,r,n)=>uS(t,uP,r,n),uM=(t,r,n)=>uA(t,r,uP,n),uF=(t,r,n)=>uS(t,uD,r,n),uI=(t,r,n)=>uA(t,r,uD,n),uU=(t,r,n)=>{(t.inline?uL:uF)(t,r,n)},uz=(t,r=!1)=>t.dom.focus({preventScroll:r}),uj=t=>{let r=rU(t).dom;return t.dom===r.activeElement},uH=(t=uE())=>et.from(t.dom.activeElement).map(ru),u$=(t,r)=>{let n=t0(r)?a1(r).length:rO(r).length+1;return t>n?n:t<0?0:t},uV=t=>ur.range(t.start,u$(t.soffset,t.start),t.finish,u$(t.foffset,t.finish)),uq=(t,r)=>!nP(r.dom)&&(rC(t,r)||ry(t,r)),uW=t=>r=>uq(t,r.start)&&uq(t,r.finish),uK=t=>ur.range(ru(t.startContainer),t.startOffset,ru(t.endContainer),t.endOffset),uY=t=>{let r=document.createRange();try{return r.setStart(t.start.dom,t.soffset),r.setEnd(t.finish.dom,t.foffset),et.some(r)}catch(t){return et.none()}},uG=t=>{var r;let n=t.inline||tM.browser.isFirefox()?(t=>{let r=t.getSelection();return(r&&0!==r.rangeCount?et.from(r.getRangeAt(0)):et.none()).map(uK)})(rx(r=ru(t.getBody())).dom).filter(uW(r)):et.none();t.bookmark=n.isSome()?n:t.bookmark},uX=t=>(t.bookmark?t.bookmark:et.none()).bind(r=>{var n;return n=ru(t.getBody()),et.from(r).filter(uW(n)).map(uV)}).bind(uY),uZ={isEditorUIElement:t=>{let r=t.className.toString();return -1!==r.indexOf("tox-")||-1!==r.indexOf("mce-")}},uQ={setEditorTimeout:(t,r,n)=>{var o;return z(o=n)||(o=0),setTimeout(()=>{t.removed||r()},o)},setEditorInterval:(t,r,n)=>{var o;let a=(z(o=n)||(o=0),setInterval(()=>{t.removed?clearInterval(a):r()},o));return a}},uJ=ax.DOM,u0=t=>{let r=t.classList;return void 0!==r&&(r.contains("tox-edit-area")||r.contains("tox-edit-area__iframe")||r.contains("mce-content-body"))},u1=(t,r)=>{let n=st(t);return null!==uJ.getParent(r,r=>nD(r)&&uZ.isEditorUIElement(r)||!!n&&t.dom.is(r,n))},u2=t=>{try{let r=rU(ru(t.getElement()));return uH(r).fold(()=>document.body,t=>t.dom)}catch(t){return document.body}},u3=(r,n)=>{let o=n.editor;(t=>{let r=aD(()=>{uG(t)},0);t.on("init",()=>{t.inline&&((t,r)=>{let n=()=>{r.throttle()};ax.DOM.bind(document,"mouseup",n),t.on("remove",()=>{ax.DOM.unbind(document,"mouseup",n)})})(t,r),((t,r)=>{t.on("mouseup touchend",t=>{r.throttle()})})(t,r),t.on("keyup NodeChange AfterSetSelectionRange",r=>{"nodechange"===r.type&&r.selectionChange||uG(t)})}),t.on("remove",()=>{r.cancel()})})(o);let a=(t,r)=>{s$(t)&&!0!==t.inline&&r(ru(t.getContainer()),"tox-edit-focus")};o.on("focusin",()=>{let t=r.focusedEditor;u0(u2(o))&&a(o,ri),t!==o&&(t&&t.dispatch("blur",{focusedEditor:o}),r.setActive(o),r.focusedEditor=o,o.dispatch("focus",{blurredEditor:t}),o.focus(!0))}),o.on("focusout",()=>{uQ.setEditorTimeout(o,()=>{let t=r.focusedEditor;u0(u2(o))&&t===o||a(o,rd),u1(o,u2(o))||t!==o||(o.dispatch("blur",{focusedEditor:null}),r.focusedEditor=null)})}),t||(t=t=>{let n=r.activeEditor;n&&rH(t).each(t=>{t.ownerDocument===document&&(t===document.body||u1(n,t)||r.focusedEditor!==n||(n.dispatch("blur",{focusedEditor:null}),r.focusedEditor=null))})},uJ.bind(document,"focusin",t))},u8=(r,n)=>{r.focusedEditor===n.editor&&(r.focusedEditor=null),!r.activeEditor&&t&&(uJ.unbind(document,"focusin",t),t=null)},u5=(t,r)=>{var n;(n=ru(t.getBody()),(r.collapsed?et.from(lE(r.startContainer,r.startOffset)).map(ru):et.none()).bind(t=>a4(t)?et.some(t):rC(n,t)?et.none():et.some(n))).bind(t=>dM(t.dom)).fold(()=>{t.selection.normalize()},r=>t.selection.setRng(r.toRange()))},u6=t=>{if(t.setActive)try{t.setActive()}catch(r){t.focus()}else t.focus()},u4=t=>t.inline?(t=>{var r;let n=t.getBody();return n&&(uj(r=ru(n))||uH(rU(r)).filter(t=>r.dom.contains(t.dom)).isSome())})(t):I(t.iframeElement)&&uj(ru(t.iframeElement)),u9=t=>u4(t)||uH(rU(ru(t.getElement()))).filter(r=>!u0(r.dom)&&u1(t,r.dom)).isSome(),u7=t=>t.editorManager.setActive(t),me=(t,r)=>r.collapsed?t.isEditable(r.startContainer):t.isEditable(r.startContainer)&&t.isEditable(r.endContainer),mt=(t,r,n,o,a)=>{let l=n?r.startContainer:r.endContainer,i=n?r.startOffset:r.endOffset;return et.from(l).map(ru).map(t=>o&&r.collapsed?t:rB(t,a(t,i)).getOr(t)).bind(t=>tJ(t)?et.some(t):r_(t).filter(tJ)).map(t=>t.dom).getOr(t)},mr=(t,r,n=!1)=>mt(t,r,!0,n,(t,r)=>Math.min(rL(t),r)),mn=(t,r,n=!1)=>mt(t,r,!1,n,(t,r)=>r>0?r-1:r),mo=(t,r)=>{let n=t;for(;t&&n$(t)&&0===t.length;)t=r?t.nextSibling:t.previousSibling;return t||n},ma=(t,r)=>es(r,r=>{let n=t.dispatch("GetSelectionRange",{range:r});return n.range!==r?n.range:r}),ml={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},mi=(t,r,n)=>{let o=n?"lastChild":"firstChild",a=n?"prev":"next";if(t[o])return t[o];if(t!==r){let n=t[a];if(n)return n;for(let o=t.parent;o&&o!==r;o=o.parent)if(n=o[a])return n}},ms=t=>{var r;let n=null!==(r=t.value)&&void 0!==r?r:"";if(!nA(n))return!1;let o=t.parent;return!o||"span"===o.name&&!o.attr("style")||!/^[ ]+$/.test(n)},md=t=>{let r="a"===t.name&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||r};class mc{static create(t,r){let n=new mc(t,ml[t]||1);return r&&eP(r,(t,r)=>{n.attr(r,t)}),n}constructor(t,r){this.name=t,this.type=r,1===r&&(this.attributes=[],this.attributes.map={})}replace(t){return t.parent&&t.remove(),this.insert(t,this),this.remove(),this}attr(t,r){let n=this;if(!T(t))return I(t)&&eP(t,(t,r)=>{n.attr(r,t)}),n;let o=n.attributes;if(o){if(void 0!==r){if(null===r){if(t in o.map){delete o.map[t];let r=o.length;for(;r--;)if(o[r].name===t)return o.splice(r,1),n}return n}if(t in o.map){let n=o.length;for(;n--;)if(o[n].name===t){o[n].value=r;break}}else o.push({name:t,value:r});return o.map[t]=r,n}return o.map[t]}}clone(){let t=new mc(this.name,this.type),r=this.attributes;if(r){let n=[];n.map={};for(let t=0,o=r.length;t<o;t++){let o=r[t];"id"!==o.name&&(n[n.length]={name:o.name,value:o.value},n.map[o.name]=o.value)}t.attributes=n}return t.value=this.value,t}wrap(t){return this.parent&&(this.parent.insert(t,this),t.append(this)),this}unwrap(){for(let t=this.firstChild;t;){let r=t.next;this.insert(t,this,!0),t=r}this.remove()}remove(){let t=this.parent,r=this.next,n=this.prev;return t&&(t.firstChild===this?(t.firstChild=r,r&&(r.prev=null)):n&&(n.next=r),t.lastChild===this?(t.lastChild=n,n&&(n.next=null)):r&&(r.prev=n),this.parent=this.next=this.prev=null),this}append(t){t.parent&&t.remove();let r=this.lastChild;return r?(r.next=t,t.prev=r,this.lastChild=t):this.lastChild=this.firstChild=t,t.parent=this,t}insert(t,r,n){t.parent&&t.remove();let o=r.parent||this;return n?(r===o.firstChild?o.firstChild=t:r.prev&&(r.prev.next=t),t.prev=r.prev,t.next=r,r.prev=t):(r===o.lastChild?o.lastChild=t:r.next&&(r.next.prev=t),t.next=r.next,t.prev=r,r.next=t),t.parent=o,t}getAll(t){let r=[];for(let n=this.firstChild;n;n=mi(n,this))n.name===t&&r.push(n);return r}children(){let t=[];for(let r=this.firstChild;r;r=r.next)t.push(r);return t}empty(){if(this.firstChild){let t=[];for(let r=this.firstChild;r;r=mi(r,this))t.push(r);let r=t.length;for(;r--;){let n=t[r];n.parent=n.firstChild=n.lastChild=n.next=n.prev=null}}return this.firstChild=this.lastChild=null,this}isEmpty(t,r={},n){var o;let a=this.firstChild;if(md(this))return!1;if(a)do{if(1===a.type){if(a.attr("data-mce-bogus"))continue;if(t[a.name]||md(a))return!1}if(8===a.type||3===a.type&&!ms(a)||3===a.type&&a.parent&&r[a.parent.name]&&nA(null!==(o=a.value)&&void 0!==o?o:"")||n&&n(a))return!1}while(a=mi(a,this));return!0}walk(t){return mi(this,null,t)}}let mu=tz.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),mm=t=>T(t.nodeValue)&&t.nodeValue.includes("\uFEFF"),mg=t=>(0===t.length?"":`${es(t,t=>`[${t}]`).join(",")},`)+'[data-mce-bogus="all"]',mf=t=>document.createTreeWalker(t,NodeFilter.SHOW_COMMENT,t=>mm(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),mp=t=>document.createTreeWalker(t,NodeFilter.SHOW_TEXT,t=>{if(mm(t)){let r=t.parentNode;return r&&eH(mu,r.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP}),mh=t=>null!==mf(t).nextNode(),mb=t=>null!==mp(t).nextNode(),mv=(t,r)=>null!==r.querySelector(mg(t)),my=(t,r)=>{ed(r.querySelectorAll(mg(t)),r=>{let n=ru(r);"all"===t4(n,"data-mce-bogus")?nl(n):ed(t,t=>{t7(n,t)&&re(n,t)})})},mC=t=>{let r=t.nextNode();for(;null!==r;)r.nodeValue=null,r=t.nextNode()},mE=$(mC,mf),mw=$(mC,mp),mx=(t,r)=>{let n=[{condition:Y(mv,r),action:Y(my,r)},{condition:mh,action:mE},{condition:mb,action:mw}],o=t,a=!1;return ed(n,({condition:r,action:n})=>{r(o)&&(a||(o=t.cloneNode(!0),a=!0),n(o))}),o},m_=t=>{ed(nw(t,"[data-mce-bogus]"),t=>{"all"===t4(t,"data-mce-bogus")?nl(t):a3(t)?(r7(t,rf("\uFEFF")),nl(t)):ni(t)})},mk=t=>{ed(nw(t,"input"),t=>{re(t,"name")})},mS=(t,r,n)=>{let o;return o="raw"===r.format?tz.trim(lr(mx(n,t.serializer.getTempAttrs()).innerHTML)):"text"===r.format?((t,r)=>{let n=t.getDoc(),o=rU(ru(t.getBody())),a=rg("div",n);t5(a,"data-mce-bogus","all"),r3(a,{position:"fixed",left:"-9999999px",top:"0"}),nc(a,r.innerHTML),m_(a),mk(a),nr(rM(o)?o:ru(rw(o).dom.body),a);let l=lr(a.dom.innerText);return nl(a),l})(t,n):"tree"===r.format?t.serializer.serialize(n,r):((t,r)=>{let n=i_(t),o=RegExp(`^(<${n}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${n}>[\r
]*|<br \\/>[\r
]*)$`);return r.replace(o,"")})(t,t.serializer.serialize(n,r)),"text"!==r.format&&!a7(ru(n))&&T(o)?tz.trim(o):o},mN=tz.makeMap,mR=t=>{let r=[],n=(t=t||{}).indent,o=mN(t.indent_before||""),a=mN(t.indent_after||""),l=oj.getEncodeFunc(t.entity_encoding||"raw",t.entities),i="xhtml"!==t.element_format;return{start:(t,s,d)=>{if(n&&o[t]&&r.length>0){let t=r[r.length-1];t.length>0&&"\n"!==t&&r.push("\n")}if(r.push("<",t),s)for(let t=0,n=s.length;t<n;t++){let n=s[t];r.push(" ",n.name,'="',l(n.value,!0),'"')}if(r[r.length]=!d||i?">":" />",d&&n&&a[t]&&r.length>0){let t=r[r.length-1];t.length>0&&"\n"!==t&&r.push("\n")}},end:t=>{let o;r.push("</",t,">"),n&&a[t]&&r.length>0&&(o=r[r.length-1]).length>0&&"\n"!==o&&r.push("\n")},text:(t,n)=>{t.length>0&&(r[r.length]=n?t:l(t))},cdata:t=>{r.push("<![CDATA[",t,"]]>")},comment:t=>{r.push("<!--",t,"-->")},pi:(t,o)=>{o?r.push("<?",t," ",l(o),"?>"):r.push("<?",t,"?>"),n&&r.push("\n")},doctype:t=>{r.push("<!DOCTYPE",t,">",n?"\n":"")},reset:()=>{r.length=0},getContent:()=>r.join("").replace(/\n$/,"")}},mA=(t={},r=o8())=>{let n=mR(t);return t.validate=!("validate"in t)||t.validate,{serialize:o=>{let a=t.validate,l={3:t=>{var r;n.text(null!==(r=t.value)&&void 0!==r?r:"",t.raw)},8:t=>{var r;n.comment(null!==(r=t.value)&&void 0!==r?r:"")},7:t=>{n.pi(t.name,t.value)},10:t=>{var r;n.doctype(null!==(r=t.value)&&void 0!==r?r:"")},4:t=>{var r;n.cdata(null!==(r=t.value)&&void 0!==r?r:"")},11:t=>{let r=t;if(r=r.firstChild)do i(r);while(r=r.next)}};n.reset();let i=t=>{var o;let s=l[t.type];if(s)s(t);else{let l=t.name,s=l in r.getVoidElements(),d=t.attributes;if(a&&d&&d.length>1){let n=[];n.map={};let o=r.getElementRule(t.name);if(o){for(let t=0,r=o.attributesOrder.length;t<r;t++){let r=o.attributesOrder[t];if(r in d.map){let t=d.map[r];n.map[r]=t,n.push({name:r,value:t})}}for(let t=0,r=d.length;t<r;t++){let r=d[t].name;if(!(r in n.map)){let t=d.map[r];n.map[r]=t,n.push({name:r,value:t})}}d=n}}if(n.start(l,d,s),or(l))T(t.value)&&n.text(t.value,!0),n.end(l);else if(!s){let r=t.firstChild;if(r){"pre"!==l&&"textarea"!==l||3!==r.type||"\n"!==(null===(o=r.value)||void 0===o?void 0:o[0])||n.text("\n",!0);do i(r);while(r=r.next)}n.end(l)}}};return 1!==o.type||t.inner?3===o.type?l[3](o):l[11](o):i(o),n.getContent()}}},mT=new Set;ed(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{mT.add(t)});let mO=["font","text-decoration","text-emphasis"],mB=(t,r)=>eO(t.parseStyle(t.getAttrib(r,"style"))),mP=(t,r,n)=>{let o=mB(t,r),a=mB(t,n),l=o=>{var a,l;let i=null!==(a=t.getStyle(r,o))&&void 0!==a?a:"",s=null!==(l=t.getStyle(n,o))&&void 0!==l?l:"";return tn(i)&&tn(s)&&i!==s};return ei(o,t=>{let r=r=>ei(r,r=>r===t);if(!r(a)&&r(mO)){let t=em(a,t=>ei(mO,r=>e4(t,r)));return ei(t,l)}return l(t)})},mD=(t,r,n)=>et.from(n.container()).filter(n$).exists(o=>r(o.data.charAt(n.offset()+(t?0:-1)))),mL=Y(mD,!0,d0),mM=Y(mD,!1,d0),mF=t=>{let r=t.container();return n$(r)&&(0===r.data.length||nN(r.data)&&cH.isBookmarkNode(r.parentNode))},mI=(t,r)=>n=>dc(t?0:-1,n).filter(r).isSome(),mU=t=>nX(t)&&"block"===r8(ru(t),"display"),mz=t=>nQ(t)&&!(nD(t)&&"all"===t.getAttribute("data-mce-bogus")),mj=mI(!0,mU),mH=mI(!1,mU),m$=mI(!0,n1),mV=mI(!1,n1),mq=mI(!0,nz),mW=mI(!1,nz),mK=mI(!0,mz),mY=mI(!1,mz),mG=(t,r)=>rC(r,t)?rS(t,t=>J(t)||ry(t,r)).slice(0,-1):[],mX=(t,r)=>[t].concat(mG(t,r)),mZ=(t,r,n)=>dB(t,r,n,mF),mQ=(t,r,n)=>eh(mX(ru(r.container()),t),t=>n.isBlock(tG(t))),mJ=(t,r,n,o)=>mZ(t,r.dom,n).forall(t=>mQ(r,n,o).fold(()=>!dd(t,n,r.dom),o=>!dd(t,n,r.dom)&&rC(o,ru(t.container())))),m0=(t,r,n,o)=>mQ(r,n,o).fold(()=>mZ(t,r.dom,n).forall(t=>!dd(t,n,r.dom)),r=>mZ(t,r.dom,n).isNone()),m1=Y(m0,!1),m2=Y(m0,!0),m3=Y(mJ,!1),m8=Y(mJ,!0),m5=t=>dy(t).exists(a3),m6=(t,r,n,o)=>dT(t,eS(em(mX(ru(n.container()),r),t=>o.isBlock(tG(t)))).getOr(r).dom,n).filter(m5),m4=(t,r,n)=>dy(r).exists(a3)||m6(!0,t,r,n).isSome(),m9=(t,r,n)=>et.from(r.getNode(!0)).map(ru).exists(a3)||m6(!1,t,r,n).isSome(),m7=Y(m6,!1),ge=Y(m6,!0),gt=t=>lH.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd(),gr=(t,r,n)=>eS(em(mX(ru(r.container()),t),t=>n.isBlock(tG(t)))).getOr(t),gn=(t,r,n)=>gt(r)?mM(r):mM(r)||dL(gr(t,r,n).dom,r).exists(mM),go=(t,r,n)=>gt(r)?mL(r):mL(r)||dD(gr(t,r,n).dom,r).exists(mL),ga=t=>dy(t).bind(t=>rK(t,tJ)).exists(t=>el(["pre","pre-wrap"],r8(t,"white-space"))),gl=(t,r)=>n=>{var o;return I(o=new nS(n,t)[r]())&&nQ(o)&&dr(o)},gi=(t,r,n)=>!ga(r)&&(dL(t.dom,r).isNone()||dD(t.dom,r).isNone()||m1(t,r,n)||m2(t,r,n)||m9(t,r,n)||m4(t,r,n)||gn(t,r,n)||go(t,r,n)),gs=(t,r,n)=>!ga(r)&&(m1(t,r,n)||m3(t,r,n)||m9(t,r,n)||gn(t,r,n)||((t,r)=>{let n=dL(t.dom,r).getOr(r),o=gl(t.dom,"prev");return r.isAtStart()&&(o(r.container())||o(n.container()))})(t,r)),gd=(t,r,n)=>!ga(r)&&(m2(t,r,n)||m8(t,r,n)||m4(t,r,n)||go(t,r,n)||((t,r)=>{let n=dD(t.dom,r).getOr(r),o=gl(t.dom,"next");return r.isAtEnd()&&(o(r.container())||o(n.container()))})(t,r)),gc=(t,r,n)=>gs(t,r,n)||gd(t,(t=>{let r=t.container(),n=t.offset();return n$(r)&&n<r.data.length?lH(r,n+1):t})(r),n),gu=(t,r)=>dJ(t.charAt(r)),gm=(t,r)=>d0(t.charAt(r)),gg=(t,r,n,o)=>{let a=r.data,l=lH(r,0);return n||!gu(a,0)||gc(t,l,o)?!!(n&&gm(a,0)&&gs(t,l,o))&&(r.data="\xa0"+a.slice(1),!0):(r.data=" "+a.slice(1),!0)},gf=(t,r,n,o)=>{let a=r.data,l=lH(r,a.length-1);return n||!gu(a,a.length-1)||gc(t,l,o)?!!(n&&gm(a,a.length-1)&&gd(t,l,o))&&(r.data=a.slice(0,-1)+"\xa0",!0):(r.data=a.slice(0,-1)+" ",!0)},gp=(t,r,n)=>{let o=r.container();return n$(o)?(t=>{let r=t.container();return n$(r)&&e6(r.data,"\xa0")})(r)?tV(gg(t,o,!1,n)||(t=>{let r=t.data,n=(t=>{let r=t.split("");return es(r,(t,n)=>dJ(t)&&n>0&&n<r.length-1&&d1(r[n-1])&&d1(r[n+1])?" ":t).join("")})(r);return n!==r&&(t.data=n,!0)})(o)||gf(t,o,!1,n),r):gc(t,r,n)?tV(gg(t,o,!0,n)||gf(t,o,!0,n),r):et.none():et.none()},gh=(t,r,n,o)=>{if(0===n)return;let a=ru(t),l=rW(a,t=>o.isBlock(tG(t))).getOr(a),i=t.data.slice(r,r+n),s=r+n>=t.data.length&&gd(l,lH(t,t.data.length),o),d=0===r&&gs(l,lH(t,0),o);t.replaceData(r,n,nO(i,4,d,s))},gb=(t,r,n)=>{let o=t.data.slice(r);gh(t,r,o.length-tt(o).length,n)},gv=(t,r,n)=>{let o=t.data.slice(0,r),a=o.length-tr(o).length;gh(t,r-a,a,n)},gy=(t,r,n,o,a=!0)=>{let l=tr(t.data).length,i=a?t:r,s=a?r:t;return a?i.appendData(s.data):i.insertData(0,s.data),nl(ru(s)),o&&gb(i,l,n),i},gC=(t,r)=>((t,r)=>{let n=t.container(),o=t.offset();return!lH.isTextPosition(t)&&n===r.parentNode&&o>lH.before(r).offset()})(r,t)?lH(r.container(),r.offset()-1):r,gE=t=>{var r;return lN(t.previousSibling)?et.some(n$(r=t.previousSibling)?lH(r,r.data.length):lH.after(r)):t.previousSibling?dF(t.previousSibling):et.none()},gw=t=>{var r;return lN(t.nextSibling)?et.some(n$(r=t.nextSibling)?lH(r,0):lH.before(r)):t.nextSibling?dM(t.nextSibling):et.none()},gx=(t,r,n)=>(t?gw(n).orThunk(()=>gE(n)).orThunk(()=>dD(r,lH.after(n)).orThunk(()=>dL(r,lH.before(n)))):gE(n).orThunk(()=>gw(n)).orThunk(()=>et.from(n.previousSibling?n.previousSibling:n.parentNode).bind(t=>dL(r,lH.before(t))).orThunk(()=>dD(r,lH.after(n))))).map(Y(gC,n)),g_=(t,r,n)=>{n.fold(()=>{t.focus()},n=>{t.selection.setRng(n.toRange(),r)})},gk=(t,r)=>r&&eH(t.schema.getBlockElements(),tG(r)),gS=(t,r,n,o=!0,a=!1)=>{var l;let i=gx(r,t.getBody(),n.dom),s=rW(n,Y(gk,t),(l=t.getBody(),t=>t.dom===l)),d=((t,r,n,o)=>{let a=rN(t).filter(t0),l=rR(t).filter(t0);return nl(t),(a.isSome()&&l.isSome()&&r.isSome()?et.some(((t,r,a)=>{let l=t.dom,i=r.dom,s=l.data.length;return gy(l,i,n,o),a.container()===i?lH(l,s):a})(a.getOrDie(),l.getOrDie(),r.getOrDie())):et.none()).orThunk(()=>(o&&(a.each(t=>gv(t.dom,t.dom.length,n)),l.each(t=>gb(t.dom,0,n))),r))})(n,i,t.schema,eH(t.schema.getTextInlineElements(),tG(n)));t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):s.bind(r=>((t,r,n)=>{if(oe(t,r)){let t=rm('<br data-mce-bogus="1">');return n?ed(rO(r),t=>{c_(t)||nl(t)}):na(r),nr(r,t),et.some(lH.before(t.dom))}return et.none()})(t.schema,r,a)).fold(()=>{o&&g_(t,r,d)},n=>{o&&g_(t,r,et.some(n))})},gN=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,gR=(t,r)=>rb(ru(r),iX(t))&&!ob(t.schema,r)&&t.dom.isEditable(r),gA=t=>{var r,n;return"rtl"===ax.DOM.getStyle(t,"direction",!0)||(n=null!==(r=t.textContent)&&void 0!==r?r:"",gN.test(n))},gT=(t,r,n)=>{let o=em(ax.DOM.getParents(n.container(),"*",r),t);return et.from(o[o.length-1])},gO=(t,r)=>{let n=r.container(),o=r.offset();return t?lo(n)?n$(n.nextSibling)?lH(n.nextSibling,0):lH.after(n):li(r)?lH(n,o+1):r:lo(n)?n$(n.previousSibling)?lH(n.previousSibling,n.previousSibling.data.length):lH.before(n):ls(r)?lH(n,o-1):r},gB=Y(gO,!0),gP=Y(gO,!1),gD=(t,r)=>{let n=t=>t.stopImmediatePropagation();t.on("beforeinput input",n,!0),t.getDoc().execCommand(r),t.off("beforeinput input",n)},gL=t=>gD(t,"Delete"),gM=t=>a8(t)||a6(t),gF=(t,r)=>rC(t,r)?rK(r,gM,r=>tj(r_(r),t,ry)):et.none(),gI=(t,r=!0)=>{t.dom.isEmpty(t.getBody())&&t.setContent("",{no_selection:!r})},gU=(t,r,n)=>t$(dM(n),dF(n),(o,a)=>{let l=gO(!0,o),i=gO(!1,a),s=gO(!1,r);return t?dD(n,s).exists(t=>t.isEqual(i)&&r.isEqual(l)):dL(n,s).exists(t=>t.isEqual(l)&&r.isEqual(i))}).getOr(!0),gz=t=>(8===tX(t)||"#comment"===tG(t)?rN(t):rD(t)).bind(gz).orThunk(()=>et.some(t)),gj=(t,r,n,o=!0)=>{var a;r.deleteContents();let l=gz(n).getOr(n),i=ru(null!==(a=t.dom.getParent(l.dom,t.dom.isBlock))&&void 0!==a?a:n.dom);i.dom===t.getBody()?gI(t,o):oe(t.schema,i,{checkRootAsContent:!1})&&(lt(i),o&&t.selection.setCursorLocation(i.dom,0)),ry(n,i)||ed((tj(r_(i),n)?[]:r_(i).map(rO).map(t=>em(t,t=>!ry(i,t))).getOr([])).concat(rO(n)),r=>{ry(r,i)||rC(r,i)||!oe(t.schema,r)||nl(r)})},gH=t=>nw(t,"td,th"),g$=(t,r)=>d5(ru(t),r),gV=(t,r)=>({start:t,end:r}),gq=ie([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),gW=(t,r)=>rZ(ru(t),"td,th",r),gK=t=>!ry(t.start,t.end),gY=(t,r)=>d5(t.start,r).bind(n=>d5(t.end,r).bind(t=>tV(ry(n,t),n))),gG=t=>r=>gY(r,t).map(t=>({rng:r,table:t,cells:gH(t)})),gX=(t,r,n,o)=>{if(n.collapsed||!t.forall(gK))return et.none();if(r.isSameTable){let r=t.bind(gG(o));return et.some({start:r,end:r})}{let t=gW(n.startContainer,o),r=gW(n.endContainer,o),a=t.bind(t=>d5(t,o).bind(r=>eN(gH(r)).map(r=>gV(t,r)))).bind(gG(o)),l=r.bind(t=>d5(t,o).bind(r=>eS(gH(r)).map(r=>gV(r,t)))).bind(gG(o));return et.some({start:a,end:l})}},gZ=(t,r)=>eb(t,t=>ry(t,r)),gQ=t=>t$(gZ(t.cells,t.rng.start),gZ(t.cells,t.rng.end),(r,n)=>t.cells.slice(r,n+1)),gJ=(t,r)=>{let{startTable:n,endTable:o}=r,a=t.cloneRange();return n.each(t=>a.setStartAfter(t.dom)),o.each(t=>a.setEndBefore(t.dom)),a},g0=(t,r)=>{let n=r=>ry(t,r),o=t$(gW(r.startContainer,n),gW(r.endContainer,n),gV),a=((t,r)=>{var n;let o=g$(t.startContainer,r),a=g$(t.endContainer,r),l=o.isSome(),i=a.isSome(),s=t$(o,a,ry).getOr(!1);return t$((n={startTable:o,endTable:a,isStartInTable:l,isEndInTable:i,isSameTable:s,isMultiTable:!s&&l&&i}).startTable,n.endTable,(t,r)=>{let o=nk(t,t=>ry(t,r)),a=nk(r,r=>ry(r,t));return o||a?{...n,startTable:o?et.none():n.startTable,endTable:a?et.none():n.endTable,isSameTable:!1,isMultiTable:!1}:n}).getOr(n)})(r,n);return o.exists(t=>!gK(t)&&gY(t,n).exists(t=>{let r=t.dom.rows;return 1===r.length&&1===r[0].cells.length})&&d9(t.start,r))?o.map(t=>gq.singleCellTable(r,t.start)):a.isMultiTable?gX(o,a,r,n).bind(({start:t,end:n})=>{let o=t.bind(gQ).getOr([]),l=n.bind(gQ).getOr([]);if(o.length>0&&l.length>0){let t=gJ(r,a);return et.some(gq.multiTable(o,l,t))}return et.none()}):gX(o,a,r,n).bind(({start:t,end:r})=>t.or(r)).bind(t=>{let{isSameTable:n}=a,o=gQ(t).getOr([]);if(n&&t.cells.length===o.length)return et.some(gq.fullTable(t.table));if(o.length>0){if(n)return et.some(gq.partialTable(o,et.none()));{let t=gJ(r,a);return et.some(gq.partialTable(o,et.some({...a,rng:t})))}}return et.none()})},g1=t=>ed(t,t=>{re(t,"contenteditable"),lt(t)}),g2=(t,r,n,o)=>{let a=n.cloneRange();o?(a.setStart(n.startContainer,n.startOffset),a.setEndAfter(r.dom.lastChild)):(a.setStartBefore(r.dom.firstChild),a.setEnd(n.endContainer,n.endOffset)),g6(t,a,r,!1).each(t=>t())},g3=t=>{let r=d8(t),n=ru(t.selection.getNode());nJ(n.dom)&&oe(t.schema,n)?t.selection.setCursorLocation(n.dom,0):t.selection.collapse(!0),r.length>1&&ei(r,t=>ry(t,n))&&t5(n,"data-mce-selected","1")},g8=(t,r,n)=>et.some(()=>{let o=t.selection.getRng();g1(n.bind(({rng:n,isStartInTable:a})=>{var l;let i=(l=a?n.endContainer:n.startContainer,et.from(t.dom.getParent(l,t.dom.isBlock)).map(ru));n.deleteContents(),((t,r,n)=>{n.each(n=>{r?nl(n):(lt(n),t.selection.setCursorLocation(n.dom,0))})})(t,a,i.filter(Y(oe,t.schema)));let s=a?r[0]:r[r.length-1];return g2(t,s,o,a),oe(t.schema,s)?et.none():et.some(a?r.slice(1):r.slice(0,-1))}).getOr(r)),g3(t)}),g5=(t,r,n,o)=>et.some(()=>{let a=t.selection.getRng(),l=r[0],i=n[n.length-1];g2(t,l,a,!0),g2(t,i,a,!1);let s=oe(t.schema,l)?r:r.slice(1),d=oe(t.schema,i)?n:n.slice(0,-1);g1(s.concat(d)),o.deleteContents(),g3(t)}),g6=(t,r,n,o=!0)=>et.some(()=>{gj(t,r,n,o)}),g4=(t,r)=>et.some(()=>gS(t,!1,r)),g9=(t,r)=>eh(mX(r,t),a9),g7=(t,r)=>eh(mX(r,t),t3("caption")),fe=(t,r)=>et.some(()=>{lt(r),t.selection.setCursorLocation(r.dom,0)}),ft=(t,r)=>t?mq(r):mW(r),fr=(t,r,n)=>{let o=ru(t.getBody());return g7(o,n).fold(()=>((t,r,n,o)=>{let a=lH.fromRangeStart(t.selection.getRng());return g9(n,o).bind(o=>oe(t.schema,o,{checkRootAsContent:!1})?fe(t,o):dO(r,t.getBody(),a).bind(t=>g9(n,ru(t.getNode())).bind(t=>ry(t,o)?et.none():et.some(H))))})(t,r,o,n).orThunk(()=>tV(((t,r)=>{let n=lH.fromRangeStart(t.selection.getRng());return ft(r,n)||dT(r,t.getBody(),n).exists(t=>ft(r,t))})(t,r),H)),n=>((t,r,n,o)=>{let a=lH.fromRangeStart(t.selection.getRng());return oe(t.schema,o)?fe(t,o):dO(r,t.getBody(),a).fold(()=>et.some(H),l=>dM(o.dom).bind(t=>dF(o.dom).map(n=>r?a.isEqual(t)&&l.isEqual(n):a.isEqual(n)&&l.isEqual(t))).getOr(!0)?fe(t,o):g7(n,ru(l.getNode())).fold(()=>et.some(H),t=>tV(!ry(t,o),H)))})(t,r,o,n))},fn=(t,r)=>{let n=ru(t.selection.getStart(!0)),o=d8(t);return t.selection.isCollapsed()&&0===o.length?fr(t,r,n):((t,r,n)=>{let o=ru(t.getBody()),a=t.selection.getRng();return 0!==n.length?g8(t,n,et.none()):g7(o,r).fold(()=>g0(o,a).bind(r=>r.fold(Y(g6,t),Y(g4,t),Y(g8,t),Y(g5,t))),r=>fe(t,r))})(t,n,o)},fo=(t,r)=>{let n=r;for(;n&&n!==t;){if(nZ(n)||nQ(n))return n;n=n.parentNode}return null},fa=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],fl=tz.each,fi=t=>{let r=t.dom,n=new Set(t.serializer.getTempAttrs()),o=t=>ei(fa,r=>e4(t,r))||n.has(t);return{compare:(t,n)=>{if(t.nodeName!==n.nodeName||t.nodeType!==n.nodeType)return!1;let a=t=>{let n={};return fl(r.getAttribs(t),a=>{let l=a.nodeName.toLowerCase();"style"===l||o(l)||(n[l]=r.getAttrib(t,l))}),n},l=(t,r)=>{for(let n in t)if(eH(t,n)){let o=r[n];if(M(o)||t[n]!==o)return!1;delete r[n]}for(let t in r)if(eH(r,t))return!1;return!0};return(!(nD(t)&&nD(n))||!!l(a(t),a(n))&&!!l(r.parseStyle(r.getAttrib(t,"style")),r.parseStyle(r.getAttrib(n,"style"))))&&!dQ(t)&&!dQ(n)},isAttributeInternal:o}},fs=t=>["h1","h2","h3","h4","h5","h6"].includes(t.name),fd=(t,r,n,o)=>{let a=n.name;for(let r=0,l=t.length;r<l;r++){let l=t[r];if(l.name===a){let t=o.nodes[a];t?t.nodes.push(n):o.nodes[a]={filter:l,nodes:[n]}}}if(n.attributes)for(let t=0,a=r.length;t<a;t++){let a=r[t],l=a.name;if(l in n.attributes.map){let t=o.attributes[l];t?t.nodes.push(n):o.attributes[l]={filter:a,nodes:[n]}}}},fc=(t,r)=>{let n=(t,n)=>{eP(t,t=>{let o=eR(t.nodes);ed(t.filter.callbacks,a=>{for(let r=o.length-1;r>=0;r--){let a=o[r];((n?void 0===a.attr(t.filter.name):a.name!==t.filter.name)||F(a.parent))&&o.splice(r,1)}o.length>0&&a(o,t.filter.name,r)})})};n(t.nodes,!1),n(t.attributes,!0)},fu=(t,r,n,o={})=>{fc(((t,r,n)=>{let o={nodes:{},attributes:{}};return n.firstChild&&((n,a)=>{let l=n;for(;l=l.walk();)fd(t,r,l,o)})(n),o})(t,r,n),o)},fm=(t,r,n,o)=>{if((t.pad_empty_with_br||r.insert)&&n(o)){let t=new mc("br",1);r.insert&&t.attr("data-mce-bogus","1"),o.empty().append(t)}else o.empty().append(new mc("#text",3)).value="\xa0"},fg=(t,r)=>{let n=null==t?void 0:t.firstChild;return I(n)&&n===t.lastChild&&n.name===r},ff=(t,r,n,o)=>o.isEmpty(r,n,r=>((t,r)=>{let n=t.getElementRule(r.name);return!0===(null==n?void 0:n.paddEmpty)})(t,r)),fp=t=>{let r;for(let n=t;n;n=n.parent){let t=n.attr("contenteditable");if("false"===t)break;"true"===t&&(r=n)}return et.from(r)},fh=(t,r,n=t.parent)=>{if(r.getSpecialElements()[t.name])t.empty().remove();else{for(let o of t.children())n&&!r.isValidChild(n.name,o.name)&&fh(o,r,n);t.unwrap()}},fb=(t,r,n,o=H)=>{let a=r.getTextBlockElements(),l=r.getNonEmptyElements(),i=r.getWhitespaceElements(),s=tz.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),d=new Set,c=t=>t!==n&&!s[t.name];for(let n=0;n<t.length;n++){let s,u,m;let g=t[n];if(!g.parent||d.has(g))continue;if(a[g.name]&&"li"===g.parent.name){let t=g.next;for(;t&&a[t.name];)t.name="li",d.add(t),g.parent.insert(t,g.parent),t=t.next;g.unwrap();continue}let f=[g];for(s=g.parent;s&&!r.isValidChild(s.name,g.name)&&c(s);s=s.parent)f.push(s);if(s&&f.length>1){if(fv(r,g,s))fh(g,r);else{f.reverse(),o(u=f[0].clone());let t=u;for(let n=0;n<f.length-1;n++){r.isValidChild(t.name,f[n].name)&&n>0?(o(m=f[n].clone()),t.append(m)):m=t;for(let t=f[n].firstChild;t&&t!==f[n+1];){let r=t.next;m.append(t),t=r}t=m}ff(r,l,i,u)?s.insert(g,f[0],!0):(s.insert(u,f[0],!0),s.insert(g,u)),(ff(r,l,i,s=f[0])||fg(s,"br"))&&s.empty().remove()}}else if(g.parent){if("li"===g.name){let t=g.prev;if(t&&("ul"===t.name||"ol"===t.name)){t.append(g);continue}if((t=g.next)&&("ul"===t.name||"ol"===t.name)&&t.firstChild){t.insert(g,t.firstChild,!0);continue}let r=new mc("ul",1);o(r),g.wrap(r);continue}if(r.isValidChild(g.parent.name,"div")&&r.isValidChild("div",g.name)){let t=new mc("div",1);o(t),g.wrap(t)}else fh(g,r)}}},fv=(t,r,n=r.parent)=>!(!n||(!t.children[r.name]||t.isValidChild(n.name,r.name))&&("a"!==r.name||!((t,r)=>{let n=t;for(;n;){if("a"===n.name)return!0;n=n.parent}return!1})(n))&&("summary"!==n.name||!fs(r)||(null==n?void 0:n.firstChild)===r&&(null==n?void 0:n.lastChild)===r)),fy=t=>t.collapsed?t:(t=>{let r=lH.fromRangeStart(t),n=lH.fromRangeEnd(t),o=t.commonAncestorContainer;return dT(!1,o,n).map(a=>!dd(r,n,o)&&dd(r,a,o)?((t,r,n,o)=>{let a=document.createRange();return a.setStart(t,r),a.setEnd(n,o),a})(r.container(),r.offset(),a.container(),a.offset()):t).getOr(t)})(t),fC=(t,r)=>{let n=r.firstChild,o=r.lastChild;return n&&"meta"===n.name&&(n=n.next),o&&"mce_marker"===o.attr("id")&&(o=o.prev),((t,r)=>{var n,o;let a=t.getNonEmptyElements();return I(r)&&(r.isEmpty(a)||t.getBlockElements()[r.name]&&I((n=r).firstChild)&&n.firstChild===n.lastChild&&("br"===(o=r.firstChild).name||"\xa0"===o.value))})(t,o)&&(o=null==o?void 0:o.prev),!(!n||n!==o||"ul"!==n.name&&"ol"!==n.name)},fE=t=>{var r,n;return t.length>0&&(!(r=t[t.length-1]).firstChild||I(null==r?void 0:r.firstChild)&&r.firstChild===r.lastChild&&("\xa0"===(n=r.firstChild).data||nG(n)))?t.slice(0,-1):t},fw=(t,r)=>{let n=t.getParent(r,t.isBlock);return n&&"LI"===n.nodeName?n:null},fx=(t,r)=>{let n=lH.after(t),o=dS(r).prev(n);return o?o.toRange():null},f_=(t,r,n,o)=>{var a,l;let i=((t,r,n)=>{let o=r.serialize(n);return(t=>{var r,n;let o=t.firstChild,a=t.lastChild;return o&&"META"===o.nodeName&&(null===(r=o.parentNode)||void 0===r||r.removeChild(o)),a&&"mce_marker"===a.id&&(null===(n=a.parentNode)||void 0===n||n.removeChild(a)),t})(t.createFragment(o))})(r,t,o),s=fw(r,n.startContainer),d=fE(em(null!==(l=null==(a=i.firstChild)?void 0:a.childNodes)&&void 0!==l?l:[],t=>"LI"===t.nodeName)),c=r.getRoot(),u=t=>{let o=lH.fromRangeStart(n),a=dS(r.getRoot()),l=1===t?a.prev(o):a.next(o),i=null==l?void 0:l.getNode();return!i||fw(r,i)!==s};return s?u(1)?((t,r,n)=>{let o=t.parentNode;return o&&tz.each(r,r=>{o.insertBefore(r,t)}),((t,r)=>{let n=lH.before(t),o=dS(r).next(n);return o?o.toRange():null})(t,n)})(s,d,c):u(2)?(r.insertAfter(d.reverse(),s),fx(d[0],c)):((t,r,n,o)=>{let a=((t,r)=>{let n=r.cloneRange(),o=r.cloneRange();return n.setStartBefore(t),o.setEndAfter(t),[n.cloneContents(),o.cloneContents()]})(t,o),l=t.parentNode;return l&&(l.insertBefore(a[0],t),tz.each(r,r=>{l.insertBefore(r,t)}),l.insertBefore(a[1],t),l.removeChild(t)),fx(r[r.length-1],n)})(s,d,c,n):null},fk=["pre"],fS=(t,r,n)=>{var o,a,l,i,s;let d=t.selection,c=t.dom,u=t.parser,m=n.merge,g=mA({validate:!0},t.schema),f='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(r=lr(r)),-1===r.indexOf("{$caret}")&&(r+="{$caret}"),r=r.replace(/\{\$caret\}/,f);let p=d.getRng(),h=p.startContainer,b=t.getBody();h===b&&d.isCollapsed()&&c.isBlock(b.firstChild)&&I(i=b.firstChild)&&!t.schema.getVoidElements()[i.nodeName]&&c.isEmpty(b.firstChild)&&((p=c.createRng()).setStart(b.firstChild,0),p.setEnd(b.firstChild,0),d.setRng(p)),d.isCollapsed()||(t=>{let r=t.dom,n=fy(t.selection.getRng());t.selection.setRng(n);let o=r.getParent(n.startContainer,nJ);I(o)&&o===r.getParent(n.endContainer,nJ)&&d9(ru(o),n)?g6(t,n,ru(o)):n.startContainer===n.endContainer&&n.endOffset-n.startOffset==1&&n$(n.startContainer.childNodes[n.startOffset])?n.deleteContents():t.getDoc().execCommand("Delete",!1)})(t);let v=d.getNode(),y={context:v.nodeName.toLowerCase(),data:n.data,insert:!0},C=u.parse(r,y);if(!0===n.paste&&fC(t.schema,C)&&fw(c,v))return(p=f_(g,c,d.getRng(),C))&&d.setRng(p),r;!0===n.paste&&((t,r,n,o)=>{var a;let l=r.firstChild,i=r.lastChild,s=l===("bookmark"===i.attr("data-mce-type")?i.prev:i),d=el(fk,l.name);if(s&&d){let r="false"!==l.attr("contenteditable"),i=(null===(a=t.getParent(n,t.isBlock))||void 0===a?void 0:a.nodeName.toLowerCase())===l.name,s=et.from(fo(o,n)).forall(nZ);return r&&i&&s}return!1})(c,C,v,t.getBody())&&(null===(o=C.firstChild)||void 0===o||o.unwrap()),(t=>{let r=t;for(;r=r.walk();)1===r.type&&r.attr("data-mce-fragment","1")})(C);let E=C.lastChild;if(E&&"mce_marker"===E.attr("id")){let r=E;for(E=E.prev;E;E=E.walk(!0))if(3===E.type||!c.isBlock(E.name)){E.parent&&t.schema.isValidChild(E.parent.name,"span")&&E.parent.insert(r,E,"br"===E.name);break}}if(t._selectionOverrides.showBlockCaretContainer(v),y.invalid||ei(C.children(),fs)&&"SUMMARY"===(null===(s=c.getParent(v,c.isBlock))||void 0===s?void 0:s.nodeName)){t.selection.setContent(f);let n,o=d.getNode(),l=t.getBody();for(nK(o)?o=n=l:n=o;n&&n!==l;)o=n,n=n.parentNode;r=o===l?l.innerHTML:c.getOuterHTML(o);let i=u.parse(r),s=(t=>{for(let r=t;r;r=r.walk())if("mce_marker"===r.attr("id"))return et.some(r);return et.none()})(i),m=s.bind(fp).getOr(i);s.each(t=>t.replace(C));let p=C.children(),h=null!==(a=C.parent)&&void 0!==a?a:i;C.unwrap(),fb(em(p,r=>fv(t.schema,r,h)),t.schema,m),fu(u.getNodeFilters(),u.getAttributeFilters(),i),r=g.serialize(i),o===l?c.setHTML(l,r):c.setOuterHTML(o,r)}else((t,r,n)=>{var o;if("all"===n.getAttribute("data-mce-bogus"))null===(o=n.parentNode)||void 0===o||o.insertBefore(t.dom.createFragment(r),n);else{let o=n.firstChild,a=n.lastChild;o&&(o!==a||"BR"!==o.nodeName)?t.selection.setContent(r,{no_events:!0}):t.dom.setHTML(n,r)}})(t,r=g.serialize(C),v);return((t,r)=>{let n=t.schema.getTextInlineElements(),o=t.dom;if(r){let r=t.getBody(),a=fi(t);tz.each(o.select("*[data-mce-fragment]"),t=>{if(I(n[t.nodeName.toLowerCase()])&&eC(mB(o,t),t=>!mT.has(t))){for(let n=t.parentElement;I(n)&&n!==r&&!mP(o,t,n);n=n.parentElement)if(a.compare(n,t)){o.remove(t,!0);break}}})}})(t,m),((t,r)=>{var n,o,a,l;let i;let s=t.dom,d=t.selection;if(!r)return;d.scrollIntoView(r);let c=fo(t.getBody(),r);if(c&&"false"===s.getContentEditable(c))return s.remove(r),void d.select(c);let u=s.createRng(),m=r.previousSibling;if(n$(m)){u.setStart(m,null!==(o=null===(n=m.nodeValue)||void 0===n?void 0:n.length)&&void 0!==o?o:0);let t=r.nextSibling;n$(t)&&(m.appendData(t.data),null===(a=t.parentNode)||void 0===a||a.removeChild(t))}else u.setStartBefore(r),u.setEndBefore(r);let g=s.getParent(r,s.isBlock);if(s.remove(r),g&&s.isEmpty(g)){let r;let n=nJ(g);na(ru(g)),u.setStart(g,0),u.setEnd(g,0),n||g.getAttribute("data-mce-fragment")||(l=u,r=lH.fromRangeStart(l),!(i=null==(r=dS(t.getBody()).next(r))?void 0:r.toRange()))?s.add(g,s.create("br",n?{}:{"data-mce-bogus":"1"})):(u=i,s.remove(g))}d.setRng(u)})(t,c.get("mce_marker")),l=t.getBody(),tz.each(l.getElementsByTagName("*"),t=>{t.removeAttribute("data-mce-fragment")}),((t,r,n)=>{et.from(t.getParent(r,"td,th")).map(ru).each(t=>((t,r)=>{rD(t).each(n=>{rN(n).each(o=>{r.isBlock(tG(t))&&a3(n)&&r.isBlock(tG(o))&&nl(n)})})})(t,n))})(c,d.getStart(),t.schema),((t,r,n)=>{let o=rS(ru(n),t=>ry(t,ru(r)));ek(o,o.length-2).filter(tJ).fold(()=>om(t,r),r=>om(t,r.dom))})(t.schema,t.getBody(),d.getStart()),r},fN=t=>t instanceof mc,fR=(t,r,n)=>{t.dom.setHTML(t.getBody(),r),!0!==n&&u4(t)&&dM(t.getBody()).each(r=>{let n=r.getNode(),o=nz(n)?dM(n).getOr(r):r;t.selection.setRng(o.toRange())})},fA=t=>U(t)?t:J,fT=(t,r,n)=>{let o=r(t),a=fA(n);return o.orThunk(()=>a(t)?et.none():((t,r,n)=>{let o=t.dom,a=fA(n);for(;o.parentNode;){let t=ru(o=o.parentNode),n=r(t);if(n.isSome())return n;if(a(t))break}return et.none()})(t,r,a))},fO=(t,r,n)=>{let o=t.formatter.get(n);if(o)for(let n=0;n<o.length;n++){let a=o[n];if(cC(a)&&!1===a.inherit&&t.dom.is(r,a.selector))return!0}return!1},fB=(t,r,n,o,a)=>{let l=t.dom.getRoot();if(r===l)return!1;let i=t.dom.getParent(r,r=>!!fO(t,r,n)||r.parentNode===l||!!fL(t,r,n,o,!0));return!!fL(t,i,n,o,a)},fP=(t,r,n)=>!(!cE(n)||!cg(r,n.inline))||!(!cy(n)||!cg(r,n.block))||!!cC(n)&&nD(r)&&t.is(r,n.selector),fD=(t,r,n,o,a,l)=>{let i=n[o],s="attributes"===o;if(U(n.onmatch))return n.onmatch(r,n,o);if(i){if(eq(i))for(let n=0;n<i.length&&(s?!t.getAttrib(r,i[n]):!cp(t,r,i[n]));n++);else for(let o in i)if(eH(i,o)){let d=s?t.getAttrib(r,o):cp(t,r,o),c=cm(i[o],l),u=F(d)||to(d);if(u&&F(c))continue;if(a&&u&&!n.exact||(!a||n.exact)&&!cg(d,cf(c,o)))return!1}}return!0},fL=(t,r,n,o,a)=>{let l=t.formatter.get(n),i=t.dom;if(l&&nD(r))for(let n=0;n<l.length;n++){let s=l[n];if(fP(t.dom,r,s)&&fD(i,r,s,"attributes",a,o)&&fD(i,r,s,"styles",a,o)){let n=s.classes;if(n){for(let a=0;a<n.length;a++)if(!t.dom.hasClass(r,cm(n[a],o)))return}return s}}},fM=(t,r,n,o,a)=>{if(o)return fB(t,o,r,n,a);if(o=t.selection.getNode(),fB(t,o,r,n,a))return!0;let l=t.selection.getStart();return!(l===o||!fB(t,l,r,n,a))},fF=t=>{if(t){let r=new nS(t,t);for(let t=r.current();t;t=r.next())if(n$(t))return t}return null},fI=t=>{let r=rg("span");return t6(r,{id:dI,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&nr(r,rf("\uFEFF")),r},fU=(t,r,n)=>{let o=t.dom,a=t.selection;if(cx(r))gS(t,!1,ru(r),n,!0);else{let t=a.getRng(),n=o.getParent(r,o.isBlock),l=t.startContainer,i=t.startOffset,s=t.endContainer,d=t.endOffset,c=(t=>{let r=fF(t);return r&&"\uFEFF"===r.data.charAt(0)&&r.deleteData(0,1),r})(r);o.remove(r,!0),l===c&&i>0&&t.setStart(c,i-1),s===c&&d>0&&t.setEnd(c,d-1),n&&o.isEmpty(n)&&lt(ru(n)),a.setRng(t)}},fz=(t,r,n)=>{let o=t.dom,a=t.selection;if(r)fU(t,r,n);else if(!(r=dz(t.getBody(),a.getStart())))for(;r=o.get(dI);)fU(t,r,n)},fj=(t,r)=>(t.appendChild(r),r),fH=(t,r)=>{var n;let o=eg(t,(t,r)=>fj(t,r.cloneNode(!1)),r),a=null!==(n=o.ownerDocument)&&void 0!==n?n:document;return fj(o,a.createTextNode("\uFEFF"))},f$=(t,r,n,o)=>{let a;let l=t.dom,i=t.selection,s=!1,d=t.formatter.get(r);if(!d)return;let c=i.getRng(),u=c.startContainer,m=c.startOffset,g=u;n$(u)&&(m!==u.data.length&&(s=!0),g=g.parentNode);let f=[];for(;g;){if(fL(t,g,r,n,o)){a=g;break}g.nextSibling&&(s=!0),f.push(g),g=g.parentNode}if(a){if(s){let a=i.getBookmark();c.collapse(!0);let s=cL(l,c,d,!0);s=uv(s),t.formatter.remove(r,n,s,o),i.moveToBookmark(a)}else{let s=dz(t.getBody(),a),d=I(s)?l.getParents(a.parentNode,ee,s):[],c=fI(!1).dom;((t,r,n)=>{var o,a;let l=t.dom,i=l.getParent(n,Y(cs,t.schema));i&&l.isEmpty(i)?null===(o=n.parentNode)||void 0===o||o.replaceChild(r,n):((t=>{let r=nw(t,"br"),n=em((t=>{let r=[],n=t.dom;for(;n;)r.push(ru(n)),n=n.lastChild;return r})(t).slice(-1),a3);r.length===n.length&&ed(n,nl)})(ru(n)),l.isEmpty(n)?null===(a=n.parentNode)||void 0===a||a.replaceChild(r,n):l.insertAfter(r,n))})(t,c,null!=s?s:a);let u=fH([...f,...((t,r,n,o,a,l)=>{let i=t.formatter,s=t.dom,d=em(eO(i.get()),t=>t!==o&&!e6(t,"removeformat"));if(em(ef(d,(r,o)=>{let a=cv(t,o,t=>{let r=t=>U(t)||t.length>1&&"%"===t.charAt(0);return ei(["styles","attributes"],n=>ej(t,n).exists(t=>ei(P(t)?t:ez(t),r)))});return t.formatter.matchNode(n,o,{},a)?r.concat([o]):r},[]),r=>!((t,r,n)=>{let o=["inline","block","selector","attributes","styles","classes"],a=t=>eI(t,(t,r)=>ei(o,t=>t===r));return cv(t,r,r=>{let o=a(r);return cv(t,n,t=>((t,r,n=x)=>w(n).eq(t,r))(o,a(t)))})})(t,r,o)).length>0){let t=n.cloneNode(!1);return s.add(r,t),i.remove(o,a,t,l),s.remove(t),et.some(t)}return et.none()})(t,c,a,r,n,o).toArray(),...d],c);s&&fU(t,s,I(s)),i.setCursorLocation(u,1),l.isEmpty(a)&&l.remove(a)}}},fV=t=>{let r=fI(!1),n=fH(t,r.dom);return{caretContainer:r,caretPosition:lH(n,0)}},fq=(t,r)=>{let{caretContainer:n,caretPosition:o}=fV(r);return r7(ru(t),n),nl(ru(t)),o},fW=(t,r)=>!dU(r.dom)&&eH(t.schema.getTextInlineElements(),tG(r))&&!dU(r.dom)&&!nU(r.dom),fK={},fY=nF(["pre"]);fK.pre||(fK.pre=[]),fK.pre.push(t=>{if(!t.selection.getRng().collapsed){let r=t.selection.getSelectedBlocks();ed(em(em(r,fY),t=>{let n=t.previousSibling;return fY(n)&&el(r,n)}),t=>{((t,r)=>{let n=ru(r),o=rw(n).dom;nl(n),no(ru(t),[rg("br",o),rg("br",o),...rO(n)])})(t.previousSibling,t)})}});let fG=["fontWeight","fontStyle","color","fontSize","fontFamily"],fX=(t,r)=>{let n=t.get(r);return P(n)?eh(n,t=>{var r;return cE(t)&&"span"===t.inline&&O((r=t).styles)&&ei(eO(r.styles),t=>el(fG,t))}):et.none()},fZ=(t,r)=>dL(r,lH.fromRangeStart(t)).isNone(),fQ=(t,r)=>!1===dD(r,lH.fromRangeEnd(t)).exists(t=>!nG(t.getNode())||dD(r,t).isSome()),fJ=t=>r=>n2(r)&&t.isEditable(r),f0=t=>em(t.getSelectedBlocks(),fJ(t.dom)),f1=tz.each,f2=t=>nD(t)&&!dQ(t)&&!dU(t)&&!nU(t),f3=(t,r)=>{for(let n=t;n&&!(n$(n)&&tn(n.data));n=n[r])if(nD(n)&&!dQ(n))return n;return t},f8=(t,r,n)=>{let o=fi(t),a=nL(r)&&t.dom.isEditable(r),l=nL(n)&&t.dom.isEditable(n);if(a&&l){let a=f3(r,"previousSibling"),l=f3(n,"nextSibling");if(o.compare(a,l)){for(let t=a.nextSibling;t&&t!==l;){let r=t;t=t.nextSibling,a.appendChild(r)}return t.dom.remove(l),tz.each(tz.grep(l.childNodes),t=>{a.appendChild(t)}),a}}return n},f5=(t,r,n,o)=>{var a;if(o&&!1!==r.merge_siblings){let r=null!==(a=f8(t,ci(o),o))&&void 0!==a?a:o;f8(t,r,ci(r,!0))}},f6=(t,r,n)=>{f1(t.childNodes,t=>{f2(t)&&(r(t)&&n(t),t.hasChildNodes()&&f6(t,r,n))})},f4=(t,r)=>n=>!(!n||!cp(t,n,r)),f9=(t,r,n)=>o=>{t.setStyle(o,r,n),""===o.getAttribute("style")&&o.removeAttribute("style"),"SPAN"===o.nodeName&&0===t.getAttribs(o).length&&t.remove(o,!0)},f7=ie([{keep:[]},{rename:["name"]},{removed:[]}]),pe=/^(src|href|style)$/,pt=tz.each,pr=(t,r,n)=>t.isChildOf(r,n)&&r!==n&&!t.isBlock(n),pn=(t,r,n)=>{let o=r[n?"startContainer":"endContainer"],a=r[n?"startOffset":"endOffset"];if(nD(o)){let t=o.childNodes.length-1;!n&&a&&a--,o=o.childNodes[a>t?t:a]}return n$(o)&&n&&a>=o.data.length&&(o=new nS(o,t.getBody()).next()||o),n$(o)&&!n&&0===a&&(o=new nS(o,t.getBody()).prev()||o),o},po=(t,r)=>{let n=r?"firstChild":"lastChild",o=t[n];return/^(TR|TH|TD)$/.test(t.nodeName)&&o?"TR"===t.nodeName&&o[n]||o:t},pa=(t,r,n,o)=>{var a;let l=t.create(n,o);return null===(a=r.parentNode)||void 0===a||a.insertBefore(l,r),l.appendChild(r),l},pl=(t,r,n,o,a)=>{let l=ru(r),i=ru(t.create(o,a));return no(i,n?rT(l):rA(l)),n?(r7(l,i),nt(i,l)):(ne(l,i),nr(i,l)),i.dom},pi=(t,r,n)=>{let o;let a=r.parentNode,l=t.dom,i=i_(t);cy(n)&&a===l.getRoot()&&(n.list_block&&cg(r,n.list_block)||ed(eR(r.childNodes),r=>{cd(t,i,r.nodeName.toLowerCase())?o?o.appendChild(r):(o=pa(l,r,i),l.setAttribs(o,ik(t))):o=null})),cC(n)&&cE(n)&&tj(ej(n,"mixed"),!0)&&!cg(n.inline,r)||l.remove(r,!0)},ps=(t,r,n)=>z(t)?{name:r,value:null}:{name:t,value:cm(r,n)},pd=(t,r)=>{""===t.getAttrib(r,"style")&&(r.removeAttribute("style"),r.removeAttribute("data-mce-style"))},pc=(t,r,n,o,a)=>{let l=!1;pt(n.styles,(i,s)=>{let{name:d,value:c}=ps(s,i,o),u=cf(c,d);(n.remove_similar||D(c)||!nD(a)||cg(cp(t,a,d),u))&&t.setStyle(r,d,""),l=!0}),l&&pd(t,r)},pu=(t,r,n,o,a)=>{let l=t.dom,i=fi(t),s=t.schema;if(cE(r)&&op(s,r.inline)&&ob(s,o)&&o.parentElement===t.getBody())return pi(t,o,r),f7.removed();if(!r.ceFalseOverride&&o&&"false"===l.getContentEditableParent(o)||o&&!fP(l,o,r)&&(!r.links||"A"!==o.nodeName))return f7.keep();let d=r.preserve_attributes;if(cE(r)&&"all"===r.remove&&P(d)){let t=em(l.getAttribs(o),t=>el(d,t.name.toLowerCase()));if(l.removeAllAttribs(o),ed(t,t=>l.setAttrib(o,t.name,t.value)),t.length>0)return f7.rename("span")}if("all"!==r.remove){pc(l,o,r,n,a),pt(r.attributes,(t,i)=>{let{name:s,value:d}=ps(i,t,n);if(r.remove_similar||D(d)||!nD(a)||cg(l.getAttrib(a,s),d)){if("class"===s){let t=l.getAttrib(o,s);if(t){let r="";if(ed(t.split(/\s+/),t=>{/mce\-\w+/.test(t)&&(r+=(r?" ":"")+t)}),r)return void l.setAttrib(o,s,r)}}if(pe.test(s)&&o.removeAttribute("data-mce-"+s),"style"===s&&nF(["li"])(o)&&"none"===l.getStyle(o,"list-style-type"))return o.removeAttribute(s),void l.setStyle(o,"list-style-type","none");"class"===s&&o.removeAttribute("className"),o.removeAttribute(s)}}),pt(r.classes,t=>{t=cm(t,n),nD(a)&&!l.hasClass(a,t)||l.removeClass(o,t)});let t=l.getAttribs(o);for(let r=0;r<t.length;r++){let n=t[r].nodeName;if(!i.isAttributeInternal(n))return f7.keep()}}return"none"!==r.remove?(pi(t,o,r),f7.removed()):f7.keep()},pm=(t,r,n,o)=>pu(t,r,n,o,o).fold(q(o),r=>(t.dom.createFragment().appendChild(o),t.dom.rename(o,r)),q(null)),pg=(t,r,n,o,a)=>{(o||t.selection.isEditable())&&((t,r,n,o,a)=>{let l=t.formatter.get(r),i=l[0],s=t.dom,d=t.selection,c=o=>{let s;let d=(o.parentNode&&ed(cb(t.dom,o.parentNode).reverse(),o=>{if(!s&&nD(o)&&"_start"!==o.id&&"_end"!==o.id){let l=fL(t,o,r,n,a);l&&!1!==l.split&&(s=o)}}),s);return((t,r,n,o,a,l,i,s)=>{var d,c;let u,m;let g=t.dom;if(n){let l=n.parentNode;for(let n=o.parentNode;n&&n!==l;n=n.parentNode){let o=g.clone(n,!1);for(let n=0;n<r.length&&null!==(o=pm(t,r[n],s,o));n++);o&&(u&&o.appendChild(u),m||(m=o),u=o)}i.mixed&&g.isBlock(n)||(o=null!==(d=g.split(n,o))&&void 0!==d?d:o),u&&m&&(null===(c=a.parentNode)||void 0===c||c.insertBefore(u,a),m.appendChild(a),cE(i)&&f5(t,i,0,u))}return o})(t,l,d,o,o,0,i,n)},u=r=>ei(l,o=>pf(t,o,n,r,r)),m=r=>{let n=eR(r.childNodes),o=u(r)||ei(l,t=>fP(s,r,t)),a=r.parentNode;if(!o&&I(a)&&cw(i)&&u(a),i.deep&&n.length)for(let t=0;t<n.length;t++)m(n[t]);ed(["underline","line-through","overline"],n=>{nD(r)&&t.dom.getStyle(r,"text-decoration")===n&&r.parentNode&&ch(s,r.parentNode)===n&&pf(t,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:n}},void 0,r)})},g=t=>{let r=s.get(t?"_start":"_end");if(r){var n;let o=r[t?"firstChild":"lastChild"];return dQ(n=o)&&nD(n)&&("_start"===n.id||"_end"===n.id)&&(o=o[t?"firstChild":"lastChild"]),n$(o)&&0===o.data.length&&(o=t?r.previousSibling||r.nextSibling:r.nextSibling||r.previousSibling),s.remove(r,!0),o}return null},f=r=>{let n,o,a=cL(s,r,l,r.collapsed);if(i.split){if((n=pn(t,a=uv(a),!0))!==(o=pn(t,a))){if(pr(s,n=po(n,!0),o=po(o,!1)))return c(pl(s,et.from(n.firstChild).getOr(n),!0,"span",{id:"_start","data-mce-type":"bookmark"})),void g(!0);if(pr(s,o,n))return c(pl(s,et.from(o.lastChild).getOr(o),!1,"span",{id:"_end","data-mce-type":"bookmark"})),void g(!1);n=pa(s,n,"span",{id:"_start","data-mce-type":"bookmark"}),o=pa(s,o,"span",{id:"_end","data-mce-type":"bookmark"});let t=s.createRng();t.setStartAfter(n),t.setEndBefore(o),cM(s,t,t=>{ed(t,t=>{dQ(t)||dQ(t.parentNode)||c(t)})}),c(n),c(o),n=g(!0),o=g()}else n=o=c(n);a.startContainer=n.parentNode?n.parentNode:n,a.startOffset=s.nodeIndex(n),a.endContainer=o.parentNode?o.parentNode:o,a.endOffset=s.nodeIndex(o)+1}cM(s,a,t=>{ed(t,m)})};if(o){if(cn(o)){let t=s.createRng();t.setStartBefore(o),t.setEndAfter(o),f(t)}else f(o);cW(t,r,o,n)}else d.isCollapsed()&&cE(i)&&!d8(t).length?f$(t,r,n,a):(ca(t,()=>ct(t,f),o=>cE(i)&&fM(t,r,n,o)),t.nodeChanged()),"removeformat"===r?ed(f0(t.selection),r=>{ed(fG,n=>t.dom.setStyle(r,n,"")),pd(t.dom,r)}):fX(t.formatter,r).each(r=>{ed(f0(t.selection),o=>pc(t.dom,o,r,n,null))}),cW(t,r,o,n)})(t,r,n,o,a)},pf=(t,r,n,o,a)=>pu(t,r,n,o,a).fold(J,r=>(t.dom.rename(o,r),!0),ee),pp=tz.each,ph=tz.each,pb=(t,r,n,o)=>{if(ph(n.styles,(n,a)=>{t.setStyle(r,a,cm(n,o))}),n.styles){let n=t.getAttrib(r,"style");n&&t.setAttrib(r,"data-mce-style",n)}},pv=(t,r,n,o)=>{let a=t.formatter.get(r),l=a[0],i=!o&&t.selection.isCollapsed(),s=t.dom,d=t.selection,c=(t,r=l)=>{U(r.onformat)&&r.onformat(t,r,n,o),pb(s,t,r,n),ph(r.attributes,(r,o)=>{s.setAttrib(t,o,cm(r,n))}),ph(r.classes,r=>{let o=cm(r,n);s.hasClass(t,o)||s.addClass(t,o)})},u=(t,r)=>{let n=!1;return ph(t,t=>!(!cC(t)||("false"!==s.getContentEditable(r)||t.ceFalseOverride)&&(!I(t.collapsed)||t.collapsed===i)&&s.is(r,t.selector)&&!dU(r)&&(c(r,t),n=!0,1))),n},m=t=>{if(T(t)){let r=s.create(t);return c(r),r}return null},g=(o,i,s)=>{let d=[],g=!0,f=l.inline||l.block,p=m(f);cM(o,i,i=>{let m;let h=i=>{let b=!1,v=g,y=!1,C=i.parentNode,E=C.nodeName.toLowerCase(),w=o.getContentEditable(i);I(w)&&(v=g,g="true"===w,b=!0,y=cu(t,i));let x=g&&!b;if(nG(i)&&!((t,r,n,o)=>{if(i7(t)&&cE(r)&&n.parentNode){let r=o2(t.schema),a=n_(ru(n),t=>dU(t.dom));return e$(r,o)&&n7(t.schema,n.parentNode,{skipBogus:!1,includeZwsp:!0})&&!a}return!1})(t,l,i,E))return m=null,void(cy(l)&&o.remove(i));if(cy(l)&&!0===l.wrapper&&fL(t,i,r,n))m=null;else{if(((r,n,o)=>{let a=cy(l)&&!0!==l.wrapper&&cs(t.schema,r)&&cd(t,n,f);return o&&a})(i,E,x)){let t=o.rename(i,f);return c(t),d.push(t),void(m=null)}if(cC(l)){let t=u(a,i);if(!t&&I(C)&&cw(l)&&(t=u(a,C)),!cE(l)||t)return void(m=null)}I(p)&&((r,n,a,i)=>{let d=cd(t,f,r.nodeName.toLowerCase())&&cd(t,n,f),c=!s&&n$(r)&&nN(r.data),u=dU(r),m=!cE(l)||!o.isBlock(r);return(a||i)&&d&&!c&&!u&&m})(i,E,x,y)?(m||(m=o.clone(p,!1),C.insertBefore(m,i),d.push(m)),y&&b&&(g=v),m.appendChild(i)):(m=null,ed(eR(i.childNodes),h),b&&(g=v),m=null)}};ed(i,h)}),!0===l.links&&ed(d,t=>{let r=t=>{"A"===t.nodeName&&c(t,l),ed(eR(t.childNodes),r)};r(t)}),ed(d,i=>{var s,u;let m;let g=(m=0,ed(i.childNodes,t=>{I(t)&&n$(t)&&0===t.length||dQ(t)||m++}),m);!(d.length>1)&&o.isBlock(i)||0!==g?(cE(l)||cy(l)&&l.wrapper)&&(l.exact||1!==g||(i=eh((s=i).childNodes,co).filter(t=>"false"!==o.getContentEditable(t)&&fP(o,t,l)).map(t=>{let r=o.clone(t,!1);return c(r),o.replace(r,s,!0),o.remove(t,!0),r}).getOr(s)),u=i,pp(a,r=>{cE(r)&&pp(t.dom.select(r.inline,u),o=>{f2(o)&&pf(t,r,n,o,r.exact?o:null)}),((t,r,n)=>{if(r.clear_child_styles){let o=r.links?"*:not(a)":"*";f1(t.select(o,n),n=>{f2(n)&&t.isEditable(n)&&f1(r.styles,(r,o)=>{t.setStyle(n,o,"")})})}})(t.dom,r,u)}),((t,r,n,o,a)=>{let l=a.parentNode;fL(t,l,n,o)&&pf(t,r,o,a)||r.merge_with_parents&&l&&t.dom.getParent(l,l=>!!fL(t,l,n,o)&&(pf(t,r,o,a),!0))})(t,l,r,n,i),((t,r,n,o)=>{if(r.styles&&r.styles.backgroundColor){let a=f4(t,"fontSize");f6(o,r=>a(r)&&t.isEditable(r),f9(t,"backgroundColor",cm(r.styles.backgroundColor,n)))}})(o,l,n,i),((t,r,n,o)=>{let a=r=>{if(nL(r)&&nD(r.parentNode)&&t.isEditable(r)){let n=ch(t,r.parentNode);t.getStyle(r,"color")&&n?t.setStyle(r,"text-decoration",n):t.getStyle(r,"text-decoration")===n&&t.setStyle(r,"text-decoration",null)}};r.styles&&(r.styles.color||r.styles.textDecoration)&&(tz.walk(o,a,"childNodes"),a(o))})(o,l,0,i),((t,r,n,o)=>{if(cE(r)&&("sub"===r.inline||"sup"===r.inline)){let n=f4(t,"fontSize");f6(o,r=>n(r)&&t.isEditable(r),f9(t,"fontSize",""));let a=em(t.select("sup"===r.inline?"sub":"sup",o),t.isEditable);t.remove(a,!0)}})(o,l,0,i),f5(t,l,0,i)):o.remove(i,!0)})},f=cn(o)?o:d.getNode();if("false"===s.getContentEditable(f)&&!cu(t,f))return u(a,o=f),void cq(t,r,o,n);if(l){if(o){if(cn(o)){if(!u(a,o)){let t=s.createRng();t.setStartBefore(o),t.setEndAfter(o),g(s,cL(s,t,a),!0)}}else g(s,o,!0)}else i&&cE(l)&&!d8(t).length?((t,r,n)=>{var o,a;let l;let i=t.selection,s=t.formatter.get(r);if(!s)return;let d=i.getRng(),c=d.startOffset,u=d.startContainer.nodeValue;l=dz(t.getBody(),i.getStart());let m=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(u&&c>0&&c<u.length&&m.test(u.charAt(c))&&m.test(u.charAt(c-1))){let o=i.getBookmark();d.collapse(!0);let a=cL(t.dom,d,s);a=uv(a),t.formatter.apply(r,n,a),i.moveToBookmark(o)}else{let s=l?fF(l):null;l&&(null==s?void 0:s.data)==="\uFEFF"||(o=t.getDoc(),a=fI(!0).dom,s=(l=o.importNode(a,!0)).firstChild,d.insertNode(l),c=1),t.formatter.apply(r,n,l),i.setCursorLocation(s,c)}})(t,r,n):(d.setRng(fy(d.getRng())),ca(t,()=>{ct(t,(t,r)=>{let n=r?t:cL(s,t,a);g(s,n,!1)})},ee),t.nodeChanged()),fX(t.formatter,r).each(r=>{var o;ed(em((t=>{let r=t.getSelectedBlocks(),n=t.getRng();if(t.isCollapsed())return[];if(1===r.length)return fZ(n,r[0])&&fQ(n,r[0])?r:[];{let t=eS(r).filter(t=>fZ(n,t)).toArray(),o=eN(r).filter(t=>fQ(n,t)).toArray(),a=r.slice(1,-1);return t.concat(a).concat(o)}})(o=t.selection),fJ(o.dom)),t=>pb(s,t,r,n))});eH(fK,r)&&ed(fK[r],r=>{r(t)})}cq(t,r,o,n)},py=(t,r,n,o)=>{(o||t.selection.isEditable())&&pv(t,r,n,o)},pC=t=>eH(t,"vars"),pE=t=>t.selection.getStart(),pw=(t,r,n,o,a)=>ep(r,r=>!M(t.formatter.matchNode(r,n,null!=a?a:{},o)),r=>!!fO(t,r,n)||!o&&I(t.formatter.matchNode(r,n,a,!0))),px=(t,r)=>{let n=null!=r?r:pE(t);return em(cb(t.dom,n),t=>nD(t)&&!nU(t))},p_=(t,r,n)=>{let o=px(t,r);eP(n,(n,a)=>{let l=n=>{let l=pw(t,o,a,n.similar,pC(n)?n.vars:void 0),i=l.isSome();if(n.state.get()!==i){n.state.set(i);let t=l.getOr(r);pC(n)?n.callback(i,{node:t,format:a,parents:o}):ed(n.callbacks,r=>r(i,{node:t,format:a,parents:o}))}};ed([n.withSimilar,n.withoutSimilar],l),ed(n.withVars,l)})},pk=tz.explode,pS=()=>{let t={};return{addFilter:(r,n)=>{ed(pk(r),r=>{eH(t,r)||(t[r]={name:r,callbacks:[]}),t[r].callbacks.push(n)})},getFilters:()=>ez(t),removeFilter:(r,n)=>{ed(pk(r),r=>{if(eH(t,r)){if(I(n)){let o=t[r],a=em(o.callbacks,t=>t!==n);a.length>0?o.callbacks=a:delete t[r]}else delete t[r]}})}}},pN=(t,r,n)=>{var o;let a=ao();r.convert_fonts_to_spans&&((t,r,n)=>{t.addNodeFilter("font",t=>{ed(t,t=>{let o=r.parse(t.attr("style")),a=t.attr("color"),l=t.attr("face"),i=t.attr("size");a&&(o.color=a),l&&(o["font-family"]=l),i&&ta(i).each(t=>{o["font-size"]=n[t-1]}),t.name="span",t.attr("style",r.serialize(o)),ed(["color","face","size"],r=>{t.attr(r,null)})})})})(t,a,tz.explode(null!==(o=r.font_size_legacy_values)&&void 0!==o?o:"")),((t,r,n)=>{t.addNodeFilter("strike",t=>{let o="html4"!==r.type;ed(t,t=>{if(o)t.name="s";else{let r=n.parse(t.attr("style"));r["text-decoration"]="line-through",t.name="span",t.attr("style",n.serialize(r))}})})})(t,n,a)},pR=t=>{let[r,...n]=t.split(","),o=n.join(","),a=/data:([^/]+\/[^;]+)(;.+)?/.exec(r);if(a){let t=";base64"===a[2],r=t?(t=>{let r=/([a-z0-9+\/=\s]+)/i.exec(t);return r?r[1]:""})(o):decodeURIComponent(o);return et.some({type:a[1],data:r,base64Encoded:t})}return et.none()},pA=(t,r,n=!0)=>{let o=r;if(n)try{o=atob(r)}catch(t){return et.none()}let a=new Uint8Array(o.length);for(let t=0;t<a.length;t++)a[t]=o.charCodeAt(t);return et.some(new Blob([a],{type:t}))},pT=t=>new Promise((r,n)=>{let o=new FileReader;o.onloadend=()=>{r(o.result)},o.onerror=()=>{var t;n(null===(t=o.error)||void 0===t?void 0:t.message)},o.readAsDataURL(t)}),pO=0,pB=(t,r,n)=>pR(t).bind(({data:t,type:o,base64Encoded:a})=>r&&!a?et.none():n(a?t:btoa(t),o)),pP=(t,r,n)=>{let o=t.create("blobid"+pO++,r,n);return t.add(o),o},pD=(t,r,n=!1)=>pB(r,n,(r,n)=>et.from(t.getByData(r,n)).orThunk(()=>pA(n,r).map(n=>pP(t,n,r)))),pL=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,pM=t=>et.from(t.match(pL)).bind(t=>ek(t,1)).map(t=>e4(t,"www.")?t.substring(4):t),pF=(t,r)=>{et.from(t.attr("src")).bind(pM).forall(t=>!el(r,t))&&t.attr("sandbox","")},pI=(t,r)=>e4(t,`${r}/`),{entries:pU,setPrototypeOf:pz,isFrozen:pj,getPrototypeOf:pH,getOwnPropertyDescriptor:p$}=Object,{freeze:pV,seal:pq,create:pW}=Object,{apply:pK,construct:pY}="undefined"!=typeof Reflect&&Reflect;pK||(pK=function(t,r,n){return t.apply(r,n)}),pV||(pV=function(t){return t}),pq||(pq=function(t){return t}),pY||(pY=function(t,r){return new t(...r)});let pG=p6(Array.prototype.forEach),pX=p6(Array.prototype.pop),pZ=p6(Array.prototype.push),pQ=p6(String.prototype.toLowerCase),pJ=p6(String.prototype.toString),p0=p6(String.prototype.match),p1=p6(String.prototype.replace),p2=p6(String.prototype.indexOf),p3=p6(String.prototype.trim),p8=p6(RegExp.prototype.test),p5=(g=TypeError,function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return pY(g,r)});function p6(t){return function(r){for(var n=arguments.length,o=Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return pK(t,r,o)}}function p4(t,r,n){var o;n=null!==(o=n)&&void 0!==o?o:pQ,pz&&pz(t,null);let a=r.length;for(;a--;){let o=r[a];if("string"==typeof o){let t=n(o);t!==o&&(pj(r)||(r[a]=t),o=t)}t[o]=!0}return t}function p9(t){let r=pW(null);for(let[n,o]of pU(t))r[n]=o;return r}function p7(t,r){for(;null!==t;){let n=p$(t,r);if(n){if(n.get)return p6(n.get);if("function"==typeof n.value)return p6(n.value)}t=pH(t)}return function(t){return console.warn("fallback value for",t),null}}let he=pV(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ht=pV(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),hr=pV(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),hn=pV(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),ho=pV(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),ha=pV(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),hl=pV(["#text"]),hi=pV(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),hs=pV(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),hd=pV(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),hc=pV(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),hu=pq(/\{\{[\w\W]*|[\w\W]*\}\}/gm),hm=pq(/<%[\w\W]*|[\w\W]*%>/gm),hg=pq(/\${[\w\W]*}/gm),hf=pq(/^data-[\-\w.\u00B7-\uFFFF]/),hp=pq(/^aria-[\-\w]+$/),hh=pq(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),hb=pq(/^(?:\w+script|data):/i),hv=pq(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),hy=pq(/^html$/i);var hC=Object.freeze({__proto__:null,MUSTACHE_EXPR:hu,ERB_EXPR:hm,TMPLIT_EXPR:hg,DATA_ATTR:hf,ARIA_ATTR:hp,IS_ALLOWED_URI:hh,IS_SCRIPT_OR_DATA:hb,ATTR_WHITESPACE:hv,DOCTYPE_NAME:hy});let hE=()=>"undefined"==typeof window?null:window;var hw=function t(){let r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hE(),o=r=>t(r);if(o.version="3.0.5",o.removed=[],!n||!n.document||9!==n.document.nodeType)return o.isSupported=!1,o;let a=n.document,l=a.currentScript,{document:i}=n,{DocumentFragment:s,HTMLTemplateElement:d,Node:c,Element:u,NodeFilter:m,NamedNodeMap:g=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:f,DOMParser:p,trustedTypes:h}=n,b=u.prototype,v=p7(b,"cloneNode"),y=p7(b,"nextSibling"),C=p7(b,"childNodes"),E=p7(b,"parentNode");if("function"==typeof d){let t=i.createElement("template");t.content&&t.content.ownerDocument&&(i=t.content.ownerDocument)}let w,x="",{implementation:_,createNodeIterator:k,createDocumentFragment:S,getElementsByTagName:N}=i,{importNode:R}=a,A={};o.isSupported="function"==typeof pU&&"function"==typeof E&&_&&void 0!==_.createHTMLDocument;let{MUSTACHE_EXPR:T,ERB_EXPR:O,TMPLIT_EXPR:B,DATA_ATTR:P,ARIA_ATTR:D,IS_SCRIPT_OR_DATA:L,ATTR_WHITESPACE:M}=hC,{IS_ALLOWED_URI:F}=hC,I=null,U=p4({},[...he,...ht,...hr,...ho,...hl]),z=null,j=p4({},[...hi,...hs,...hd,...hc]),H=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),$=null,V=null,q=!0,W=!0,K=!1,Y=!0,G=!1,X=!1,Z=!1,Q=!1,J=!1,ee=!1,et=!1,er=!0,en=!1,eo=!0,ea=!1,el={},ei=null,es=p4({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ed=null,ec=p4({},["audio","video","img","source","image","track"]),eu=null,em=p4({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),eg="http://www.w3.org/1998/Math/MathML",ef="http://www.w3.org/2000/svg",ep="http://www.w3.org/1999/xhtml",eh=ep,eb=!1,ev=null,ey=p4({},[eg,ef,ep],pJ),eC=["application/xhtml+xml","text/html"],eE,ew=null,ex=i.createElement("form"),e_=function(t){return t instanceof RegExp||t instanceof Function},ek=function(t){if(!ew||ew!==t){if(t&&"object"==typeof t||(t={}),t=p9(t),eE="application/xhtml+xml"===(r=r=-1===eC.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE)?pJ:pQ,I="ALLOWED_TAGS"in t?p4({},t.ALLOWED_TAGS,eE):U,z="ALLOWED_ATTR"in t?p4({},t.ALLOWED_ATTR,eE):j,ev="ALLOWED_NAMESPACES"in t?p4({},t.ALLOWED_NAMESPACES,pJ):ey,eu="ADD_URI_SAFE_ATTR"in t?p4(p9(em),t.ADD_URI_SAFE_ATTR,eE):em,ed="ADD_DATA_URI_TAGS"in t?p4(p9(ec),t.ADD_DATA_URI_TAGS,eE):ec,ei="FORBID_CONTENTS"in t?p4({},t.FORBID_CONTENTS,eE):es,$="FORBID_TAGS"in t?p4({},t.FORBID_TAGS,eE):{},V="FORBID_ATTR"in t?p4({},t.FORBID_ATTR,eE):{},el="USE_PROFILES"in t&&t.USE_PROFILES,q=!1!==t.ALLOW_ARIA_ATTR,W=!1!==t.ALLOW_DATA_ATTR,K=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Y=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,G=t.SAFE_FOR_TEMPLATES||!1,X=t.WHOLE_DOCUMENT||!1,J=t.RETURN_DOM||!1,ee=t.RETURN_DOM_FRAGMENT||!1,et=t.RETURN_TRUSTED_TYPE||!1,Q=t.FORCE_BODY||!1,er=!1!==t.SANITIZE_DOM,en=t.SANITIZE_NAMED_PROPS||!1,eo=!1!==t.KEEP_CONTENT,ea=t.IN_PLACE||!1,F=t.ALLOWED_URI_REGEXP||hh,eh=t.NAMESPACE||ep,H=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&e_(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(H.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&e_(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(H.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(H.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),G&&(W=!1),ee&&(J=!0),el&&(I=p4({},[...hl]),z=[],!0===el.html&&(p4(I,he),p4(z,hi)),!0===el.svg&&(p4(I,ht),p4(z,hs),p4(z,hc)),!0===el.svgFilters&&(p4(I,hr),p4(z,hs),p4(z,hc)),!0===el.mathMl&&(p4(I,ho),p4(z,hd),p4(z,hc))),t.ADD_TAGS&&(I===U&&(I=p9(I)),p4(I,t.ADD_TAGS,eE)),t.ADD_ATTR&&(z===j&&(z=p9(z)),p4(z,t.ADD_ATTR,eE)),t.ADD_URI_SAFE_ATTR&&p4(eu,t.ADD_URI_SAFE_ATTR,eE),t.FORBID_CONTENTS&&(ei===es&&(ei=p9(ei)),p4(ei,t.FORBID_CONTENTS,eE)),eo&&(I["#text"]=!0),X&&p4(I,["html","head","body"]),I.table&&(p4(I,["tbody"]),delete $.tbody),t.TRUSTED_TYPES_POLICY){if("function"!=typeof t.TRUSTED_TYPES_POLICY.createHTML)throw p5('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof t.TRUSTED_TYPES_POLICY.createScriptURL)throw p5('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');x=(w=t.TRUSTED_TYPES_POLICY).createHTML("")}else void 0===w&&(w=function(t,r){if("object"!=typeof t||"function"!=typeof t.createPolicy)return null;let n=null,o="data-tt-policy-suffix";r&&r.hasAttribute(o)&&(n=r.getAttribute(o));let a="dompurify"+(n?"#"+n:"");try{return t.createPolicy(a,{createHTML:t=>t,createScriptURL:t=>t})}catch(t){return console.warn("TrustedTypes policy "+a+" could not be created."),null}}(h,l)),null!==w&&"string"==typeof x&&(x=w.createHTML(""));pV&&pV(t),ew=t}},eS=p4({},["mi","mo","mn","ms","mtext"]),eN=p4({},["foreignobject","desc","title","annotation-xml"]),eR=p4({},["title","style","font","a","script"]),eA=p4({},ht);p4(eA,hr),p4(eA,hn);let eT=p4({},ho);p4(eT,ha);let eO=function(t){pZ(o.removed,{element:t});try{t.parentNode.removeChild(t)}catch(r){t.remove()}},eB=function(t,r){try{pZ(o.removed,{attribute:r.getAttributeNode(t),from:r})}catch(t){pZ(o.removed,{attribute:null,from:r})}if(r.removeAttribute(t),"is"===t&&!z[t]){if(J||ee)try{eO(r)}catch(t){}else try{r.setAttribute(t,"")}catch(t){}}},eP=function(t){let n,o;if(Q)t="<remove></remove>"+t;else{let r=p0(t,/^[\r\n\t ]+/);o=r&&r[0]}"application/xhtml+xml"===r&&eh===ep&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");let a=w?w.createHTML(t):t;if(eh===ep)try{n=(new p).parseFromString(a,r)}catch(t){}if(!n||!n.documentElement){n=_.createDocument(eh,"template",null);try{n.documentElement.innerHTML=eb?x:a}catch(t){}}let l=n.body||n.documentElement;return t&&o&&l.insertBefore(i.createTextNode(o),l.childNodes[0]||null),eh===ep?N.call(n,X?"html":"body")[0]:X?n.documentElement:l},eD=function(t){return k.call(t.ownerDocument||t,t,m.SHOW_ELEMENT|m.SHOW_COMMENT|m.SHOW_TEXT,null,!1)},eL=function(t){return"object"==typeof c?t instanceof c:t&&"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},eM=function(t,r,n){A[t]&&pG(A[t],t=>{t.call(o,r,n,ew)})},eF=function(t){let n;if(eM("beforeSanitizeElements",t,null),t instanceof f&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof g)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes))return eO(t),!0;let a=eE(t.nodeName);if(eM("uponSanitizeElement",t,{tagName:a,allowedTags:I}),t.hasChildNodes()&&!eL(t.firstElementChild)&&(!eL(t.content)||!eL(t.content.firstElementChild))&&p8(/<[/\w]/g,t.innerHTML)&&p8(/<[/\w]/g,t.textContent))return eO(t),!0;if(!I[a]||$[a]){if(!$[a]&&eU(a)&&(H.tagNameCheck instanceof RegExp&&p8(H.tagNameCheck,a)||H.tagNameCheck instanceof Function&&H.tagNameCheck(a)))return!1;if(eo&&!ei[a]){let r=E(t)||t.parentNode,n=C(t)||t.childNodes;if(n&&r)for(let o=n.length-1;o>=0;--o)r.insertBefore(v(n[o],!0),y(t))}return eO(t),!0}return t instanceof u&&!function(t){let n=E(t);n&&n.tagName||(n={namespaceURI:eh,tagName:"template"});let o=pQ(t.tagName),a=pQ(n.tagName);return!!ev[t.namespaceURI]&&(t.namespaceURI===ef?n.namespaceURI===ep?"svg"===o:n.namespaceURI===eg?"svg"===o&&("annotation-xml"===a||eS[a]):!!eA[o]:t.namespaceURI===eg?n.namespaceURI===ep?"math"===o:n.namespaceURI===ef?"math"===o&&eN[a]:!!eT[o]:t.namespaceURI===ep?!(n.namespaceURI===ef&&!eN[a])&&!(n.namespaceURI===eg&&!eS[a])&&!eT[o]&&(eR[o]||!eA[o]):!("application/xhtml+xml"!==r||!ev[t.namespaceURI]))}(t)?(eO(t),!0):("noscript"===a||"noembed"===a||"noframes"===a)&&p8(/<\/no(script|embed|frames)/i,t.innerHTML)?(eO(t),!0):(G&&3===t.nodeType&&(n=p1(n=t.textContent,T," "),n=p1(n,O," "),n=p1(n,B," "),t.textContent!==n&&(pZ(o.removed,{element:t.cloneNode()}),t.textContent=n)),eM("afterSanitizeElements",t,null),!1)},eI=function(t,r,n){if(er&&("id"===r||"name"===r)&&(n in i||n in ex))return!1;if(W&&!V[r]&&p8(P,r));else if(q&&p8(D,r));else if(!z[r]||V[r]){if(!(eU(t)&&(H.tagNameCheck instanceof RegExp&&p8(H.tagNameCheck,t)||H.tagNameCheck instanceof Function&&H.tagNameCheck(t))&&(H.attributeNameCheck instanceof RegExp&&p8(H.attributeNameCheck,r)||H.attributeNameCheck instanceof Function&&H.attributeNameCheck(r))||"is"===r&&H.allowCustomizedBuiltInElements&&(H.tagNameCheck instanceof RegExp&&p8(H.tagNameCheck,n)||H.tagNameCheck instanceof Function&&H.tagNameCheck(n))))return!1}else if(eu[r]);else if(p8(F,p1(n,M,"")));else if("src"!==r&&"xlink:href"!==r&&"href"!==r||"script"===t||0!==p2(n,"data:")||!ed[t]){if(K&&!p8(L,p1(n,M,"")));else if(n)return!1}return!0},eU=function(t){return t.indexOf("-")>0},ez=function(t){let r,n,o,a;eM("beforeSanitizeAttributes",t,null);let{attributes:l}=t;if(!l)return;let i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:z};for(a=l.length;a--;){let{name:s,namespaceURI:d}=r=l[a],c=n="value"===s?r.value:p3(r.value);if(o=eE(s),i.attrName=o,i.attrValue=n,i.keepAttr=!0,i.forceKeepAttr=void 0,eM("uponSanitizeAttribute",t,i),n=i.attrValue,i.forceKeepAttr)continue;if(!i.keepAttr||!Y&&p8(/\/>/i,n)){eB(s,t);continue}G&&(n=p1(n,T," "),n=p1(n,O," "),n=p1(n,B," "));let u=eE(t.nodeName);if(eI(u,o,n)){if(en&&("id"===o||"name"===o)&&(eB(s,t),n="user-content-"+n),w&&"object"==typeof h&&"function"==typeof h.getAttributeType){if(d);else switch(h.getAttributeType(u,o)){case"TrustedHTML":n=w.createHTML(n);break;case"TrustedScriptURL":n=w.createScriptURL(n)}}if(n!==c)try{d?t.setAttributeNS(d,s,n):t.setAttribute(s,n)}catch(r){eB(s,t)}}else eB(s,t)}eM("afterSanitizeAttributes",t,null)},ej=function t(r){let n;let o=eD(r);for(eM("beforeSanitizeShadowDOM",r,null);n=o.nextNode();)eM("uponSanitizeShadowNode",n,null),eF(n)||(n.content instanceof s&&t(n.content),ez(n));eM("afterSanitizeShadowDOM",r,null)};return o.sanitize=function(t){let r,n,l,i,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((eb=!t)&&(t="<!-->"),"string"!=typeof t&&!eL(t)){if("function"!=typeof t.toString)throw p5("toString is not a function");if("string"!=typeof(t=t.toString()))throw p5("dirty is not a string, aborting")}if(!o.isSupported)return t;if(Z||ek(d),o.removed=[],"string"==typeof t&&(ea=!1),ea){if(t.nodeName){let r=eE(t.nodeName);if(!I[r]||$[r])throw p5("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof c)1===(n=(r=eP("<!---->")).ownerDocument.importNode(t,!0)).nodeType&&"BODY"===n.nodeName||"HTML"===n.nodeName?r=n:r.appendChild(n);else{if(!J&&!G&&!X&&-1===t.indexOf("<"))return w&&et?w.createHTML(t):t;if(!(r=eP(t)))return J?null:et?x:""}r&&Q&&eO(r.firstChild);let u=eD(ea?t:r);for(;l=u.nextNode();)eF(l)||(l.content instanceof s&&ej(l.content),ez(l));if(ea)return t;if(J){if(ee)for(i=S.call(r.ownerDocument);r.firstChild;)i.appendChild(r.firstChild);else i=r;return(z.shadowroot||z.shadowrootmode)&&(i=R.call(a,i,!0)),i}let m=X?r.outerHTML:r.innerHTML;return X&&I["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&p8(hy,r.ownerDocument.doctype.name)&&(m="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+m),G&&(m=p1(m,T," "),m=p1(m,O," "),m=p1(m,B," ")),w&&et?w.createHTML(m):m},o.setConfig=function(t){ek(t),Z=!0},o.clearConfig=function(){ew=null,Z=!1},o.isValidAttribute=function(t,r,n){return ew||ek({}),eI(eE(t),eE(r),n)},o.addHook=function(t,r){"function"==typeof r&&(A[t]=A[t]||[],pZ(A[t],r))},o.removeHook=function(t){if(A[t])return pX(A[t])},o.removeHooks=function(t){A[t]&&(A[t]=[])},o.removeAllHooks=function(){A={}},o}();let hx=tz.each,h_=tz.trim,hk=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],hS={ftp:21,http:80,https:443,mailto:25},hN=["img","video"],hR=(t,r,n)=>{var o;let a=(t=>{try{return decodeURIComponent(t)}catch(r){return unescape(t)}})(r).replace(/\s/g,"");return!t.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(a)||!t.allow_html_data_urls&&(/^data:image\//i.test(a)?(I(o=t.allow_svg_data_urls)?!o:!I(n)||!el(hN,n))&&/^data:image\/svg\+xml/i.test(a):/^data:/i.test(a)))};class hA{static parseDataUri(t){let r;let n=decodeURIComponent(t).split(","),o=/data:([^;]+)/.exec(n[0]);return o&&(r=o[1]),{type:r,data:n[1]}}static isDomSafe(t,r,n={}){return!!n.allow_script_urls||!hR(n,oj.decode(t).replace(/[\s\u0000-\u001F]+/g,""),r)}static getDocumentBaseUrl(t){var r;let n;return n=0!==t.protocol.indexOf("http")&&"file:"!==t.protocol?null!==(r=t.href)&&void 0!==r?r:"":t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/")),n}constructor(t,r={}){this.path="",this.directory="",t=h_(t),this.settings=r;let n=r.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))return void(o.source=t);let a=0===t.indexOf("//");if(0!==t.indexOf("/")||a||(t=(n&&n.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){let r=n?n.path:new hA(document.location.href).directory;if(""===(null==n?void 0:n.protocol))t="//mce_host"+o.toAbsPath(r,t);else{let a=/([^#?]*)([#?]?.*)/.exec(t);a&&(t=(n&&n.protocol||"http")+"://mce_host"+o.toAbsPath(r,a[1])+a[2])}}t=t.replace(/@@/g,"(mce_at)");let l=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);l&&hx(hk,(t,r)=>{let n=l[r];n&&(n=n.replace(/\(mce_at\)/g,"@@")),o[t]=n}),n&&(o.protocol||(o.protocol=n.protocol),o.userInfo||(o.userInfo=n.userInfo),o.port||"mce_host"!==o.host||(o.port=n.port),o.host&&"mce_host"!==o.host||(o.host=n.host),o.source=""),a&&(o.protocol="")}setPath(t){let r=/^(.*?)\/?(\w+)?$/.exec(t);r&&(this.path=r[0],this.directory=r[1],this.file=r[2]),this.source="",this.getURI()}toRelative(t){if("./"===t)return t;let r=new hA(t,{base_uri:this});if("mce_host"!==r.host&&this.host!==r.host&&r.host||this.port!==r.port||this.protocol!==r.protocol&&""!==r.protocol)return r.getURI();let n=this.getURI(),o=r.getURI();if(n===o||"/"===n.charAt(n.length-1)&&n.substr(0,n.length-1)===o)return n;let a=this.toRelPath(this.path,r.path);return r.query&&(a+="?"+r.query),r.anchor&&(a+="#"+r.anchor),a}toAbsolute(t,r){let n=new hA(t,{base_uri:this});return n.getURI(r&&this.isSameOrigin(n))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;let r=this.protocol?hS[this.protocol]:null;if(r&&(this.port||r)==(t.port||r))return!0}return!1}toRelPath(t,r){let n,o,a=0,l="",i=t.substring(0,t.lastIndexOf("/")).split("/"),s=r.split("/");if(i.length>=s.length){for(n=0,o=i.length;n<o;n++)if(n>=s.length||i[n]!==s[n]){a=n+1;break}}if(i.length<s.length){for(n=0,o=s.length;n<o;n++)if(n>=i.length||i[n]!==s[n]){a=n+1;break}}if(1===a)return r;for(n=0,o=i.length-(a-1);n<o;n++)l+="../";for(n=a-1,o=s.length;n<o;n++)l+=n!==a-1?"/"+s[n]:s[n];return l}toAbsPath(t,r){let n,o=0,a=/\/$/.test(r)?"/":"",l=t.split("/"),i=r.split("/"),s=[];hx(l,t=>{t&&s.push(t)});let d=[];for(let t=i.length-1;t>=0;t--)0!==i[t].length&&"."!==i[t]&&(".."!==i[t]?o>0?o--:d.push(i[t]):o++);let c=s.length-o;return 0!==(n=c<=0?eE(d).join("/"):s.slice(0,c).join("/")+"/"+eE(d).join("/")).indexOf("/")&&(n="/"+n),a&&n.lastIndexOf("/")!==n.length-1&&(n+=a),n}getURI(t=!1){let r;return this.source&&!t||(r="",t||(this.protocol?r+=this.protocol+"://":r+="//",this.userInfo&&(r+=this.userInfo+"@"),this.host&&(r+=this.host),this.port&&(r+=":"+this.port)),this.path&&(r+=this.path),this.query&&(r+="?"+this.query),this.anchor&&(r+="#"+this.anchor),this.source=r),this.source}}let hT=tz.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),hO="data-mce-type",hB=0,hP=(t,r,n,o,a)=>{var l,i,s,d;let c=r.validate,u=n.getSpecialElements();8===t.nodeType&&!r.allow_conditional_comments&&/^\[if/i.test(null!==(l=t.nodeValue)&&void 0!==l?l:"")&&(t.nodeValue=" "+t.nodeValue);let m=null!==(i=null==a?void 0:a.tagName)&&void 0!==i?i:t.nodeName.toLowerCase();if("html"!==o&&n.isValid(o))return void(I(a)&&(a.allowedTags[m]=!0));if(1!==t.nodeType||"body"===m)return;let g=ru(t),f=t7(g,hO),p=t4(g,"data-mce-bogus");if(!f&&T(p))return void("all"===p?nl(g):ni(g));let h=n.getElementRule(m);if(!c||h){if(I(a)&&(a.allowedTags[m]=!0),c&&h&&!f){if(ed(null!==(s=h.attributesForced)&&void 0!==s?s:[],t=>{t5(g,t.name,"{$uid}"===t.value?"mce_"+hB++:t.value)}),ed(null!==(d=h.attributesDefault)&&void 0!==d?d:[],t=>{t7(g,t.name)||t5(g,t.name,"{$uid}"===t.value?"mce_"+hB++:t.value)}),h.attributesRequired&&!ei(h.attributesRequired,t=>t7(g,t))||h.removeEmptyAttrs&&(t=>{let r=t.dom.attributes;return null==r||0===r.length})(g))return void ni(g);h.outputName&&h.outputName!==m&&((t,r)=>{let n=((t,r)=>{let n=rg(r);return t6(n,rt(t)),n})(t,r);ne(t,n),no(n,rO(t)),nl(t)})(g,h.outputName)}}else eH(u,m)?nl(g):ni(g)},hD=(t,r,n,o,a,l)=>"html"!==n&&!or(o)||!(a in hT&&hR(t,l,o))&&(!t.validate||r.isValid(o,a)||e4(a,"data-")||e4(a,"aria-")),hL=(t,r)=>t.hasAttribute(hO)&&("id"===r||"class"===r||"style"===r),hM=(t,r)=>t in r.getBoolAttrs(),hF=(t,r,n,o)=>{let{attributes:a}=t;for(let l=a.length-1;l>=0;l--){let i=a[l],s=i.name,d=i.value;hD(r,n,o,t.tagName.toLowerCase(),s,d)||hL(t,s)?hM(s,n)&&t.setAttribute(s,s):t.removeAttribute(s)}},hI=(t,r,n)=>{let o=hw();return o.addHook("uponSanitizeElement",(o,a)=>{hP(o,t,r,n.track(o),a)}),o.addHook("uponSanitizeAttribute",(o,a)=>{((t,r,n,o,a)=>{let l=t.tagName.toLowerCase(),{attrName:i,attrValue:s}=a;a.keepAttr=hD(r,n,o,l,i,s),a.keepAttr?(a.allowedAttributes[i]=!0,hM(i,n)&&(a.attrValue=i),r.allow_svg_data_urls&&e4(s,"data:image/svg+xml")&&(a.forceKeepAttr=!0)):hL(t,i)&&(a.forceKeepAttr=!0)})(o,t,r,n.current(),a)}),o},hU=t=>{let r=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(t=>`xlink:${t}`);return hw().sanitize(t,{IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:r}),t.innerHTML},hz=tz.makeMap,hj=tz.extend,hH=(t,r,n,o)=>{let a=t.name,l=a in n&&"title"!==a&&"textarea"!==a,i=r.childNodes;for(let r=0,a=i.length;r<a;r++){let a=i[r],s=new mc(a.nodeName.toLowerCase(),a.nodeType);if(nD(a)){let t=a.attributes;for(let r=0,n=t.length;r<n;r++){let n=t[r];s.attr(n.name,n.value)}or(s.name)&&(o(a),s.value=a.innerHTML)}else n$(a)?(s.value=a.data,l&&(s.raw=!0)):(nW(a)||nV(a)||nq(a))&&(s.value=a.data);or(s.name)||hH(s,a,n,o),t.append(s)}},h$=(t={},r=o8())=>{let n=pS(),o=pS(),a={validate:!0,root_name:"body",sanitize:!0,...t},l=new DOMParser,i=((t,r)=>{let n=(()=>{let t=[],r=()=>t[t.length-1];return{track:n=>{on(n)&&t.push(n);let o=r();return o&&!o.contains(n)&&(t.pop(),o=r()),oo(o)},current:()=>oo(r()),reset:()=>{t=[]}}})();if(t.sanitize){let o=hI(t,r,n);return{sanitizeHtmlElement:(r,a)=>{o.sanitize(r,((t,r)=>{let n={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return n.PARSER_MEDIA_TYPE=r,t.allow_script_urls?n.ALLOWED_URI_REGEXP=/.*/:t.allow_html_data_urls&&(n.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),n})(t,a)),o.removed=[],n.reset()},sanitizeNamespaceElement:hU}}return{sanitizeHtmlElement:(o,a)=>{let l;let i=document.createNodeIterator(o,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);for(;l=i.nextNode();){let o=n.track(l);hP(l,t,r,o),nD(l)&&hF(l,t,r,o)}n.reset()},sanitizeNamespaceElement:H}})(a,r),s=n.addFilter,d=n.getFilters,c=n.removeFilter,u=o.addFilter,m=o.getFilters,g=o.removeFilter,f=(t,n)=>{let o=T(n.attr(hO)),a=1===n.type&&!eH(t,n.name)&&!oy(r,n)&&!or(n.name);return 3===n.type||a&&!o},p={schema:r,addAttributeFilter:u,getAttributeFilters:m,removeAttributeFilter:g,addNodeFilter:s,getNodeFilters:d,removeNodeFilter:c,parse:(t,n={})=>{var o;let s=a.validate,c=null!==(o=n.context)&&void 0!==o?o:a.root_name,u=((t,n,o="html")=>{let a="xhtml"===o?"application/xhtml+xml":"text/html",s=eH(r.getSpecialElements(),n.toLowerCase()),d=s?`<${n}>${t}</${n}>`:t,c="xhtml"===o?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${d}</body></html>`:`<body>${d}</body>`,u=l.parseFromString(c,a).body;return i.sanitizeHtmlElement(u,a),s?u.firstChild:u})(t,c,n.format);om(r,u);let g=new mc(c,11);hH(g,u,r.getSpecialElements(),i.sanitizeNamespaceElement),u.innerHTML="";let[p,h]=((t,r,n,o)=>{let a=n.validate,l=r.getNonEmptyElements(),i=r.getWhitespaceElements(),s=hj(hz("script,style,head,html,body,title,meta,param"),r.getBlockElements()),d=o2(r),c=/[ \t\r\n]+/g,u=/^[ \t\r\n]+/,m=/[ \t\r\n]+$/,g=t=>{let r=t.parent;for(;I(r);){if(r.name in i)return!0;r=r.parent}return!1},f=n=>n.name in s||oy(r,n)||or(n.name)&&n.parent===t,p=(r,n)=>!I(n?r.prev:r.next)&&!F(r.parent)&&f(r.parent)&&(r.parent!==t||!0===o.isRootContent);return[t=>{var r,n;if(3===t.type&&!g(t)){let o=null!==(r=t.value)&&void 0!==r?r:"";o=o.replace(c," "),(I(n=t.prev)&&(f(n)||"br"===n.name)||p(t,!0))&&(o=o.replace(u,"")),0===o.length?t.remove():t.value=o}},t=>{var s,c;if(1===t.type){let s=r.getElementRule(t.name);if(a&&s){let a=ff(r,l,i,t);s.paddInEmptyBlock&&a&&(t=>{let n=t;for(;I(n);){if(n.name in d)return ff(r,l,i,n);n=n.parent}return!1})(t)?fm(n,o,f,t):s.removeEmpty&&a?f(t)?t.remove():t.unwrap():s.paddEmpty&&(a||fg(t,"#text")&&(null===(c=null==t?void 0:t.firstChild)||void 0===c?void 0:c.value)==="\xa0")&&fm(n,o,f,t)}}else if(3===t.type&&!g(t)){let r=null!==(s=t.value)&&void 0!==s?s:"";(t.next&&f(t.next)||p(t,!1))&&(r=r.replace(m,"")),0===r.length?t.remove():t.value=r}}]})(g,r,a,n),b=[],v={nodes:{},attributes:{}},y=t=>fd(d(),m(),t,v);if(((t,r,n)=>{let o=[];for(let n=t,a=n;n;a=n,n=n.walk()){let l=n;ed(r,t=>t(l)),F(l.parent)&&l!==t?n=a:o.push(l)}for(let t=o.length-1;t>=0;t--){let r=o[t];ed(n,t=>t(r))}})(g,[p,y],[h,s?t=>{fv(r,t)&&b.push(t)}:H]),b.reverse(),s&&b.length>0){if(n.context){let{pass:t,fail:o}=eu(b,t=>t.parent===g);fb(o,r,g,y),n.invalid=t.length>0}else fb(b,r,g,y)}let C=((t,r)=>{var n;let o=null!==(n=r.forced_root_block)&&void 0!==n?n:t.forced_root_block;return!1===o?"":!0===o?"p":o})(a,n);return C&&("body"===g.name||n.isRootContent)&&((t,n)=>{let o=hj(hz("script,style,head,html,body,title,meta,param"),r.getBlockElements()),l=/^[ \t\r\n]+/,i=/[ \t\r\n]+$/,s=t.firstChild,d=null,c=t=>{var r,n;t&&((s=t.firstChild)&&3===s.type&&(s.value=null===(r=s.value)||void 0===r?void 0:r.replace(l,"")),(s=t.lastChild)&&3===s.type&&(s.value=null===(n=s.value)||void 0===n?void 0:n.replace(i,"")))};if(r.isValidChild(t.name,n.toLowerCase())){for(;s;){let r=s.next;f(o,s)?(d||((d=new mc(n,1)).attr(a.forced_root_block_attrs),t.insert(d,s)),d.append(s)):(c(d),d=null),s=r}c(d)}})(g,C),n.invalid||fc(v,n),g}};return((t,r)=>{var n,o;let a=t.schema;t.addAttributeFilter("href",t=>{let n=t.length,o=t=>{let r=t?tz.trim(t):"";return/\b(noopener)\b/g.test(r)?r:r.split(" ").filter(t=>t.length>0).concat(["noopener"]).sort().join(" ")};if(!r.allow_unsafe_link_target)for(;n--;){let r=t[n];"a"===r.name&&"_blank"===r.attr("target")&&r.attr("rel",o(r.attr("rel")))}}),r.allow_html_in_named_anchor||t.addAttributeFilter("id,name",t=>{let r,n,o,a,l=t.length;for(;l--;)if("a"===(a=t[l]).name&&a.firstChild&&!a.attr("href"))for(o=a.parent,r=a.lastChild;r&&o;)n=r.prev,o.insert(r,a),r=n}),r.fix_list_elements&&t.addNodeFilter("ul,ol",t=>{let r,n,o=t.length;for(;o--;)if((n=(r=t[o]).parent)&&("ul"===n.name||"ol"===n.name)){if(r.prev&&"li"===r.prev.name)r.prev.append(r);else{let t=new mc("li",1);t.attr("style","list-style-type: none"),r.wrap(t)}}});let l=a.getValidClasses();r.validate&&l&&t.addAttributeFilter("class",t=>{var r;let n=t.length;for(;n--;){let o=t[n],a=null!==(r=o.attr("class"))&&void 0!==r?r:"",i=tz.explode(a," "),s="";for(let t=0;t<i.length;t++){let r=i[t],n=!1,a=l["*"];a&&a[r]&&(n=!0),a=l[o.name],!n&&a&&a[r]&&(n=!0),n&&(s&&(s+=" "),s+=r)}s.length||(s=null),o.attr("class",s)}}),((t,r)=>{let{blob_cache:n}=r;if(n){let r=t=>{let r=t.attr("src");t.attr("src")===tM.transparentSrc||I(t.attr("data-mce-placeholder"))||I(t.attr("data-mce-bogus"))||F(r)||pD(n,r,!0).each(r=>{t.attr("src",r.blobUri())})};t.addAttributeFilter("src",t=>ed(t,r))}})(t,r);let i=null!==(n=r.sandbox_iframes)&&void 0!==n&&n,s=eT(null!==(o=r.sandbox_iframes_exclusions)&&void 0!==o?o:[]);r.convert_unsafe_embeds&&t.addNodeFilter("object,embed",t=>ed(t,t=>{t.replace((({type:t,src:r,width:n,height:o}={},a,l)=>{let i=M(t)?"iframe":pI(t,"image")?"img":pI(t,"video")?"video":pI(t,"audio")?"audio":"iframe",s=new mc(i,1);return s.attr("audio"===i?{src:r}:{src:r,width:n,height:o}),"audio"!==i&&"video"!==i||s.attr("controls",""),"iframe"===i&&a&&pF(s,l),s})({type:t.attr("type"),src:"object"===t.name?t.attr("data"):t.attr("src"),width:t.attr("width"),height:t.attr("height")},i,s))})),i&&t.addNodeFilter("iframe",t=>ed(t,t=>pF(t,s)))})(p,a),a.inline_styles&&pN(p,a,r),p},hV=(t,r,n)=>{let o=fN(t)?mA({validate:!1}).serialize(t):t,a=r(o);if(a.isDefaultPrevented())return a;if(fN(t)){if(a.content!==o){let r=h$({validate:!1,forced_root_block:!1,...n}).parse(a.content,{context:t.name});return{...a,content:r}}return{...a,content:t}}return a},hq=t=>({sanitize:sV(t),sandbox_iframes:sX(t),sandbox_iframes_exclusions:sZ(t)}),hW=(t,r)=>{if(r.no_events)return l7.value(r);{let n=t.dispatch("BeforeGetContent",r);return n.isDefaultPrevented()?l7.error(cY(t,{content:"",...n}).content):l7.value(n)}},hK=(t,r,n)=>n.no_events?r:hV(r,r=>cY(t,{...n,content:r}),hq(t)).content,hY=(t,r)=>{if(r.no_events)return l7.value(r);{let n=hV(r.content,n=>{var o;return o={...r,content:n},t.dispatch("BeforeSetContent",o)},hq(t));return n.isDefaultPrevented()?(cK(t,n),l7.error(void 0)):l7.value(n)}},hG=(t,r,n)=>{n.no_events||cK(t,{...n,content:r})},hX=(t,r,n)=>({element:t,width:r,rows:n}),hZ=(t,r)=>({element:t,cells:r}),hQ=(t,r)=>({x:t,y:r}),hJ=(t,r)=>t9(t,r).bind(ta).getOr(1),h0=(t,r,n)=>{let o=t.rows;return!!(o[n]?o[n].cells:[])[r]},h1=t=>ef(t,(t,r)=>r.cells.length>t?r.cells.length:t,0),h2=(t,r)=>{let n=t.rows;for(let t=0;t<n.length;t++){let o=n[t].cells;for(let n=0;n<o.length;n++)if(ry(o[n],r))return et.some(hQ(n,t))}return et.none()},h3=(t,r,n,o,a)=>{let l=[],i=t.rows;for(let t=n;t<=a;t++){let n=i[t].cells,a=r<o?n.slice(r,o+1):n.slice(o,r+1);l.push(hZ(i[t].element,a))}return l},h8=t=>((t,r)=>{let n=aX(t.element),o=rg("tbody");return no(o,r),nr(n,o),n})(t,es(t.rows,t=>{let r=es(t.cells,t=>{let r=aZ(t);return re(r,"colspan"),re(r,"rowspan"),r}),n=aX(t.element);return no(n,r),n})),h5=(t,r,n)=>{let o=ru(r.commonAncestorContainer),a=mX(o,t),l=em(a,t=>n.isWrapper(tG(t))),i=eh(a,t=>"li"===tG(t)&&d9(t,r)).fold(q([]),t=>eh(a,t=>"ul"===tG(t)||"ol"===tG(t)).map(t=>{let r=rg(tG(t));return r3(r,eI(r4(t),(t,r)=>e4(r,"list-style"))),[rg("li"),r]}).getOr([]));return es(l.concat(i.length?i:a6(o)?r_(o).filter(a5).fold(q([]),t=>[o,t]):a5(o)?[o]:[]),aX)},h6=()=>ul([]),h4=(t,r)=>rG(r[0],"table",Y(ry,t)).bind(t=>{var n;let o=r[0],a=r[r.length-1];return h2(n=(t=>{let r=hX(aX(t),0,[]);return ed(nw(t,"tr"),(t,n)=>{ed(nw(t,"td,th"),(o,a)=>{((t,r,n,o,a)=>{let l=hJ(a,"rowspan"),i=hJ(a,"colspan"),s=t.rows;for(let t=n;t<n+l;t++){s[t]||(s[t]=hZ(aZ(o),[]));for(let o=r;o<r+i;o++)s[t].cells[o]=t===n&&o===r?a:aX(a)}})(r,((t,r,n)=>{for(;h0(t,r,n);)r++;return r})(r,a,n),n,t,o)})}),hX(r.element,h1(r.rows),r.rows)})(t),o).bind(t=>h2(n,a).map(r=>((t,r,n)=>{let o=r.x,a=r.y,l=n.x,i=n.y,s=a<i?h3(t,o,a,l,i):h3(t,o,i,l,a);return hX(t.element,h1(s),s)})(n,t,r))).map(t=>ul([h8(t)]))}).getOrThunk(h6),h9=(t,r,n)=>{var o;let a=d3(r,t);return a.length>0?h4(t,a):r.length>0&&r[0].collapsed?h6():((t,r)=>{let n=ef(r,(t,r)=>(nr(r,t),r),t);return r.length>0?ul([n]):n})(ru((o=r[0]).cloneContents()),h5(t,o,n))},h7=(t,r)=>r>=0&&r<t.length&&d0(t.charAt(r)),be=t=>lr(t.innerText),bt=t=>nD(t)?t.outerHTML:n$(t)?oj.encodeRaw(t.data,!1):nW(t)?"<!--"+t.data+"-->":"",br=(t,r)=>{var n;let o;return n=((t,r)=>{let n=t.length+r.length+2,o=Array(n),a=Array(n),l=(n,o,a,i,d)=>{let c=s(n,o,a,i);if(null===c||c.start===o&&c.diag===o-i||c.end===n&&c.diag===n-a){let l=n,s=a;for(;l<o||s<i;)l<o&&s<i&&t[l]===r[s]?(d.push([0,t[l]]),++l,++s):o-n>i-a?(d.push([2,t[l]]),++l):(d.push([1,r[s]]),++s)}else{l(n,c.start,a,c.start-c.diag,d);for(let r=c.start;r<c.end;++r)d.push([0,t[r]]);l(c.end,o,c.end-c.diag,i,d)}},i=(n,o,a,l)=>{let i=n;for(;i-o<l&&i<a&&t[i]===r[i-o];)++i;return{start:n,end:i,diag:o}},s=(n,l,s,d)=>{let c,u,m,g,f;let p=l-n,h=d-s;if(0===p||0===h)return null;let b=p-h,v=h+p,y=(v%2==0?v:v+1)/2;for(o[1+y]=n,a[1+y]=l+1,c=0;c<=y;++c){for(u=-c;u<=c;u+=2){for(m=u+y,u===-c||u!==c&&o[m-1]<o[m+1]?o[m]=o[m+1]:o[m]=o[m-1]+1,f=(g=o[m])-n+s-u;g<l&&f<d&&t[g]===r[f];)o[m]=++g,++f;if(b%2!=0&&b-c<=u&&u<=b+c&&a[m-b]<=o[m])return i(a[m-b],u+n-s,l,d)}for(u=b-c;u<=b+c;u+=2){for(m=u+y-b,u===b-c||u!==b+c&&a[m+1]<=a[m-1]?a[m]=a[m+1]-1:a[m]=a[m-1],f=(g=a[m]-1)-n+s-u;g>=n&&f>=s&&t[g]===r[f];)a[m]=g--,f--;if(b%2==0&&-c<=u&&u<=c&&a[m]<=o[m+b])return i(a[m],u+n-s,l,d)}}return null},d=[];return l(0,t.length,0,r.length,d),d})(es(eR(r.childNodes),bt),t),o=0,ed(n,t=>{0===t[0]?o++:1===t[0]?(((t,r,n)=>{let o=(t=>{let r;let n=document.createElement("div"),o=document.createDocumentFragment();for(t&&(n.innerHTML=t);r=n.firstChild;)o.appendChild(r);return o})(r);if(t.hasChildNodes()&&n<t.childNodes.length){let r=t.childNodes[n];t.insertBefore(o,r)}else t.appendChild(o)})(r,t[1],o),o++):2===t[0]&&((t,r)=>{if(t.hasChildNodes()&&r<t.childNodes.length){let n=t.childNodes[r];t.removeChild(n)}})(r,o)}),r},bn=eJ(()=>document.implementation.createHTMLDocument("undo")),bo=t=>{let r=t.serializer.getTempAttrs(),n=mx(t.getBody(),r);return null!==n.querySelector("iframe")?{type:"fragmented",fragments:em(es(eR(n.childNodes),$(lr,bt)),t=>t.length>0),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:lr(n.innerHTML),bookmark:null,beforeBookmark:null}},ba=(t,r,n)=>{let o=n?r.beforeBookmark:r.bookmark;"fragmented"===r.type?br(r.fragments,t.getBody()):t.setContent(r.content,{format:"raw",no_selection:!I(o)||!dH(o)||!o.isFakeCaret}),o&&(t.selection.moveToBookmark(o),t.selection.scrollIntoView())},bl=t=>"fragmented"===t.type?t.fragments.join(""):t.content,bi=t=>{let r=rg("body",bn());return nc(r,bl(t)),ed(nw(r,"*[data-mce-bogus]"),ni),nd(r)},bs=(t,r)=>!(!t||!r)&&(bl(t)===bl(r)||bi(t)===bi(r)),bd=t=>0===t.get(),bc=(t,r,n)=>{bd(n)&&(t.typing=r)},bu=(t,r)=>{t.typing&&(bc(t,!1,r),t.add())},bm=t=>({init:{bindEvents:H},undoManager:{beforeChange:(r,n)=>{bd(r)&&n.set(l6(t.selection))},add:(r,n,o,a,l,i)=>((t,r,n,o,a,l,i)=>{let s=bo(t),d=tz.extend(l||{},s);if(!bd(o)||t.removed)return null;let c=r.data[n.get()];if(t.dispatch("BeforeAddUndo",{level:d,lastLevel:c,originalEvent:i}).isDefaultPrevented()||c&&bs(c,d))return null;r.data[n.get()]&&a.get().each(t=>{r.data[n.get()].beforeBookmark=t});let u=si(t);if(u&&r.data.length>u){for(let t=0;t<r.data.length-1;t++)r.data[t]=r.data[t+1];r.data.length--,n.set(r.data.length)}d.bookmark=l6(t.selection),n.get()<r.data.length-1&&(r.data.length=n.get()+1),r.data.push(d),n.set(r.data.length-1);let m={level:d,lastLevel:c,originalEvent:i};return n.get()>0?(t.setDirty(!0),t.dispatch("AddUndo",m),t.dispatch("change",m)):t.dispatch("AddUndo",m),d})(t,r,n,o,a,l,i),undo:(r,n,o)=>{let a;return r.typing&&(r.add(),r.typing=!1,bc(r,!1,n)),o.get()>0&&(o.set(o.get()-1),ba(t,a=r.data[o.get()],!0),t.setDirty(!0),t.dispatch("Undo",{level:a})),a},redo:(r,n)=>{let o;return r.get()<n.length-1&&(r.set(r.get()+1),ba(t,o=n[r.get()],!1),t.setDirty(!0),t.dispatch("Redo",{level:o})),o},clear:(r,n)=>{r.data=[],n.set(0),r.typing=!1,t.dispatch("ClearUndos")},reset:t=>{t.clear(),t.add()},hasUndo:(r,n)=>n.get()>0||r.typing&&r.data[0]&&!bs(bo(t),r.data[0]),hasRedo:(t,r)=>r.get()<t.data.length-1&&!t.typing,transact:(t,r,n)=>(bu(t,r),t.beforeChange(),t.ignore(n),t.add()),ignore:(t,r)=>((t,r)=>{try{t.set(t.get()+1),r()}finally{t.set(t.get()-1)}})(t,r),extra:(r,n,o,a)=>((t,r,n,o,a)=>{if(r.transact(o)){let o=r.data[n.get()].bookmark;ba(t,r.data[n.get()-1],!0),r.transact(a)&&(r.data[n.get()-1].beforeBookmark=o)}})(t,r,n,o,a)},formatter:{match:(r,n,o,a)=>fM(t,r,n,o,a),matchAll:(r,n)=>((t,r,n)=>{let o=[],a={},l=t.selection.getStart();return t.dom.getParent(l,l=>{for(let i=0;i<r.length;i++){let s=r[i];!a[s]&&fL(t,l,s,n)&&(a[s]=!0,o.push(s))}},t.dom.getRoot()),o})(t,r,n),matchNode:(r,n,o,a)=>fL(t,r,n,o,a),canApply:r=>((t,r)=>{let n=t.formatter.get(r),o=t.dom;if(n&&t.selection.isEditable()){let r=cb(o,t.selection.getStart());for(let t=n.length-1;t>=0;t--){let a=n[t];if(!cC(a))return!0;for(let t=r.length-1;t>=0;t--)if(o.is(r[t],a.selector))return!0}}return!1})(t,r),closest:r=>((t,r)=>{let n=r=>ry(r,ru(t.getBody()));return et.from(t.selection.getStart(!0)).bind(o=>fT(ru(o),n=>eA(r,r=>fL(t,n.dom,r)?et.some(r):et.none()),n)).getOrNull()})(t,r),apply:(r,n,o)=>py(t,r,n,o),remove:(r,n,o,a)=>pg(t,r,n,o,a),toggle:(r,n,o)=>((t,r,n,o)=>{let a=t.formatter.get(r);a&&(!fM(t,r,n,o)||"toggle"in a[0]&&!a[0].toggle?py(t,r,n,o):pg(t,r,n,o))})(t,r,n,o),formatChanged:(r,n,o,a,l)=>(((t,r,n,o,a,l)=>{let i=r.get();ed(n.split(","),r=>{let n=ej(i,r).getOrThunk(()=>{let t={withSimilar:{state:aS(!1),similar:!0,callbacks:[]},withoutSimilar:{state:aS(!1),similar:!1,callbacks:[]},withVars:[]};return i[r]=t,t}),s=()=>{let n=px(t);return pw(t,n,r,a,l).isSome()};if(M(l)){let t=a?n.withSimilar:n.withoutSimilar;t.callbacks.push(o),1===t.callbacks.length&&t.state.set(s())}else n.withVars.push({state:aS(s()),similar:a,vars:l,callback:o})}),r.set(i)})(t,r,n,o,a,l),{unbind:()=>((t,r,n)=>{let o=t.get();ed(r.split(","),t=>ej(o,t).each(r=>{o[t]={withSimilar:{...r.withSimilar,callbacks:em(r.withSimilar.callbacks,t=>t!==n)},withoutSimilar:{...r.withoutSimilar,callbacks:em(r.withoutSimilar.callbacks,t=>t!==n)},withVars:em(r.withVars,t=>t.callback!==n)}})),t.set(o)})(r,n,o)})},editor:{getContent:r=>et.from(t.getBody()).fold(q("tree"===r.format?new mc("body",11):""),n=>mS(t,r,n)),setContent:(r,n)=>et.from(t.getBody()).map(o=>fN(r)?((t,r,n,o)=>{fu(t.parser.getNodeFilters(),t.parser.getAttributeFilters(),n);let a=mA({validate:!1},t.schema).serialize(n),l=lr(a7(ru(r))?a:tz.trim(a));return fR(t,l,o.no_selection),{content:n,html:l}})(t,o,r,n):((t,r,n,o)=>{if(0===(n=lr(n)).length||/^\s+$/.test(n)){let a='<br data-mce-bogus="1">';"TABLE"===r.nodeName?n="<tr><td>"+a+"</td></tr>":/^(UL|OL)$/.test(r.nodeName)&&(n="<li>"+a+"</li>");let l=i_(t);return t.schema.isValidChild(r.nodeName.toLowerCase(),l.toLowerCase())?(n=a,n=t.dom.createHTML(l,ik(t),n)):n||(n=a),fR(t,n,o.no_selection),{content:n,html:n}}{"raw"!==o.format&&(n=mA({validate:!1},t.schema).serialize(t.parser.parse(n,{isRootContent:!0,insert:!0})));let a=a7(ru(r))?n:tz.trim(n);return fR(t,a,o.no_selection),{content:a,html:a}}})(t,o,r,n)).getOr({content:r,html:fN(n.content)?"":n.content}),insertContent:(r,n)=>fS(t,r,n),addVisual:r=>((t,r)=>{let n=t.dom,o=I(r)?r:t.getBody();ed(n.select("table,a",o),r=>{switch(r.nodeName){case"TABLE":let o=sh(t),a=n.getAttrib(r,"border");a&&"0"!==a||!t.hasVisual?n.removeClass(r,o):n.addClass(r,o);break;case"A":if(!n.getAttrib(r,"href")){let o=n.getAttrib(r,"name")||r.id,a=sb(t);o&&t.hasVisual?n.addClass(r,a):n.removeClass(r,a)}}}),t.dispatch("VisualAid",{element:r,hasVisual:t.hasVisual})})(t,r)},selection:{getContent:(r,n)=>((t,r,n={})=>hW(t,{...n,format:r,get:!0,selection:!0,getInner:!0}).fold(W,r=>{let n=((t,r)=>{if("text"===r.format)return et.from(t.selection.getRng()).map(r=>{var n;let o=et.from(t.dom.getParent(r.commonAncestorContainer,t.dom.isBlock)),a=t.getBody(),l=o.map(t=>t.nodeName).getOr("div").toLowerCase(),i=ru(r.cloneContents());m_(i),mk(i);let s=t.dom.add(a,l,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},i.dom),d=be(s),c=lr(null!==(n=s.textContent)&&void 0!==n?n:"");if(t.dom.remove(s),h7(c,0)||h7(c,c.length-1)){let t=be(o.getOr(a)),r=t.indexOf(d);return -1===r?d:(h7(t,r-1)?" ":"")+d+(h7(t,r+d.length)?" ":"")}return d}).getOr("");{let n=((t,r)=>{let n=t.selection.getRng(),o=t.dom.create("body"),a=t.selection.getSel(),l=ma(t,d2(a)),i=r.contextual?h9(ru(t.getBody()),l,t.schema).dom:n.cloneContents();return i&&o.appendChild(i),t.selection.serializer.serialize(o,r)})(t,r);return"tree"===r.format?n:t.selection.isCollapsed()?"":n}})(t,r);return hK(t,n,r)}))(t,r,n)},autocompleter:{addDecoration:H,removeDecoration:H},raw:{getModel:()=>et.none()}}),bg=t=>eH(t.plugins,"rtc"),bf=t=>t.rtcInstance?t.rtcInstance:bm(t),bp=t=>{let r=t.rtcInstance;if(r)return r;throw Error("Failed to get RTC instance not yet initialized.")},bh=t=>bp(t).init.bindEvents(),bb=t=>0===t.dom.length?(nl(t),et.none()):et.some(t),bv=(t,r,n,o,a)=>{t.bind(t=>((o?gv:gb)(t.dom,o?t.dom.length:0,a),r.filter(t0).map(r=>((t,r,n,o,a)=>{let l=t.dom,i=r.dom,s=o?l.length:i.length;o?(gy(l,i,a,!1,!o),n.setStart(i,s)):(gy(i,l,a,!1,!o),n.setEnd(i,s))})(t,r,n,o,a)))).orThunk(()=>r.filter(t=>cH.isBookmarkNode(t.dom)).bind(o?rR:rN).or(r).filter(t0).map(t=>((t,r,n)=>{r_(t).each(o=>{let a=t.dom;r&&gs(o,lH(a,0),n)?gb(a,0,n):!r&&gd(o,lH(a,a.length),n)&&gv(a,a.length,n)})})(t,o,a)))},by=(t,r,n)=>{if(eH(t,r)){let o=em(t[r],t=>t!==n);0===o.length?delete t[r]:t[r]=o}},bC=t=>!(!t||!t.ownerDocument)&&rC(ru(t.ownerDocument),ru(t)),bE=(t,r,n,o)=>{let a,l;let{selectorChangedWithUnbind:i}=((t,r)=>{let n,o;let a=(r,n)=>eh(n,n=>t.is(n,r)),l=r=>t.getParents(r,void 0,t.getRoot());return{selectorChangedWithUnbind:(t,i)=>(n||(n={},o={},r.on("NodeChange",t=>{let r=t.element,i=l(r),s={};eP(n,(t,r)=>{a(r,i).each(n=>{o[r]||(ed(t,t=>{t(!0,{node:n,selector:r,parents:i})}),o[r]=t),s[r]=t})}),eP(o,(t,n)=>{s[n]||(delete o[n],ed(t,t=>{t(!1,{node:r,selector:n,parents:i})}))})})),n[t]||(n[t]=[]),n[t].push(i),a(t,l(r.selection.getStart())).each(()=>{o[t]=n[t]}),{unbind:()=>{by(n,t,i),by(o,t,i)}})}})(t,o),s=(t,r)=>((t,r,n={})=>{hY(t,{format:"html",...n,set:!0,selection:!0,content:r}).each(r=>{let n=((t,r)=>{if("raw"!==r.format){let n=t.selection.getRng(),o=t.dom.getParent(n.commonAncestorContainer,t.dom.isBlock),a=o?{context:o.nodeName.toLowerCase()}:{},l=t.parser.parse(r.content,{forced_root_block:!1,...a,...r});return mA({validate:!1},t.schema).serialize(l)}return r.content})(t,r),o=t.selection.getRng();((t,r,n)=>{let o=et.from(r.firstChild).map(ru),a=et.from(r.lastChild).map(ru);t.deleteContents(),t.insertNode(r);let l=o.bind(rN).filter(t0).bind(bb),i=a.bind(rR).filter(t0).bind(bb);bv(l,o,t,!0,n),bv(i,a,t,!1,n),t.collapse(!1)})(o,o.createContextualFragment(n),t.schema),t.selection.setRng(o),uU(t,o),hG(t,n,r)})})(o,t,r),d=t=>{let r=u();r.collapse(!!t),m(r)},c=()=>r.getSelection?r.getSelection():r.document.selection,u=()=>{let n;let i=(t,r,n)=>{try{return r.compareBoundaryPoints(t,n)}catch(t){return -1}},s=r.document;if(I(o.bookmark)&&!u4(o)){let t=uX(o);if(t.isSome())return t.map(t=>ma(o,[t])[0]).getOr(s.createRange())}try{let t=c();t&&!nP(t.anchorNode)&&(n=t.rangeCount>0?t.getRangeAt(0):s.createRange(),n=ma(o,[n])[0])}catch(t){}if(n||(n=s.createRange()),nK(n.startContainer)&&n.collapsed){let r=t.getRoot();n.setStart(r,0),n.setEnd(r,0)}return a&&l&&(0===i(n.START_TO_START,n,a)&&0===i(n.END_TO_END,n,a)?n=l:(a=null,l=null)),n},m=(t,r)=>{var n;if(!((n=t)&&bC(n.startContainer)&&bC(n.endContainer)))return;let i=c();if(t=o.dispatch("SetSelectionRange",{range:t,forward:r}).range,i){l=t;try{i.removeAllRanges(),i.addRange(t)}catch(t){}!1===r&&i.extend&&(i.collapse(t.endContainer,t.endOffset),i.extend(t.startContainer,t.startOffset)),a=i.rangeCount>0?i.getRangeAt(0):null}if(!t.collapsed&&t.startContainer===t.endContainer&&(null==i?void 0:i.setBaseAndExtent)&&t.endOffset-t.startOffset<2&&t.startContainer.hasChildNodes()){let r=t.startContainer.childNodes[t.startOffset];r&&"IMG"===r.nodeName&&(i.setBaseAndExtent(t.startContainer,t.startOffset,t.endContainer,t.endOffset),i.anchorNode===t.startContainer&&i.focusNode===t.endContainer||i.setBaseAndExtent(r,0,r,1))}o.dispatch("AfterSetSelectionRange",{range:t,forward:r})},g=()=>{let r=c(),n=null==r?void 0:r.anchorNode,o=null==r?void 0:r.focusNode;if(!r||!n||!o||nP(n)||nP(o))return!0;let a=t.createRng(),l=t.createRng();try{a.setStart(n,r.anchorOffset),a.collapse(!0),l.setStart(o,r.focusOffset),l.collapse(!0)}catch(t){return!0}return 0>=a.compareBoundaryPoints(a.START_TO_START,l)},f={dom:t,win:r,serializer:n,editor:o,expand:(r={type:"word"})=>m(uy(t).expand(u(),r)),collapse:d,setCursorLocation:(r,n)=>{let a=t.createRng();I(r)&&I(n)?(a.setStart(r,n),a.setEnd(r,n),m(a),d(!1)):(d7(t,a,o.getBody(),!0),m(a))},getContent:t=>((t,r={})=>{var n;return n=r.format?r.format:"html",bp(t).selection.getContent(n,r)})(o,t),setContent:s,getBookmark:(t,r)=>p.getBookmark(t,r),moveToBookmark:t=>p.moveToBookmark(t),select:(r,n)=>(et.from(r).bind(r=>et.from(r.parentNode).map(o=>{let a=t.nodeIndex(r),l=t.createRng();return l.setStart(o,a),l.setEnd(o,a+1),n&&(d7(t,l,r,!0),d7(t,l,r,!1)),l})).each(m),r),isCollapsed:()=>{let t=u(),r=c();return!(!t||t.item)&&(t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!r||t.collapsed)},isEditable:()=>{let r=u(),n=o.getBody().querySelectorAll('[data-mce-selected="1"]');return n.length>0?eC(n,r=>t.isEditable(r.parentElement)):me(t,r)},isForward:g,setNode:r=>(s(t.getOuterHTML(r)),r),getNode:()=>((t,r)=>{if(!r)return t;let n=r.startContainer,o=r.endContainer,a=r.startOffset,l=r.endOffset,i=r.commonAncestorContainer;r.collapsed||(n===o&&l-a<2&&n.hasChildNodes()&&(i=n.childNodes[a]),n$(n)&&n$(o)&&(n=n.length===a?mo(n.nextSibling,!0):n.parentNode,o=0===l?mo(o.previousSibling,!1):o.parentNode,n&&n===o&&(i=n)));let s=n$(i)?i.parentNode:i;return nL(s)?s:t})(o.getBody(),u()),getSel:c,setRng:m,getRng:u,getStart:t=>mr(o.getBody(),u(),t),getEnd:t=>mn(o.getBody(),u(),t),getSelectedBlocks:(r,n)=>((t,r,n,o)=>{let a=[],l=t.getRoot(),i=t.getParent(n||mr(l,r,r.collapsed),t.isBlock),s=t.getParent(o||mn(l,r,r.collapsed),t.isBlock);if(i&&i!==l&&a.push(i),i&&s&&i!==s){let r;let n=new nS(i,l);for(;(r=n.next())&&r!==s;)t.isBlock(r)&&a.push(r)}return s&&i!==s&&s!==l&&a.push(s),a})(t,u(),r,n),normalize:()=>{let r=u();if(!(d2(c()).length>1)&&ce(o)){let n=uh(t,r);return n.each(t=>{m(t,g())}),n.getOr(r)}return r},selectorChanged:(t,r)=>(i(t,r),f),selectorChangedWithUnbind:i,getScrollContainer:()=>{let r,n=t.getRoot();for(;n&&"BODY"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){r=n;break}n=n.parentNode}return r},scrollIntoView:(t,r)=>{I(t)?((t,r,n)=>{(t.inline?uM:uI)(t,r,n)})(o,t,r):uU(o,u(),r)},placeCaretAt:(t,r)=>m(us(t,r,o.getDoc())),getBoundingClientRect:()=>{let t=u();return t.collapsed?lH.fromRangeStart(t).getClientRects()[0]:t.getBoundingClientRect()},destroy:()=>{r=a=l=null,h.destroy()}},p=cH(f),h=c2(f,o);return f.bookmarkManager=p,f.controlSelection=h,f},bw=(t,r,n)=>{-1===tz.inArray(r,n)&&(t.addAttributeFilter(n,(t,r)=>{let n=t.length;for(;n--;)t[n].attr(r,null)}),r.push(n))},bx=(t,r)=>{let n=["data-mce-selected"],o={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...t},a=r&&r.dom?r.dom:ax.DOM,l=r&&r.schema?r.schema:o8(o),i=h$(o,l);return i.addAttributeFilter("data-mce-tabindex",(t,r)=>{let n=t.length;for(;n--;){let o=t[n];o.attr("tabindex",o.attr("data-mce-tabindex")),o.attr(r,null)}}),i.addAttributeFilter("src,href,style",(t,r)=>{let n="data-mce-"+r,l=o.url_converter,i=o.url_converter_scope,s=t.length;for(;s--;){let o=t[s],d=o.attr(n);void 0!==d?(o.attr(r,d.length>0?d:null),o.attr(n,null)):(d=o.attr(r),"style"===r?d=a.serializeStyle(a.parseStyle(d),o.name):l&&(d=l.call(i,d,r,o.name)),o.attr(r,d.length>0?d:null))}}),i.addAttributeFilter("class",t=>{let r=t.length;for(;r--;){let n=t[r],o=n.attr("class");o&&(o=o.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),n.attr("class",o.length>0?o:null))}}),i.addAttributeFilter("data-mce-type",(t,r,n)=>{let o=t.length;for(;o--;){let r=t[o];"bookmark"!==r.attr("data-mce-type")||n.cleanup||(et.from(r.firstChild).exists(t=>{var r;return!nN(null!==(r=t.value)&&void 0!==r?r:"")})?r.unwrap():r.remove())}}),i.addNodeFilter("noscript",t=>{var r;let n=t.length;for(;n--;){let o=t[n].firstChild;o&&(o.value=oj.decode(null!==(r=o.value)&&void 0!==r?r:""))}}),i.addNodeFilter("script,style",(t,r)=>{var n;let a=t=>t.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,""),l=t.length;for(;l--;){let i=t[l],s=i.firstChild,d=null!==(n=null==s?void 0:s.value)&&void 0!==n?n:"";if("script"===r){let t=i.attr("type");t&&i.attr("type","mce-no/type"===t?null:t.replace(/^mce\-/,"")),"xhtml"===o.element_format&&s&&d.length>0&&(s.value="// <![CDATA[\n"+a(d)+"\n// ]]>")}else"xhtml"===o.element_format&&s&&d.length>0&&(s.value="<!--\n"+a(d)+"\n-->")}}),i.addNodeFilter("#comment",t=>{let r=t.length;for(;r--;){let n=t[r],l=n.value;o.preserve_cdata&&0===(null==l?void 0:l.indexOf("[CDATA["))?(n.name="#cdata",n.type=4,n.value=a.decode(l.replace(/^\[CDATA\[|\]\]$/g,""))):0===(null==l?void 0:l.indexOf("mce:protected "))&&(n.name="#text",n.type=3,n.raw=!0,n.value=unescape(l).substr(14))}}),i.addNodeFilter("xml:namespace,input",(t,r)=>{let n=t.length;for(;n--;){let o=t[n];7===o.type?o.remove():1===o.type&&("input"!==r||o.attr("type")||o.attr("type","text"))}}),i.addAttributeFilter("data-mce-type",t=>{ed(t,t=>{"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(i.schema.getNonEmptyElements())?t.remove():t.unwrap())})}),i.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(t,r)=>{let n=t.length;for(;n--;)t[n].attr(r,null)}),o.remove_trailing_brs&&((t,r,n)=>{r.addNodeFilter("br",(r,o,a)=>{let l=tz.extend({},n.getBlockElements()),i=n.getNonEmptyElements(),s=n.getWhitespaceElements();l.body=1;let d=t=>t.name in l||oy(n,t);for(let o=0,c=r.length;o<c;o++){let c=r[o],u=c.parent;if(u&&d(u)&&c===u.lastChild){let r=c.prev;for(;r;){let t=r.name;if("span"!==t||"bookmark"!==r.attr("data-mce-type")){"br"===t&&(c=null);break}r=r.prev}if(c&&(c.remove(),ff(n,i,s,u))){let r=n.getElementRule(u.name);r&&(r.removeEmpty?u.remove():r.paddEmpty&&fm(t,a,d,u))}}else{let t=c;for(;u&&u.firstChild===t&&u.lastChild===t&&(t=u,!l[u.name]);)u=u.parent;if(t===u){let t=new mc("#text",3);t.value="\xa0",c.replace(t)}}}})})(o,i,i.schema),{schema:l,addNodeFilter:i.addNodeFilter,addAttributeFilter:i.addAttributeFilter,serialize:(t,n={})=>{let s={format:"html",...n},d=((t,r,n)=>{let o=n.selection?{forced_root_block:!1,...n}:n,a=t.parse(r,o);return(t=>{let r=t=>"br"===(null==t?void 0:t.name),n=t.lastChild;if(r(n)){let t=n.prev;r(t)&&(n.remove(),t.remove())}})(a),a})(i,((t,r,n)=>{let o=lr(n.getInner?r.innerHTML:t.getOuterHTML(r));return n.selection||a7(ru(r))?o:tz.trim(o)})(a,I(r)&&r.hasEventListeners("PreProcess")&&!s.no_events?((t,r,n)=>{let o;let a=t.dom,l=r.cloneNode(!0),i=document.implementation;if(i.createHTMLDocument){let t=i.createHTMLDocument("");tz.each("BODY"===l.nodeName?l.childNodes:[l],r=>{t.body.appendChild(t.importNode(r,!0))}),l="BODY"!==l.nodeName?t.body.firstChild:t.body,o=a.doc,a.doc=t}return((t,r)=>{t.dispatch("PreProcess",r)})(t,{...n,node:l}),o&&(a.doc=o),l})(r,t,s):t,s),s);return"tree"===s.format?d:((t,r,n)=>{if(!r.no_events&&t){var o;return(o={...r,content:n},t.dispatch("PostProcess",o)).content}return n})(r,s,mA(o,l).serialize(d))},addRules:l.addValidElements,setRules:l.setValidElements,addTempAttr:Y(bw,i,n),getTempAttrs:q(n),getNodeFilters:i.getNodeFilters,getAttributeFilters:i.getAttributeFilters,removeNodeFilter:i.removeNodeFilter,removeAttributeFilter:i.removeAttributeFilter}},b_=(t,r)=>{let n=bx(t,r);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},bk=(t,r,n={})=>hY(t,{format:"html",...n,set:!0,content:r}).map(r=>{var n;let o=(n=r.content,bf(t).editor.setContent(n,r));return hG(t,o.html,r),o.content}).getOr(r),bS="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),bN=[],bR="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),bA=[],bT=(t,r)=>e_(em(r,r=>eH(t,r))),bO=t=>{let r=bT(t,bS),n=t.forced_root_block;return!1!==n&&""!==n||r.push("forced_root_block (false only)"),e_(r)},bB=t=>bT(t,bN),bP=(t,r)=>{let n=tz.makeMap(t.plugins," ");return e_(em(r,t=>eH(n,t)))},bD=t=>bP(t,bR),bL=t=>bP(t,bA.map(t=>t.name)),bM=t=>eh(bA,r=>r.name===t).fold(()=>t,r=>r.replacedWith?`${t}, replaced by ${r.replacedWith}`:t),bF=ax.DOM,bI=t=>et.from(t).each(t=>t.destroy()),bU=(()=>{let t={};return{add:(r,n)=>{t[r]=n},get:r=>t[r]?t[r]:{icons:{}},has:r=>eH(t,r)}})(),bz=aO.ModelManager,bj=(t,r)=>r.dom[t],bH=(t,r)=>parseInt(r8(r,t),10),b$=Y(bj,"clientWidth"),bV=Y(bj,"clientHeight"),bq=Y(bH,"margin-top"),bW=Y(bH,"margin-left"),bK=t=>{let r=[],n=()=>{let r=t.theme;return r&&r.getNotificationManagerImpl?r.getNotificationManagerImpl():(()=>{let t=()=>{throw Error("Theme did not provide a NotificationManager implementation.")};return{open:t,close:t,getArgs:t}})()},o=()=>et.from(r[0]),a=()=>{ed(r,t=>{t.reposition()})},l=t=>{eb(r,r=>r===t).each(t=>{r.splice(t,1)})},i=(i,s=!0)=>{var d;return t.removed||!(d=t.inline?t.getBody():t.getContentAreaContainer(),et.from(d).map(ru)).map(rV).getOr(!1)?{}:(s&&t.dispatch("BeforeOpenNotification",{notification:i}),eh(r,t=>{var r;return!((r=n().getArgs(t)).type!==i.type||r.text!==i.text||r.progressBar||r.timeout||i.progressBar||i.timeout)}).getOrThunk(()=>{t.editorManager.setActive(t);let s=n().open(i,()=>{l(s),a(),u9(t)&&o().fold(()=>t.focus(),t=>uz(ru(t.getEl())))});return r.push(s),a(),t.dispatch("OpenNotification",{notification:{...s}}),s}))},s=q(r);return t.on("SkinLoaded",()=>{let r=i1(t);r&&i({text:r,type:"warning",timeout:0},!1),a()}),t.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(a)}),t.on("remove",()=>{ed(r.slice(),t=>{n().close(t)})}),{open:i,close:()=>{o().each(t=>{n().close(t),l(t),a()})},getNotifications:s}},bY=aO.PluginManager,bG=aO.ThemeManager,bX=t=>{let r=[],n=()=>{let r=t.theme;return r&&r.getWindowManagerImpl?r.getWindowManagerImpl():(()=>{let t=()=>{throw Error("Theme did not provide a WindowManager implementation.")};return{open:t,openUrl:t,alert:t,confirm:t,close:t}})()},o=(t,r)=>(...n)=>r?r.apply(t,n):void 0,a=n=>{t.dispatch("CloseWindow",{dialog:n}),0===(r=em(r,t=>t!==n)).length&&t.focus()},l=n=>{t.editorManager.setActive(t),uG(t),t.ui.show();let o=n();return r.push(o),t.dispatch("OpenWindow",{dialog:o}),o};return t.on("remove",()=>{ed(r,t=>{n().close(t)})}),{open:(t,r)=>l(()=>n().open(t,r,a)),openUrl:t=>l(()=>n().openUrl(t,a)),alert:(t,r,a)=>{let l=n();l.alert(t,o(a||l,r))},confirm:(t,r,a)=>{let l=n();l.confirm(t,o(a||l,r))},close:()=>{et.from(r[r.length-1]).each(t=>{n().close(t),a(t)})}}},bZ=(t,r)=>{t.notificationManager.open({type:"error",text:r})},bQ=(t,r)=>{t._skinLoaded?bZ(t,r):t.on("SkinLoaded",()=>{bZ(t,r)})},bJ=(t,r,n)=>{cV(t,r,{message:n}),console.error(n)},b0=(t,r,n)=>n?`Failed to load ${t}: ${n} from url ${r}`:`Failed to load ${t} url: ${r}`,b1=(t,...r)=>{let n=window.console;n&&(n.error?n.error(t,...r):n.log(t,...r))},b2=t=>"content/"+t+"/content.css",b3=(t,r)=>{let n=t.editorManager.baseURL+"/skins/content",o=`content${t.editorManager.suffix}.css`;return es(r,r=>tinymce.Resource.has(b2(r))?r:/^[a-z0-9\-]+$/i.test(r)&&!t.inline?`${n}/${r}/${o}`:t.documentBaseURI.toAbsolute(r))},b8=(t,r)=>{let n={};return{findAll:(o,a=ee)=>Promise.all(es(em(o?eR(o.getElementsByTagName("img")):[],r=>{let n=r.src;return!r.hasAttribute("data-mce-bogus")&&!r.hasAttribute("data-mce-placeholder")&&!(!n||n===tM.transparentSrc)&&(e4(n,"blob:")?!t.isUploaded(n)&&a(r):!!e4(n,"data:")&&a(r))}),t=>{let o=t.src;if(eH(n,o))return n[o].then(r=>T(r)?r:{image:t,blobInfo:r.blobInfo});{let a=((t,r)=>{let n=()=>Promise.reject("Invalid data URI");if(e4(r,"blob:")){let o=t.getByUri(r);return I(o)?Promise.resolve(o):(e4(r,"blob:")?fetch(r).then(t=>t.ok?t.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${r} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})):e4(r,"data:")?new Promise((t,n)=>{pR(r).bind(({type:t,data:r,base64Encoded:n})=>pA(t,r,n)).fold(()=>n("Invalid data URI"),t)}):Promise.reject("Unknown URI format")).then(r=>pT(r).then(o=>pB(o,!1,n=>et.some(pP(t,r,n))).getOrThunk(n)))}return e4(r,"data:")?pD(t,r).fold(n,t=>Promise.resolve(t)):Promise.reject("Unknown image data format")})(r,o).then(r=>(delete n[o],{image:t,blobInfo:r})).catch(t=>(delete n[o],t));return n[o]=a,a}}))}},b5=()=>{let t={},r=(t,r)=>({status:t,resultUri:r}),n=r=>r in t;return{hasBlobUri:n,getResultUri:r=>{let n=t[r];return n?n.resultUri:null},isPending:r=>!!n(r)&&1===t[r].status,isUploaded:r=>!!n(r)&&2===t[r].status,markPending:n=>{t[n]=r(1,null)},markUploaded:(n,o)=>{t[n]=r(2,o)},removeFailed:r=>{delete t[r]},destroy:()=>{t={}}}},b6=0,b4=(t,r)=>{let n={},o=(t,n)=>new Promise((o,a)=>{let l=new XMLHttpRequest;l.open("POST",r.url),l.withCredentials=r.credentials,l.upload.onprogress=t=>{n(t.loaded/t.total*100)},l.onerror=()=>{a("Image upload failed due to a XHR Transport error. Code: "+l.status)},l.onload=()=>{var t,n;if(l.status<200||l.status>=300)return void a("HTTP Error: "+l.status);let i=JSON.parse(l.responseText);i&&T(i.location)?o((t=r.basePath,n=i.location,t?t.replace(/\/$/,"")+"/"+n.replace(/^\//,""):n)):a("Invalid JSON: "+l.responseText)};let i=new FormData;i.append("file",t.blob(),t.filename()),l.send(i)}),a=U(r.handler)?r.handler:o,l=(t,r)=>({url:r,blobInfo:t,status:!0}),i=(t,r)=>({url:"",blobInfo:t,status:!1,error:r}),s=(t,r)=>{tz.each(n[t],t=>{t(r)}),delete n[t]};return{upload:(d,c)=>{var u;return r.url||a!==o?(u=d,u=tz.grep(u,r=>!t.isUploaded(r.blobUri())),Promise.all(tz.map(u,r=>t.isPending(r.blobUri())?(t=>{let r=t.blobUri();return new Promise(t=>{n[r]=n[r]||[],n[r].push(t)})})(r):(t.markPending(r.blobUri()),new Promise(n=>{let o,d;try{let u=()=>{o&&(o.close(),d=H)},m=o=>{u(),t.removeFailed(r.blobUri()),s(r.blobUri(),i(r,o)),n(i(r,o))};d=t=>{t<0||t>100||et.from(o).orThunk(()=>et.from(c).map(Z)).each(r=>{o=r,r.progressBar.value(t)})},a(r,d).then(o=>{u(),t.markUploaded(r.blobUri(),o),s(r.blobUri(),l(r,o)),n(l(r,o))},t=>{m(T(t)?{message:t}:t)})}catch(t){n(i(r,t))}}))))):new Promise(t=>{t([])})}}},b9=t=>()=>t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),b7=(t,r)=>b4(r,{url:iM(t),basePath:iF(t),credentials:iI(t),handler:iU(t)}),ve=t=>{let r,n;let o=(()=>{let t=[],r=t=>{if(!t.blob||!t.base64)throw Error("blob and base64 representations of the image are required for BlobInfo to be created");let r=t.id||"blobid"+b6+++(()=>{let t=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+t()+t()+t()})(),n=t.name||r,o=t.blob;return{id:q(r),name:q(n),filename:q(t.filename||n+"."+(({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[o.type.toLowerCase()]||"dat")),blob:q(o),base64:q(t.base64),blobUri:q(t.blobUri||URL.createObjectURL(o)),uri:q(t.uri)}},n=r=>eh(t,r).getOrUndefined(),o=t=>n(r=>r.id()===t);return{create:(t,n,o,a,l)=>{if(T(t))return r({id:t,name:a,filename:l,blob:n,base64:o});if(O(t))return r(t);throw Error("Unknown input type")},add:r=>{o(r.id())||t.push(r)},get:o,getByUri:t=>n(r=>r.blobUri()===t),getByData:(t,r)=>n(n=>n.base64()===t&&n.blob().type===r),findFirst:n,removeByUri:r=>{t=em(t,t=>t.blobUri()!==r||(URL.revokeObjectURL(t.blobUri()),!1))},destroy:()=>{ed(t,t=>{URL.revokeObjectURL(t.blobUri())}),t=[]}}})(),a=b5(),l=[],i=r=>n=>t.selection?r(n):[],s=(t,r,n)=>{let o=0;do -1!==(o=t.indexOf(r,o))&&(t=t.substring(0,o)+n+t.substr(o+r.length),o+=n.length-r.length+1);while(-1!==o);return t},d=(t,r,n)=>(t=s(t,`src="${r}"`,`src="${n}"${n===tM.transparentSrc?' data-mce-placeholder="1"':""}`),s(t,'data-mce-src="'+r+'"','data-mce-src="'+n+'"')),c=(r,n)=>{ed(t.undoManager.data,t=>{"fragmented"===t.type?t.fragments=es(t.fragments,t=>d(t,r,n)):t.content=d(t.content,r,n)})},u=()=>(r||(r=b7(t,a)),f().then(i(n=>{let a=es(n,t=>t.blobInfo);return r.upload(a,b9(t)).then(i(r=>{let a=[],l=!1,i=es(r,(r,i)=>{var s;let{blobInfo:d,image:u}=n[i],m=!1;return r.status&&iP(t)?(r.url&&!e6(u.src,r.url)&&(l=!0),o.removeByUri(u.src),bg(t)||((r,n)=>{let o=t.convertURL(n,"src");c(r.src,n),t6(ru(r),{src:iB(t)?n+(-1===n.indexOf("?")?"?":"&")+(new Date).getTime():n,"data-mce-src":o})})(u,r.url)):r.error&&(r.error.remove&&(c(u.src,tM.transparentSrc),a.push(u),m=!0),s=r.error.message,bQ(t,aT.translate(["Failed to upload image: {0}",s]))),{element:u,status:r.status,uploadUri:r.url,blobInfo:d,removed:m}});return a.length>0&&!bg(t)?t.undoManager.transact(()=>{ed(ns(a),r=>{let n=r_(r);nl(r),n.each(r=>{t.dom.isEmpty(r.dom)&&I(t.schema.getTextBlockElements()[tG(r)])&&nr(r,rm('<br data-mce-bogus="1" />'))}),o.removeByUri(r.dom.src)})}):l&&t.undoManager.dispatchChange(),i}))}))),m=()=>iO(t)?u():Promise.resolve([]),g=t=>eC(l,r=>r(t)),f=()=>(n||(n=b8(a,o)),n.findAll(t.getBody(),g).then(i(r=>{let n=em(r,r=>T(r)?(bQ(t,r),!1):"blob"!==r.uriType);return bg(t)||ed(n,t=>{c(t.image.src,t.blobInfo.blobUri()),t.image.src=t.blobInfo.blobUri(),t.image.removeAttribute("data-mce-src")}),n}))),p=r=>r.replace(/src="(blob:[^"]+)"/g,(r,n)=>{let l=a.getResultUri(n);if(l)return'src="'+l+'"';let i=o.getByUri(n);return i||(i=ef(t.editorManager.get(),(t,r)=>t||r.editorUpload&&r.editorUpload.blobCache.getByUri(n),void 0)),i?'src="data:'+i.blob().type+";base64,"+i.base64()+'"':r});return t.on("SetContent",()=>{iO(t)?m():f()}),t.on("RawSaveContent",t=>{t.content=p(t.content)}),t.on("GetContent",t=>{t.source_view||"raw"===t.format||"tree"===t.format||(t.content=p(t.content))}),t.on("PostRender",()=>{t.parser.addNodeFilter("img",t=>{ed(t,t=>{let r=t.attr("src");if(!r||o.getByUri(r))return;let n=a.getResultUri(r);n&&t.attr("src",n)})})}),{blobCache:o,addFilter:t=>{l.push(t)},uploadImages:u,uploadImagesAuto:m,scanForImages:f,destroy:()=>{o.destroy(),a.destroy(),n=r=null}}},vt={remove_similar:!0,inherit:!1},vr={selector:"td,th",...vt},vn=q({tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...vr},tablecellverticalalign:{styles:{"vertical-align":"%value"},...vr},tablecellbordercolor:{styles:{borderColor:"%value"},...vr},tablecellclass:{classes:["%value"],...vr},tableclass:{selector:"table",classes:["%value"],...vt},tablecellborderstyle:{styles:{borderStyle:"%value"},...vr},tablecellborderwidth:{styles:{borderWidth:"%value"},...vr}}),vo=tz.each,va=ax.DOM,vl=t=>I(t)&&O(t),vi=(t,r)=>{let n=r&&r.schema||o8({}),o=t=>{let r=T(t)?{name:t,classes:[],attrs:{}}:t,n=va.create(r.name);return r.classes.length>0&&va.addClass(n,r.classes.join(" ")),va.setAttribs(n,r.attrs),n},a=(t,r,l)=>{let i;let s=r[0],d=vl(s)?s.name:void 0,c=((t,r)=>{let o=n.getElementRule(t.nodeName.toLowerCase()),a=null==o?void 0:o.parentsRequired;return!(!a||!a.length)&&(r&&el(a,r)?r:a[0])})(t,d);if(c)d===c?(i=s,r=r.slice(1)):i=c;else if(s)i=s,r=r.slice(1);else if(!l)return t;let u=i?o(i):va.create("div");return u.appendChild(t),l&&tz.each(l,r=>{let n=o(r);u.insertBefore(n,t)}),a(u,r,vl(i)?i.siblings:void 0)},l=va.create("div");if(t.length>0){let r=t[0],n=o(r),i=vl(r)?r.siblings:void 0;l.appendChild(a(n,t.slice(1),i))}return l},vs=t=>{let r="div",n={name:r,classes:[],attrs:{},selector:t=tz.trim(t)};return"*"!==t&&(r=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(t,r,o,a,l)=>{switch(r){case"#":n.attrs.id=o;break;case".":n.classes.push(o);break;case":":-1!==tz.inArray("checked disabled enabled read-only required".split(" "),o)&&(n.attrs[o]=o)}if("["===a){let t=l.match(/([\w\-]+)(?:\=\"([^\"]+))?/);t&&(n.attrs[t[1]]=t[2])}return""})),n.name=r||"div",n},vd=(t,r)=>{var n;let o="",a=i9(t);if(""===a)return"";let l=t=>T(t)?t.replace(/%(\w+)/g,""):"",i=(r,n)=>va.getStyle(null!=n?n:t.getBody(),r,!0);if(T(r)){let n=t.formatter.get(r);if(!n)return"";r=n[0]}if("preview"in r){let t=r.preview;if(!1===t)return"";a=t||a}let s,d=r.block||r.inline||"span",c=T(n=r.selector)?(n=(n=n.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),tz.map(n.split(/(?:>|\s+(?![^\[\]]+\]))/),t=>{let r=tz.map(t.split(/(?:~\+|~|\+)/),vs),n=r.pop();return r.length&&(n.siblings=r),n}).reverse()):[];c.length>0?(c[0].name||(c[0].name=d),d=r.selector,s=vi(c,t)):s=vi([d],t);let u=va.select(d,s)[0]||s.firstChild;vo(r.styles,(t,r)=>{let n=l(t);n&&va.setStyle(u,r,n)}),vo(r.attributes,(t,r)=>{let n=l(t);n&&va.setAttrib(u,r,n)}),vo(r.classes,t=>{let r=l(t);va.hasClass(u,r)||va.addClass(u,r)}),t.dispatch("PreviewFormats"),va.setStyles(s,{position:"absolute",left:-65535}),t.getBody().appendChild(s);let m=i("fontSize"),g=/px$/.test(m)?parseInt(m,10):0;return vo(a.split(" "),t=>{let r=i(t,u);if(!("background-color"===t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(r)&&"#ffffff"===an(r=i(t)).toLowerCase()||"color"===t&&"#000000"===an(r).toLowerCase())){if("font-size"===t&&/em|%$/.test(r)){if(0===g)return;r=parseFloat(r)/(/%$/.test(r)?100:1)*g+"px"}"border"===t&&r&&(o+="padding:0 2px;"),o+=t+":"+r+";"}}),t.dispatch("AfterPreviewFormats"),va.remove(s),o},vc=t=>{let r=(t=>{let r={},n=(t,o)=>{t&&(T(t)?(P(o)||(o=[o]),ed(o,t=>{M(t.deep)&&(t.deep=!cC(t)),M(t.split)&&(t.split=!cC(t)||cE(t)),M(t.remove)&&cC(t)&&!cE(t)&&(t.remove="none"),cC(t)&&cE(t)&&(t.mixed=!0,t.block_expand=!0),T(t.classes)&&(t.classes=t.classes.split(/\s+/))}),r[t]=o):eP(t,(t,r)=>{n(r,t)}))};return n((t=>{let r=t.dom,n=t.schema.type,o={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:t=>{r.setStyle(t,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:t=>{r.setStyle(t,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{let t={inline:"span",styles:{textDecoration:"line-through"},exact:!0},r={inline:"strike",remove:"all",preserve_attributes:["class","style"]},o={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==n?[o,t,r]:[t,o,r]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(t,r,n)=>nD(t)&&t.hasAttribute("href"),onformat:(t,n,o)=>{tz.each(o,(n,o)=>{r.setAttrib(t,o,n)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":t=>{var r;return null!==(r=null==t?void 0:t.customValue)&&void 0!==r?r:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return tz.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),t=>{o[t]={block:t,remove:"all"}}),o})(t)),n(vn()),n(i4(t)),{get:t=>I(t)?r[t]:r,has:t=>eH(r,t),register:n,unregister:t=>(t&&r[t]&&delete r[t],r)}})(t),n=aS({});return(t=>{t.addShortcut("meta+b","","Bold"),t.addShortcut("meta+i","","Italic"),t.addShortcut("meta+u","","Underline");for(let r=1;r<=6;r++)t.addShortcut("access+"+r,"",["FormatBlock",!1,"h"+r]);t.addShortcut("access+7","",["FormatBlock",!1,"p"]),t.addShortcut("access+8","",["FormatBlock",!1,"div"]),t.addShortcut("access+9","",["FormatBlock",!1,"address"])})(t),(t=>{t.on("mouseup keydown",r=>{var n;((t,r,n)=>{let o=t.selection,a=t.getBody();fz(t,null,n),(8===r||46===r)&&o.isCollapsed()&&"\uFEFF"===o.getStart().innerHTML&&fz(t,dz(a,o.getStart()),!0),37!==r&&39!==r||fz(t,dz(a,o.getStart()),!0)})(t,r.keyCode,n$(n=t.selection.getRng().endContainer)&&e9(n.data,"\xa0"))})})(t),bg(t)||(n.set({}),t.on("NodeChange",r=>{p_(t,r.element,n.get())}),t.on("FormatApply FormatRemove",r=>{let o=et.from(r.node).map(t=>cn(t)?t:t.startContainer).bind(t=>nD(t)?et.some(t):et.from(t.parentElement)).getOrThunk(()=>pE(t));p_(t,o,n.get())})),{get:r.get,has:r.has,register:r.register,unregister:r.unregister,apply:(r,n,o)=>{((t,r,n,o)=>{bp(t).formatter.apply(r,n,o)})(t,r,n,o)},remove:(r,n,o,a)=>{((t,r,n,o,a)=>{bp(t).formatter.remove(r,n,o,a)})(t,r,n,o,a)},toggle:(r,n,o)=>{((t,r,n,o)=>{bp(t).formatter.toggle(r,n,o)})(t,r,n,o)},match:(r,n,o,a)=>bp(t).formatter.match(r,n,o,a),closest:r=>bp(t).formatter.closest(r),matchAll:(r,n)=>bp(t).formatter.matchAll(r,n),matchNode:(r,n,o,a)=>bp(t).formatter.matchNode(r,n,o,a),canApply:r=>bp(t).formatter.canApply(r),formatChanged:(r,o,a,l)=>bp(t).formatter.formatChanged(n,r,o,a,l),getCssText:Y(vd,t)}},vu=t=>{switch(t.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},vm=t=>{let r=aP(),n=aS(0),o=aS(0),a={data:[],typing:!1,beforeChange:()=>{((t,r,n)=>{bp(t).undoManager.beforeChange(r,n)})(t,n,r)},add:(l,i)=>bp(t).undoManager.add(a,o,n,r,l,i),dispatchChange:()=>{t.setDirty(!0);let r=bo(t);r.bookmark=l6(t.selection),t.dispatch("change",{level:r,lastLevel:ek(a.data,o.get()).getOrUndefined()})},undo:()=>bp(t).undoManager.undo(a,n,o),redo:()=>{var r;return r=a.data,bp(t).undoManager.redo(o,r)},clear:()=>{((t,r,n)=>{bp(t).undoManager.clear(r,n)})(t,a,o)},reset:()=>{((t,r)=>{bp(t).undoManager.reset(r)})(t,a)},hasUndo:()=>bp(t).undoManager.hasUndo(a,o),hasRedo:()=>bp(t).undoManager.hasRedo(a,o),transact:r=>bp(t).undoManager.transact(a,n,r),ignore:r=>{((t,r,n)=>{bp(t).undoManager.ignore(r,n)})(t,n,r)},extra:(r,n)=>{((t,r,n,o,a)=>{bp(t).undoManager.extra(r,n,o,a)})(t,a,o,r,n)}};return bg(t)||((t,r,n)=>{let o=aS(!1),a=t=>{bc(r,!1,n),r.add({},t)};t.on("init",()=>{r.add()}),t.on("BeforeExecCommand",t=>{vu(t.command)||(bu(r,n),r.beforeChange())}),t.on("ExecCommand",t=>{vu(t.command)||a(t)}),t.on("ObjectResizeStart cut",()=>{r.beforeChange()}),t.on("SaveContent ObjectResized blur",a),t.on("dragend",a),t.on("keyup",n=>{let l=n.keyCode;if(n.isDefaultPrevented())return;let i=tM.os.isMacOS()&&"Meta"===n.key;(l>=33&&l<=36||l>=37&&l<=40||45===l||n.ctrlKey||i)&&(a(),t.nodeChanged()),46!==l&&8!==l||t.nodeChanged(),o.get()&&r.typing&&!bs(bo(t),r.data[0])&&(t.isDirty()||t.setDirty(!0),t.dispatch("TypingUndo"),o.set(!1),t.nodeChanged())}),t.on("keydown",t=>{let l=t.keyCode;if(t.isDefaultPrevented())return;if(l>=33&&l<=36||l>=37&&l<=40||45===l)return void(r.typing&&a(t));let i=t.ctrlKey&&!t.altKey||t.metaKey;if((l<16||l>20)&&224!==l&&91!==l&&!r.typing&&!i)return r.beforeChange(),bc(r,!0,n),r.add({},t),void o.set(!0);(tM.os.isMacOS()?t.metaKey:t.ctrlKey&&!t.altKey)&&r.beforeChange()}),t.on("mousedown",t=>{r.typing&&a(t)}),t.on("input",t=>{var r;t.inputType&&("insertReplacementText"===t.inputType||"insertText"===t.inputType&&null===t.data||"insertFromPaste"===(r=t).inputType||"insertFromDrop"===r.inputType)&&a(t)}),t.on("AddUndo Undo Redo ClearUndos",r=>{r.isDefaultPrevented()||t.nodeChanged()})})(t,a,n),t.addShortcut("meta+z","","Undo"),t.addShortcut("meta+y,meta+shift+z","","Redo"),a},vg=[9,27,cZ.HOME,cZ.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,cZ.DOWN,cZ.UP,cZ.LEFT,cZ.RIGHT].concat(tM.browser.isFirefox()?[224]:[]),vf="data-mce-placeholder",vp=t=>"keydown"===t.type||"keyup"===t.type,vh=t=>{let r=t.keyCode;return r===cZ.BACKSPACE||r===cZ.DELETE},vb=(t,r)=>({from:t,to:r}),vv=(t,r)=>gF(ru(t),ru(r.container())).map(t=>({block:t,position:r})),vy=(t,r)=>rK(r,t=>a9(t)||nZ(t.dom),r=>ry(r,t)).filter(tJ).getOr(t),vC=(t,r)=>{let n=((t,r)=>{let n=rO(t);return eb(n,t=>r.isBlock(tG(t))).fold(q(n),t=>n.slice(0,t))})(t,r);return ed(n,nl),n},vE=(t,r,n)=>eh(mX(n,r).reverse(),r=>oe(t,r)).each(nl),vw=(t,r,n,o,a)=>{if(oe(o,n))return lt(n),dM(n.dom);0===em(rA(a),t=>!oe(o,t)).length&&oe(o,r)&&r7(a,rg("br"));let l=dL(n.dom,lH.before(a.dom));return ed(vC(r,o),t=>{r7(a,t)}),vE(o,t,r),l},vx=(t,r,n,o)=>{if(oe(o,n)){if(oe(o,r)){let t=eg((t=>{let r=(t,n)=>rP(t).fold(()=>n,t=>o.isInline(tG(t))?r(t,n.concat(aX(t))):n);return r(t,[])})(n),(t,r)=>(nn(t,r),r),le());na(r),nr(r,t)}return nl(n),dM(r.dom)}let a=dF(n.dom);return ed(vC(r,o),t=>{nr(n,t)}),vE(o,t,r),a},v_=(t,r)=>{dP(t,r.dom).bind(t=>et.from(t.getNode())).map(ru).filter(a3).each(nl)},vk=(t,r,n,o)=>(v_(!0,r),v_(!1,n),(rC(n,r)?((t,r)=>{let n=mX(r,t);return et.from(n[n.length-1])})(n,r):et.none()).fold(Y(vx,t,r,n,o),Y(vw,t,r,n,o))),vS=(t,r,n,o,a)=>r?vk(t,o,n,a):vk(t,n,o,a),vN=(t,r)=>{var n,o,a;let l=ru(t.getBody());return(n=t.schema,o=l.dom,(a=t.selection.getRng()).collapsed?((t,r,n,o)=>{let a=vv(r,lH.fromRangeStart(o)),l=a.bind(o=>dT(n,r,o.position).bind(o=>vv(r,o).map(o=>nG(o.position.getNode())&&!oe(t,o.block)?dP(!1,o.block.dom).bind(t=>t.isEqual(o.position)?dT(n,r,t).bind(t=>vv(r,t)):et.some(o)).getOr(o):o)));return t$(a,l,vb).filter(t=>{var n;return!ry(t.from.block,t.to.block)&&((t,r)=>{let n=ru(t);return ry(vy(n,r.from.block),vy(n,r.to.block))})(r,t)&&!1===nQ((n=t).from.block.dom)&&!1===nQ(n.to.block.dom)&&(t=>{let r=t=>a8(t)||of(t.dom);return r(t.from.block)&&r(t.to.block)})(t)})})(n,o,r,a):et.none()).map(n=>()=>{vS(l,r,n.from.block,n.to.block,t.schema).each(r=>{t.selection.setRng(r.toRange())})})},vR=(t,r)=>rW(ru(r),a9,Y(ry,t)).isSome(),vA=t=>{let r=ru(t.getBody());return((t,r)=>{let n=dL(t.dom,lH.fromRangeStart(r)).isNone(),o=dD(t.dom,lH.fromRangeEnd(r)).isNone();return!(vR(t,r.startContainer)||vR(t,r.endContainer))&&n&&o})(r,t.selection.getRng())?et.some(()=>{t.setContent(""),t.selection.setCursorLocation()}):((t,r,n)=>{let o=r.getRng();return t$(gF(t,ru(o.startContainer)),gF(t,ru(o.endContainer)),(a,l)=>ry(a,l)?et.none():et.some(()=>{o.deleteContents(),vS(t,!0,a,l,n).each(t=>{r.setRng(t.toRange())})})).getOr(et.none())})(r,t.selection,t.schema)},vT=(t,r)=>t.selection.isCollapsed()?et.none():vA(t),vO=(t,r,n,o,a)=>et.from(r._selectionOverrides.showCaret(t,n,o,a)),vB=(t,r)=>t.dispatch("BeforeObjectSelected",{target:r}).isDefaultPrevented()?et.none():et.some((t=>{let r=t.ownerDocument.createRange();return r.selectNode(t),r})(r)),vP=(t,r,n)=>r.collapsed?((t,r,n)=>{let o=dh(1,t.getBody(),r),a=lH.fromRangeStart(o),l=a.getNode();if(de(l))return vO(1,t,l,!a.isAtEnd(),!1);let i=a.getNode(!0);if(de(i))return vO(1,t,i,!1,!1);let s=fo(t.dom.getRoot(),a.getNode());return de(s)?vO(1,t,s,!1,n):et.none()})(t,r,n).getOr(r):r,vD=t=>mK(t)||m$(t),vL=t=>mY(t)||mV(t),vM=(t,r,n,o,a,l)=>{var i;vO(o,t,l.getNode(!a),a,!0).each(n=>{if(r.collapsed){let t=r.cloneRange();a?t.setEnd(n.startContainer,n.startOffset):t.setStart(n.endContainer,n.endOffset),t.deleteContents()}else r.deleteContents();t.selection.setRng(n)}),i=t.dom,n$(n)&&0===n.data.length&&i.remove(n)},vF=(t,r)=>((t,r)=>{let n=t.selection.getRng();if(!n$(n.commonAncestorContainer))return et.none();let o=r?m.Forwards:m.Backwards,a=dS(t.getBody()),l=Y(dC,r?a.next:a.prev),i=r?vD:vL,s=dv(o,t.getBody(),n),d=l(s),c=d?gO(r,d):d;if(!c||!dE(s,c))return et.none();if(i(c))return et.some(()=>vM(t,n,s.getNode(),o,r,c));let u=l(c);return u&&i(u)&&dE(c,u)?et.some(()=>vM(t,n,s.getNode(),o,r,u)):et.none()})(t,r),vI=(t,r)=>{let n=t.getBody();return r?dM(n).filter(mK):dF(n).filter(mY)},vU=t=>{let r=t.selection.getRng();return!r.collapsed&&(vI(t,!0).exists(t=>t.isEqual(lH.fromRangeStart(r)))||vI(t,!1).exists(t=>t.isEqual(lH.fromRangeEnd(r))))},vz=ie([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),vj=(t,r,n,o)=>dT(r,t,n).bind(a=>{var l;return I(l=a.getNode())&&(a9(ru(l))||a6(ru(l)))||((t,r,n,o,a)=>{let l=r=>a.isInline(r.nodeName.toLowerCase())&&!dd(n,o,t);return db(!r,n).fold(()=>db(r,o).fold(J,l),l)})(t,r,n,a,o)?et.none():r&&nQ(a.getNode())||!r&&nQ(a.getNode(!0))?((t,r,n,o,a)=>{let l=a.getNode(!n);return gF(ru(r),ru(o.getNode())).map(r=>oe(t,r)?vz.remove(r.dom):vz.moveToElement(l)).orThunk(()=>et.some(vz.moveToElement(l)))})(o,t,r,n,a):r&&mY(n)||!r&&mK(n)?et.some(vz.moveToPosition(a)):et.none()}),vH=(t,r)=>et.from(fo(t.getBody(),r)),v$=(t,r)=>{let n=t.selection.getNode();return vH(t,n).filter(nQ).fold(()=>((t,r,n,o)=>{var a;let l=dh(r?1:-1,t,n),i=lH.fromRangeStart(l),s=ru(t);return!r&&mY(i)?et.some(vz.remove(i.getNode(!0))):r&&mK(i)?et.some(vz.remove(i.getNode())):!r&&mK(i)&&m9(s,i,o)?m7(s,i,o).map(t=>vz.remove(t.getNode())):r&&mY(i)&&m4(s,i,o)?ge(s,i,o).map(t=>vz.remove(t.getNode())):((t,r)=>{let n=r.getNode(!t);return nD(n)&&n.getAttribute("data-mce-caret")===(t?"after":"before")})(r,i)?(F(a=i.getNode(!r))?et.none():r&&nQ(a.nextSibling)?et.some(vz.moveToElement(a.nextSibling)):!r&&nQ(a.previousSibling)?et.some(vz.moveToElement(a.previousSibling)):et.none()).orThunk(()=>vj(t,r,i,o)):vj(t,r,i,o).bind(r=>r.fold(t=>et.some(vz.remove(t)),t=>et.some(vz.moveToElement(t)),r=>dd(i,r,t)?et.none():et.some(vz.moveToPosition(r))))})(t.getBody(),r,t.selection.getRng(),t.schema).map(n=>()=>n.fold(n=>(t._selectionOverrides.hideFakeCaret(),gS(t,r,ru(n)),!0),n=>{let o=r?lH.before(n):lH.after(n);return t.selection.setRng(o.toRange()),!0},r=>(t.selection.setRng(r.toRange()),!0))),()=>et.some(H))},vV=t=>{let r=t.dom,n=t.selection,o=fo(t.getBody(),n.getNode());if(nZ(o)&&r.isBlock(o)&&r.isEmpty(o)){let t=r.create("br",{"data-mce-bogus":"1"});r.setHTML(o,""),o.appendChild(t),n.setRng(lH.before(t).toRange())}return!0},vq=(t,r)=>t.selection.isCollapsed()?v$(t,r):((t,r)=>{let n=t.selection.getNode();return nQ(n)&&!nJ(n)?vH(t,n.parentNode).filter(nQ).fold(()=>et.some(()=>{ed(nw(ru(t.getBody()),".mce-offscreen-selection"),nl),gS(t,r,ru(t.selection.getNode())),gI(t)}),()=>et.some(H)):vU(t)?et.some(()=>{gj(t,t.selection.getRng(),ru(t.getBody()))}):et.none()})(t,r),vW=(t,r)=>t.selection.isCollapsed()?((t,r)=>{let n=lH.fromRangeStart(t.selection.getRng());return dT(r,t.getBody(),n).filter(t=>r?mj(t):mH(t)).bind(t=>dc(r?0:-1,t)).map(r=>()=>t.selection.select(r))})(t,r):et.none(),vK=t=>n$(t)&&"\uFEFF"===t.data[0],vY=t=>n$(t)&&"\uFEFF"===t.data[t.data.length-1],vG=t=>{var r;return(null!==(r=t.ownerDocument)&&void 0!==r?r:document).createTextNode("\uFEFF")},vX=(t,r)=>t?(t=>{var r;if(n$(t.previousSibling))return vY(t.previousSibling)||t.previousSibling.appendData("\uFEFF"),t.previousSibling;if(n$(t))return vK(t)||t.insertData(0,"\uFEFF"),t;{let n=vG(t);return null===(r=t.parentNode)||void 0===r||r.insertBefore(n,t),n}})(r):(t=>{var r,n;if(n$(t.nextSibling))return vK(t.nextSibling)||t.nextSibling.insertData(0,"\uFEFF"),t.nextSibling;if(n$(t))return vY(t)||t.appendData("\uFEFF"),t;{let o=vG(t);return t.nextSibling?null===(r=t.parentNode)||void 0===r||r.insertBefore(o,t.nextSibling):null===(n=t.parentNode)||void 0===n||n.appendChild(o),o}})(r),vZ=Y(vX,!0),vQ=Y(vX,!1),vJ=(t,r)=>n$(t.container())?vX(r,t.container()):vX(r,t.getNode()),v0=(t,r)=>{let n=r.get();return n&&t.container()===n&&lo(n)},v1=(t,r)=>r.fold(r=>{s6(t.get());let n=vZ(r);return t.set(n),et.some(lH(n,n.length-1))},r=>dM(r).map(r=>{if(v0(r,t))return lH(t.get(),1);{s6(t.get());let n=vJ(r,!0);return t.set(n),lH(n,1)}}),r=>dF(r).map(r=>{if(v0(r,t)){let r=t.get();return lH(r,r.length-1)}{s6(t.get());let n=vJ(r,!1);return t.set(n),lH(n,n.length-1)}}),r=>{s6(t.get());let n=vQ(r);return t.set(n),et.some(lH(n,1))}),v2=(t,r)=>{for(let n=0;n<t.length;n++){let o=t[n].apply(null,r);if(o.isSome())return o}return et.none()},v3=ie([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),v8=(t,r)=>ds(r,t)||t,v5=(t,r,n)=>{let o=gB(n),a=v8(r,o.container());return gT(t,a,o).fold(()=>dD(a,o).bind(Y(gT,t,a)).map(t=>v3.before(t)),et.none)},v6=(t,r)=>null===dz(t,r),v4=(t,r,n)=>gT(t,r,n).filter(Y(v6,r)),v9=(t,r,n)=>{let o=gP(n);return v4(t,r,o).bind(t=>dL(t,o).isNone()?et.some(v3.start(t)):et.none())},v7=(t,r,n)=>{let o=gB(n);return v4(t,r,o).bind(t=>dD(t,o).isNone()?et.some(v3.end(t)):et.none())},ye=(t,r,n)=>{let o=gP(n),a=v8(r,o.container());return gT(t,a,o).fold(()=>dL(a,o).bind(Y(gT,t,a)).map(t=>v3.after(t)),et.none)},yt=t=>!gA(yn(t)),yr=(t,r,n)=>v2([v5,v9,v7,ye],[t,r,n]).filter(yt),yn=t=>t.fold(W,W,W,W),yo=t=>t.fold(q("before"),q("start"),q("end"),q("after")),ya=t=>t.fold(v3.before,v3.before,v3.after,v3.after),yl=t=>t.fold(v3.start,v3.start,v3.end,v3.end),yi=(t,r,n,o,a,l)=>t$(gT(r,n,o),gT(r,n,a),(r,o)=>r!==o&&((t,r,n)=>{let o=ds(r,t),a=ds(n,t);return I(o)&&o===a})(n,r,o)?v3.after(t?r:o):l).getOr(l),ys=(t,r)=>t.fold(ee,t=>!(yo(t)===yo(r)&&yn(t)===yn(r))),yd=(t,r)=>t?r.fold($(et.some,v3.start),et.none,$(et.some,v3.after),et.none):r.fold(et.none,$(et.some,v3.before),et.none,$(et.some,v3.end)),yc=(t,r,n)=>(r.setRng(lH(n.container(),n.offset()+(t?1:-1)).toRange()),r.getSel().modify("move",t?"forward":"backward","word"),!0);(l=f||(f={}))[l.Br=0]="Br",l[l.Block=1]="Block",l[l.Wrap=2]="Wrap",l[l.Eol=3]="Eol";let yu=(t,r)=>t===m.Backwards?eE(r):r,ym=(t,r,n)=>t===m.Forwards?r.next(n):r.prev(n),yg=(t,r,n,o)=>nG(o.getNode(r===m.Forwards))?f.Br:!1===dd(n,o)?f.Block:f.Wrap,yf=(t,r,n,o)=>{let a=dS(n),l=o,i=[];for(;l;){let n=ym(r,a,l);if(!n)break;if(nG(n.getNode(!1)))return r===m.Forwards?{positions:yu(r,i).concat([n]),breakType:f.Br,breakAt:et.some(n)}:{positions:yu(r,i),breakType:f.Br,breakAt:et.some(n)};if(n.isVisible()){if(t(l,n)){let t=yg(0,r,l,n);return{positions:yu(r,i),breakType:t,breakAt:et.some(n)}}i.push(n),l=n}else l=n}return{positions:yu(r,i),breakType:f.Eol,breakAt:et.none()}},yp=(t,r,n,o)=>r(n,o).breakAt.map(o=>{let a=r(n,o).positions;return t===m.Backwards?a.concat(o):[o].concat(a)}).getOr([]),yh=(t,r)=>ef(t,(t,n)=>t.fold(()=>et.some(n),o=>t$(eS(o.getClientRects()),eS(n.getClientRects()),(t,a)=>{let l=Math.abs(r-t.left);return Math.abs(r-a.left)<=l?n:o}).or(t)),et.none()),yb=(t,r)=>eS(r.getClientRects()).bind(r=>yh(t,r.left)),yv=Y(yf,lH.isAbove,-1),yy=Y(yf,lH.isBelow,1),yC=Y(yp,-1,yv),yE=Y(yp,1,yy),yw=(t,r)=>yv(t,r).breakAt.isNone(),yx=(t,r)=>yy(t,r).breakAt.isNone(),y_=(t,r)=>yb(yC(t,r),r),yk=(t,r)=>yb(yE(t,r),r),yS=(t,r)=>Math.abs(t.left-r),yN=(t,r)=>Math.abs(t.right-r),yR=(t,r)=>eX(t,(t,n)=>{let o=Math.min(yS(t,r),yN(t,r)),a=Math.min(yS(n,r),yN(n,r));return a===o&&e$(n,"node")&&nQ(n.node)||a<o?n:t}),yA=t=>{let r=r=>es(r,r=>{let n=lf(r);return n.node=t,n});if(nD(t))return r(t.getClientRects());if(n$(t)){let n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),r(n.getClientRects())}return[]},yT=t=>ey(t,yA);(i=p||(p={}))[i.Up=-1]="Up",i[i.Down=1]="Down";let yO=(t,r,n,o,a,l)=>{let i=0,s=[],d=o=>{let l=yT([o]);-1===t&&(l=l.reverse());for(let t=0;t<l.length;t++){let o=l[t];if(!n(o,c)){if(s.length>0&&r(o,eQ(s))&&i++,o.line=i,a(o))return!0;s.push(o)}}return!1},c=eQ(l.getClientRects());if(!c)return s;let u=l.getNode();return u&&(d(u),((t,r,n,o)=>{let a=o;for(;a=di(a,t,lA,r);)if(n(a))return})(t,o,d,u)),s},yB=Y(yO,p.Up,lb,lv),yP=Y(yO,p.Down,lv,lb),yD=t=>eQ(t.getClientRects()),yL=t=>r=>r.line>t,yM=t=>r=>r.line===t,yF=(t,r)=>{t.selection.setRng(r),uU(t,t.selection.getRng())},yI=(t,r,n)=>et.some(vP(t,r,n)),yU=(t,r,n,o,a,l)=>{let i=r===m.Forwards,s=dS(t.getBody()),d=Y(dC,i?s.next:s.prev),c=i?o:a;if(!n.collapsed){let o=lC(n);if(l(o))return vO(r,t,o,r===m.Backwards,!1);if(vU(t)){let t=n.cloneRange();return t.collapse(r===m.Backwards),et.from(t)}}let u=dv(r,t.getBody(),n);if(c(u))return vB(t,u.getNode(!i));let g=d(u),f=lm(n);if(!g)return f?et.some(n):et.none();if(c(g=gO(i,g)))return vO(r,t,g.getNode(!i),i,!1);let p=d(g);return p&&c(p)&&dE(g,p)?vO(r,t,p.getNode(!i),i,!1):f?yI(t,g.toRange(),!1):et.none()},yz=(t,r,n,o,a,l)=>{let i;let s=dv(r,t.getBody(),n),d=eQ(s.getClientRects()),c=r===p.Down,u=t.getBody();if(!d)return et.none();if(vU(t)){let t=c?lH.fromRangeEnd(n):lH.fromRangeStart(n);return(c?yk:y_)(u,t).orThunk(()=>et.from(t)).map(t=>t.toRange())}let m=em((c?yP:yB)(u,yL(1),s),yM(1)),g=d.left,f=yR(m,g);if(f&&l(f.node)){let n=Math.abs(g-f.left),o=Math.abs(g-f.right);return vO(r,t,f.node,n<o,!1)}if(i=o(s)?s.getNode():a(s)?s.getNode(!0):lC(n)){let n=((t,r,n,o)=>{let a,l,i,s;let d=dS(r),c=[],u=0;1===t?(a=d.next,l=lv,i=lb,s=lH.after(o)):(a=d.prev,l=lb,i=lv,s=lH.before(o));let m=yD(s);do{if(!s.isVisible())continue;let t=yD(s);if(i(t,m))continue;c.length>0&&l(t,eQ(c))&&u++;let r=lf(t);if(r.position=s,r.line=u,n(r))break;c.push(r)}while(s=a(s));return c})(r,u,yL(1),i),o=yR(em(n,yM(1)),g);if(o||(o=eQ(em(n,yM(0)))))return yI(t,o.position.toRange(),!1)}return 0===m.length?yj(t,c).filter(c?a:o).map(r=>vP(t,r.toRange(),!1)):et.none()},yj=(t,r)=>{var n,o;let a=t.selection.getRng(),l=r?lH.fromRangeEnd(a):lH.fromRangeStart(a),i=(n=l.container(),o=t.getBody(),rW(ru(n),t=>nZ(t.dom),t=>t.dom===o).map(t=>t.dom).getOr(o));return r?eN(yy(i,l).positions):eS(yv(i,l).positions)},yH=(t,r,n)=>yj(t,r).filter(n).exists(r=>(t.selection.setRng(r.toRange()),!0)),y$=(t,r)=>{let n=t.dom.createRng();n.setStart(r.container(),r.offset()),n.setEnd(r.container(),r.offset()),t.selection.setRng(n)},yV=(t,r)=>{t?r.setAttribute("data-mce-selected","inline-boundary"):r.removeAttribute("data-mce-selected")},yq=(t,r,n)=>v1(r,n).map(r=>(y$(t,r),n)),yW=(t,r,n)=>{let o=t.getBody(),a=((t,r,n)=>{let o=lH.fromRangeStart(t);if(t.collapsed)return o;{let a=lH.fromRangeEnd(t);return n?dL(r,a).getOr(a):dD(r,o).getOr(o)}})(t.selection.getRng(),o,n);return((t,r,n,o)=>{let a=gO(t,o),l=yr(r,n,a);return yr(r,n,a).bind(Y(yd,t)).orThunk(()=>((t,r,n,o,a)=>{let l=gO(t,a);return dT(t,n,l).map(Y(gO,t)).fold(()=>o.map(ya),a=>yr(r,n,a).map(Y(yi,t,r,n,l,a)).filter(Y(ys,o))).filter(yt)})(t,r,n,l,o))})(n,Y(gR,t),o,a).bind(n=>yq(t,r,n))},yK=(t,r,n)=>!!i6(t)&&yW(t,r,n).isSome(),yY=(t,r,n)=>!!i6(r)&&((t,r)=>{let n=r.selection.getRng(),o=t?lH.fromRangeEnd(n):lH.fromRangeStart(n);return!!U(r.selection.getSel().modify)&&(t&&li(o)?yc(!0,r.selection,o):!(t||!ls(o))&&yc(!1,r.selection,o))})(t,r),yG=t=>{let r=aS(null),n=Y(gR,t);return t.on("NodeChange",o=>{var a;i6(t)&&(((t,r,n)=>{let o=em(es(nw(ru(r.getRoot()),'*[data-mce-selected="inline-boundary"]'),t=>t.dom),t),a=em(n,t);ed(ew(o,a),Y(yV,!1)),ed(ew(a,o),Y(yV,!0))})(n,t.dom,o.parents),((t,r)=>{let n=r.get();if(t.selection.isCollapsed()&&!t.composing&&n){let o=lH.fromRangeStart(t.selection.getRng());lH.isTextPosition(o)&&!(li(o)||ls(o))&&(y$(t,s5(n,o)),r.set(null))}})(t,r),a=o.parents,t.selection.isCollapsed()&&ed(em(a,n),o=>{let a=lH.fromRangeStart(t.selection.getRng());yr(n,t.getBody(),a).bind(n=>yq(t,r,n))}))}),r},yX=Y(yY,!0),yZ=Y(yY,!1),yQ=(t,r,n)=>{if(i6(t)){let o=yj(t,r).getOrThunk(()=>{let n=t.selection.getRng();return r?lH.fromRangeEnd(n):lH.fromRangeStart(n)});return yr(Y(gR,t),t.getBody(),o).exists(r=>v1(n,ya(r)).exists(r=>(y$(t,r),!0)))}return!1},yJ=(t,r)=>n=>v1(r,n).map(r=>()=>y$(t,r)),y0=(t,r,n,o)=>{let a=t.getBody(),l=Y(gR,t);t.undoManager.ignore(()=>{t.selection.setRng(((t,r)=>{let n=document.createRange();return n.setStart(t.container(),t.offset()),n.setEnd(r.container(),r.offset()),n})(n,o)),gL(t),yr(l,a,lH.fromRangeStart(t.selection.getRng())).map(yl).bind(yJ(t,r)).each(Q)}),t.nodeChanged()},y1=(t,r,n)=>{if(t.selection.isCollapsed()&&i6(t)){let o=lH.fromRangeStart(t.selection.getRng());return((t,r,n,o)=>{var a;let l=(a=t.getBody(),ds(o.container(),a)||a),i=Y(gR,t),s=yr(i,l,o);return s.bind(t=>n?t.fold(q(et.some(yl(t))),et.none,q(et.some(ya(t))),et.none):t.fold(et.none,q(et.some(ya(t))),et.none,q(et.some(yl(t))))).map(yJ(t,r)).getOrThunk(()=>{let a=dO(n,l,o),d=a.bind(t=>yr(i,l,t));return t$(s,d,()=>gT(i,l,o).bind(r=>t$(dM(r),dF(r),(t,n)=>{let o=gO(!0,t),a=gO(!1,n);return dD(r,o).forall(t=>t.isEqual(a))}).getOr(!0)?et.some(()=>{gS(t,n,ru(r))}):et.none())).getOrThunk(()=>d.bind(()=>a.map(a=>()=>{n?y0(t,r,o,a):y0(t,r,a,o)})))})})(t,r,n,o)}return et.none()},y2=(t,r)=>{let n=ru(t.getBody()),o=mX(ru(t.selection.getStart()),n);return eb(o,r).fold(q(o),t=>o.slice(0,t))},y3=t=>1===rL(t),y8=(t,r)=>{let n=Y(fW,t);return ey(r,t=>n(t)?[t.dom]:[])},y5=t=>{let r=y2(t,r=>t.schema.isBlock(tG(r)));return y8(t,r)},y6=(t,r)=>{let n=em(y2(t,r=>t.schema.isBlock(tG(r))||rL(r)>1),y3);return eN(n).bind(o=>gU(r,lH.fromRangeStart(t.selection.getRng()),o.dom)&&!c_(o)?et.some(()=>((t,r,n,o)=>{let a=y8(r,o);if(0===a.length)gS(r,t,n);else{let t=fq(n.dom,a);r.selection.setRng(t.toRange())}})(r,t,o,n)):et.none())},y4=(t,r)=>{let n=t.selection.getStart(),o=((t,r)=>{let n=r.parentElement;return nG(r)&&!D(n)&&t.dom.isEmpty(n)})(t,n)||c_(ru(n))?fq(n,r):((t,r)=>{let{caretContainer:n,caretPosition:o}=fV(r);return t.insertNode(n.dom),o})(t.selection.getRng(),r);t.selection.setRng(o.toRange())},y9=t=>n$(t.startContainer),y7=t=>{let r=t.selection.getRng();return 0===r.startOffset&&y9(r)&&((t,r)=>{let n=r.startContainer.parentElement;return!D(n)&&fW(t,ru(n))})(t,r)&&((t=>{let r=t.startContainer.parentNode,n=t.endContainer.parentNode;return!D(r)&&!D(n)&&r.isEqualNode(n)})(r)&&(t=>{let r=t.endContainer;return t.endOffset===(n$(r)?r.length:r.childNodes.length)})(r)||!r.endContainer.isEqualNode(r.commonAncestorContainer))},Ce=(t,r)=>t.selection.isCollapsed()?y6(t,r):(t=>{if(y7(t)){let r=y5(t);return et.some(()=>{gL(t),((t,r)=>{let n=ew(r,y5(t));n.length>0&&y4(t,n)})(t,r)})}return et.none()})(t),Ct=t=>((t=>{var r,n;let o=t.selection.getRng();return o.collapsed&&(y9(o)||t.dom.isEmpty(o.startContainer))&&(r=ru(t.selection.getStart()),n=t.schema,!nx(r,t=>dU(t.dom),t=>n.isBlock(tG(t))))})(t)&&y4(t,[]),!0),Cr=(t,r,n)=>I(n)?et.some(()=>{t._selectionOverrides.hideFakeCaret(),gS(t,r,ru(n))}):et.none(),Cn=(t,r)=>t.selection.isCollapsed()?((t,r)=>{let n=r?m$:mV,o=dv(r?m.Forwards:m.Backwards,t.getBody(),t.selection.getRng());return n(o)?Cr(t,r,o.getNode(!r)):et.from(gO(r,o)).filter(t=>n(t)&&dE(o,t)).bind(n=>Cr(t,r,n.getNode(!r)))})(t,r):((t,r)=>{let n=t.selection.getNode();return n1(n)?Cr(t,r,n):et.none()})(t,r),Co=t=>ta(null!=t?t:"").getOr(0),Ca=(t,r)=>(t||"table"===tG(r)?"margin":"padding")+("rtl"===r8(r,"direction")?"-right":"-left"),Cl=t=>{let r=Cs(t);return!t.mode.isReadOnly()&&(r.length>1||eC(r,r=>{let n=Ca(iV(t),r),o=r6(r,n).map(Co).getOr(0);return"false"!==t.dom.getContentEditable(r.dom)&&o>0}))},Ci=t=>a5(t)||a6(t),Cs=t=>em(ns(t.selection.getSelectedBlocks()),t=>!Ci(t)&&!r_(t).exists(Ci)&&rK(t,t=>nZ(t.dom)||nQ(t.dom)).exists(t=>nZ(t.dom))),Cd=(t,r)=>{var n,o;let{dom:a}=t,l=iq(t),i=null!==(o=null===(n=/[a-z%]+$/i.exec(l))||void 0===n?void 0:n[0])&&void 0!==o?o:"px",s=Co(l),d=iV(t);ed(Cs(t),t=>{((t,r,n,o,a,l)=>{let i=Ca(n,ru(l)),s=Co(t.getStyle(l,i));if("outdent"===r){let r=Math.max(0,s-o);t.setStyle(l,i,r?r+a:"")}else t.setStyle(l,i,s+o+a)})(a,r,d,s,i,t.dom)})},Cc=t=>Cd(t,"outdent"),Cu=t=>{if(t.selection.isCollapsed()&&Cl(t)){let r=t.dom,n=t.selection.getRng(),o=lH.fromRangeStart(n),a=r.getParent(n.startContainer,r.isBlock);if(null!==a&&m1(ru(a),o,t.schema))return et.some(()=>Cc(t))}return et.none()},Cm=(t,r,n)=>eA([Cu,vq,vF,(t,n)=>y1(t,r,n),vN,fn,vW,Cn,vT,Ce],r=>r(t,n)).filter(r=>t.selection.isEditable()),Cg=(t,r)=>{t.addCommand("delete",()=>{((t,r)=>{Cm(t,r,!1).fold(()=>{t.selection.isEditable()&&(gL(t),gI(t))},Q)})(t,r)}),t.addCommand("forwardDelete",()=>{((t,r)=>{Cm(t,r,!0).fold(()=>{t.selection.isEditable()&&gD(t,"ForwardDelete")},Q)})(t,r)})},Cf=t=>void 0===t.touches||1!==t.touches.length?et.none():et.some(t.touches[0]),Cp=(t,r)=>eH(t,r.nodeName),Ch=(t,r)=>!!n$(r)||!!nD(r)&&!(Cp(t.getBlockElements(),r)||dQ(r)||ob(t,r)||on(r)),Cb=(t,r)=>{if(n$(r)){if(0===r.data.length)return!0;if(/^\s+$/.test(r.data))return!r.nextSibling||Cp(t,r.nextSibling)||on(r.nextSibling)}return!1},Cv=t=>t.dom.create(i_(t),ik(t)),Cy=t=>{let r=t.dom,n=t.selection,o=t.schema,a=o.getBlockElements(),l=n.getStart(),i=t.getBody(),s,d,c=!1,u=i_(t);if(!l||!nD(l))return;let m=i.nodeName.toLowerCase();if(!o.isValidChild(m,u.toLowerCase())||ei(mG(ru(l),ru(i)),t=>Cp(a,t.dom)))return;let g=n.getRng(),{startContainer:f,startOffset:p,endContainer:h,endOffset:b}=g,v=u4(t),y=i.firstChild;for(;y;)if(nD(y)&&og(o,y),Ch(o,y)){if(Cb(a,y)){d=y,y=y.nextSibling,r.remove(d);continue}s||(s=Cv(t),i.insertBefore(s,y),c=!0),d=y,y=y.nextSibling,s.appendChild(d)}else s=null,y=y.nextSibling;c&&v&&(g.setStart(f,p),g.setEnd(h,b),n.setRng(g),t.nodeChanged())},CC=(t,r,n)=>{let o=ru(Cv(t)),a=le();nr(o,a),n(r,o);let l=document.createRange();return l.setStartBefore(a.dom),l.setEndBefore(a.dom),l},CE=t=>r=>-1!==(" "+r.attr("class")+" ").indexOf(t),Cw=(t,r,n)=>function(o){let a=arguments,l=a[a.length-2],i=l>0?r.charAt(l-1):"";if('"'===i)return o;if(">"===i){let t=r.lastIndexOf("<",l);if(-1!==t&&-1!==r.substring(t,l).indexOf('contenteditable="false"'))return o}return'<span class="'+n+'" data-mce-content="'+t.dom.encode(a[0])+'">'+t.dom.encode("string"==typeof a[1]?a[1]:a[0])+"</span>"},Cx=(t,r)=>{r.hasAttribute("data-mce-caret")&&(lu(r),t.selection.setRng(t.selection.getRng()),t.selection.scrollIntoView(r))},C_=(t,r)=>{let n=rX(ru(t.getBody()),"*[data-mce-caret]").map(t=>t.dom).getOrNull();if(n)return"compositionstart"===r.type?(r.preventDefault(),r.stopPropagation(),void Cx(t,n)):void(ll(n)&&(Cx(t,n),t.undoManager.add()))},Ck=(t,r,n)=>{let o=dS(t.getBody()),a=Y(dC,1===r?o.next:o.prev);if(n.collapsed){let o=t.dom.getParent(n.startContainer,"PRE");if(!o)return;if(!a(lH.fromRangeStart(n))){let n=ru((t=>{let r=t.dom.create(i_(t));return r.innerHTML='<br data-mce-bogus="1">',r})(t));1===r?ne(ru(o),n):r7(ru(o),n),t.selection.select(n.dom,!0),t.selection.collapse()}}},CS=(t,r)=>{var n;return((t,r)=>{let n=r?m.Forwards:m.Backwards,o=t.selection.getRng();return yU(t,n,o,mK,mY,nQ).orThunk(()=>(Ck(t,n,o),et.none()))})(t,(n=t.selection,gA(r?n.getEnd(!0):n.getStart(!0))?!r:r)).exists(r=>(yF(t,r),!0))},CN=(t,r)=>((t,r)=>{let n=r?1:-1,o=t.selection.getRng();return yz(t,n,o,t=>mK(t)||mq(t),t=>mY(t)||mW(t),nQ).orThunk(()=>(Ck(t,n,o),et.none()))})(t,r).exists(r=>(yF(t,r),!0)),CR=(t,r)=>yH(t,r,r?mY:mK),CA=(t,r)=>vI(t,!r).map(n=>{let o=n.toRange(),a=t.selection.getRng();return r?o.setStart(a.startContainer,a.startOffset):o.setEnd(a.endContainer,a.endOffset),o}).exists(r=>(yF(t,r),!0)),CT=t=>el(["figcaption"],tG(t)),CO=(t,r)=>!!t.selection.isCollapsed()&&((t,r)=>{let n=ru(t.getBody()),o=lH.fromRangeStart(t.selection.getRng());return((t,r,n)=>{let o=Y(ry,r);return rK(ru(t.container()),t=>n.isBlock(tG(t)),o).filter(CT)})(o,n,t.schema).exists(()=>{if(r?yx(n.dom,o):yw(n.dom,o)){let o=CC(t,n,r?nr:nt);return t.selection.setRng(o),!0}return!1})})(t,r),CB=(t,r)=>r?et.from(t.dom.getParent(t.selection.getNode(),"details")).map(r=>((t,r)=>{let n=t.selection.getRng(),o=lH.fromRangeStart(n);return!(t.getBody().lastChild!==r||!yx(r,o)||(t.execCommand("InsertNewBlockAfter"),0))})(t,r)).getOr(!1):et.from(t.dom.getParent(t.selection.getNode(),"summary")).bind(r=>et.from(t.dom.getParent(r,"details")).map(n=>((t,r,n)=>{let o=t.selection.getRng(),a=lH.fromRangeStart(o);return!(t.getBody().firstChild!==r||!yw(n,a)||(t.execCommand("InsertNewBlockBefore"),0))})(t,n,r))).getOr(!1),CP={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},CD=(t,r)=>r.keyCode===t.keyCode&&r.shiftKey===t.shiftKey&&r.altKey===t.altKey&&r.ctrlKey===t.ctrlKey&&r.metaKey===t.metaKey,CL=(t,...r)=>()=>t.apply(null,r),CM=(t,r)=>eh(ey(es(t,t=>({...CP,...t})),t=>CD(t,r)?[t]:[]),t=>t.action()),CF=(t,r)=>eA(ey(es(t,t=>({...CP,...t})),t=>CD(t,r)?[t]:[]),t=>t.action()),CI=(t,r)=>{let n=r?m.Forwards:m.Backwards,o=t.selection.getRng();return yU(t,n,o,m$,mV,n1).exists(r=>(yF(t,r),!0))},CU=(t,r)=>{let n=t.selection.getRng();return yz(t,r?1:-1,n,m$,mV,n1).exists(r=>(yF(t,r),!0))},Cz=(t,r)=>yH(t,r,r?mV:m$),Cj=ie([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),CH={...Cj,none:t=>Cj.none(t)},C$=(t,r,n)=>ey(rO(t),t=>rb(t,r)?n(t)?[t]:[]:C$(t,r,n)),CV=(t,r)=>rZ(t,"table",r),Cq=(t,r,n,o,a=ee)=>{let l=1===o;if(!l&&n<=0)return CH.first(t[0]);if(l&&n>=t.length-1)return CH.last(t[t.length-1]);{let l=n+o,i=t[l];return a(i)?CH.middle(r,i):Cq(t,r,l,o,a)}},CW=(t,r)=>CV(t,r).bind(r=>{let n=C$(r,"th,td",ee);return eb(n,r=>ry(t,r)).map(t=>({index:t,all:n}))}),CK=["img","br"],CY=t=>a0.getOption(t).filter(t=>0!==t.trim().length||t.indexOf("\xa0")>-1).isSome()||el(CK,tG(t))||tQ(t)&&"false"===t4(t,"contenteditable"),CG=(t,r,n,o,a)=>ef(em(ey(nw(ru(n),"td,th,caption").map(t=>t.dom),r=>{var n;let o={left:(n=lf(r.getBoundingClientRect())).left- -1,top:n.top- -1,right:n.right+-2,bottom:n.bottom+-2,width:n.width+-1,height:n.height+-1};return[{x:o.left,y:t(o),cell:r},{x:o.right,y:t(o),cell:r}]}),t=>r(t,a)),(t,r)=>t.fold(()=>et.some(r),t=>{let n=Math.sqrt(Math.abs(t.x-o)+Math.abs(t.y-a)),l=Math.sqrt(Math.abs(r.x-o)+Math.abs(r.y-a));return et.some(l<n?r:t)}),et.none()).map(t=>t.cell),CX=Y(CG,t=>t.bottom,(t,r)=>t.y<r),CZ=Y(CG,t=>t.top,(t,r)=>t.y>r),CQ=(t,r,n)=>{var o;let a=t(r,n);return(a.breakType!==f.Wrap||0!==a.positions.length)&&(nG(n.getNode())||(o=a).breakType!==f.Br||1!==o.positions.length)?a.breakAt.isNone():!a.breakAt.exists(n=>t(r,n).breakAt.isSome())},CJ=Y(CQ,yv),C0=Y(CQ,yy),C1=(t,r,n,o)=>{let a=t.selection.getRng();return!(!s7()||!((t,r,n)=>{let o=lH.fromRangeStart(r);return dP(!t,n).exists(t=>t.isEqual(o))})(r,a,n)||(vO(r?1:-1,t,n,!r,!1).each(r=>{yF(t,r)}),0))},C2=(t,r,n)=>{let o=((t,r)=>{let n=r.getNode(t);return nz(n)?et.some(n):et.none()})(!!r,n),a=!1===r;o.fold(()=>yF(t,n.toRange()),o=>dP(a,t.getBody()).filter(t=>t.isEqual(n)).fold(()=>yF(t,n.toRange()),n=>((t,r,n)=>{r.undoManager.transact(()=>{let o=CC(r,ru(n),t?ne:r7);yF(r,o)})})(r,t,o)))},C3=(t,r,n,o)=>{let a=t.selection.getRng(),l=lH.fromRangeStart(a),i=t.getBody();return!r&&CJ(o,l)?(C2(t,r,eS(l.getClientRects()).bind(t=>CX(n,t.left,t.top)).bind(t=>yb(dF(t).map(r=>yv(t,r).positions.concat(r)).getOr([]),l)).orThunk(()=>eS(l.getClientRects()).bind(t=>yh(yC(i,lH.before(n)),t.left))).getOr(lH.before(n))),!0):!!(r&&C0(o,l))&&(C2(t,r,eN(l.getClientRects()).bind(t=>CZ(n,t.left,t.top)).bind(t=>yb(dM(t).map(r=>[r].concat(yy(t,r).positions)).getOr([]),l)).orThunk(()=>eS(l.getClientRects()).bind(t=>yh(yE(i,lH.after(n)),t.left))).getOr(lH.after(n))),!0)},C8=(t,r,n)=>et.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(o=>et.from(t.dom.getParent(o,"table")).map(a=>n(t,r,a,o))).getOr(!1),C5=(t,r)=>C8(t,r,C1),C6=(t,r)=>C8(t,r,C3),C4=(t,r,n)=>n.fold(et.none,et.none,(t,r)=>rY(r,CY).map(t=>ui(ur.exact(t,0,t,0))),n=>(t.execCommand("mceTableInsertRowAfter"),C9(t,r,n))),C9=(t,r,n)=>C4(t,r,CW(n,void 0).fold(()=>CH.none(n),t=>Cq(t.all,n,t.index,1,rQ))),C7=(t,r,n)=>C4(t,r,CW(n,void 0).fold(()=>CH.none(),t=>Cq(t.all,n,t.index,-1,rQ))),Ee=(t,r)=>{let n=["table","li","dl"],o=ru(t.getBody()),a=t=>{let r=tG(t);return ry(t,o)||el(n,r)},l=t.selection.getRng();return((t,r,n=J)=>n(r)?et.none():el(t,tG(r))?et.some(r):rG(r,t.join(","),t=>rb(t,"table")||n(t)))(["td","th"],ru(r?l.endContainer:l.startContainer),a).map(n=>(CV(n,a).each(r=>{t.model.table.clearSelectedCells(r.dom)}),t.selection.collapse(!r),(r?C9:C7)(t,a,n).each(r=>{t.selection.setRng(r)}),!0)).getOr(!1)},Et=(t,r)=>({container:t,offset:r}),Er=ax.DOM,En=t=>r=>t===r?-1:0,Eo=(t,r,n)=>{if(n$(t)&&r>=0)return et.some(Et(t,r));{let o=aJ(Er);return et.from(o.backwards(t,r,En(t),n)).map(t=>Et(t.container,t.container.data.length))}},Ea=(t,r,n)=>{if(!n$(t))return et.none();let o=t.data;if(r>=0&&r<=o.length)return et.some(Et(t,r));{let o=aJ(Er);return et.from(o.backwards(t,r,En(t),n)).bind(t=>{let o=t.container.data;return Ea(t.container,r+o.length,n)})}},El=(t,r,n)=>{if(!n$(t))return et.none();let o=t.data;if(r<=o.length)return et.some(Et(t,r));{let a=aJ(Er);return et.from(a.forwards(t,r,En(t),n)).bind(t=>El(t.container,r-o.length,n))}},Ei=(t,r,n,o,a)=>{let l=aJ(t,r=>t.isBlock(r)||el(["BR","IMG","HR","INPUT"],r.nodeName)||"false"===t.getContentEditable(r));return et.from(l.backwards(r,n,o,a))},Es=t=>""!==t&&-1!==" \xa0\f\n\r	\v".indexOf(t),Ed=(t,r)=>t.substring(r.length),Ec=(t,r,n,o=!1)=>{if(!r.collapsed||!n$(r.startContainer))return et.none();let a={text:"",offset:0},l=t.getParent(r.startContainer,t.isBlock)||t.getRoot();return Ei(t,r.startContainer,r.startOffset,(t,r,l)=>(a.text=l+a.text,a.offset+=r,((t,r,n,o=!1)=>{let a;let l=n.charAt(0);for(a=r-1;a>=0;a--){let i=t.charAt(a);if(!o&&Es(i))return et.none();if(l===i&&e6(t,n,a,r))break}return et.some(a)})(a.text,a.offset,n,o).getOr(r)),l).bind(t=>{let o=r.cloneRange();if(o.setStart(t.container,t.offset),o.setEnd(r.endContainer,r.endOffset),o.collapsed)return et.none();let a=lr(o.toString().replace(/\u00A0/g," "));return 0!==a.lastIndexOf(n)?et.none():et.some({text:Ed(a,n),range:o,trigger:n})})},Eu=t=>{if(3===t.nodeType)return Et(t,t.data.length);{let r=t.childNodes;return r.length>0?Eu(r[r.length-1]):Et(t,r.length)}},Em=(t,r)=>{let n=t.childNodes;return n.length>0&&r<n.length?Em(n[r],0):n.length>0&&1===t.nodeType&&n.length===r?Eu(n[n.length-1]):Et(t,r)},Eg=(t,r,n,o={})=>{var a;let l=r(),i=null!==(a=t.selection.getRng().startContainer.nodeValue)&&void 0!==a?a:"",s=em(l.lookupByTrigger(n.trigger),r=>n.text.length>=r.minChars&&r.matches.getOrThunk(()=>{var r;return r=t.dom,t=>!((t,r)=>{var n;let o=null!==(n=t.getParent(r.container,t.isBlock))&&void 0!==n?n:t.getRoot();return Ei(t,r.container,r.offset,(t,r)=>0===r?-1:r,o).filter(t=>!Es(t.container.data.charAt(t.offset-1))).isSome()})(r,Em(t.startContainer,t.startOffset))})(n.range,i,n.text));if(0===s.length)return et.none();let d=Promise.all(es(s,t=>t.fetch(n.text,t.maxResults,o).then(r=>({matchText:n.text,items:r,columns:t.columns,onAction:t.onAction,highlightOn:t.highlightOn}))));return et.some({lookupData:d,context:n})};(s=h||(h={}))[s.Error=0]="Error",s[s.Value=1]="Value";let Ef=(t,r,n)=>t.stype===h.Error?r(t.serror):n(t.svalue),Ep=t=>({stype:h.Value,svalue:t}),Eh=t=>({stype:h.Error,serror:t}),Eb=t=>O(t)&&eO(t).length>100?" removed due to size":JSON.stringify(t,null,2),Ev=(t,r)=>Eh([{path:t,getErrorInfo:r}]),Ey=(t,r)=>({extract:(n,o)=>ej(o,t).fold(()=>Ev(n,()=>'Choice schema did not contain choice key: "'+t+'"'),t=>ej(r,t).fold(()=>Ev(n,()=>'The chosen schema: "'+t+'" did not exist in branches: '+Eb(r)),r=>r.extract(n.concat(["branch: "+t]),o))),toString:()=>"chooseOn("+t+"). Possible values: "+eO(r)}),EC=t=>(...r)=>{if(0===r.length)throw Error("Can't merge zero objects");let n={};for(let o=0;o<r.length;o++){let a=r[o];for(let r in a)eH(a,r)&&(n[r]=t(n[r],a[r]))}return n},EE=EC((t,r)=>B(t)&&B(r)?EE(t,r):r),Ew=(EC((t,r)=>r),t=>({tag:"defaultedThunk",process:q(t)})),Ex=t=>{var r;let n=(t=>{let r=[],n=[];return ed(t,t=>{Ef(t,t=>n.push(t),t=>r.push(t))}),{values:r,errors:n}})(t);return n.errors.length>0?(r=n.errors,$(Eh,ev)(r)):Ep(n.values)},E_=(t,r,n)=>{switch(t.tag){case"field":return r(t.key,t.newKey,t.presence,t.prop);case"custom":return n(t.newKey,t.instantiator)}},Ek=t=>({extract:(r,n)=>{var o;return(o=t(n)).stype===h.Error?Ev(r,q(o.serror)):o},toString:q("val")}),ES=Ek(Ep),EN=(t,r,n,o)=>o(ej(t,r).getOrThunk(()=>n(t))),ER=(t,r,n,o,a)=>{var l;let i=t=>a.extract(r.concat([o]),t),s=t=>t.fold(()=>Ep(et.none()),t=>{var n;let l=a.extract(r.concat([o]),t);return n=et.some,l.stype===h.Value?{stype:h.Value,svalue:n(l.svalue)}:l});switch(t.tag){case"required":return ej(n,o).fold(()=>Ev(r,()=>'Could not find valid *required* value for "'+o+'" in '+Eb(n)),i);case"defaultedThunk":return EN(n,o,t.process,i);case"option":return s(ej(n,o));case"defaultedOptionThunk":return l=t.process,s(ej(n,o).map(t=>!0===t?l(n):t));case"mergeWithThunk":return EN(n,o,q({}),r=>i(EE(t.process(n),r)))}},EA=t=>({extract:(r,n)=>((t,r,n)=>{let o={},a=[];for(let l of n)E_(l,(n,l,i,s)=>{Ef(ER(i,t,r,n,s),t=>{a.push(...t)},t=>{o[l]=t})},(t,n)=>{o[t]=n(r)});return a.length>0?Eh(a):Ep(o)})(r,n,t),toString:()=>"obj{\n"+es(t,t=>E_(t,(t,r,n,o)=>t+" -> "+o.toString(),(t,r)=>"state("+t+")")).join("\n")+"}"}),ET=t=>({extract:(r,n)=>Ex(es(n,(n,o)=>t.extract(r.concat(["["+o+"]"]),n))),toString:()=>"array("+t.toString()+")"}),EO=(t,r,n)=>{var o;return Ef((o=r.extract([t],n)).stype===h.Error?{stype:h.Error,serror:{input:n,errors:o.serror}}:o,l7.error,l7.value)},EB=(t,r)=>Ey(t,eD(r,EA)),EP=q(ES),ED=(t,r)=>Ek(n=>{let o=typeof n;return t(n)?Ep(n):Eh(`Expected type: ${r} but got: ${o}`)}),EL=ED(z,"number"),EM=ED(T,"string"),EF=ED(L,"boolean"),EI=ED(U,"function"),EU=(t,r,n,o)=>({tag:"field",key:t,newKey:r,presence:n,prop:o}),Ez=(t,r)=>({tag:"custom",newKey:t,instantiator:r}),Ej=(t,r)=>EU(t,t,{tag:"required",process:{}},r),EH=t=>Ej(t,EM),E$=t=>Ej(t,EI),EV=(t,r)=>EU(t,t,{tag:"option",process:{}},r),Eq=t=>EV(t,EM),EW=(t,r,n)=>EU(t,t,Ew(r),n),EK=(t,r)=>EW(t,r,EL),EY=(t,r,n)=>{var o;return EW(t,r,(o=t=>el(n,t)?l7.value(t):l7.error(`Unsupported value: "${t}", choose one of "${n.join(", ")}".`),Ek(t=>o(t).fold(Eh,Ep))))},EG=(t,r)=>EW(t,r,EF),EX=(t,r)=>EW(t,r,EI),EZ=EH("type"),EQ=E$("fetch"),EJ=E$("onAction"),E0=EX("onSetup",()=>H),E1=Eq("text"),E2=Eq("icon"),E3=Eq("tooltip"),E8=Eq("label"),E5=EG("active",!1),E6=EG("enabled",!0),E4=EG("primary",!1),E9=t=>EW("type",t,EM),E7=EA([EZ,EH("trigger"),EK("minChars",1),EU(d="columns",d,Ew(1),EP()),EK("maxResults",10),EV("matches",EI),EQ,EJ,EW("highlightOn",[],ET(EM))]),we=[E6,E3,E2,E1,E0],wt=[E5].concat(we),wr=[EX("predicate",J),EY("scope","node",["node","editor"]),EY("position","selection",["node","selection","line"])],wn=we.concat([E9("contextformbutton"),E4,EJ,Ez("original",W)]),wo=wt.concat([E9("contextformbutton"),E4,EJ,Ez("original",W)]),wa=we.concat([E9("contextformbutton")]),wl=wt.concat([E9("contextformtogglebutton")]),wi=EB("type",{contextformbutton:wn,contextformtogglebutton:wo});EA([E9("contextform"),EX("initValue",q("")),E8,EU(c="commands",c,{tag:"required",process:{}},ET(wi)),EV("launch",EB("type",{contextformbutton:wa,contextformtogglebutton:wl}))].concat(wr));let ws=t=>{let r=eD(t.ui.registry.getAll().popups,t=>EO("Autocompleter",E7,t).fold(t=>{var r;throw Error("Errors: \n"+es((r=t.errors).length>10?r.slice(0,10).concat([{path:[],getErrorInfo:q("... (only showing first ten failures)")}]):r,t=>"Failed path: ("+t.path.join(" > ")+")\n"+t.getErrorInfo()).join("\n")+"\n\nInput object: "+Eb(t.input))},W)),n=eV(eU(r,t=>t.trigger)),o=ez(r);return{dataset:r,triggers:n,lookupByTrigger:t=>em(o,r=>r.trigger===t)}},wd=t=>{let r=aP(),n=aS(!1),o=r.isSet,a=()=>{o()&&((t=>{t.dispatch("AutocompleterEnd")})(t),n.set(!1),r.clear())},l=eJ(()=>ws(t)),i=i=>{r.get().map(r=>Ec(t.dom,t.selection.getRng(),r.trigger,!0).bind(r=>Eg(t,l,r,i))).getOrThunk(()=>((t,r)=>{var n;let o=r(),a=t.selection.getRng();return(n=t.dom,eA(o.triggers,t=>Ec(n,a,t))).bind(n=>Eg(t,r,n))})(t,l)).fold(a,l=>{var i;i=l.context,o()||r.set({trigger:i.trigger,matchLength:i.text.length}),l.lookupData.then(o=>{r.get().map(i=>{let s=l.context;i.trigger===s.trigger&&(s.text.length-i.matchLength>=10?a():(r.set({...i,matchLength:s.text.length}),n.get()?(cG(t,{range:s.range}),((t,r)=>{t.dispatch("AutocompleterUpdate",r)})(t,{lookupData:o})):(n.set(!0),cG(t,{range:s.range}),((t,r)=>{t.dispatch("AutocompleterStart",r)})(t,{lookupData:o}))))})})})},s=()=>r.get().bind(({trigger:r})=>{let o=t.selection.getRng();return Ec(t.dom,o,r,n.get()).filter(({range:t})=>((t,r)=>{let n=t.compareBoundaryPoints(window.Range.START_TO_START,r),o=t.compareBoundaryPoints(window.Range.END_TO_END,r);return n>=0&&o<=0})(o,t)).map(({range:t})=>t)});t.addCommand("mceAutocompleterReload",(t,r)=>{i(O(r)?r.fetchOptions:{})}),t.addCommand("mceAutocompleterClose",a),t.addCommand("mceAutocompleterRefreshActiveRange",()=>{s().each(r=>{cG(t,{range:r})})}),t.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>s().isSome()),((t,r)=>{let n=aL(r.load,50);t.on("input",r=>{("insertCompositionText"!==r.inputType||t.composing)&&n.throttle()}),t.on("keydown",t=>{let o=t.which;8===o?n.throttle():27===o?(n.cancel(),r.cancelIfNecessary()):38!==o&&40!==o||n.cancel()},!0),t.on("remove",n.cancel)})(t,{cancelIfNecessary:a,load:i})},wc=tA().browser.isSafari(),wu=t=>lt(ru(t)),wm=(t,r)=>{var n;return 0===t.startOffset&&t.endOffset===(null===(n=r.textContent)||void 0===n?void 0:n.length)},wg=(t,r)=>et.from(t.getParent(r.container(),"details")),wf=(t,r)=>wg(t,r).isSome(),wp=(t,r)=>{let n=r.getNode();M(n)||t.selection.setCursorLocation(n,r.offset())},wh=(t,r,n)=>{let o=t.dom.getParent(r.container(),"details");if(o&&!o.open){let r=t.dom.select("summary",o)[0];r&&(n?dM(r):dF(r)).each(r=>wp(t,r))}else wp(t,r)},wb=(t,r,n)=>{let{dom:o,selection:a}=t,l=t.getBody();if("character"===n){let n=lH.fromRangeStart(a.getRng()),i=o.getParent(n.container(),o.isBlock),s=wg(o,n),d=i&&o.isEmpty(i),c=D(null==i?void 0:i.previousSibling),u=D(null==i?void 0:i.nextSibling);return!!(d&&(r?u:c)&&dO(!r,l,n).exists(t=>wf(o,t)&&!tH(s,wg(o,t))))||dO(r,l,n).fold(J,n=>{let a=wg(o,n);if(wf(o,n)&&!tH(s,a)){if(r||wh(t,n,!1),i&&d){if(r&&c||!r&&u)return!0;wh(t,n,r),t.dom.remove(i)}return!0}return!1})}return!1},wv=(t,r,n,o)=>{let a=t.selection.getRng(),l=lH.fromRangeStart(a),i=t.getBody();return"selection"===o?((t,r)=>{let n=r.startSummary.exists(r=>r.contains(t.startContainer)),o=r.startSummary.exists(r=>r.contains(t.endContainer)),a=r.startDetails.forall(t=>r.endDetails.forall(r=>t!==r));return(n||o)&&!(n&&o)||a})(a,r):n?r.startSummary.exists(t=>dF(t).exists(r=>nG(r.getNode())&&dL(t,r).exists(t=>t.isEqual(l))||r.isEqual(l)))||r.startDetails.exists(t=>dD(i,l).forall(r=>!t.contains(r.container()))):r.startSummary.exists(t=>dM(t).exists(t=>t.isEqual(l)))||r.startDetails.exists(t=>dL(t,l).forall(t=>r.startSummary.exists(r=>!r.contains(l.container())&&r.contains(t.container()))))},wy=(t,r,n)=>((t,r)=>{let n=et.from(t.getParent(r.startContainer,"details")),o=et.from(t.getParent(r.endContainer,"details"));if(n.isSome()||o.isSome()){let r=n.bind(r=>et.from(t.select("summary",r)[0]));return et.some({startSummary:r,startDetails:n,endDetails:o})}return et.none()})(t.dom,t.selection.getRng()).fold(()=>wb(t,r,n),o=>wv(t,o,r,n)||wb(t,r,n))||wc&&((t,r,n)=>{let o=t.selection,a=o.getNode(),l=o.getRng(),i=lH.fromRangeStart(l);return!!n8(a)&&("selection"===n&&wm(l,a)||gU(r,i,a)?wu(a):t.undoManager.transact(()=>{let l=o.getSel(),{anchorNode:i,anchorOffset:s,focusNode:d,focusOffset:c}=null!=l?l:{},u=()=>{I(i)&&I(s)&&I(d)&&I(c)&&(null==l||l.setBaseAndExtent(i,s,d,c))},m=(t,r)=>{ed(t.childNodes,t=>{cn(t)&&r.appendChild(t)})},g=t.dom.create("span",{"data-mce-bogus":"1"});m(a,g),a.appendChild(g),u(),"word"!==n&&"line"!==n||null==l||l.modify("extend",r?"right":"left",n),!o.isCollapsed()&&wm(o.getRng(),g)?wu(a):(t.execCommand(r?"ForwardDelete":"Delete"),i=null==l?void 0:l.anchorNode,s=null==l?void 0:l.anchorOffset,d=null==l?void 0:l.focusNode,c=null==l?void 0:l.focusOffset,m(g,a),u()),t.dom.remove(g)}),!0)})(t,r,n)?et.some(H):et.none(),wC=t=>(r,n,o={})=>{let a=r.getBody(),l={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:a,currentTarget:a,eventPhase:Event.AT_TARGET,originalTarget:a,explicitOriginalTarget:a,isTrusted:!1,srcElement:a,cancelable:!1,preventDefault:H,inputType:n},i=al(new InputEvent(t));return r.dispatch(t,{...i,...l,...o})},wE=wC("input"),ww=wC("beforeinput"),wx=tA(),w_=wx.os,wk=w_.isMacOS()||w_.isiOS(),wS=wx.browser.isFirefox(),wN=(t,r)=>{let n=t.dom,o=t.schema.getMoveCaretBeforeOnEnterElements();if(!r)return;if(/^(LI|DT|DD)$/.test(r.nodeName)){let t=(t=>{for(;t;){if(nD(t)||n$(t)&&t.data&&/[\r\n\s]/.test(t.data))return t;t=t.nextSibling}return null})(r.firstChild);t&&/^(UL|OL|DL)$/.test(t.nodeName)&&r.insertBefore(n.doc.createTextNode("\xa0"),r.firstChild)}let a=n.createRng();if(r.normalize(),r.hasChildNodes()){let t=new nS(r,r),n,l=r;for(;n=t.current();){if(n$(n)){a.setStart(n,0),a.setEnd(n,0);break}if(o[n.nodeName.toLowerCase()]){a.setStartBefore(n),a.setEndBefore(n);break}l=n,n=t.next()}n||(a.setStart(l,0),a.setEnd(l,0))}else nG(r)?r.nextSibling&&n.isBlock(r.nextSibling)?(a.setStartBefore(r),a.setEndBefore(r)):(a.setStartAfter(r),a.setEndAfter(r)):(a.setStart(r,0),a.setEnd(r,0));t.selection.setRng(a),uU(t,a)},wR=(t,r)=>{let n=t.getRoot(),o,a=r;for(;a!==n&&a&&"false"!==t.getContentEditable(a);){if("true"===t.getContentEditable(a)){o=a;break}a=a.parentNode}return a!==n?o:n},wA=t=>et.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock)),wT=t=>{t.innerHTML='<br data-mce-bogus="1">'},wO=(t,r)=>{i_(t).toLowerCase()===r.tagName.toLowerCase()&&((t,r,n)=>{let o=t.dom;et.from(n.style).map(o.parseStyle).each(t=>{let n={...r4(ru(r)),...t};o.setStyles(r,n)}),t$(et.from(n.class).map(t=>t.split(/\s+/)),et.from(r.className).map(t=>em(t.split(/\s+/),t=>""!==t)),(t,n)=>{let a=em(n,r=>!el(t,r)),l=[...t,...a];o.setAttrib(r,"class",l.join(" "))});let a=["style","class"],l=eI(n,(t,r)=>!el(a,r));o.setAttribs(r,l)})(t,r,ik(t))},wB=(t,r,n,o,a=!0,l,i)=>{let s;let d=t.dom,c=t.schema,u=i_(t),m=n?n.nodeName.toUpperCase():"",g=r,f=c.getTextInlineElements(),p=s=l||"TABLE"===m||"HR"===m?d.create(l||u,i||{}):n.cloneNode(!1);if(a)do if(f[g.nodeName]){if(dU(g)||dQ(g))continue;let t=g.cloneNode(!1);d.setAttrib(t,"id",""),s.hasChildNodes()?t.appendChild(s.firstChild):p=t,s.appendChild(t)}while((g=g.parentNode)&&g!==o);else d.setAttrib(s,"style",null),d.setAttrib(s,"class",null);return wO(t,s),wT(p),s},wP=(t,r)=>{let n=null==t?void 0:t.parentNode;return I(n)&&n.nodeName===r},wD=t=>I(t)&&/^(OL|UL|LI)$/.test(t.nodeName),wL=t=>I(t)&&/^(LI|DT|DD)$/.test(t.nodeName),wM=t=>{let r=t.parentNode;return wL(r)?r:t},wF=(t,r,n)=>{let o=t[n?"firstChild":"lastChild"];for(;o&&!nD(o);)o=o[n?"nextSibling":"previousSibling"];return o===r},wI=t=>ef(eU(r4(ru(t)),(t,r)=>`${r}: ${t};`),(t,r)=>t+r,""),wU=(t,r)=>r&&"A"===r.nodeName&&t.isEmpty(r),wz=(t,r)=>t.nodeName===r||t.previousSibling&&t.previousSibling.nodeName===r,wj=(t,r)=>I(r)&&t.isBlock(r)&&!/^(TD|TH|CAPTION|FORM)$/.test(r.nodeName)&&!/^(fixed|absolute)/i.test(r.style.position)&&t.isEditable(r.parentNode)&&"false"!==t.getContentEditable(r),wH=(t,r,n)=>n$(r)?t?1===n&&"\uFEFF"===r.data.charAt(n-1)?0:n:n===r.data.length-1&&"\uFEFF"===r.data.charAt(n)?r.data.length:n:n,w$={insert:(t,r)=>{var n;let o,a,l,i,s,d=!1,c=t.dom,u=t.schema.getNonEmptyElements(),m=t.selection.getRng(),g=i_(t),f=ru(m.startContainer),p=rB(f,m.startOffset),h=p.exists(t=>tQ(t)&&!rQ(t)),b=m.collapsed&&h,v=(r,n)=>wB(t,a,_,x,iA(t),r,n),y=t=>{let r;let n=wH(t,a,l);if(n$(a)&&(t?n>0:n<a.data.length))return!1;if((a.parentNode===_||a===_)&&d&&!t||t&&nD(a)&&a===_.firstChild)return!0;if(wz(a,"TABLE")||wz(a,"HR"))return d&&!t||!d&&t;let o=new nS(a,_);for(n$(a)&&(t&&0===n?o.prev():t||n!==a.data.length||o.next());r=o.current();){if(nD(r)){if(!r.getAttribute("data-mce-bogus")){let t=r.nodeName.toLowerCase();if(u[t]&&"br"!==t)return!1}}else if(n$(r)&&!nA(r.data))return!1;t?o.prev():o.next()}return!0},C=()=>{let r;return r=/^(H[1-6]|PRE|FIGURE)$/.test(i)&&"HGROUP"!==k?v(g):v(),((t,r)=>{let n=iT(t);return!F(r)&&(T(n)?el(tz.explode(n),r.nodeName.toLowerCase()):n)})(t,s)&&wj(c,s)&&c.isEmpty(_,void 0,{includeZwsp:!0})?r=c.split(s,_):c.insertAfter(r,_),wN(t,r),r};uh(c,m).each(t=>{m.setStart(t.startContainer,t.startOffset),m.setEnd(t.endContainer,t.endOffset)}),a=m.startContainer,l=m.startOffset;let E=!(!r||!r.shiftKey),w=!(!r||!r.ctrlKey);nD(a)&&a.hasChildNodes()&&!b&&(d=l>a.childNodes.length-1,a=a.childNodes[Math.min(l,a.childNodes.length-1)]||a,l=d&&n$(a)?a.data.length:0);let x=wR(c,a);if(!x||((t,r)=>{let n=t.dom.getParent(r,"ol,ul,dl");return null!==n&&"false"===t.dom.getContentEditableParent(n)})(t,a))return;E||(a=((t,r,n,o,a)=>{var l,i;let s=t.dom,d=null!==(l=wR(s,o))&&void 0!==l?l:s.getRoot(),c=s.getParent(o,s.isBlock);if(!c||!wj(s,c)){if(!(c=c||d).hasChildNodes()){let o=s.create(r);return wO(t,o),c.appendChild(o),n.setStart(o,0),n.setEnd(o,0),o}let l,u=o;for(;u&&u.parentNode!==c;)u=u.parentNode;for(;u&&!s.isBlock(u);)l=u,u=u.previousSibling;let m=null===(i=null==l?void 0:l.parentElement)||void 0===i?void 0:i.nodeName;if(l&&m&&t.schema.isValidChild(m,r.toLowerCase())){let i=l.parentNode,d=s.create(r);for(wO(t,d),i.insertBefore(d,l),u=l;u&&!s.isBlock(u);){let t=u.nextSibling;d.appendChild(u),u=t}n.setStart(o,a),n.setEnd(o,a)}}return o})(t,g,m,a,l));let _=c.getParent(a,c.isBlock)||c.getRoot();s=I(null==_?void 0:_.parentNode)?c.getParent(_.parentNode,c.isBlock):null,i=_?_.nodeName.toUpperCase():"";let k=s?s.nodeName.toUpperCase():"";if("LI"!==k||w||(_=s,s=s.parentNode,i=k),nD(s)&&(n=_,!E&&n.nodeName.toLowerCase()===i_(t)&&t.dom.isEmpty(n)&&((r,n,o)=>{let a=n;for(;a&&a!==r&&D(a.nextSibling);){let r=a.parentElement;if(!r||!eH(t.schema.getTextBlockElements(),r.nodeName.toLowerCase()))return n3(r);a=r}return!1})(t.getBody(),n)))return((t,r,n)=>{var o,a,l;let i=r(i_(t)),s=t.dom.getParent(n,n3);s&&(t.dom.insertAfter(i,s),wN(t,i),(null!==(l=null===(a=null===(o=n.parentElement)||void 0===o?void 0:o.childNodes)||void 0===a?void 0:a.length)&&void 0!==l?l:0)>1&&t.dom.remove(n))})(t,v,_);if(/^(LI|DT|DD)$/.test(i)&&nD(s)&&c.isEmpty(_))return void((t,r,n,o,a)=>{var l,i,s,d;let c=t.dom,u=t.selection.getRng(),m=n.parentNode;if(n===t.getBody()||!m)return;wD(l=n)&&wD(l.parentNode)&&(a="LI");let g=wL(o)?wI(o):void 0,f=wL(o)&&g?r(a,{style:wI(o)}):r(a);if(wF(n,o,!0)&&wF(n,o,!1)){if(wP(n,"LI")){let t=wM(n);c.insertAfter(f,t),(null===(s=(i=n).parentNode)||void 0===s?void 0:s.firstChild)===i?c.remove(t):c.remove(n)}else c.replace(f,n)}else if(wF(n,o,!0))wP(n,"LI")?(c.insertAfter(f,wM(n)),f.appendChild(c.doc.createTextNode(" ")),f.appendChild(n)):m.insertBefore(f,n),c.remove(o);else if(wF(n,o,!1))c.insertAfter(f,wM(n)),c.remove(o);else{n=wM(n);let t=u.cloneRange();t.setStartAfter(o),t.setEndAfter(n);let r=t.extractContents();if("LI"===a&&(d=r).firstChild&&"LI"===d.firstChild.nodeName){let t=em(es(f.children,ru),G(t3("br")));f=r.firstChild,c.insertAfter(r,n),ed(t,t=>nt(ru(f),t)),g&&f.setAttribute("style",g)}else c.insertAfter(r,n),c.insertAfter(f,n);c.remove(o)}wN(t,f)})(t,v,s,_,g);if(!(b||_!==t.getBody()&&wj(c,_)))return;let S=_.parentNode;if(b)o=v(g),p.fold(()=>{nr(f,ru(o))},t=>{r7(t,ru(o))}),t.selection.setCursorLocation(o,0);else if(ln(_))o=lu(_),c.isEmpty(_)&&wT(_),wO(t,o),wN(t,o);else if(y(!1))o=C();else if(y(!0)&&S){o=S.insertBefore(v(),_);let r=ru(m.startContainer).dom.hasChildNodes()&&m.collapsed;wN(t,wz(_,"HR")||r?o:_)}else{let r=(t=>{let r=t.cloneRange();return r.setStart(t.startContainer,wH(!0,t.startContainer,t.startOffset)),r.setEnd(t.endContainer,wH(!1,t.endContainer,t.endOffset)),r})(m).cloneRange();r.setEndAfter(_);let n=r.extractContents();ed(nE(ru(n),t0),t=>{let r=t.dom;r.nodeValue=lr(r.data)}),(t=>{let r=t;do n$(r)&&(r.data=r.data.replace(/^[\r\n]+/,"")),r=r.firstChild;while(r)})(n),o=n.firstChild,c.insertAfter(n,_),((t,r,n)=>{var o;let a=[];if(!n)return;let l=n;for(;l=l.firstChild;){if(t.isBlock(l))return;nD(l)&&!r[l.nodeName.toLowerCase()]&&a.push(l)}let i=a.length;for(;i--;)(!(l=a[i]).hasChildNodes()||l.firstChild===l.lastChild&&""===(null===(o=l.firstChild)||void 0===o?void 0:o.nodeValue)||wU(t,l))&&t.remove(l)})(c,u,o),((t,r)=>{r.normalize();let n=r.lastChild;(!n||nD(n)&&/^(left|right)$/gi.test(t.getStyle(n,"float",!0)))&&t.add(r,"br")})(c,_),c.isEmpty(_)&&wT(_),o.normalize(),c.isEmpty(o)?(c.remove(o),C()):(wO(t,o),wN(t,o))}c.setAttrib(o,"id",""),t.dispatch("NewBlock",{newBlock:o})},fakeEventName:"insertParagraph"},wV=(t,r,n)=>{let o=t.dom.createRng();n?(o.setStartBefore(r),o.setEndBefore(r)):(o.setStartAfter(r),o.setEndAfter(r)),t.selection.setRng(o),uU(t,o)},wq=(t,r)=>{let n=rg("br");r7(ru(r),n),t.undoManager.add()},wW=(t,r)=>{wK(t.getBody(),r)||ne(ru(r),rg("br"));let n=rg("br");ne(ru(r),n),wV(t,n.dom,!1),t.undoManager.add()},wK=(t,r)=>!!nG(lH.after(r).getNode())||dD(t,lH.after(r)).map(t=>nG(t.getNode())).getOr(!1),wY=t=>t&&"A"===t.nodeName&&"href"in t,wG=t=>t.fold(J,wY,wY,J),wX=(t,r)=>{r.fold(H,Y(wq,t),Y(wW,t),H)},wZ={insert:(t,r)=>{let n=(t=>{let r=Y(gR,t),n=lH.fromRangeStart(t.selection.getRng());return yr(r,t.getBody(),n).filter(wG)})(t);n.isSome()?n.each(Y(wX,t)):((t,r)=>{let n=t.selection,o=t.dom,a=n.getRng(),l,i=!1;uh(o,a).each(t=>{a.setStart(t.startContainer,t.startOffset),a.setEnd(t.endContainer,t.endOffset)});let s=a.startOffset,d=a.startContainer;if(nD(d)&&d.hasChildNodes()){let t=s>d.childNodes.length-1;d=d.childNodes[Math.min(s,d.childNodes.length-1)]||d,s=t&&n$(d)?d.data.length:0}let c=o.getParent(d,o.isBlock),u=c&&c.parentNode?o.getParent(c.parentNode,o.isBlock):null,m=u?u.nodeName.toUpperCase():"",g=!(!r||!r.ctrlKey);"LI"!==m||g||(c=u),n$(d)&&s>=d.data.length&&(((t,r,n)=>{let o;let a=new nS(r,n),l=t.getNonEmptyElements();for(;o=a.next();)if(l[o.nodeName.toLowerCase()]||n$(o)&&o.length>0)return!0;return!1})(t.schema,d,c||o.getRoot())||(l=o.create("br"),a.insertNode(l),a.setStartAfter(l),a.setEndAfter(l),i=!0)),l=o.create("br"),lV(o,a,l),wV(t,l,i),t.undoManager.add()})(t,r)},fakeEventName:"insertLineBreak"},wQ=(t,r)=>wA(t).filter(t=>r.length>0&&rb(ru(t),r)).isSome(),wJ=ie([{br:[]},{block:[]},{none:[]}]),w0=(t,r)=>wQ(t,iR(t)),w1=t=>(r,n)=>wA(r).filter(t=>a6(ru(t))).isSome()===t,w2=(t,r)=>(n,o)=>wA(n).fold(q(""),t=>t.nodeName.toUpperCase())===t.toUpperCase()===r,w3=t=>F(wR(t.dom,t.selection.getStart())),w8=t=>w2("pre",t),w5=t=>(r,n)=>ix(r)===t,w6=(t,r)=>wQ(t,iN(t)),w4=(t,r)=>r,w9=t=>{let r=i_(t),n=wR(t.dom,t.selection.getStart());return I(n)&&t.schema.isValidChild(n.nodeName,r)},w7=t=>{let r=t.selection.getRng(),n=rB(ru(r.startContainer),r.startOffset).map(t=>tQ(t)&&!rQ(t));return r.collapsed&&n.getOr(!0)},xe=(t,r)=>(n,o)=>ef(t,(t,r)=>t&&r(n,o),!0)?et.some(r):et.none(),xt=(t,r,n)=>{r.selection.isCollapsed()||(t=>{t.execCommand("delete")})(r),I(n)&&ww(r,t.fakeEventName).isDefaultPrevented()||(t.insert(r,n),I(n)&&wE(r,t.fakeEventName))},xr=(t,r)=>{let n=()=>xt(wZ,t,r),o=()=>xt(w$,t,r),a=v2([xe([w0],wJ.none()),xe([w8(!0),w3],wJ.none()),xe([w2("summary",!0)],wJ.br()),xe([w8(!0),w5(!1),w4],wJ.br()),xe([w8(!0),w5(!1)],wJ.block()),xe([w8(!0),w5(!0),w4],wJ.block()),xe([w8(!0),w5(!0)],wJ.br()),xe([w1(!0),w4],wJ.br()),xe([w1(!0)],wJ.block()),xe([w6],wJ.br()),xe([w4],wJ.br()),xe([w9],wJ.block()),xe([w7],wJ.block())],[t,!(!r||!r.shiftKey)]).getOr(wJ.none());switch(iS(t)){case"linebreak":a.fold(n,n,H);break;case"block":a.fold(o,o,H);break;case"invert":a.fold(o,n,H);break;default:a.fold(n,o,H)}},xn=tA(),xo=xn.os.isiOS()&&xn.browser.isSafari(),xa=(t,r)=>{var n;r.isDefaultPrevented()||(r.preventDefault(),(n=t.undoManager).typing&&(n.typing=!1,n.add()),t.undoManager.transact(()=>{xr(t,r)}))},xl=tA(),xi=t=>t.stopImmediatePropagation(),xs=t=>t.keyCode===cZ.PAGE_UP||t.keyCode===cZ.PAGE_DOWN,xd=(t,r,n)=>{n&&!t.get()?r.on("NodeChange",xi,!0):!n&&t.get()&&r.off("NodeChange",xi),t.set(n)},xc=(t,r)=>{let n=r.container(),o=r.offset();return n$(n)?(n.insertData(o,t),et.some(lH(n,o+t.length))):dy(r).map(n=>{let o=rf(t);return r.isAtEnd()?ne(n,o):r7(n,o),lH(o.dom,t.length)})},xu=Y(xc,"\xa0"),xm=Y(xc," "),xg=t=>r=>{t.selection.setRng(r.toRange()),t.nodeChanged()},xf=t=>{let r=lH.fromRangeStart(t.selection.getRng()),n=ru(t.getBody());if(t.selection.isCollapsed()){let o=Y(gR,t),a=lH.fromRangeStart(t.selection.getRng());return yr(o,t.getBody(),a).bind(t=>t.fold(t=>dL(n.dom,lH.before(t)),t=>dM(t),t=>dF(t),t=>dD(n.dom,lH.after(t)))).map(o=>()=>{var a;return(a=t.schema,t=>gi(n,t,a)?xu(r):xm(r))(o).each(xg(t))})}return et.none()},xp=t=>{var r,n;return tV(tM.browser.isFirefox()&&t.selection.isEditable()&&(r=t.dom,n=t.selection.getRng().startContainer,r.isEditable(r.getParent(n,"summary"))),()=>{var r;let n=ru(t.getBody());t.selection.isCollapsed()||t.getDoc().execCommand("Delete"),(gi(n,r=lH.fromRangeStart(t.selection.getRng()),t.schema)?xu(r):xm(r)).each(xg(t))})},xh=t=>sK(t)?[{keyCode:cZ.TAB,action:CL(Ee,t,!0)},{keyCode:cZ.TAB,shiftKey:!0,action:CL(Ee,t,!1)}]:[],xb=t=>{if(t.addShortcut("Meta+P","","mcePrint"),wd(t),bg(t))return aS(null);{let r,n;let o=yG(t);return(t=>{t.on("beforeinput",r=>{t.selection.isEditable()&&!ei(r.getTargetRanges(),r=>!me(t.dom,r))||r.preventDefault()})})(t),(t=>{t.on("keyup compositionstart",Y(C_,t))})(t),((t,r)=>{t.on("keydown",n=>{n.isDefaultPrevented()||((t,r,n)=>{let o=tM.os.isMacOS()||tM.os.isiOS();CM([{keyCode:cZ.RIGHT,action:CL(CS,t,!0)},{keyCode:cZ.LEFT,action:CL(CS,t,!1)},{keyCode:cZ.UP,action:CL(CN,t,!1)},{keyCode:cZ.DOWN,action:CL(CN,t,!0)},...o?[{keyCode:cZ.UP,action:CL(CA,t,!1),metaKey:!0,shiftKey:!0},{keyCode:cZ.DOWN,action:CL(CA,t,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:cZ.RIGHT,action:CL(C5,t,!0)},{keyCode:cZ.LEFT,action:CL(C5,t,!1)},{keyCode:cZ.UP,action:CL(C6,t,!1)},{keyCode:cZ.DOWN,action:CL(C6,t,!0)},{keyCode:cZ.UP,action:CL(C6,t,!1)},{keyCode:cZ.UP,action:CL(CB,t,!1)},{keyCode:cZ.DOWN,action:CL(CB,t,!0)},{keyCode:cZ.RIGHT,action:CL(CI,t,!0)},{keyCode:cZ.LEFT,action:CL(CI,t,!1)},{keyCode:cZ.UP,action:CL(CU,t,!1)},{keyCode:cZ.DOWN,action:CL(CU,t,!0)},{keyCode:cZ.RIGHT,action:CL(yK,t,r,!0)},{keyCode:cZ.LEFT,action:CL(yK,t,r,!1)},{keyCode:cZ.RIGHT,ctrlKey:!o,altKey:o,action:CL(yX,t,r)},{keyCode:cZ.LEFT,ctrlKey:!o,altKey:o,action:CL(yZ,t,r)},{keyCode:cZ.UP,action:CL(CO,t,!1)},{keyCode:cZ.DOWN,action:CL(CO,t,!0)}],n).each(t=>{n.preventDefault()})})(t,r,n)})})(t,o),r=!1,t.on("keydown",n=>{r=n.keyCode===cZ.BACKSPACE,n.isDefaultPrevented()||((t,r,n)=>{let o=n.keyCode===cZ.BACKSPACE?"deleteContentBackward":"deleteContentForward",a=t.selection.isCollapsed(),l=a?"character":"selection",i=t=>a?t?"word":"line":"selection";CF([{keyCode:cZ.BACKSPACE,action:CL(Cu,t)},{keyCode:cZ.BACKSPACE,action:CL(vq,t,!1)},{keyCode:cZ.DELETE,action:CL(vq,t,!0)},{keyCode:cZ.BACKSPACE,action:CL(vF,t,!1)},{keyCode:cZ.DELETE,action:CL(vF,t,!0)},{keyCode:cZ.BACKSPACE,action:CL(y1,t,r,!1)},{keyCode:cZ.DELETE,action:CL(y1,t,r,!0)},{keyCode:cZ.BACKSPACE,action:CL(fn,t,!1)},{keyCode:cZ.DELETE,action:CL(fn,t,!0)},{keyCode:cZ.BACKSPACE,action:CL(wy,t,!1,l)},{keyCode:cZ.DELETE,action:CL(wy,t,!0,l)},...wk?[{keyCode:cZ.BACKSPACE,altKey:!0,action:CL(wy,t,!1,i(!0))},{keyCode:cZ.DELETE,altKey:!0,action:CL(wy,t,!0,i(!0))},{keyCode:cZ.BACKSPACE,metaKey:!0,action:CL(wy,t,!1,i(!1))}]:[{keyCode:cZ.BACKSPACE,ctrlKey:!0,action:CL(wy,t,!1,i(!0))},{keyCode:cZ.DELETE,ctrlKey:!0,action:CL(wy,t,!0,i(!0))}],{keyCode:cZ.BACKSPACE,action:CL(vW,t,!1)},{keyCode:cZ.DELETE,action:CL(vW,t,!0)},{keyCode:cZ.BACKSPACE,action:CL(Cn,t,!1)},{keyCode:cZ.DELETE,action:CL(Cn,t,!0)},{keyCode:cZ.BACKSPACE,action:CL(vT,t,!1)},{keyCode:cZ.DELETE,action:CL(vT,t,!0)},{keyCode:cZ.BACKSPACE,action:CL(vN,t,!1)},{keyCode:cZ.DELETE,action:CL(vN,t,!0)},{keyCode:cZ.BACKSPACE,action:CL(Ce,t,!1)},{keyCode:cZ.DELETE,action:CL(Ce,t,!0)}],n).filter(r=>t.selection.isEditable()).each(r=>{n.preventDefault(),ww(t,o).isDefaultPrevented()||(r(),wE(t,o))})})(t,o,n)}),t.on("keyup",n=>{var o;n.isDefaultPrevented()||(o=r,CM([{keyCode:cZ.BACKSPACE,action:CL(vV,t)},{keyCode:cZ.DELETE,action:CL(vV,t)},...wk?[{keyCode:cZ.BACKSPACE,altKey:!0,action:CL(Ct,t)},{keyCode:cZ.DELETE,altKey:!0,action:CL(Ct,t)},...o?[{keyCode:wS?224:91,action:CL(Ct,t)}]:[]]:[{keyCode:cZ.BACKSPACE,ctrlKey:!0,action:CL(Ct,t)},{keyCode:cZ.DELETE,ctrlKey:!0,action:CL(Ct,t)}]],n)),r=!1}),n=et.none(),t.on("keydown",r=>{r.keyCode===cZ.ENTER&&(xo&&(t=>{if(!t.collapsed)return!1;let r=t.startContainer;if(n$(r)){let n=r.data.charAt(t.startOffset-1);return/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/.test(n)}return!1})(t.selection.getRng())?(n=et.some(t.selection.getBookmark()),t.undoManager.add()):xa(t,r))}),t.on("keyup",r=>{r.keyCode===cZ.ENTER&&n.each(()=>{t.undoManager.undo(),n.fold(H,r=>t.selection.moveToBookmark(r)),xa(t,r),n=et.none()})}),(t=>{t.on("keydown",r=>{r.isDefaultPrevented()||((t,r)=>{CF([{keyCode:cZ.SPACEBAR,action:CL(xf,t)},{keyCode:cZ.SPACEBAR,action:CL(xp,t)}],r).each(n=>{r.preventDefault(),ww(t,"insertText",{data:" "}).isDefaultPrevented()||(n(),wE(t,"insertText",{data:" "}))})})(t,r)})})(t),(t=>{t.on("input",r=>{r.isComposing||(t=>{let r=ru(t.getBody());t.selection.isCollapsed()&&gp(r,lH.fromRangeStart(t.selection.getRng()),t.schema).each(r=>{t.selection.setRng(r.toRange())})})(t)})})(t),(t=>{t.on("keydown",r=>{r.isDefaultPrevented()||((t,r)=>{CM([...xh(t)],r).each(t=>{r.preventDefault()})})(t,r)})})(t),((t,r)=>{t.on("keydown",n=>{n.isDefaultPrevented()||((t,r,n)=>{let o=tM.os.isMacOS()||tM.os.isiOS();CM([{keyCode:cZ.END,action:CL(CR,t,!0)},{keyCode:cZ.HOME,action:CL(CR,t,!1)},...o?[]:[{keyCode:cZ.HOME,action:CL(CA,t,!1),ctrlKey:!0,shiftKey:!0},{keyCode:cZ.END,action:CL(CA,t,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:cZ.END,action:CL(Cz,t,!0)},{keyCode:cZ.HOME,action:CL(Cz,t,!1)},{keyCode:cZ.END,action:CL(yQ,t,!0,r)},{keyCode:cZ.HOME,action:CL(yQ,t,!1,r)}],n).each(t=>{n.preventDefault()})})(t,r,n)})})(t,o),((t,r)=>{if(xl.os.isMacOS())return;let n=aS(!1);t.on("keydown",r=>{xs(r)&&xd(n,t,!0)}),t.on("keyup",o=>{o.isDefaultPrevented()||CM([{keyCode:cZ.PAGE_UP,action:CL(yQ,t,!1,r)},{keyCode:cZ.PAGE_DOWN,action:CL(yQ,t,!0,r)}],o),xs(o)&&n.get()&&(xd(n,t,!1),t.nodeChanged())})})(t,o),o}};class xv{constructor(t){let r;this.lastPath=[],this.editor=t;let n=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",n=>{let o=t.selection.getRng(),a={startContainer:o.startContainer,startOffset:o.startOffset,endContainer:o.endContainer,endOffset:o.endOffset};"nodechange"!==n.type&&ud(a,r)||t.dispatch("SelectionChange"),r=a}),t.on("contextmenu",()=>{uG(t),t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{let r=t.selection.getStart(!0);r&&ce(t)&&!n.isSameElementPath(r)&&t.dom.isChildOf(r,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",r=>{!r.isDefaultPrevented()&&ce(t)&&("IMG"===t.selection.getNode().nodeName?uQ.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t={}){let r;let n=this.editor.selection;if(this.editor.initialized&&n&&!ss(this.editor)&&!this.editor.mode.isReadOnly()){let o=this.editor.getBody();(r=n.getStart(!0)||o).ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(r,o)||(r=o);let a=[];this.editor.dom.getParent(r,t=>t===o||(a.push(t),!1)),this.editor.dispatch("NodeChange",{...t,element:r,parents:a})}}isSameElementPath(t){let r;let n=this.editor,o=eE(n.dom.getParents(t,ee,n.getBody()));if(o.length===this.lastPath.length){for(r=o.length;r>=0&&o[r]===this.lastPath[r];r--);if(-1===r)return this.lastPath=o,!0}return this.lastPath=o,!1}}let xy=aY("image"),xC=aY("event"),xE=t=>r=>{r[xC]=t},xw=xE(0),xx=xE(2),x_=xE(1),xk=t=>et.from(t[xC]).exists(t=>0===t),xS=aY("mode"),xN=t=>r=>{r[xS]=t},xR=(t,r)=>xN(r)(t),xA=xN(0),xT=xN(2),xO=xN(1),xB=t=>r=>et.from(r[xS]).exists(r=>r===t),xP=xB(0),xD=xB(1),xL=["none","copy","link","move"],xM=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],xF=()=>{let t=new window.DataTransfer,r="move",n="all",o={get dropEffect(){return r},set dropEffect(e){el(xL,e)&&(r=e)},get effectAllowed(){return n},set effectAllowed(e){xk(o)&&el(xM,e)&&(n=e)},get items(){var a;return{...a=t.items,get length(){return a.length},add:(t,r)=>{if(xP(o)){if(!T(t))return a.add(t);if(!M(r))return a.add(t,r)}return null},remove:t=>{xP(o)&&a.remove(t)},clear:()=>{xP(o)&&a.clear()}}},get files(){return xD(o)?Object.freeze({length:0,item:t=>null}):t.files},get types(){return t.types},setDragImage:(r,n,a)=>{xP(o)&&(o[xy]={image:r,x:n,y:a},t.setDragImage(r,n,a))},getData:r=>xD(o)?"":t.getData(r),setData:(r,n)=>{xP(o)&&t.setData(r,n)},clearData:r=>{xP(o)&&t.clearData(r)}};return xA(o),o},xI=(t,r)=>t.setData("text/html",r),xU="x-tinymce/html",xz=q(xU),xj="<!-- "+xU+" -->",xH=t=>xj+t,x$=t=>-1!==t.indexOf(xj),xV="%MCEPASTEBIN%",xq=t=>t.dom.get("mcepastebin"),xW=t=>I(t)&&"mcepastebin"===t.id,xK=t=>t===xV,xY=(t,r)=>(tz.each(r,r=>{t=A(r,RegExp)?t.replace(r,""):t.replace(r[0],r[1])}),t),xG=t=>xY(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(t,r,n)=>r||n?"\xa0":" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),xX=(t,r)=>({content:t,cancelled:r}),xZ=(t,r)=>(t.insertContent(r,{merge:sB(t),paste:!0}),!0),xQ=t=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(t),xJ=(t,r,n)=>!(t.selection.isCollapsed()||!xQ(r))&&(t.undoManager.extra(()=>{n(t,r)},()=>{t.execCommand("mceInsertLink",!1,r)}),!0),x0=(t,r,n)=>!!(xQ(r)&&ei(sW(t),t=>e9(r.toLowerCase(),`.${t.toLowerCase()}`)))&&(t.undoManager.extra(()=>{n(t,r)},()=>{t.insertContent('<img src="'+r+'">')}),!0),x1=(o=0,()=>"mceclip"+o++),x2=t=>{let r=xF();return xI(r,t),xT(r),r},x3=(t,r,n,o,a)=>{let l=((t,r,n)=>{let o=t.dispatch("PastePreProcess",{content:r,internal:n}),a=((t,r)=>{let n=h$({sanitize:sV(t),sandbox_iframes:sX(t),sandbox_iframes_exclusions:sZ(t),convert_unsafe_embeds:sQ(t)},t.schema);n.addNodeFilter("meta",t=>{tz.each(t,t=>{t.remove()})});let o=n.parse(r,{forced_root_block:!1,isRootContent:!0});return mA({validate:!0},t.schema).serialize(o)})(t,o.content);return t.hasEventListeners("PastePostProcess")&&!o.isDefaultPrevented()?((t,r,n)=>{let o=t.dom.create("div",{style:"display:none"},r),a=t.dispatch("PastePostProcess",{node:o,internal:n});return xX(a.node.innerHTML,a.isDefaultPrevented())})(t,a,n):xX(a,o.isDefaultPrevented())})(t,r,n);if(!l.cancelled){let r=l.content,n=()=>{o||!sP(t)?xZ(t,r):tz.each([xJ,x0,xZ],n=>!n(t,r,xZ))};a?ww(t,"insertFromPaste",{dataTransfer:x2(r)}).isDefaultPrevented()||(n(),wE(t,"insertFromPaste")):n()}},x8=(t,r,n,o)=>{let a=n||x$(r);x3(t,r.replace(xj,""),a,!1,o)},x5=(t,r,n)=>{let o=((t,r,n)=>{let o=t.split(/\n\n/),a=((t,r)=>{let n="<"+t,o=eU(r,(t,r)=>r+'="'+oj.encodeAllRaw(t)+'"');return o.length&&(n+=" "+o.join(" ")),n+">"})(r,n),l="</"+r+">",i=es(o,t=>t.split(/\n/).join("<br />"));return 1===i.length?i[0]:es(i,t=>a+t+l).join("")})(nO(t.dom.encode(r).replace(/\r\n/g,"\n"),sL(t)),i_(t),ik(t));x3(t,o,!1,!0,n)},x6=t=>{let r={};if(t&&t.types)for(let n=0;n<t.types.length;n++){let o=t.types[n];try{r[o]=t.getData(o)}catch(t){r[o]=""}}return r},x4=(t,r)=>r in t&&t[r].length>0,x9=t=>x4(t,"text/html")||x4(t,"text/plain"),x7=(t,r,n)=>{let o="paste"===r.type?r.clipboardData:r.dataTransfer;if(sS(t)&&o){let a=((t,r)=>{let n=r.items?ey(eR(r.items),t=>"file"===t.kind?[t.getAsFile()]:[]):[],o=r.files?eR(r.files):[];return em(n.length>0?n:o,(t=>{let r=sW(t);return t=>e4(t.type,"image/")&&ei(r,r=>(t=>{let r=t.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return tz.hasOwn(n,r)?"image/"+n[r]:"image/"+r})(r)===t.type)})(t))})(t,o);if(a.length>0)return r.preventDefault(),Promise.all(es(a,t=>pT(t).then(r=>({file:t,uri:r})))).then(r=>{n&&t.selection.setRng(n),ed(r,r=>{((t,r)=>{pR(r.uri).each(({data:n,type:o,base64Encoded:a})=>{let l=a?n:btoa(n),i=r.file,s=t.editorUpload.blobCache,d=s.getByData(l,o),c=null!=d?d:((t,r,n,o)=>{let a=x1(),l=iB(t)&&I(n.name),i=l?((t,r)=>{let n=r.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return I(n)?t.dom.encode(n[1]):void 0})(t,n.name):a,s=l?n.name:void 0,d=r.create(a,n,o,i,s);return r.add(d),d})(t,s,i,l);x8(t,`<img src="${c.blobUri()}">`,!1,!0)})})(t,r)})}),!0}return!1},_e=(t,r,n,o,a)=>{var l;let i=xG(n),s=x4(r,xz())||x$(n),d=!s&&(l=i,!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(l)),c=xQ(i);(xK(i)||!i.length||d&&!c)&&(o=!0),(o||c)&&(i=x4(r,"text/plain")&&d?r["text/plain"]:(t=>{let r=o8(),n=h$({},r),o="",a=r.getVoidElements(),l=tz.makeMap("script noscript style textarea video audio iframe object"," "),i=r.getBlockElements(),s=t=>{let n=t.name;if("br"!==n){if("wbr"!==n){if(a[n]&&(o+=" "),l[n])o+=" ";else{if(3===t.type&&(o+=t.value),!(t.name in r.getVoidElements())){let r=t.firstChild;if(r)do s(r);while(r=r.next)}i[n]&&t.next&&(o+="\n","p"===n&&(o+="\n"))}}}else o+="\n"};return t=xY(t,[/<!\[[^\]]+\]>/g]),s(n.parse(t)),o})(i)),xK(i)||(o?x5(t,i,a):x8(t,i,s,a))},_t=(t,r,n)=>{let o;t.on("keydown",t=>{(cZ.metaKeyPressed(t)&&86===t.keyCode||t.shiftKey&&45===t.keyCode)&&!t.isDefaultPrevented()&&(o=t.shiftKey&&86===t.keyCode)}),t.on("paste",a=>{var l,i;if(a.isDefaultPrevented()||tM.os.isAndroid()&&0===(null===(i=null===(l=a.clipboardData)||void 0===l?void 0:l.items)||void 0===i?void 0:i.length))return;let s="text"===n.get()||o;o=!1;let d=x6(a.clipboardData);!x9(d)&&x7(t,a,r.getLastRng()||t.selection.getRng())||(x4(d,"text/html")?(a.preventDefault(),_e(t,d,d["text/html"],s,!0)):x4(d,"text/plain")&&x4(d,"text/uri-list")?(a.preventDefault(),_e(t,d,d["text/plain"],s,!0)):(r.create(),uQ.setEditorTimeout(t,()=>{let n=r.getHtml();r.remove(),_e(t,d,n,s,!1)},0)))}),(t=>{let r=t=>e4(t,"webkit-fake-url"),n=t=>e4(t,"data:");t.parser.addNodeFilter("img",(o,a,l)=>{var i;if(!sS(t)&&!0===(null===(i=l.data)||void 0===i?void 0:i.paste))for(let a of o){let o=a.attr("src");T(o)&&!a.attr("data-mce-object")&&o!==tM.transparentSrc&&(r(o)||!sM(t)&&n(o))&&a.remove()}})})(t)},_r=(t,r,n,o)=>{((t,r,n)=>{if(!t)return!1;try{return t.clearData(),t.setData("text/html",r),t.setData("text/plain",n),t.setData(xz(),r),!0}catch(t){return!1}})(t.clipboardData,r.html,r.text)?(t.preventDefault(),o()):n(r.html,o)},_n=t=>(r,n)=>{let{dom:o,selection:a}=t,l=o.create("div",{contenteditable:"false","data-mce-bogus":"all"}),i=o.create("div",{contenteditable:"true"},r);o.setStyles(l,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),l.appendChild(i),o.add(t.getBody(),l);let s=a.getRng();i.focus();let d=o.createRng();d.selectNodeContents(i),a.setRng(d),uQ.setEditorTimeout(t,()=>{a.setRng(s),o.remove(l),n()},0)},_o=t=>({html:xH(t.selection.getContent({contextual:!0})),text:t.selection.getContent({format:"text"})}),_a=t=>!t.selection.isCollapsed()||!!t.dom.getParent(t.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",t.getBody()),_l=(t,r)=>{var n,o;return uy.getCaretRangeFromPoint(null!==(n=r.clientX)&&void 0!==n?n:0,null!==(o=r.clientY)&&void 0!==o?o:0,t.getDoc())},_i=(t,r)=>{t.focus(),r&&t.selection.setRng(r)},_s=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,_d=t=>tz.trim(t).replace(_s,an).toLowerCase(),_c=(t,r,n)=>{let o=sT(t);if(n||"all"===o||!sO(t))return r;let a=o?o.split(/[, ]/):[];if(a&&"none"!==o){let n=t.dom,o=t.selection.getNode();r=r.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(t,r,l,i)=>{let s=n.parseStyle(n.decode(l)),d={};for(let t=0;t<a.length;t++){let r=s[a[t]],l=r,i=n.getStyle(o,a[t],!0);/color/.test(a[t])&&(l=_d(l),i=_d(i)),i!==l&&(d[a[t]]=r)}let c=n.serializeStyle(d,"span");return c?r+' style="'+c+'"'+i:r+i})}else r=r.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return r=r.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(t,r,n,o)=>r+' style="'+n+'"'+o)},_u=t=>{let r=aS(!1),n=aS(sD(t)?"text":"html"),o=(t=>{let r=aS(null);return{create:()=>((t,r)=>{let{dom:n,selection:o}=t,a=t.getBody();r.set(o.getRng());let l=n.add(t.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},xV);tM.browser.isFirefox()&&n.setStyle(l,"left","rtl"===n.getStyle(a,"direction",!0)?65535:-65535),n.bind(l,"beforedeactivate focusin focusout",t=>{t.stopPropagation()}),l.focus(),o.select(l,!0)})(t,r),remove:()=>((t,r)=>{let n=t.dom;if(xq(t)){let o;let a=r.get();for(;o=xq(t);)n.remove(o),n.unbind(o);a&&t.selection.setRng(a)}r.set(null)})(t,r),getEl:()=>xq(t),getHtml:()=>(t=>{let r=t.dom,n=(t,n)=>{t.appendChild(n),r.remove(n,!0)},[o,...a]=em(t.getBody().childNodes,xW);ed(a,t=>{n(o,t)});let l=r.select("div[id=mcepastebin]",o);for(let t=l.length-1;t>=0;t--){let a=r.create("div");o.insertBefore(a,l[t]),n(a,l[t])}return o?o.innerHTML:""})(t),getLastRng:r.get}})(t);(tM.browser.isChromium()||tM.browser.isSafari())&&((t,r)=>{t.on("PastePreProcess",n=>{n.content=r(t,n.content,n.internal)})})(t,_c),t.addCommand("mceTogglePlainTextPaste",()=>{"text"===n.get()?(n.set("html"),cX(t,!1)):(n.set("text"),cX(t,!0)),t.focus()}),t.addCommand("mceInsertClipboardContent",(r,n)=>{n.html&&x8(t,n.html,n.internal,!1),n.text&&x5(t,n.text,!1)}),(t=>{let r=r=>n=>{r(t,n)},n=sN(t);U(n)&&t.on("PastePreProcess",r(n));let o=sR(t);U(o)&&t.on("PastePostProcess",r(o))})(t),t.on("PreInit",()=>{t.on("cut",r=>{!r.isDefaultPrevented()&&_a(t)&&t.selection.isEditable()&&_r(r,_o(t),_n(t),()=>{if(tM.browser.isChromium()||tM.browser.isFirefox()){let r=t.selection.getRng();uQ.setEditorTimeout(t,()=>{t.selection.setRng(r),t.execCommand("Delete")},0)}else t.execCommand("Delete")})}),t.on("copy",r=>{!r.isDefaultPrevented()&&_a(t)&&_r(r,_o(t),_n(t),H)}),sk(t)&&t.on("dragend dragover draggesture dragdrop drop drag",t=>{t.preventDefault(),t.stopPropagation()}),sS(t)||t.on("drop",t=>{let r=t.dataTransfer;r&&ei(r.files,t=>/^image\//.test(t.type))&&t.preventDefault()}),t.on("drop",n=>{if(n.isDefaultPrevented())return;let o=_l(t,n);if(F(o))return;let a=x6(n.dataTransfer),l=x4(a,xz());if((!x9(a)||(t=>{let r=t["text/plain"];return!!r&&0===r.indexOf("file://")})(a))&&x7(t,n,o))return;let i=a[xz()],s=i||a["text/html"]||a["text/plain"],d=((t,r,n,o)=>{let a=t.getParent(n,t=>ob(r,t));return!D(t.getParent(n,"summary"))||!!(a&&eH(o,"text/html"))&&!D((new DOMParser).parseFromString(o["text/html"],"text/html").body.querySelector(a.nodeName.toLowerCase()))})(t.dom,t.schema,o.startContainer,a),c=r.get();c&&!d||s&&(n.preventDefault(),uQ.setEditorTimeout(t,()=>{t.undoManager.transact(()=>{(i||c&&d)&&t.execCommand("Delete"),_i(t,o);let r=xG(s);a["text/html"]?x8(t,r,l,!0):x5(t,r,!0)})}))}),t.on("dragstart",t=>{r.set(!0)}),t.on("dragover dragend",n=>{sS(t)&&!r.get()&&(n.preventDefault(),_i(t,_l(t,n))),"dragend"===n.type&&r.set(!1)}),(t=>{t.on("input",r=>{"deleteByDrag"===r.inputType&&ed(em(t.dom.select("details"),t=>D(t.querySelector("summary"))),r=>{nG(r.firstChild)&&r.firstChild.remove();let n=t.dom.create("summary");n.appendChild(le().dom),r.prepend(n)})})})(t),_t(t,o,n)})},_m=t=>nQ(t.dom),_g=t=>r=>ry(ru(t),r),_f=(t,r)=>rK(ru(t),_m,_g(r)),_p=(t,r,n)=>{let o=new nS(t,r),a=n?o.next.bind(o):o.prev.bind(o),l=t;for(let r=n?t:a();r&&!nG(r);r=a())lN(r)&&(l=r);return l},_h=t=>{let r=((t,r,n)=>{let o=lH.fromRangeStart(t).getNode(),a=rK(ru(o),t=>nZ(t.dom)||n.isBlock(tG(t)),_g(r)).getOr(ru(r)).dom,l=_p(o,a,!1),i=_p(o,a,!0),s=document.createRange();return _f(l,a).fold(()=>{n$(l)?s.setStart(l,0):s.setStartBefore(l)},t=>s.setStartBefore(t.dom)),_f(i,a).fold(()=>{n$(i)?s.setEnd(i,i.data.length):s.setEndAfter(i)},t=>s.setEndAfter(t.dom)),s})(t.selection.getRng(),t.getBody(),t.schema);t.selection.setRng(fy(r))};(u=b||(b={})).Before="before",u.After="after";let _b=(t,r)=>Math.abs(t.left-r),_v=(t,r)=>Math.abs(t.right-r),_y=(t,r)=>ef(em(t,t=>r>=t.top&&r<=t.bottom),(t,r)=>t.fold(()=>et.some(r),t=>{let n=Math.min(r.left,t.left),o=Math.min(r.top,t.top),a=Math.max(r.right,t.right),l=Math.max(r.bottom,t.bottom);return et.some({top:o,right:a,bottom:l,left:n,width:a-n,height:l-o})}),et.none()).fold(()=>[[],t],r=>{let{pass:n,fail:o}=eu(t,t=>((t,r)=>{let n=Math.max(0,Math.min(t.bottom,r.bottom)-Math.max(t.top,r.top))/Math.min(t.height,r.height);return t.top<r.bottom&&t.bottom>r.top&&n>.5})(t,r));return[n,o]}),_C=(t,r,n)=>r>t.left&&r<t.right?0:Math.min(Math.abs(t.left-r),Math.abs(t.right-r)),_E=(t,r,n,o)=>{let a=t=>lN(t.node)?et.some(t):nD(t.node)?_E(eR(t.node.childNodes),r,n,!1):et.none(),l=(t,l)=>{let i=e_(t,(t,o)=>l(t,r,n)-l(o,r,n));return eA(i,a).map(t=>o&&!n$(t.node)&&i.length>1?a(i[1]).filter(o=>2>Math.abs(l(t,r,n)-l(o,r,n))&&n$(o.node)).getOr(t):t)},[i,s]=_y(yT(t),n),{pass:d,fail:c}=eu(s,t=>t.top<n);return l(i,_C).orThunk(()=>l(c,ly)).orThunk(()=>l(d,ly))},_w=(t,r,n)=>((t,r,n)=>{let o=ru(t),a=rp(rw(o),r,n).filter(t=>rC(o,t)).getOr(o);return((t,r,n,o)=>{let a=(r,l)=>{let i=em(r.dom.childNodes,G(t=>nD(t)&&t.classList.contains("mce-drag-container")));return l.fold(()=>_E(i,n,o,!0),t=>_E(em(i,r=>r!==t.dom),n,o,!0)).orThunk(()=>(ry(r,t)?et.none():rk(r)).bind(t=>a(t,et.some(r))))};return a(r,et.none())})(o,a,r,n)})(t,r,n).filter(t=>dt(t.node)).map(t=>({node:t.node,position:_b(t,r)<_v(t,r)?b.Before:b.After})),_x=t=>{var r,n;let o=t.getBoundingClientRect(),a=t.ownerDocument,l=a.documentElement,i=a.defaultView;return{top:o.top+(null!==(r=null==i?void 0:i.scrollY)&&void 0!==r?r:0)-l.clientTop,left:o.left+(null!==(n=null==i?void 0:i.scrollX)&&void 0!==n?n:0)-l.clientLeft}},__=t=>({target:t,srcElement:t}),_k=(t,r,n,o)=>{let a=((t,r)=>{let n=(t=>{let r=xF(),n=et.from(t[xS]);return xT(t),xw(r),r.dropEffect=t.dropEffect,r.effectAllowed=t.effectAllowed,et.from(t[xy]).each(t=>r.setDragImage(t.image,t.x,t.y)),ed(t.types,n=>{"Files"!==n&&r.setData(n,t.getData(n))}),ed(t.files,t=>r.items.add(t)),et.from(t[xC]).each(t=>{((t,r)=>{xE(r)(t)})(r,t)}),n.each(n=>{xR(t,n),xR(r,n)}),r})(t);return"dragstart"===r?(xw(n),xA(n)):"drop"===r?(xx(n),xT(n)):(x_(n),xO(n)),n})(n,t);return M(o)?((t,r,n)=>{let o=X("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:t,composedPath:o,initEvent:o,preventDefault:H,stopImmediatePropagation:H,stopPropagation:H,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:o,initMouseEvent:o,getModifierState:o,dataTransfer:n,...__(r)}})(t,r,a):{...o,dataTransfer:a,type:t,...__(r)}},_S=((...t)=>r=>{for(let n=0;n<t.length;n++)if(t[n](r))return!0;return!1})(nQ,nZ),_N=(t,r,n,o)=>{let a=t.dom,l=r.cloneNode(!0);a.setStyles(l,{width:n,height:o}),a.setAttrib(l,"data-mce-selected",null);let i=a.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return a.setStyles(i,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:o}),a.setStyles(l,{margin:0,boxSizing:"border-box"}),i.appendChild(l),i},_R=(t,r)=>n=>()=>{let o="left"===t?n.scrollX:n.scrollY;n.scroll({[t]:o+r,behavior:"smooth"})},_A=_R("left",-32),_T=_R("left",32),_O=_R("top",-32),_B=_R("top",32),_P=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)},_D=(t,r,n,o,a)=>{"dragstart"===r&&xI(o,t.dom.getOuterHTML(n));let l=_k(r,n,o,a);return t.dispatch(r,l)},_L=(t,r)=>{let n=aD((t,n)=>{r._selectionOverrides.hideFakeCaret(),_w(r.getBody(),t,n).fold(()=>r.selection.placeCaretAt(t,n),o=>{let a=r._selectionOverrides.showCaret(1,o.node,o.position===b.Before,!1);a?r.selection.setRng(a):r.selection.placeCaretAt(t,n)})},0);return r.on("remove",n.cancel),o=>t.on(a=>{var l,i,s,d,c,u;let m=Math.max(Math.abs(o.screenX-a.screenX),Math.abs(o.screenY-a.screenY));if(!a.dragging&&m>10){let t=_D(r,"dragstart",a.element,a.dataTransfer,o);if(I(t.dataTransfer)&&(a.dataTransfer=t.dataTransfer),t.isDefaultPrevented())return;a.dragging=!0,r.focus()}if(a.dragging){let m=o.currentTarget===r.getDoc().documentElement,g=(s=r.inline?_x(r.getBody()):{left:0,top:0},d=(t=>{let r=t.getBody();return t.inline?{left:r.scrollLeft,top:r.scrollTop}:{left:0,top:0}})(r),{pageX:(u={pageX:(c=((t,r)=>{if(r.target.ownerDocument!==t.getDoc()){let n=_x(t.getContentAreaContainer()),o=(t=>{let r=t.getBody(),n=t.getDoc().documentElement,o={left:r.scrollLeft,top:r.scrollTop},a={left:r.scrollLeft||n.scrollLeft,top:r.scrollTop||n.scrollTop};return t.inline?o:a})(t);return{left:r.pageX-n.left+o.left,top:r.pageY-n.top+o.top}}return{left:r.pageX,top:r.pageY}})(r,o)).left-s.left+d.left,pageY:c.top-s.top+d.top}).pageX-a.relX,pageY:u.pageY+5});l=a.ghost,i=r.getBody(),l.parentNode!==i&&i.appendChild(l),((t,r,n,o,a,l,i,s,d,c,u,m)=>{let g=0,f=0;t.style.left=r.pageX+"px",t.style.top=r.pageY+"px",r.pageX+n>a&&(g=r.pageX+n-a),r.pageY+o>l&&(f=r.pageY+o-l),t.style.width=n-g+"px",t.style.height=o-f+"px";let p=d.clientHeight,h=d.clientWidth,b=i+d.getBoundingClientRect().top,v=s+d.getBoundingClientRect().left;u.on(t=>{t.intervalId.clear(),t.dragging&&m&&(i+8>=p?t.intervalId.set(_B(c)):i-8<=0?t.intervalId.set(_O(c)):s+8>=h?t.intervalId.set(_T(c)):s-8<=0?t.intervalId.set(_A(c)):b+16>=window.innerHeight?t.intervalId.set(_B(window)):b-16<=0?t.intervalId.set(_O(window)):v+16>=window.innerWidth?t.intervalId.set(_T(window)):v-16<=0&&t.intervalId.set(_A(window)))})})(a.ghost,g,a.width,a.height,a.maxX,a.maxY,o.clientY,o.clientX,r.getContentAreaContainer(),r.getWin(),t,m),n.throttle(o.clientX,o.clientY)}})},_M=(t,r,n)=>{t.on(t=>{t.intervalId.clear(),t.dragging&&n.fold(()=>_D(r,"dragend",t.element,t.dataTransfer),n=>_D(r,"dragend",t.element,t.dataTransfer,n))}),_F(t)},_F=t=>{t.on(t=>{t.intervalId.clear(),_P(t.ghost)}),t.clear()},_I=t=>{let r=aP(),n=ax.DOM,o=document,a=_L(r,t),l=n=>_M(r,t,et.some(n));t.on("mousedown",n=>{if(0===n.button){var o,a;let l=eh(t.dom.getParents(n.target),_S).getOr(null);if(I(l)&&(o=t.dom,a=t.getBody(),nQ(l)&&l!==a&&o.isEditable(l.parentElement))){let o=t.dom.getPos(l),a=t.getBody(),i=t.getDoc().documentElement;r.set({element:l,dataTransfer:xF(),dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(t.inline?a.scrollWidth:i.offsetWidth)-2,maxY:(t.inline?a.scrollHeight:i.offsetHeight)-2,relX:n.pageX-o.x,relY:n.pageY-o.y,width:l.offsetWidth,height:l.offsetHeight,ghost:_N(t,l,l.offsetWidth,l.offsetHeight),intervalId:aB(100)})}}}),t.on("mousemove",a),t.on("mouseup",n=>{r.on(r=>{var o,a,l;if(r.intervalId.clear(),r.dragging){if(a=(t=>{let r=t.getSel();if(I(r)){let t=r.getRangeAt(0).startContainer;return n$(t)?t.parentNode:t}return null})(t.selection),l=r.element,!F(a)&&a!==l&&!t.dom.isChildOf(a,l)&&t.dom.isEditable(a)){let a=null!==(o=t.getDoc().elementFromPoint(n.clientX,n.clientY))&&void 0!==o?o:t.getBody();_D(t,"drop",a,r.dataTransfer,n).isDefaultPrevented()||t.undoManager.transact(()=>{((t,r)=>{let n=t.getParent(r.parentNode,t.isBlock);_P(r),n&&n!==t.getRoot()&&t.isEmpty(n)&&lt(ru(n))})(t.dom,r.element),(t=>{let r=t.getData("text/html");return""===r?et.none():et.some(r)})(r.dataTransfer).each(r=>t.insertContent(r)),t._selectionOverrides.hideFakeCaret()})}_D(t,"dragend",t.getBody(),r.dataTransfer,n)}}),_F(r)}),n.bind(o,"mousemove",a),n.bind(o,"mouseup",l),t.on("remove",()=>{n.unbind(o,"mousemove",a),n.unbind(o,"mouseup",l)}),t.on("keydown",n=>{n.keyCode===cZ.ESC&&_M(r,t,et.none())})},_U=(t,r)=>fo(t.getBody(),r),_z=t=>{let r;let n=t.selection,o=t.dom,a=t.getBody(),l=s9(t,a,o.isBlock,()=>u4(t)),i="sel-"+o.uniqueId(),s="data-mce-selected",d=t=>t!==a&&(nQ(t)||n1(t))&&o.isChildOf(t,a)&&o.isEditable(t.parentNode),c=(r,o,a,i=!0)=>t.dispatch("ShowCaret",{target:o,direction:r,before:a}).isDefaultPrevented()?null:(i&&n.scrollIntoView(o,-1===r),l.show(a,o)),u=t=>la(t)||ld(t)||lc(t),m=t=>u(t.startContainer)||u(t.endContainer),g=r=>{let n=t.schema.getVoidElements(),a=o.createRng(),l=r.startContainer,i=r.startOffset,s=r.endContainer,d=r.endOffset;return eH(n,l.nodeName.toLowerCase())?0===i?a.setStartBefore(l):a.setStartAfter(l):a.setStart(l,i),eH(n,s.nodeName.toLowerCase())?0===d?a.setEndBefore(s):a.setEndAfter(s):a.setEnd(s,d),a},f=(l,u)=>{if(!l)return null;if(l.collapsed){if(!m(l)){let t=u?1:-1,r=dv(t,a,l),n=r.getNode(!u);if(I(n)){if(dt(n))return c(t,n,!!u&&!r.isAtEnd(),!1);if(lo(n)&&nQ(n.nextSibling)){let t=o.createRng();return t.setStart(n,0),t.setEnd(n,0),t}}let i=r.getNode(u);if(I(i)){if(dt(i))return c(t,i,!u&&!r.isAtEnd(),!1);if(lo(i)&&nQ(i.previousSibling)){let t=o.createRng();return t.setStart(i,1),t.setEnd(i,1),t}}}return null}let g=l.startContainer,f=l.startOffset,p=l.endOffset;if(n$(g)&&0===f&&nQ(g.parentNode)&&(g=g.parentNode,f=o.nodeIndex(g),g=g.parentNode),!nD(g))return null;if(p===f+1&&g===l.endContainer){let a=g.childNodes[f];if(d(a))return(a=>{let l=a.cloneNode(!0),d=t.dispatch("ObjectSelected",{target:a,targetClone:l});if(d.isDefaultPrevented())return null;let c=((r,a)=>{let l=ru(t.getBody()),s=t.getDoc(),d=rX(l,"#"+i).getOrThunk(()=>{let t=rm('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',s);return t5(t,"id",i),nr(l,t),t}),c=o.createRng();na(d),no(d,[rf("\xa0",s),ru(a),rf("\xa0",s)]),c.setStart(d.dom.firstChild,1),c.setEnd(d.dom.lastChild,0),r3(d,{top:o.getPos(r,t.getBody()).y+"px"}),uz(d);let u=n.getSel();return u&&(u.removeAllRanges(),u.addRange(c)),c})(a,d.targetClone),u=ru(a);return ed(nw(ru(t.getBody()),`*[${s}]`),t=>{ry(u,t)||re(t,s)}),o.getAttrib(a,s)||a.setAttribute(s,"1"),r=a,h(),c})(a)}return null},p=()=>{r&&r.removeAttribute(s),rX(ru(t.getBody()),"#"+i).each(nl),r=null},h=()=>{l.hide()};return bg(t)||(t.on("click",r=>{o.isEditable(r.target)||(r.preventDefault(),t.focus())}),t.on("blur NewBlock",p),t.on("ResizeWindow FullscreenStateChanged",l.reposition),t.on("tap",r=>{let n=r.target,o=_U(t,n);nQ(o)?(r.preventDefault(),vB(t,o).each(f)):d(n)&&vB(t,n).each(f)},!0),t.on("mousedown",r=>{let l=r.target;if(l!==a&&"HTML"!==l.nodeName&&!o.isChildOf(l,a)||!((t,r,n)=>{let o=ru(t.getBody()),a=t.inline?o:ru(rw(o).dom.documentElement),l=((t,r,n,o)=>{let a=r.dom.getBoundingClientRect();return{x:n-(t?a.left+r.dom.clientLeft+bW(r):0),y:o-(t?a.top+r.dom.clientTop+bq(r):0)}})(t.inline,a,r,n);return((t,r,n)=>{let o=b$(t),a=bV(t);return r>=0&&n>=0&&r<=o&&n<=a})(a,l.x,l.y)})(t,r.clientX,r.clientY))return;p(),h();let i=_U(t,l);nQ(i)?(r.preventDefault(),vB(t,i).each(f)):_w(a,r.clientX,r.clientY).each(o=>{var a;r.preventDefault(),(a=c(1,o.node,o.position===b.Before,!1))&&n.setRng(a),nL(i)?i.focus():t.getBody().focus()})}),t.on("keypress",t=>{cZ.modifierPressed(t)||nQ(n.getNode())&&t.preventDefault()}),t.on("GetSelectionRange",t=>{let n=t.range;if(r){if(!r.parentNode)return void(r=null);(n=n.cloneRange()).selectNode(r),t.range=n}}),t.on("SetSelectionRange",t=>{t.range=g(t.range);let r=f(t.range,t.forward);r&&(t.range=r)}),t.on("AfterSetSelectionRange",t=>{let r=t.range,n=r.startContainer.parentElement;m(r)||nD(n)&&"mcepastebin"===n.id||h(),I(n)&&o.hasClass(n,"mce-offscreen-selection")||p()}),_I(t),sf(t)&&(t=>{let r=r=>{if(!r.isDefaultPrevented()){let n=r.dataTransfer;n&&(el(n.types,"Files")||n.files.length>0)&&(r.preventDefault(),"drop"===r.type&&bQ(t,"Dropped file type is not supported"))}},n=n=>{u1(t,n.target)&&r(n)},o=()=>{let o=ax.DOM,a=t.dom,l=document,i=t.inline?t.getBody():t.getDoc(),s=["drop","dragover"];ed(s,t=>{o.bind(l,t,n),a.bind(i,t,r)}),t.on("remove",()=>{ed(s,t=>{o.unbind(l,t,n),a.unbind(i,t,r)})})};t.on("init",()=>{uQ.setEditorTimeout(t,o,0)})})(t),(t=>{let r=aD(()=>{if(!t.removed&&t.getBody().contains(document.activeElement)){let r=t.selection.getRng();if(r.collapsed){let n=vP(t,r,!1);t.selection.setRng(n)}}},0);t.on("focus",()=>{r.throttle()}),t.on("blur",()=>{r.cancel()})})(t),(t=>{t.on("init",()=>{t.on("focusin",r=>{let n=r.target;if(n1(n)){let r=fo(t.getBody(),n),o=nQ(r)?r:n;t.selection.getNode()!==o&&vB(t,o).each(r=>t.selection.setRng(r))}})})})(t)),{showCaret:c,showBlockCaretContainer:t=>{t.hasAttribute("data-mce-caret")&&(lu(t),n.scrollIntoView(t))},hideFakeCaret:h,destroy:()=>{l.destroy(),r=null}}},_j=(t,r)=>{let n=r;for(let r=t.previousSibling;n$(r);r=r.previousSibling)n+=r.data.length;return n},_H=(t,r,n,o,a)=>{if(n$(n)&&(o<0||o>n.data.length))return[];let l=a&&n$(n)?[_j(n,o)]:[o],i=n;for(;i!==r&&i.parentNode;)l.push(t.nodeIndex(i,a)),i=i.parentNode;return i===r?l.reverse():[]},_$=(t,r,n,o,a,l,i=!1)=>({start:_H(t,r,n,o,i),end:_H(t,r,a,l,i)}),_V=(t,r)=>{let n=r.slice(),o=n.pop();return z(o)?ef(n,(t,r)=>t.bind(t=>et.from(t.childNodes[r])),et.some(t)).bind(t=>n$(t)&&(o<0||o>t.data.length)?et.none():et.some({node:t,offset:o})):et.none()},_q=(t,r)=>_V(t,r.start).bind(({node:n,offset:o})=>_V(t,r.end).map(({node:t,offset:r})=>{let a=document.createRange();return a.setStart(n,o),a.setEnd(t,r),a})),_W=(t,r,n)=>{if(r&&t.isEmpty(r)&&!n(r)){let o=r.parentNode;t.remove(r,n$(r.firstChild)&&nA(r.firstChild.data)),_W(t,o,n)}},_K=(t,r,n,o=!0)=>{let a=r.startContainer.parentNode,l=r.endContainer.parentNode;r.deleteContents(),o&&!n(r.startContainer)&&(n$(r.startContainer)&&0===r.startContainer.data.length&&t.remove(r.startContainer),n$(r.endContainer)&&0===r.endContainer.data.length&&t.remove(r.endContainer),_W(t,a,n),a!==l&&_W(t,l,n))},_Y=(t,r)=>et.from(t.dom.getParent(r.startContainer,t.dom.isBlock)),_G=(t,r,n)=>{let o=t.dynamicPatternsLookup({text:n,block:r});return{...t,blockPatterns:ia(o).concat(t.blockPatterns),inlinePatterns:il(o).concat(t.inlinePatterns)}},_X=(t,r,n,o)=>{let a=t.createRng();return a.setStart(r,0),a.setEnd(n,o),a.toString()},_Z=(t,r)=>t.create("span",{"data-mce-type":"bookmark",id:r}),_Q=(t,r)=>{let n=t.createRng();return n.setStartAfter(r.start),n.setEndBefore(r.end),n},_J=(t,r,n)=>{let o=_q(t.getRoot(),n).getOrDie("Unable to resolve path range"),a=o.startContainer,l=o.endContainer,i=0===o.endOffset?l:l.splitText(o.endOffset),s=0===o.startOffset?a:a.splitText(o.startOffset),d=s.parentNode;return{prefix:r,end:i.parentNode.insertBefore(_Z(t,r+"-end"),i),start:d.insertBefore(_Z(t,r+"-start"),s)}},_0=(t,r,n)=>{_W(t,t.get(r.prefix+"-end"),n),_W(t,t.get(r.prefix+"-start"),n)},_1=t=>0===t.start.length,_2=(t,r,n,o)=>{let a=r.start;return Ei(t,o.container,o.offset,(t,r)=>{let n=t.data.substring(0,r),o=n.lastIndexOf(a.charAt(a.length-1)),l=n.lastIndexOf(a);return -1!==l?l+a.length:-1!==o?o+1:-1},n).bind(o=>{var l,i;let s=null!==(i=null===(l=n.textContent)||void 0===l?void 0:l.indexOf(a))&&void 0!==i?i:-1;if(-1!==s&&o.offset>=s+a.length){let r=t.createRng();return r.setStart(o.container,o.offset-a.length),r.setEnd(o.container,o.offset),et.some(r)}{let l=o.offset-a.length;return Ea(o.container,l,n).map(r=>{let n=t.createRng();return n.setStart(r.container,r.offset),n.setEnd(o.container,o.offset),n}).filter(t=>t.toString()===a).orThunk(()=>_2(t,r,n,Et(o.container,0)))}})},_3=(t,r,n,o)=>{let a=t.dom,l=a.getRoot(),i=n.pattern,s=n.position.container,d=n.position.offset;return Ea(s,d-n.pattern.end.length,r).bind(c=>{let u=_$(a,l,c.container,c.offset,s,d,o);if(_1(i))return et.some({matches:[{pattern:i,startRng:u,endRng:u}],position:c});{let s=_8(t,n.remainingPatterns,c.container,c.offset,r,o),d=s.getOr({matches:[],position:c}),m=d.position;return((t,r,n,o,a,l=!1)=>{if(0===r.start.length&&!l){let r=t.createRng();return r.setStart(n,o),r.setEnd(n,o),et.some(r)}return Eo(n,o,a).bind(n=>_2(t,r,a,n).bind(t=>{var r;return l&&(t.endContainer===n.container&&t.endOffset===n.offset||0===n.offset&&(null===(r=t.endContainer.textContent)||void 0===r?void 0:r.length)===t.endOffset)?et.none():et.some(t)}))})(a,i,m.container,m.offset,r,s.isNone()).map(t=>{let r=((t,r,n,o=!1)=>_$(t,r,n.startContainer,n.startOffset,n.endContainer,n.endOffset,o))(a,l,t,o);return{matches:d.matches.concat([{pattern:i,startRng:r,endRng:u}]),position:Et(t.startContainer,t.startOffset)}})}})},_8=(t,r,n,o,a,l)=>{let i=t.dom;return Eo(n,o,i.getRoot()).bind(s=>{let d=_X(i,a,n,o);for(let i=0;i<r.length;i++){let c=r[i];if(!e9(d,c.end))continue;let u=r.slice();u.splice(i,1);let m=_3(t,a,{pattern:c,remainingPatterns:u,position:s},l);if(m.isNone()&&o>0)return _8(t,r,n,o-1,a,l);if(m.isSome())return m}return et.none()})},_5=(t,r,n)=>{t.selection.setRng(n),"inline-format"===r.type?ed(r.format,r=>{t.formatter.apply(r)}):t.execCommand(r.cmd,!1,r.value)},_6=(t,r,n,o,a,l)=>((t,r)=>{let n=eC(t,t=>ei(r,r=>t.pattern.start===r.pattern.start&&t.pattern.end===r.pattern.end));return t.length===r.length?n?t:r:t.length>r.length?t:r})(_8(t,a.inlinePatterns,n,o,r,l).fold(()=>[],t=>t.matches),_8(t,e_(a.inlinePatterns,(t,r)=>r.end.length-t.end.length),n,o,r,l).fold(()=>[],t=>t.matches)),_4=(t,r)=>{if(0===r.length)return;let n=t.dom,o=t.selection.getBookmark();ed(((t,r)=>{let n=aY("mce_textpattern"),o=eg(r,(r,o)=>{let a=_J(t,n+`_end${r.length}`,o.endRng);return r.concat([{...o,endMarker:a}])},[]);return eg(o,(r,a)=>{let l=o.length-r.length-1,i=_1(a.pattern)?a.endMarker:_J(t,n+`_start${l}`,a.startRng);return r.concat([{...a,startMarker:i}])},[])})(n,r),r=>{let o=n.getParent(r.startMarker.start,n.isBlock),a=t=>t===o;_1(r.pattern)?((t,r,n,o)=>{let a=_Q(t.dom,n);_K(t.dom,a,o),_5(t,r,a)})(t,r.pattern,r.endMarker,a):((t,r,n,o,a)=>{let l=t.dom,i=_Q(l,o),s=_Q(l,n);_K(l,s,a),_K(l,i,a),_5(t,r,_Q(l,{prefix:n.prefix,start:n.end,end:o.start}))})(t,r.pattern,r.startMarker,r.endMarker,a),_0(n,r.endMarker,a),_0(n,r.startMarker,a)}),t.selection.moveToBookmark(o)},_9=(t,r,n)=>((t,r,n)=>{if(n$(t)&&0>=t.length)return et.some(Et(t,0));{let r=aJ(Er);return et.from(r.forwards(t,0,En(t),n)).map(t=>Et(t.container,0))}})(r,0,r).map(o=>{let a=o.container;return El(a,n.start.length,r).each(n=>{let o=t.createRng();o.setStart(a,0),o.setEnd(n.container,n.offset),_K(t,o,t=>t===r)}),a}),_7=t=>(r,n)=>{let o=r.dom,a=n.pattern;return _Y(r,_q(o.getRoot(),n.range).getOrDie("Unable to resolve path range")).each(n=>{"block-format"===a.type?((t,r)=>{let n=r.get(t);return P(n)&&eS(n).exists(t=>eH(t,"block"))})(a.format,r.formatter)&&r.undoManager.transact(()=>{t(r.dom,n,a),r.formatter.apply(a.format)}):"block-command"===a.type&&r.undoManager.transact(()=>{t(r.dom,n,a),r.execCommand(a.cmd,!1,a.value)})}),!0},ke=t=>(r,n)=>{let o=e_(r,(t,r)=>r.start.length-t.start.length),a=n.replace("\xa0"," ");return eh(o,r=>t(r,n,a))},kt=(t,r)=>(n,o,a,l,i)=>{var s;void 0===i&&(i=null!==(s=o.textContent)&&void 0!==s?s:"");let d=n.dom,c=i_(n);return d.is(o,c)?t(a.blockPatterns,i).map(t=>r&&tz.trim(i).length===t.start.length?[]:[{pattern:t,range:_$(d,d.getRoot(),o,0,o,0,l)}]).getOr([]):[]},kr=_7((t,r,n)=>{_9(t,r,n).each(t=>{var r;let n=ru(t),o=a1(n);/^\s[^\s]/.test(o)&&(r=o.slice(1),a0.set(n,r))})}),kn=kt(ke((t,r,n)=>0===r.indexOf(t.start)||0===n.indexOf(t.start)),!0),ko=_7(_9),ka=kt(ke((t,r,n)=>r===t.start||n===t.start),!1),kl=(t,r,n)=>{for(let o=0;o<t.length;o++)if(n(t[o],r))return!0;return!1},ki=t=>{let r=[",",".",";",":","!","?"],n=[32],o=()=>{var r,n;return r=sF(t),n=sI(t),{inlinePatterns:il(r),blockPatterns:ia(r),dynamicPatternsLookup:n}},a=()=>t.options.isSet("text_patterns_lookup");t.on("keydown",r=>{if(13===r.keyCode&&!cZ.modifierPressed(r)&&t.selection.isCollapsed()){let n=ii(o(),"enter");(n.inlinePatterns.length>0||n.blockPatterns.length>0||a())&&((t,r)=>{let n=t.selection.getRng();return _Y(t,n).map(o=>{var a;let l=Math.max(0,n.startOffset),i=_G(r,o,null!==(a=o.textContent)&&void 0!==a?a:"");return{inlineMatches:_6(t,o,n.startContainer,l,i,!0),blockMatches:kn(t,o,i,!0)}}).filter(({inlineMatches:t,blockMatches:r})=>r.length>0||t.length>0)})(t,n).fold(J,({inlineMatches:r,blockMatches:n})=>(t.undoManager.add(),t.undoManager.extra(()=>{t.execCommand("mceInsertNewLine")},()=>{(t=>{t.insertContent("\uFEFF",{preserve_zwsp:!0})})(t),_4(t,r),((t,r)=>{if(0===r.length)return;let n=t.selection.getBookmark();ed(r,r=>kr(t,r)),t.selection.moveToBookmark(n)})(t,n);let o=t.selection.getRng(),a=Eo(o.startContainer,o.startOffset,t.dom.getRoot());t.execCommand("mceInsertNewLine"),a.each(r=>{let n=r.container;"\uFEFF"===n.data.charAt(r.offset-1)&&(n.deleteData(r.offset-1,1),_W(t.dom,n.parentNode,r=>r===t.dom.getRoot()))})}),!0))&&r.preventDefault()}},!0),t.on("keydown",r=>{if(32===r.keyCode&&t.selection.isCollapsed()){let n=ii(o(),"space");(n.blockPatterns.length>0||a())&&((t,r)=>{let n=t.selection.getRng();return _Y(t,n).map(o=>{let a=Math.max(0,n.startOffset),l=_X(t.dom,o,n.startContainer,a),i=_G(r,o,l);return ka(t,o,i,!1,l)}).filter(t=>t.length>0)})(t,n).fold(J,r=>(t.undoManager.transact(()=>{ed(r,r=>ko(t,r))}),!0))&&r.preventDefault()}},!0);let l=()=>{if(t.selection.isCollapsed()){let r=ii(o(),"space");(r.inlinePatterns.length>0||a())&&((t,r)=>{let n=t.selection.getRng();_Y(t,n).map(o=>{let a=Math.max(0,n.startOffset-1),l=_X(t.dom,o,n.startContainer,a),i=_G(r,o,l),s=_6(t,o,n.startContainer,a,i,!1);s.length>0&&t.undoManager.transact(()=>{_4(t,s)})})})(t,r)}};t.on("keyup",t=>{kl(n,t,(t,r)=>t===r.keyCode&&!cZ.modifierPressed(r))&&l()}),t.on("keypress",n=>{kl(r,n,(t,r)=>t.charCodeAt(0)===r.charCode)&&uQ.setEditorTimeout(t,l)})},ks=t=>{let r=tz.each,n=cZ.BACKSPACE,o=cZ.DELETE,a=t.dom,l=t.selection,i=t.parser,s=tM.browser,d=s.isFirefox(),c=s.isChromium()||s.isSafari(),u=tM.deviceType.isiPhone()||tM.deviceType.isiPad(),m=tM.os.isMacOS()||tM.os.isiOS(),g=(r,n)=>{try{t.getDoc().execCommand(r,!1,String(n))}catch(t){}},f=t=>t.isDefaultPrevented(),p=()=>{t.shortcuts.add("meta+a",null,"SelectAll")},h=()=>{t.inline||a.bind(t.getDoc(),"mousedown mouseup",r=>{let n;if(r.target===t.getDoc().documentElement){if(n=l.getRng(),t.getBody().focus(),"mousedown"===r.type){if(la(n.startContainer))return;l.placeCaretAt(r.clientX,r.clientY)}else l.setRng(n)}})},b=()=>{Range.prototype.getClientRects||t.on("mousedown",r=>{if(!f(r)&&"HTML"===r.target.nodeName){let r=t.getBody();r.blur(),uQ.setEditorTimeout(t,()=>{r.focus()})}})},v=()=>{let r=sb(t);t.on("click",n=>{let o=n.target;/^(IMG|HR)$/.test(o.nodeName)&&a.isEditable(o)&&(n.preventDefault(),t.selection.select(o),t.nodeChanged()),"A"===o.nodeName&&a.hasClass(o,r)&&0===o.childNodes.length&&a.isEditable(o.parentNode)&&(n.preventDefault(),l.select(o))})},y=()=>{t.on("keydown",t=>{if(!f(t)&&t.keyCode===n&&l.isCollapsed()&&0===l.getRng().startOffset){let r=l.getNode().previousSibling;if(r&&r.nodeName&&"table"===r.nodeName.toLowerCase())return t.preventDefault(),!1}return!0})},C=()=>{sd(t)||t.on("BeforeExecCommand mousedown",()=>{g("StyleWithCSS",!1),g("enableInlineTableEditing",!1),iZ(t)||g("enableObjectResizing",!1)})},E=()=>{t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},w=()=>{t.inline||t.on("keydown",()=>{document.activeElement===document.body&&t.getWin().focus()})},x=()=>{t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",r=>{let n;"HTML"===r.target.nodeName&&(n=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(n),t.selection.normalize(),t.nodeChanged())}))},_=()=>{m&&t.on("keydown",r=>{!cZ.metaKeyPressed(r)||r.shiftKey||37!==r.keyCode&&39!==r.keyCode||(r.preventDefault(),t.selection.getSel().modify("move",37===r.keyCode?"backward":"forward","lineboundary"))})},k=()=>{t.on("click",t=>{let r=t.target;do if("A"===r.tagName)return void t.preventDefault();while(r=r.parentNode)}),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},S=()=>{t.on("init",()=>{t.dom.bind(t.getBody(),"submit",t=>{t.preventDefault()})})};return bg(t)?(c&&(h(),v(),S(),p(),u&&(w(),x(),k())),d&&(b(),C(),E(),_())):(t.on("keydown",r=>{if(f(r)||r.keyCode!==cZ.BACKSPACE)return;let n=l.getRng(),o=n.startContainer,i=n.startOffset,s=a.getRoot(),d=o;if(n.collapsed&&0===i){for(;d.parentNode&&d.parentNode.firstChild===d&&d.parentNode!==s;)d=d.parentNode;"BLOCKQUOTE"===d.nodeName&&(t.formatter.toggle("blockquote",void 0,d),(n=a.createRng()).setStart(o,0),n.setEnd(o,0),l.setRng(n))}}),(()=>{let r=t=>{let r=a.create("body"),n=t.cloneContents();return r.appendChild(n),l.serializer.serialize(r,{format:"html"})};t.on("keydown",l=>{let i=l.keyCode;if(!f(l)&&(i===o||i===n)&&t.selection.isEditable()){let n=t.selection.isCollapsed(),o=t.getBody();if(n&&!n7(t.schema,o)||!n&&!(n=>{let o=r(n),l=a.createRng();return l.selectNode(t.getBody()),o===r(l)})(t.selection.getRng()))return;l.preventDefault(),t.setContent(""),o.firstChild&&a.isBlock(o.firstChild)?t.selection.setCursorLocation(o.firstChild,0):t.selection.setCursorLocation(o,0),t.nodeChanged()}})})(),tM.windowsPhone||t.on("keyup focusin mouseup",r=>{cZ.modifierPressed(r)||(t=>{let r=t.getBody(),n=t.selection.getRng();return n.startContainer===n.endContainer&&n.startContainer===r&&0===n.startOffset&&n.endOffset===r.childNodes.length})(t)||l.normalize()},!0),c&&(h(),v(),t.on("init",()=>{g("DefaultParagraphSeparator",i_(t))}),S(),y(),i.addNodeFilter("br",t=>{let r=t.length;for(;r--;)"Apple-interchange-newline"===t[r].attr("class")&&t[r].remove()}),u?(w(),x(),k()):p()),d&&(t.on("keydown",r=>{if(!f(r)&&r.keyCode===n&&t.getBody().getElementsByTagName("hr").length&&l.isCollapsed()&&0===l.getRng().startOffset){let t=l.getNode(),n=t.previousSibling;if("HR"===t.nodeName)return a.remove(t),void r.preventDefault();n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(a.remove(n),r.preventDefault())}}),b(),(()=>{let n=()=>{let n=a.getAttribs(l.getStart().cloneNode(!1));return()=>{let o=l.getStart();o!==t.getBody()&&(a.setAttrib(o,"style",null),r(n,t=>{o.setAttributeNode(t.cloneNode(!0))}))}},o=()=>!l.isCollapsed()&&a.getParent(l.getStart(),a.isBlock)!==a.getParent(l.getEnd(),a.isBlock);t.on("keypress",r=>{let a;return!(!(f(r)||8!==r.keyCode&&46!==r.keyCode)&&o()&&(a=n(),t.getDoc().execCommand("delete",!1),a(),r.preventDefault(),1))}),a.bind(t.getDoc(),"cut",r=>{if(!f(r)&&o()){let r=n();uQ.setEditorTimeout(t,()=>{r()})}})})(),C(),t.on("SetContent ExecCommand",t=>{"setcontent"!==t.type&&"mceInsertLink"!==t.command||r(a.select("a:not([data-mce-block])"),t=>{var r;let n=t.parentNode,o=a.getRoot();if((null==n?void 0:n.lastChild)===t){for(;n&&!a.isBlock(n);){if((null===(r=n.parentNode)||void 0===r?void 0:r.lastChild)!==n||n===o)return;n=n.parentNode}a.add(n,"br",{"data-mce-bogus":1})}})}),E(),_(),y())),{refreshContentEditable:H,isHidden:()=>{if(!d||t.removed)return!1;let r=t.selection.getSel();return!r||!r.rangeCount||0===r.rangeCount}}},kd=ax.DOM,kc=t=>t.inline?t.getElement().nodeName.toLowerCase():void 0,ku=t=>eI(t,t=>!1===M(t)),km=t=>{let r=t.options.get,n=t.editorUpload.blobCache;return ku({allow_conditional_comments:r("allow_conditional_comments"),allow_html_data_urls:r("allow_html_data_urls"),allow_svg_data_urls:r("allow_svg_data_urls"),allow_html_in_named_anchor:r("allow_html_in_named_anchor"),allow_script_urls:r("allow_script_urls"),allow_unsafe_link_target:r("allow_unsafe_link_target"),convert_unsafe_embeds:r("convert_unsafe_embeds"),convert_fonts_to_spans:r("convert_fonts_to_spans"),fix_list_elements:r("fix_list_elements"),font_size_legacy_values:r("font_size_legacy_values"),forced_root_block:r("forced_root_block"),forced_root_block_attrs:r("forced_root_block_attrs"),preserve_cdata:r("preserve_cdata"),inline_styles:r("inline_styles"),root_name:kc(t),sandbox_iframes:r("sandbox_iframes"),sandbox_iframes_exclusions:sZ(t),sanitize:r("xss_sanitization"),validate:!0,blob_cache:n,document:t.getDoc()})},kg=t=>{let r=t.options.get;return ku({custom_elements:r("custom_elements"),extended_valid_elements:r("extended_valid_elements"),invalid_elements:r("invalid_elements"),invalid_styles:r("invalid_styles"),schema:r("schema"),valid_children:r("valid_children"),valid_classes:r("valid_classes"),valid_elements:r("valid_elements"),valid_styles:r("valid_styles"),verify_html:r("verify_html"),padd_empty_block_inline_children:r("format_empty_lines")})},kf=t=>t.inline?t.ui.styleSheetLoader:t.dom.styleSheetLoader,kp=t=>{let r=kf(t),n=iY(t),o=t.contentCSS,a=()=>{r.unloadAll(o),t.inline||t.ui.styleSheetLoader.unloadAll(n)},l=()=>{t.removed?a():t.on("remove",a)};if(t.contentStyles.length>0){let r="";tz.each(t.contentStyles,t=>{r+=t+"\r\n"}),t.dom.addStyle(r)}let i=Promise.all(((t,r,n)=>{let{pass:o,fail:a}=eu(r,t=>tinymce.Resource.has(b2(t))),l=[...o.map(r=>{let n=tinymce.Resource.get(b2(r));return T(n)?Promise.resolve(kf(t).loadRawCss(r,n)):Promise.resolve()}),kf(t).loadAll(a)];return t.inline?l:l.concat([t.ui.styleSheetLoader.loadAll(n)])})(t,o,n)).then(l).catch(l),s=iK(t);return s&&((t,r)=>{let n=rz(rU(ru(t.getBody()))),o=rg("style");t5(o,"type","text/css"),nr(o,rf(r)),nr(n,o),t.on("remove",()=>{nl(o)})})(t,s),i},kh=t=>{!0!==t.removed&&(bg(t)||t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"}),(t=>{t.bindPendingEventDelegates(),t.initialized=!0,(t=>{t.dispatch("Init")})(t),t.focus(!0),(t=>{let r=t.dom.getRoot();t.inline||ce(t)&&t.selection.getStart(!0)!==r||dM(r).each(r=>{let n=r.getNode(),o=nz(n)?dM(n).getOr(r):r;t.selection.setRng(o.toRange())})})(t),t.nodeChanged({initial:!0});let r=sC(t);U(r)&&r.call(t,t),(t=>{let r=sw(t);r&&uQ.setEditorTimeout(t,()=>{let n;(n=!0===r?t:t.editorManager.get(r))&&!n.destroyed&&(n.focus(),n.selection.scrollIntoView())},100)})(t)})(t))},kb=t=>{let r=t.getElement(),n=t.getDoc();t.inline&&(kd.addClass(r,"mce-content-body"),t.contentDocument=n=document,t.contentWindow=window,t.bodyElement=r,t.contentAreaContainer=r);let o=t.getBody();o.disabled=!0,t.readonly=sd(t),t._editableRoot=sc(t),!t.readonly&&t.hasEditableRoot()&&(t.inline&&"static"===kd.getStyle(o,"position",!0)&&(o.style.position="relative"),o.contentEditable="true"),o.disabled=!1,t.editorUpload=ve(t),t.schema=o8(kg(t)),t.dom=ax(n,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:t.inline,schema:t.schema,contentCssCors:iz(t),referrerPolicy:ij(t),onSetAttrib:r=>{t.dispatch("SetAttrib",r)}}),t.parser=(t=>{let r=h$(km(t),t.schema);return r.addAttributeFilter("src,href,style,tabindex",(r,n)=>{let o=t.dom,a="data-mce-"+n,l=r.length;for(;l--;){let i=r[l],s=i.attr(n);if(s&&!i.attr(a)){if(0===s.indexOf("data:")||0===s.indexOf("blob:"))continue;"style"===n?((s=o.serializeStyle(o.parseStyle(s),i.name)).length||(s=null),i.attr(a,s),i.attr(n,s)):"tabindex"===n?(i.attr(a,s),i.attr(n,null)):i.attr(a,t.convertURL(s,n,i.name))}}}),r.addNodeFilter("script",t=>{let r=t.length;for(;r--;){let n=t[r],o=n.attr("type")||"no/type";0!==o.indexOf("mce-")&&n.attr("type","mce-"+o)}}),sH(t)&&r.addNodeFilter("#cdata",r=>{var n;let o=r.length;for(;o--;){let a=r[o];a.type=8,a.name="#comment",a.value="[CDATA["+t.dom.encode(null!==(n=a.value)&&void 0!==n?n:"")+"]]"}}),r.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",r=>{let n=r.length,o=t.schema.getNonEmptyElements();for(;n--;){let t=r[n];t.isEmpty(o)&&0===t.getAll("br").length&&t.append(new mc("br",1))}}),r})(t),t.serializer=b_((t=>{let r=t.options.get;return{...km(t),...kg(t),...ku({remove_trailing_brs:r("remove_trailing_brs"),pad_empty_with_br:r("pad_empty_with_br"),url_converter:r("url_converter"),url_converter_scope:r("url_converter_scope"),element_format:r("element_format"),entities:r("entities"),entity_encoding:r("entity_encoding"),indent:r("indent"),indent_after:r("indent_after"),indent_before:r("indent_before")})}})(t),t),t.selection=bE(t.dom,t.getWin(),t.serializer,t),t.annotator=cj(t),t.formatter=vc(t),t.undoManager=vm(t),t._nodeChangeDispatcher=new xv(t),t._selectionOverrides=_z(t),(t=>{let r=aP(),n=aS(!1),o=aL(r=>{t.dispatch("longpress",{...r,type:"longpress"}),n.set(!0)},400);t.on("touchstart",t=>{Cf(t).each(a=>{o.cancel();let l={x:a.clientX,y:a.clientY,target:t.target};o.throttle(t),n.set(!1),r.set(l)})},!0),t.on("touchmove",a=>{o.cancel(),Cf(a).each(o=>{r.on(a=>{((t,r)=>{let n=Math.abs(t.clientX-r.x),o=Math.abs(t.clientY-r.y);return n>5||o>5})(o,a)&&(r.clear(),n.set(!1),t.dispatch("longpresscancel"))})})},!0),t.on("touchend touchcancel",a=>{o.cancel(),"touchcancel"!==a.type&&r.get().filter(t=>t.target.isEqualNode(a.target)).each(()=>{n.get()?a.preventDefault():t.dispatch("tap",{...a,type:"tap"})})},!0)})(t),(t=>{t.on("click",r=>{t.dom.getParent(r.target,"details")&&r.preventDefault()})})(t),t.parser.addNodeFilter("details",r=>{let n=sY(t);ed(r,t=>{"expanded"===n?t.attr("open","open"):"collapsed"===n&&t.attr("open",null)})}),t.serializer.addNodeFilter("details",r=>{let n=sG(t);ed(r,t=>{"expanded"===n?t.attr("open","open"):"collapsed"===n&&t.attr("open",null)})}),(t=>{let r="contenteditable",n=" "+tz.trim(sz(t))+" ",o=" "+tz.trim(sU(t))+" ",a=CE(n),l=CE(o),i=sj(t);i.length>0&&t.on("BeforeSetContent",r=>{((t,r,n)=>{let o=r.length,a=n.content;if("raw"!==n.format){for(;o--;)a=a.replace(r[o],Cw(t,a,sU(t)));n.content=a}})(t,i,r)}),t.parser.addAttributeFilter("class",t=>{let n=t.length;for(;n--;){let o=t[n];a(o)?o.attr(r,"true"):l(o)&&o.attr(r,"false")}}),t.serializer.addAttributeFilter(r,t=>{let n=t.length;for(;n--;){let o=t[n];(a(o)||l(o))&&(i.length>0&&o.attr("data-mce-content")?(o.name="#text",o.type=3,o.raw=!0,o.value=o.attr("data-mce-content")):o.attr(r,null))}})})(t),bg(t)||((t=>{t.on("mousedown",r=>{r.detail>=3&&(r.preventDefault(),_h(t))})})(t),ki(t));let a=xb(t);Cg(t,a),(t=>{t.on("NodeChange",Y(Cy,t))})(t),(t=>{var r;let n=t.dom,o=i_(t),a=null!==(r=iJ(t))&&void 0!==r?r:"",l=(r,i)=>{if((t=>{if(vp(t)){let r=t.keyCode;return!vh(t)&&(cZ.metaKeyPressed(t)||t.altKey||r>=112&&r<=123||el(vg,r))}return!1})(r))return;let s=t.getBody(),d=!(vp(r)&&!(vh(r)||"keyup"===r.type&&229===r.keyCode))&&((t,r,n)=>{if(t.isEmpty(r,void 0,{skipBogus:!1,includeZwsp:!0})){let o=r.firstElementChild;return!o||!t.getStyle(r.firstElementChild,"padding-left")&&!t.getStyle(r.firstElementChild,"padding-right")&&n===o.nodeName.toLowerCase()}return!1})(n,s,o);(""!==n.getAttrib(s,vf)!==d||i)&&(n.setAttrib(s,vf,d?a:null),((t,r)=>{t.dispatch("PlaceholderToggle",{state:r})})(t,d),t.on(d?"keydown":"keyup",l),t.off(d?"keyup":"keydown",l))};tn(a)&&t.on("init",r=>{l(r,!0),t.on("change SetContent ExecCommand",l),t.on("paste",r=>uQ.setEditorTimeout(t,()=>l(r)))})})(t),_u(t);let l=ej(t.plugins,"rtc").bind(t=>et.from(t.setup)).fold(()=>(t.rtcInstance=bm(t),et.none()),r=>(t.rtcInstance=(()=>{let t=q(null),r=q("");return{init:{bindEvents:H},undoManager:{beforeChange:H,add:t,undo:t,redo:t,clear:H,reset:H,hasUndo:J,hasRedo:J,transact:t,ignore:H,extra:H},formatter:{match:J,matchAll:q([]),matchNode:q(void 0),canApply:J,closest:r,apply:H,remove:H,toggle:H,formatChanged:q({unbind:H})},editor:{getContent:r,setContent:q({content:"",html:""}),insertContent:q(""),addVisual:H},selection:{getContent:r},autocompleter:{addDecoration:H,removeDecoration:H},raw:{getModel:q(et.none())}}})(),et.some(()=>r().then(r=>(t.rtcInstance=(t=>{let r=t=>O(t)?t:{},{init:n,undoManager:o,formatter:a,editor:l,selection:i,autocompleter:s,raw:d}=t;return{init:{bindEvents:n.bindEvents},undoManager:{beforeChange:o.beforeChange,add:o.add,undo:o.undo,redo:o.redo,clear:o.clear,reset:o.reset,hasUndo:o.hasUndo,hasRedo:o.hasRedo,transact:(t,r,n)=>o.transact(n),ignore:(t,r)=>o.ignore(r),extra:(t,r,n,a)=>o.extra(n,a)},formatter:{match:(t,n,o,l)=>a.match(t,r(n),l),matchAll:a.matchAll,matchNode:a.matchNode,canApply:t=>a.canApply(t),closest:t=>a.closest(t),apply:(t,n,o)=>a.apply(t,r(n)),remove:(t,n,o,l)=>a.remove(t,r(n)),toggle:(t,n,o)=>a.toggle(t,r(n)),formatChanged:(t,r,n,o,l)=>a.formatChanged(r,n,o,l)},editor:{getContent:t=>l.getContent(t),setContent:(t,r)=>({content:l.setContent(t,r),html:""}),insertContent:(t,r)=>(l.insertContent(t),""),addVisual:l.addVisual},selection:{getContent:(t,r)=>i.getContent(r)},autocompleter:{addDecoration:s.addDecoration,removeDecoration:s.removeDecoration},raw:{getModel:()=>et.some(d.getRawModel())}}})(r),r.rtc.isRemote)))));(t=>{let r=t.getDoc(),n=t.getBody();(t=>{t.dispatch("PreInit")})(t),sx(t)||(r.body.spellcheck=!1,kd.setAttrib(n,"spellcheck","false")),t.quirks=ks(t),(t=>{t.dispatch("PostRender")})(t);let o=iG(t);void 0!==o&&(n.dir=o);let a=s_(t);a&&t.on("BeforeSetContent",t=>{tz.each(a,r=>{t.content=t.content.replace(r,t=>"<!--mce:protected "+escape(t)+"-->")})}),t.on("SetContent",()=>{t.addVisual(t.getBody())}),t.on("compositionstart compositionend",r=>{t.composing="compositionstart"===r.type})})(t),(t=>{let r=sJ(t);T(s0(t))||!M(r)&&"INVALID"!=("gpl"===r.toLowerCase()||r.length>=64&&r.length<=255?"VALID":"INVALID")||console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")})(t),l.fold(()=>{let r=(t=>{let r=!1,n=setTimeout(()=>{r||t.setProgressState(!0)},500);return()=>{clearTimeout(n),r=!0,t.setProgressState(!1)}})(t);kp(t).then(()=>{kh(t),r()})},r=>{t.setProgressState(!0),kp(t).then(()=>{r().then(r=>{t.setProgressState(!1),kh(t),bh(t)},r=>{t.notificationManager.open({type:"error",text:String(r)}),kh(t),bh(t)})})})},kv=ax.DOM,ky=ax.DOM,kC=(t,r)=>({editorContainer:t,iframeContainer:r,api:{}}),kE=t=>{let r=t.getElement();return t.inline?kC(null):(t=>{let r=ky.create("div");return ky.insertAfter(r,t),kC(r,r)})(r)},kw=async t=>{var r;t.dispatch("ScriptsLoaded"),(t=>{let r=tz.trim(iD(t)),n=t.ui.registry.getAll().icons;eP({...bU.get("default").icons,...bU.get(r).icons},(r,o)=>{eH(n,o)||t.ui.registry.addIcon(o,r)})})(t),(t=>{let r=i2(t);if(T(r)){let n=bG.get(r);t.theme=n(t,bG.urls[r])||{},U(t.theme.init)&&t.theme.init(t,bG.urls[r]||t.documentBaseUrl.replace(/\/$/,""))}else t.theme={}})(t),(t=>{let r=i8(t),n=bz.get(r);t.model=n(t,bz.urls[r])})(t),(t=>{let r=[];ed(sm(t),n=>{((t,r,n)=>{let o=bY.get(n),a=bY.urls[n]||t.documentBaseUrl.replace(/\/$/,"");if(n=tz.trim(n),o&&-1===tz.inArray(r,n)){if(t.plugins[n])return;try{let l=o(t,a)||{};t.plugins[n]=l,U(l.init)&&(l.init(t,a),r.push(n))}catch(r){((t,r,n)=>{let o=aT.translate(["Failed to initialize plugin: {0}",r]);cV(t,"PluginLoadError",{message:o}),b1(o,n),bQ(t,o)})(t,n,r)}}})(t,r,n.replace(/^\-/,""))})})(t);let n=await (t=>{let r=t.getElement();return t.orgDisplay=r.style.display,T(i2(t))?(t=>{let r=t.theme.renderUI;return r?r():kE(t)})(t):U(i2(t))?(t=>{let r=t.getElement(),n=i2(t)(t,r);return n.editorContainer.nodeType&&(n.editorContainer.id=n.editorContainer.id||t.id+"_parent"),n.iframeContainer&&n.iframeContainer.nodeType&&(n.iframeContainer.id=n.iframeContainer.id||t.id+"_iframecontainer"),n.height=n.iframeHeight?n.iframeHeight:r.offsetHeight,n})(t):kE(t)})(t);((t,r)=>{let n={show:et.from(r.show).getOr(H),hide:et.from(r.hide).getOr(H),isEnabled:et.from(r.isEnabled).getOr(ee),setEnabled:n=>{t.mode.isReadOnly()||et.from(r.setEnabled).each(t=>t(n))}};t.ui={...t.ui,...n}})(t,et.from(n.api).getOr({})),t.editorContainer=n.editorContainer,t.contentCSS=t.contentCSS.concat(b3(t,iW(t)),b3(t,iY(t))),t.inline?kb(t):(((t,r)=>{let n=t.translate("Rich Text Area"),o=t9(ru(t.getElement()),"tabindex").bind(ta),a=((t,r,n,o)=>{let a=rg("iframe");return o.each(t=>t5(a,"tabindex",t)),t6(a,n),t6(a,{id:t+"_ifr",frameBorder:"0",allowTransparency:"true",title:r}),ri(a,"tox-edit-area__iframe"),a})(t.id,n,ib(t),o).dom;a.onload=()=>{a.onload=null,t.dispatch("load")},t.contentAreaContainer=r.iframeContainer,t.iframeElement=a,t.iframeHTML=(t=>{let r=iv(t)+"<html><head>";iy(t)!==t.documentBaseUrl&&(r+='<base href="'+t.documentBaseURI.getURI()+'" />'),r+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';let n=iC(t),o=iE(t),a=t.translate(sv(t));return iw(t)&&(r+='<meta http-equiv="Content-Security-Policy" content="'+iw(t)+'" />'),r+=`</head><body id="${n}" class="mce-content-body ${o}" data-id="${t.id}" aria-label="${a}"><br></body></html>`})(t),kv.add(r.iframeContainer,a)})(t,r={editorContainer:n.editorContainer,iframeContainer:n.iframeContainer}),r.editorContainer&&(r.editorContainer.style.display=t.orgDisplay,t.hidden=kv.isHidden(r.editorContainer)),t.getElement().style.display="none",kv.setAttrib(t.id,"aria-hidden","true"),t.getElement().style.visibility=t.orgVisibility,(t=>{let r=t.iframeElement,n=()=>{t.contentDocument=r.contentDocument,kb(t)};if(sq(t)||tM.browser.isFirefox()){let r=t.getDoc();r.open(),r.write(t.iframeHTML),r.close(),n()}else{let o=nu(ru(r),"load",ee,()=>{o.unbind(),n()});r.srcdoc=t.iframeHTML}})(t))},kx=ax.DOM,k_=t=>"-"===t.charAt(0),kk=(t,r,n)=>et.from(r).filter(t=>tn(t)&&!bU.has(t)).map(r=>({url:`${t.editorManager.baseURL}/icons/${r}/icons${n}.js`,name:et.some(r)})),kS=(t,r)=>{var n,o;let a=ak.ScriptLoader,l=()=>{!t.removed&&(t=>{let r=i2(t);return!T(r)||I(bG.get(r))})(t)&&(t=>{let r=i8(t);return I(bz.get(r))})(t)&&kw(t)};((t,r)=>{let n=i2(t);if(T(n)&&!k_(n)&&!eH(bG.urls,n)){let o=i3(t),a=o?t.documentBaseURI.toAbsolute(o):`themes/${n}/theme${r}.js`;bG.load(n,a).catch(()=>{bJ(t,"ThemeLoadError",b0("theme",a,n))})}})(t,r),((t,r)=>{let n=i8(t);if("plugin"!==n&&!eH(bz.urls,n)){let o=i5(t),a=T(o)?t.documentBaseURI.toAbsolute(o):`models/${n}/model${r}.js`;bz.load(n,a).catch(()=>{bJ(t,"ModelLoadError",b0("model",a,n))})}})(t,r),((t,r)=>{let n=iH(r),o=i$(r);if(!aT.hasCode(n)&&"en"!==n){let a=tn(o)?o:`${r.editorManager.baseURL}/langs/${n}.js`;t.add(a).catch(()=>{bJ(r,"LanguageLoadError",b0("language",a,n))})}})(a,t),n=a,ed((t=>{let r=[],n=t=>{r.push(t)};for(let r=0;r<t.length;r++)t[r].each(n);return r})([kk(o=t,"default",r),et.from(iL(o)).filter(tn).map(t=>({url:t,name:et.none()})).orThunk(()=>kk(o,iD(o),""))]),t=>{n.add(t.url).catch(()=>{bJ(o,"IconsLoadError",b0("icons",t.url,t.name.getOrUndefined()))})}),((t,r)=>{let n=(r,n)=>{bY.load(r,n).catch(()=>{bJ(t,"PluginLoadError",b0("plugin",n,r))})};eP(sg(t),(r,o)=>{n(o,r),t.options.set("plugins",sm(t).concat(o))}),ed(sm(t),t=>{!(t=tz.trim(t))||bY.urls[t]||k_(t)||n(t,`plugins/${t}/plugin${r}.js`)})})(t,r),a.loadQueue().then(l,l)},kN=tA().deviceType,kR=kN.isPhone(),kA=kN.isTablet(),kT=t=>F(t)?[]:em(es(P(t)?t:t.split(/[ ,]/),te),tn),kO=(t,r)=>{var n,o;let a=((r,n)=>{let o={},a={};return eF(r,(r,n)=>el(t,n),eM(o),eM(a)),{t:o,f:a}})(r);return n=a.t,o=a.f,{sections:q(n),options:q(o)}},kB=(t,r)=>eH(t.sections(),r),kP=(t,r)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:ej(t,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...r?{menubar:!1}:{}}),kD=(t,r)=>{var n;let o=null!==(n=r.external_plugins)&&void 0!==n?n:{};return t&&t.external_plugins?tz.extend({},t.external_plugins,o):o},kL=(t,r,n,o,a)=>{var l;let i=kO(["mobile"],EE(t?{mobile:kP(null!==(l=a.mobile)&&void 0!==l?l:{},r)}:{},a)),s=tz.extend(n,o,i.options(),t&&kB(i,"mobile")?((t,r,n={})=>{let o=ej(t.sections(),r).getOr({});return tz.extend({},n,o)})(i,"mobile"):{},{external_plugins:kD(o,i.options())});return((t,r,n,o)=>{var a,l;let i=kT(n.forced_plugins),s=kT(o.plugins),d=kB(r,a="mobile")?r.sections()[a]:{},c=(l=d.plugins?kT(d.plugins):s,t&&kB(r,"mobile")?l:s),u=[...kT(i),...kT(c)];return tz.extend(o,{forced_plugins:i,plugins:u})})(t,i,o,s)},kM=t=>{(t=>{let r=r=>()=>{ed("left,center,right,justify".split(","),n=>{r!==n&&t.formatter.remove("align"+n)}),"none"!==r&&(t.formatter.toggle("align"+r,void 0),t.nodeChanged())};t.editorCommands.addCommands({JustifyLeft:r("left"),JustifyCenter:r("center"),JustifyRight:r("right"),JustifyFull:r("justify"),JustifyNone:r("none")})})(t),(t=>{let r=r=>()=>{let n=t.selection;return ei(n.isCollapsed()?[t.dom.getParent(n.getNode(),t.dom.isBlock)]:n.getSelectedBlocks(),n=>I(t.formatter.matchNode(n,r)))};t.editorCommands.addCommands({JustifyLeft:r("alignleft"),JustifyCenter:r("aligncenter"),JustifyRight:r("alignright"),JustifyFull:r("alignjustify")},"state")})(t)},kF=(t,r)=>{let n=t.selection,o=t.dom;return/^ | $/.test(r)?((t,r,n,o)=>{let a=ru(t.getRoot());return n=gs(a,lH.fromRangeStart(r),o)?n.replace(/^ /,"&nbsp;"):n.replace(/^&nbsp;/," "),gd(a,lH.fromRangeEnd(r),o)?n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n.replace(/&nbsp;(<br( \/)?>)?$/," ")})(o,n.getRng(),r,t.schema):r},kI=(t,r)=>{if(t.selection.isEditable()){let{content:n,details:o}=(t=>{if("string"!=typeof t){let r=tz.extend({paste:t.paste,data:{paste:t.paste}},t);return{content:t.content,details:r}}return{content:t,details:{}}})(r);hY(t,{...o,content:kF(t,n),format:"html",set:!1,selection:!0}).each(r=>{var n;let a=(n=r.content,bf(t).editor.insertContent(n,o));hG(t,a,r),t.addVisual()})}},kU={"font-size":"size","font-family":"face"},kz=t3("font"),kj=t=>(r,n)=>et.from(n).map(ru).filter(tJ).bind(n=>{var o;return fT(ru(n.dom),r=>r6(r,t).orThunk(()=>kz(r)?ej(kU,t).bind(t=>t9(r,t)):et.none()),t=>ry(ru(r),t)).or((o=n.dom,et.from(ax.DOM.getStyle(o,t,!0))))}).getOr(""),kH=kj("font-size"),k$=$(t=>t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),kj("font-family")),kV=t=>dM(t.getBody()).bind(t=>{let r=t.container();return et.from(n$(r)?r.parentNode:r)}),kq=(t,r)=>{var n;return n=V(et.some,r),et.from(t.selection.getRng()).bind(r=>{let n=t.getBody();return r.startContainer===n&&0===r.startOffset?et.none():et.from(t.selection.getStart(!0))}).orThunk(Y(kV,t)).map(ru).filter(tJ).bind(n)},kW=(t,r)=>{if(/^[0-9.]+$/.test(r)){let n=parseInt(r,10);if(n>=1&&n<=7){let o=tz.explode(t.options.get("font_size_style_values")),a=tz.explode(t.options.get("font_size_classes"));return a.length>0?a[n-1]||r:o[n-1]||r}}return r},kK=t=>es(t.split(/\s*,\s*/),t=>-1===t.indexOf(" ")||e4(t,'"')||e4(t,"'")?t:`'${t}'`).join(","),kY=(t,r)=>{let n=t.dom,o=t.selection.getRng(),a=r?t.selection.getStart():t.selection.getEnd(),l=r?o.startContainer:o.endContainer,i=wR(n,l);if(!i||!i.isContentEditable)return;let s=r?r7:ne,d=i_(t);((t,r,n,o)=>{let a=t.dom,l=t=>a.isBlock(t)&&t.parentElement===n,i=l(r)?r:a.getParent(o,l,n);return et.from(i).map(ru)})(t,a,i,l).each(r=>{let n=wB(t,l,r.dom,i,!1,d);s(r,ru(n)),t.selection.setCursorLocation(n,0),t.dispatch("NewBlock",{newBlock:n}),wE(t,"insertParagraph")})},kG=t=>{kM(t),(t=>{t.editorCommands.addCommands({"Cut,Copy,Paste":r=>{let n;let o=t.getDoc();try{o.execCommand(r)}catch(t){n=!0}if("paste"!==r||o.queryCommandEnabled(r)||(n=!0),n||!o.queryCommandSupported(r)){let r=t.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(tM.os.isMacOS()||tM.os.isiOS())&&(r=r.replace(/Ctrl\+/g,"⌘+")),t.notificationManager.open({text:r,type:"error"})}}})})(t),(t=>{t.editorCommands.addCommands({mceAddUndoLevel:()=>{t.undoManager.add()},mceEndUndoLevel:()=>{t.undoManager.add()},Undo:()=>{t.undoManager.undo()},Redo:()=>{t.undoManager.redo()}})})(t),(t=>{t.editorCommands.addCommands({mceSelectNodeDepth:(r,n,o)=>{let a=0;t.dom.getParent(t.selection.getNode(),r=>!nD(r)||a++!==o||(t.selection.select(r),!1),t.getBody())},mceSelectNode:(r,n,o)=>{t.selection.select(o)},selectAll:()=>{let r=t.dom.getParent(t.selection.getStart(),nZ);if(r){let n=t.dom.createRng();n.selectNodeContents(r),t.selection.setRng(n)}}})})(t),(t=>{t.editorCommands.addCommands({mceCleanup:()=>{let r=t.selection.getBookmark();t.setContent(t.getContent()),t.selection.moveToBookmark(r)},insertImage:(r,n,o)=>{kI(t,t.dom.createHTML("img",{src:o}))},insertHorizontalRule:()=>{t.execCommand("mceInsertContent",!1,"<hr>")},insertText:(r,n,o)=>{kI(t,t.dom.encode(o))},insertHTML:(r,n,o)=>{kI(t,o)},mceInsertContent:(r,n,o)=>{kI(t,o)},mceSetContent:(r,n,o)=>{t.setContent(o)},mceReplaceContent:(r,n,o)=>{t.execCommand("mceInsertContent",!1,o.replace(/\{\$selection\}/g,t.selection.getContent({format:"text"})))},mceNewDocument:()=>{t.setContent(sA(t))}})})(t),(t=>{let r=(r,n,o)=>{let a=T(o)?{href:o}:o,l=t.dom.getParent(t.selection.getNode(),"a");O(a)&&T(a.href)&&(a.href=a.href.replace(/ /g,"%20"),l&&a.href||t.formatter.remove("link"),a.href&&t.formatter.apply("link",a,l))};t.editorCommands.addCommands({unlink:()=>{if(t.selection.isEditable()){if(t.selection.isCollapsed()){let r=t.dom.getParent(t.selection.getStart(),"a");return void(r&&t.dom.remove(r,!0))}t.formatter.remove("link")}},mceInsertLink:r,createLink:r})})(t),t.editorCommands.addCommands({Indent:()=>{Cd(t,"indent")},Outdent:()=>{Cc(t)}}),t.editorCommands.addCommands({Outdent:()=>Cl(t)},"state"),(t=>{t.editorCommands.addCommands({InsertNewBlockBefore:()=>{kY(t,!0)},InsertNewBlockAfter:()=>{kY(t,!1)}})})(t),(t=>{t.editorCommands.addCommands({insertParagraph:()=>{xt(w$,t)},mceInsertNewLine:(r,n,o)=>{xr(t,o)},InsertLineBreak:(r,n,o)=>{xt(wZ,t)}})})(t),(t=>{let r=(r,n)=>{t.formatter.toggle(r,n),t.nodeChanged()};t.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":t=>{r(t)},"ForeColor,HiliteColor":(t,n,o)=>{r(t,{value:o})},BackColor:(t,n,o)=>{r("hilitecolor",{value:o})},FontName:(r,n,o)=>{((t,r)=>{let n=kW(t,r);t.formatter.toggle("fontname",{value:kK(n)}),t.nodeChanged()})(t,o)},FontSize:(r,n,o)=>{t.formatter.toggle("fontsize",{value:kW(t,o)}),t.nodeChanged()},LineHeight:(r,n,o)=>{t.formatter.toggle("lineheight",{value:String(o)}),t.nodeChanged()},Lang:(t,n,o)=>{var a;r(t,{value:o.code,customValue:null!==(a=o.customCode)&&void 0!==a?a:null})},RemoveFormat:r=>{t.formatter.remove(r)},mceBlockQuote:()=>{r("blockquote")},FormatBlock:(t,n,o)=>{r(T(o)?o:"p")},mceToggleFormat:(t,n,o)=>{r(o)}})})(t),(t=>{let r=r=>t.formatter.match(r);t.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":t=>r(t),mceBlockQuote:()=>r("blockquote")},"state"),t.editorCommands.addQueryValueHandler("FontName",()=>kq(t,r=>k$(t.getBody(),r.dom)).getOr("")),t.editorCommands.addQueryValueHandler("FontSize",()=>kq(t,r=>kH(t.getBody(),r.dom)).getOr("")),t.editorCommands.addQueryValueHandler("LineHeight",()=>kq(t,r=>fT(r,t=>r6(t,"line-height"),Y(ry,ru(t.getBody()))).getOrThunk(()=>String(parseFloat(r8(r,"line-height"))/parseFloat(r8(r,"font-size"))))).getOr(""))})(t),(t=>{t.editorCommands.addCommands({mceRemoveNode:(r,n,o)=>{let a=null!=o?o:t.selection.getNode();if(a!==t.getBody()){let r=t.selection.getBookmark();t.dom.remove(a,!0),t.selection.moveToBookmark(r)}},mcePrint:()=>{t.getWin().print()},mceFocus:(r,n,o)=>{t.removed||(!0===o?u7(t):(t=>{var r;let n=t.selection,o=t.getBody(),a=n.getRng();t.quirks.refreshContentEditable(),I(t.bookmark)&&!u4(t)&&uX(t).each(r=>{t.selection.setRng(r),a=r});let l=(r=n.getNode(),t.dom.getParent(r,r=>"true"===t.dom.getContentEditable(r)));if(l&&t.dom.isChildOf(l,o))return u6(l),u5(t,a),void u7(t);t.inline||(tM.browser.isOpera()||u6(o),t.getWin().focus()),(tM.browser.isFirefox()||t.inline)&&(u6(o),u5(t,a)),u7(t)})(t))},mceToggleVisualAid:()=>{t.hasVisual=!t.hasVisual,t.addVisual()}})})(t)},kX=["toggleview"],kZ=t=>el(kX,t.toLowerCase());class kQ{constructor(t){this.commands={state:{},exec:{},value:{}},this.editor=t}execCommand(t,r=!1,n,o){let a=this.editor,l=t.toLowerCase(),i=null==o?void 0:o.skip_focus;if(a.removed||("mcefocus"!==l&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(l)||i?(t=>{uX(t).each(r=>t.selection.setRng(r))})(a):a.focus()),a.dispatch("BeforeExecCommand",{command:t,ui:r,value:n}).isDefaultPrevented()))return!1;let s=this.commands.exec[l];return!!U(s)&&(s(l,r,n),a.dispatch("ExecCommand",{command:t,ui:r,value:n}),!0)}queryCommandState(t){if(!kZ(t)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;let r=t.toLowerCase(),n=this.commands.state[r];return!!U(n)&&n(r)}queryCommandValue(t){if(!kZ(t)&&this.editor.quirks.isHidden()||this.editor.removed)return"";let r=t.toLowerCase(),n=this.commands.value[r];return U(n)?n(r):""}addCommands(t,r="exec"){let n=this.commands;eP(t,(t,o)=>{ed(o.toLowerCase().split(","),o=>{n[r][o]=t})})}addCommand(t,r,n){let o=t.toLowerCase();this.commands.exec[o]=(t,o,a)=>r.call(null!=n?n:this.editor,o,a)}queryCommandSupported(t){let r=t.toLowerCase();return!!this.commands.exec[r]}addQueryStateHandler(t,r,n){this.commands.state[t.toLowerCase()]=()=>r.call(null!=n?n:this.editor)}addQueryValueHandler(t,r,n){this.commands.value[t.toLowerCase()]=()=>r.call(null!=n?n:this.editor)}}let kJ="data-mce-contenteditable",k0=(t,r,n)=>{try{t.getDoc().execCommand(r,!1,String(n))}catch(t){}},k1=(t,r)=>{t.dom.contentEditable=r?"true":"false"},k2=t=>t.readonly,k3=t=>{t.parser.addAttributeFilter("contenteditable",r=>{k2(t)&&ed(r,t=>{t.attr(kJ,t.attr("contenteditable")),t.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(kJ,r=>{k2(t)&&ed(r,t=>{t.attr("contenteditable",t.attr(kJ))})}),t.serializer.addTempAttr(kJ)},k8=["copy"],k5=tz.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class k6{static isNative(t){return!!k5[t.toLowerCase()]}constructor(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||J}fire(t,r){return this.dispatch(t,r)}dispatch(t,r){let n=t.toLowerCase(),o=ai(n,null!=r?r:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);let a=this.bindings[n];if(a)for(let t=0,r=a.length;t<r;t++){let r=a[t];if(!r.removed){if(r.once&&this.off(n,r.func),o.isImmediatePropagationStopped())return o;if(!1===r.func.call(this.scope,o))return o.preventDefault(),o}}return o}on(t,r,n,o){if(!1===r&&(r=J),r){let a={func:r,removed:!1};o&&tz.extend(a,o);let l=t.toLowerCase().split(" "),i=l.length;for(;i--;){let t=l[i],r=this.bindings[t];r||(r=[],this.toggleEvent(t,!0)),r=n?[a,...r]:[...r,a],this.bindings[t]=r}}return this}off(t,r){if(t){let n=t.toLowerCase().split(" "),o=n.length;for(;o--;){let a=n[o],l=this.bindings[a];if(!a)return eP(this.bindings,(t,r)=>{this.toggleEvent(r,!1),delete this.bindings[r]}),this;if(l){if(r){let t=eu(l,t=>t.func===r);l=t.fail,this.bindings[a]=l,ed(t.pass,t=>{t.removed=!0})}else l.length=0;l.length||(this.toggleEvent(t,!1),delete this.bindings[a])}}}else eP(this.bindings,(t,r)=>{this.toggleEvent(r,!1)}),this.bindings={};return this}once(t,r,n){return this.on(t,r,n,{once:!0})}has(t){t=t.toLowerCase();let r=this.bindings[t];return!(!r||0===r.length)}}let k4=t=>(t._eventDispatcher||(t._eventDispatcher=new k6({scope:t,toggleEvent:(r,n)=>{k6.isNative(r)&&t.toggleNativeEvent&&t.toggleNativeEvent(r,n)}})),t._eventDispatcher),k9={fire(t,r,n){return this.dispatch(t,r,n)},dispatch(t,r,n){if(this.removed&&"remove"!==t&&"detach"!==t)return ai(t.toLowerCase(),null!=r?r:{},this);let o=k4(this).dispatch(t,r);if(!1!==n&&this.parent){let r=this.parent();for(;r&&!o.isPropagationStopped();)r.dispatch(t,o,!1),r=r.parent?r.parent():void 0}return o},on(t,r,n){return k4(this).on(t,r,n)},off(t,r){return k4(this).off(t,r)},once(t,r){return k4(this).once(t,r)},hasEventListeners(t){return k4(this).has(t)}},k7=ax.DOM,Se=(t,r)=>{if("selectionchange"===r)return t.getDoc();if(!t.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(r))return t.getDoc().documentElement;let n=i0(t);return n?(t.eventRoot||(t.eventRoot=k7.select(n)[0]),t.eventRoot):t.getBody()},St=(t,r,n)=>{var o,a;t.hidden||k2(t)?k2(t)&&(o=t,"click"!==(a=n).type||cZ.metaKeyPressed(a)?el(k8,a.type)&&o.dispatch(a.type,a):rZ(ru(a.target),"a",t=>ry(t,ru(o.getBody()))).bind(t=>t9(t,"href")).each(t=>{if(a.preventDefault(),/^#/.test(t)){let r=o.dom.select(`${t},[name="${e5(t,"#")}"]`);r.length&&o.selection.scrollIntoView(r[0],!0)}else window.open(t,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})):t.dispatch(r,n)},Sr=(t,n)=>{if(t.delegates||(t.delegates={}),t.delegates[n]||t.removed)return;let o=Se(t,n);if(i0(t)){if(r||(r={},t.editorManager.on("removeEditor",()=>{t.editorManager.activeEditor||r&&(eP(r,(r,n)=>{t.dom.unbind(Se(t,n))}),r=null)})),r[n])return;let a=r=>{let o=r.target,a=t.editorManager.get(),l=a.length;for(;l--;){let t=a[l].getBody();(t===o||k7.isChildOf(o,t))&&St(a[l],n,r)}};r[n]=a,k7.bind(o,n,a)}else{let r=r=>{St(t,n,r)};k7.bind(o,n,r),t.delegates[n]=r}},Sn={...k9,bindPendingEventDelegates(){let t=this;tz.each(t._pendingNativeEvents,r=>{Sr(t,r)})},toggleNativeEvent(t,r){"focus"!==t&&"blur"!==t&&(this.removed||(r?this.initialized?Sr(this,t):this._pendingNativeEvents?this._pendingNativeEvents.push(t):this._pendingNativeEvents=[t]:this.initialized&&this.delegates&&(this.dom.unbind(Se(this,t),t,this.delegates[t]),delete this.delegates[t])))},unbindAllNativeEvents(){let t=this,r=t.getBody(),n=t.dom;t.delegates&&(eP(t.delegates,(r,n)=>{t.dom.unbind(Se(t,n),n,r)}),delete t.delegates),!t.inline&&r&&n&&(r.onload=null,n.unbind(t.getWin()),n.unbind(t.getDoc())),n&&(n.unbind(r),n.unbind(t.getContainer()))}},So=t=>T(t)?{value:t.split(/[ ,]/),valid:!0}:j(t,T)?{value:t,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},Sa=(t,r)=>t+(to(r.message)?"":`. ${r.message}`),Sl=t=>t.valid,Si=(t,r,n="")=>{let o=r(t);return L(o)?o?{value:t,valid:!0}:{valid:!1,message:n}:o},Ss=["design","readonly"],Sd=(t,r,n,o)=>{let a=n[r.get()],l=n[o];try{l.activate()}catch(t){return void console.error(`problem while activating editor mode ${o}:`,t)}a.deactivate(),a.editorReadOnly!==l.editorReadOnly&&((t,r)=>{var n;let o=ru(t.getBody());rc(o,n="mce-content-readonly")&&!r?rd(o,n):r&&ri(o,n),r?(t.selection.controlSelection.hideResizeRect(),t._selectionOverrides.hideFakeCaret(),(t=>{et.from(t.selection.getNode()).each(t=>{t.removeAttribute("data-mce-selected")})})(t),t.readonly=!0,k1(o,!1),ed(nw(o,'*[contenteditable="true"]'),t=>{t5(t,kJ,"true"),k1(t,!1)})):(t.readonly=!1,t.hasEditableRoot()&&k1(o,!0),ed(nw(o,`*[${kJ}="true"]`),t=>{re(t,kJ),k1(t,!0)}),k0(t,"StyleWithCSS",!1),k0(t,"enableInlineTableEditing",!1),k0(t,"enableObjectResizing",!1),u9(t)&&t.focus(),(t=>{t.selection.setRng(t.selection.getRng())})(t),t.nodeChanged())})(t,l.editorReadOnly),r.set(o),((t,r)=>{t.dispatch("SwitchMode",{mode:r})})(t,o)},Sc=tz.each,Su=tz.explode,Sm={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},Sg=tz.makeMap("alt,ctrl,shift,meta,access"),Sf=t=>{let r;let n={},o=tM.os.isMacOS()||tM.os.isiOS();Sc(Su(t.toLowerCase(),"+"),t=>{t in Sg?n[t]=!0:/^[0-9]{2,}$/.test(t)?n.keyCode=parseInt(t,10):(n.charCode=t.charCodeAt(0),n.keyCode=Sm[t]||t.toUpperCase().charCodeAt(0))});let a=[n.keyCode];for(r in Sg)n[r]?a.push(r):n[r]=!1;return n.id=a.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class Sp{constructor(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;let r=this;t.on("keyup keypress keydown",t=>{!r.hasModifier(t)&&!r.isFunctionKey(t)||t.isDefaultPrevented()||(Sc(r.shortcuts,n=>{r.matchShortcut(t,n)&&(r.pendingPatterns=n.subpatterns.slice(0),"keydown"===t.type&&r.executeShortcutAction(n))}),r.matchShortcut(t,r.pendingPatterns[0])&&(1===r.pendingPatterns.length&&"keydown"===t.type&&r.executeShortcutAction(r.pendingPatterns[0]),r.pendingPatterns.shift()))})}add(t,r,n,o){let a=this,l=a.normalizeCommandFunc(n);return Sc(Su(tz.trim(t)),t=>{let n=a.createShortcut(t,r,l,o);a.shortcuts[n.id]=n}),!0}remove(t){let r=this.createShortcut(t);return!!this.shortcuts[r.id]&&(delete this.shortcuts[r.id],!0)}normalizeCommandFunc(t){let r=this;return"string"==typeof t?()=>{r.editor.execCommand(t,!1,null)}:tz.isArray(t)?()=>{r.editor.execCommand(t[0],t[1],t[2])}:t}createShortcut(t,r,n,o){let a=tz.map(Su(t,">"),Sf);return a[a.length-1]=tz.extend(a[a.length-1],{func:n,scope:o||this.editor}),tz.extend(a[0],{desc:this.editor.translate(r),subpatterns:a.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return"keydown"===t.type&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,r){return!!r&&r.ctrl===t.ctrlKey&&r.meta===t.metaKey&&r.alt===t.altKey&&r.shift===t.shiftKey&&!!(t.keyCode===r.keyCode||t.charCode&&t.charCode===r.charCode)&&(t.preventDefault(),!0)}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}let Sh=()=>{let t=(()=>{let t={},r={},n={},o={},a={},l={},i={},s={},d=(t,r)=>(n,o)=>{t[n.toLowerCase()]={...o,type:r}};return{addButton:d(t,"button"),addGroupToolbarButton:d(t,"grouptoolbarbutton"),addToggleButton:d(t,"togglebutton"),addMenuButton:d(t,"menubutton"),addSplitButton:d(t,"splitbutton"),addMenuItem:d(r,"menuitem"),addNestedMenuItem:d(r,"nestedmenuitem"),addToggleMenuItem:d(r,"togglemenuitem"),addAutocompleter:d(n,"autocompleter"),addContextMenu:d(a,"contextmenu"),addContextToolbar:d(l,"contexttoolbar"),addContextForm:d(l,"contextform"),addSidebar:d(i,"sidebar"),addView:d(s,"views"),addIcon:(t,r)=>o[t.toLowerCase()]=r,getAll:()=>({buttons:t,menuItems:r,icons:o,popups:n,contextMenus:a,contextToolbars:l,sidebars:i,views:s})}})();return{addAutocompleter:t.addAutocompleter,addButton:t.addButton,addContextForm:t.addContextForm,addContextMenu:t.addContextMenu,addContextToolbar:t.addContextToolbar,addIcon:t.addIcon,addMenuButton:t.addMenuButton,addMenuItem:t.addMenuItem,addNestedMenuItem:t.addNestedMenuItem,addSidebar:t.addSidebar,addSplitButton:t.addSplitButton,addToggleButton:t.addToggleButton,addGroupToolbarButton:t.addGroupToolbarButton,addToggleMenuItem:t.addToggleMenuItem,addView:t.addView,getAll:t.getAll}},Sb=ax.DOM,Sv=tz.extend,Sy=tz.each;class SC{constructor(t,r,n){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=n,this.documentBaseUrl=n.documentBaseURL,Sv(this,Sn),this.id=t,this.hidden=!1;let o=kL(kR||kA,kR,r,n.defaultOptions,r);this.options=((t,r)=>{let n={},o={},a=(t,r,n)=>{let a=Si(r,n);return Sl(a)?(o[t]=a.value,!0):(console.warn(Sa(`Invalid value passed for the ${t} option`,a)),!1)},l=t=>eH(n,t);return{register:(t,l)=>{let i=T(l.processor)?(t=>{let r=(()=>{switch(t){case"array":return P;case"boolean":return L;case"function":return U;case"number":return z;case"object":return O;case"string":return T;case"string[]":return So;case"object[]":return t=>j(t,O);case"regexp":return t=>A(t,RegExp);default:return ee}})();return n=>Si(n,r,`The value must be a ${t}.`)})(l.processor):l.processor,s=((t,r,n)=>{if(!M(r)){let o=Si(r,n);if(Sl(o))return o.value;console.error(Sa(`Invalid default value passed for the "${t}" option`,o))}})(t,l.default,i);n[t]={...l,default:s,processor:i},ej(o,t).orThunk(()=>ej(r,t)).each(r=>a(t,r,i))},isRegistered:l,get:t=>ej(o,t).orThunk(()=>ej(n,t).map(t=>t.default)).getOrUndefined(),set:(t,r)=>{if(l(t)){let o=n[t];return o.immutable?(console.error(`"${t}" is an immutable option and cannot be updated`),!1):a(t,r,o.processor)}return console.warn(`"${t}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:t=>{let r=l(t);return r&&delete o[t],r},isSet:t=>eH(o,t)}})(0,o),(t=>{let r=t.options.register;r("id",{processor:"string",default:t.id}),r("selector",{processor:"string"}),r("target",{processor:"object"}),r("suffix",{processor:"string"}),r("cache_suffix",{processor:"string"}),r("base_url",{processor:"string"}),r("referrer_policy",{processor:"string",default:""}),r("language_load",{processor:"boolean",default:!0}),r("inline",{processor:"boolean",default:!1}),r("iframe_attrs",{processor:"object",default:{}}),r("doctype",{processor:"string",default:"<!DOCTYPE html>"}),r("document_base_url",{processor:"string",default:t.documentBaseUrl}),r("body_id",{processor:ih(t,"tinymce"),default:"tinymce"}),r("body_class",{processor:ih(t),default:""}),r("content_security_policy",{processor:"string",default:""}),r("br_in_pre",{processor:"boolean",default:!0}),r("forced_root_block",{processor:t=>{let r=T(t)&&tn(t);return r?{value:t,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),r("forced_root_block_attrs",{processor:"object",default:{}}),r("newline_behavior",{processor:t=>{let r=el(["block","linebreak","invert","default"],t);return r?{value:t,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),r("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),r("no_newline_selector",{processor:"string",default:""}),r("keep_styles",{processor:"boolean",default:!0}),r("end_container_on_empty_block",{processor:t=>L(t)||T(t)?{valid:!0,value:t}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),r("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),r("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),r("font_size_classes",{processor:"string",default:""}),r("automatic_uploads",{processor:"boolean",default:!0}),r("images_reuse_filename",{processor:"boolean",default:!1}),r("images_replace_blob_uris",{processor:"boolean",default:!0}),r("icons",{processor:"string",default:""}),r("icons_url",{processor:"string",default:""}),r("images_upload_url",{processor:"string",default:""}),r("images_upload_base_path",{processor:"string",default:""}),r("images_upload_credentials",{processor:"boolean",default:!1}),r("images_upload_handler",{processor:"function"}),r("language",{processor:"string",default:"en"}),r("language_url",{processor:"string",default:""}),r("entity_encoding",{processor:"string",default:"named"}),r("indent",{processor:"boolean",default:!0}),r("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),r("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),r("indent_use_margin",{processor:"boolean",default:!1}),r("indentation",{processor:"string",default:"40px"}),r("content_css",{processor:t=>{let r=!1===t||T(t)||j(t,T);return r?T(t)?{value:es(t.split(","),te),valid:r}:P(t)?{value:t,valid:r}:!1===t?{value:[],valid:r}:{value:t,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:sr(t)?[]:["default"]}),r("content_style",{processor:"string"}),r("content_css_cors",{processor:"boolean",default:!1}),r("font_css",{processor:t=>{let r=T(t)||j(t,T);return r?{value:P(t)?t:es(t.split(","),te),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),r("inline_boundaries",{processor:"boolean",default:!0}),r("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),r("object_resizing",{processor:t=>{let r=L(t)||T(t);return r?!1===t||id.isiPhone()||id.isiPad()?{value:"",valid:r}:{value:!0===t?"table,img,figure.image,div,video,iframe":t,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!ic}),r("resize_img_proportional",{processor:"boolean",default:!0}),r("event_root",{processor:"string"}),r("service_message",{processor:"string"}),r("theme",{processor:t=>!1===t||T(t)||U(t),default:"silver"}),r("theme_url",{processor:"string"}),r("formats",{processor:"object"}),r("format_empty_lines",{processor:"boolean",default:!1}),r("format_noneditable_selector",{processor:"string",default:""}),r("preview_styles",{processor:t=>{let r=!1===t||T(t);return r?{value:!1===t?"":t,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),r("custom_ui_selector",{processor:"string",default:""}),r("hidden_input",{processor:"boolean",default:!0}),r("submit_patch",{processor:"boolean",default:!0}),r("encoding",{processor:"string"}),r("add_form_submit_trigger",{processor:"boolean",default:!0}),r("add_unload_trigger",{processor:"boolean",default:!0}),r("custom_undo_redo_levels",{processor:"number",default:0}),r("disable_nodechange",{processor:"boolean",default:!1}),r("readonly",{processor:"boolean",default:!1}),r("editable_root",{processor:"boolean",default:!0}),r("plugins",{processor:"string[]",default:[]}),r("external_plugins",{processor:"object"}),r("forced_plugins",{processor:"string[]"}),r("model",{processor:"string",default:t.hasPlugin("rtc")?"plugin":"dom"}),r("model_url",{processor:"string"}),r("block_unsupported_drop",{processor:"boolean",default:!0}),r("visual",{processor:"boolean",default:!0}),r("visual_table_class",{processor:"string",default:"mce-item-table"}),r("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),r("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),r("setup",{processor:"function"}),r("init_instance_callback",{processor:"function"}),r("url_converter",{processor:"function",default:t.convertURL}),r("url_converter_scope",{processor:"object",default:t}),r("urlconverter_callback",{processor:"function"}),r("allow_conditional_comments",{processor:"boolean",default:!1}),r("allow_html_data_urls",{processor:"boolean",default:!1}),r("allow_svg_data_urls",{processor:"boolean"}),r("allow_html_in_named_anchor",{processor:"boolean",default:!1}),r("allow_script_urls",{processor:"boolean",default:!1}),r("allow_unsafe_link_target",{processor:"boolean",default:!1}),r("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),r("fix_list_elements",{processor:"boolean",default:!1}),r("preserve_cdata",{processor:"boolean",default:!1}),r("remove_trailing_brs",{processor:"boolean",default:!0}),r("pad_empty_with_br",{processor:"boolean",default:!1}),r("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),r("element_format",{processor:"string",default:"html"}),r("entities",{processor:"string"}),r("schema",{processor:"string",default:"html5"}),r("convert_urls",{processor:"boolean",default:!0}),r("relative_urls",{processor:"boolean",default:!0}),r("remove_script_host",{processor:"boolean",default:!0}),r("custom_elements",{processor:ip}),r("extended_valid_elements",{processor:"string"}),r("invalid_elements",{processor:"string"}),r("invalid_styles",{processor:ip}),r("valid_children",{processor:"string"}),r("valid_classes",{processor:ip}),r("valid_elements",{processor:"string"}),r("valid_styles",{processor:ip}),r("verify_html",{processor:"boolean",default:!0}),r("auto_focus",{processor:t=>T(t)||!0===t}),r("browser_spellcheck",{processor:"boolean",default:!1}),r("protect",{processor:"array"}),r("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),r("deprecation_warnings",{processor:"boolean",default:!0}),r("a11y_advanced_options",{processor:"boolean",default:!1}),r("api_key",{processor:"string"}),r("license_key",{processor:"string"}),r("paste_block_drop",{processor:"boolean",default:!1}),r("paste_data_images",{processor:"boolean",default:!0}),r("paste_preprocess",{processor:"function"}),r("paste_postprocess",{processor:"function"}),r("paste_webkit_styles",{processor:"string",default:"none"}),r("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),r("paste_merge_formats",{processor:"boolean",default:!0}),r("smart_paste",{processor:"boolean",default:!0}),r("paste_as_text",{processor:"boolean",default:!1}),r("paste_tab_spaces",{processor:"number",default:4}),r("text_patterns",{processor:t=>j(t,O)||!1===t?{value:is(!1===t?[]:t),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),r("text_patterns_lookup",{processor:t=>U(t)?{value:r=>is(t(r)),valid:!0}:{valid:!1,message:"Must be a single function"},default:t=>[]}),r("noneditable_class",{processor:"string",default:"mceNonEditable"}),r("editable_class",{processor:"string",default:"mceEditable"}),r("noneditable_regexp",{processor:t=>j(t,im)?{value:t,valid:!0}:im(t)?{value:[t],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),r("table_tab_navigation",{processor:"boolean",default:!0}),r("highlight_on_focus",{processor:"boolean",default:!0}),r("xss_sanitization",{processor:"boolean",default:!0}),r("details_initial_state",{processor:t=>{let r=el(["inherited","collapsed","expanded"],t);return r?{value:t,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),r("details_serialized_state",{processor:t=>{let r=el(["inherited","collapsed","expanded"],t);return r?{value:t,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),r("init_content_sync",{processor:"boolean",default:!1}),r("newdocument_content",{processor:"string",default:""}),r("sandbox_iframes",{processor:"boolean",default:!0}),r("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),r("convert_unsafe_embeds",{processor:"boolean",default:!0}),t.on("ScriptsLoaded",()=>{r("directionality",{processor:"string",default:aT.isRtl()?"rtl":void 0}),r("placeholder",{processor:"string",default:iu.getAttrib(t.getElement(),"placeholder")})})})(this);let a=this.options.get;a("deprecation_warnings")&&(((t,r)=>{let n=bO(t),o=bD(r),a=o.length>0,l=n.length>0,i="mobile"===r.theme;(a||l||i)&&console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+(i?`

Themes:
- mobile`:"")+(a?`

Plugins:
- ${o.join("\n- ")}`:"")+(l?`

Options:
- ${n.join("\n- ")}`:""))})(r,o),((t,r)=>{let n=bB(t),o=bL(r),a=o.length>0,l=n.length>0;(a||l)&&console.warn("The following deprecated features are currently enabled but will be removed soon."+(a?`

Plugins:
- ${o.map(bM).join("\n- ")}`:"")+(l?`

Options:
- ${n.join("\n- ")}`:""))})(r,o));let l=a("suffix");l&&(n.suffix=l),this.suffix=n.suffix;let i=a("base_url");i&&n._setBaseUrl(i),this.baseUri=n.baseURI;let s=ij(this);s&&(ak.ScriptLoader._setReferrerPolicy(s),ax.DOM.styleSheetLoader._setReferrerPolicy(s));let d=su(this);I(d)&&ax.DOM.styleSheetLoader._setContentCssCors(d),aO.languageLoad=a("language_load"),aO.baseURL=n.baseURL,this.setDirty(!1),this.documentBaseURI=new hA(iy(this),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=sr(this),this.hasVisual=sp(this),this.shortcuts=new Sp(this),this.editorCommands=new kQ(this),kG(this);let c=a("cache_suffix");c&&(tM.cacheSuffix=c.replace(/^[\?\&]+/,"")),this.ui={registry:Sh(),styleSheetLoader:void 0,show:H,hide:H,setEnabled:H,isEnabled:ee},this.mode=(t=>{let r=aS("design"),n=aS({design:{activate:H,deactivate:H,editorReadOnly:!1},readonly:{activate:H,deactivate:H,editorReadOnly:!0}});return t.serializer?k3(t):t.on("PreInit",()=>{k3(t)}),t.on("ShowCaret",r=>{k2(t)&&r.preventDefault()}),t.on("ObjectSelected",r=>{k2(t)&&r.preventDefault()}),{isReadOnly:()=>k2(t),set:o=>((t,r,n,o)=>{if(o!==n.get()){if(!eH(r,o))throw Error(`Editor mode '${o}' is invalid`);t.initialized?Sd(t,n,r,o):t.on("init",()=>Sd(t,n,r,o))}})(t,n.get(),r,o),get:()=>r.get(),register:(t,r)=>{n.set(((t,r,n)=>{if(el(Ss,r))throw Error(`Cannot override default mode ${r}`);return{...t,[r]:{...n,deactivate:()=>{try{n.deactivate()}catch(t){console.error(`problem while deactivating editor mode ${r}:`,t)}}}}})(n.get(),t,r))}}})(this),n.dispatch("SetupEditor",{editor:this});let u=sy(this);U(u)&&u.call(this,this)}render(){(t=>{let r=t.id;aT.setCode(iH(t));let n=()=>{kx.unbind(window,"ready",n),t.render()};if(!ag.Event.domLoaded)return void kx.bind(window,"ready",n);if(!t.getElement())return;let o=ru(t.getElement()),a=rt(o);t.on("remove",()=>{ec(o.dom.attributes,t=>re(o,t.name)),t6(o,a)}),t.ui.styleSheetLoader=o_.forElement(o,{contentCssCors:su(t),referrerPolicy:ij(t)}),sr(t)?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");let l=t.getElement().form||kx.getParent(r,"form");l&&(t.formElement=l,sn(t)&&!nH(t.getElement())&&(kx.insertAfter(kx.create("input",{type:"hidden",name:r}),r),t.hasHiddenInput=!0),t.formEventDelegate=r=>{t.dispatch(r.type,r)},kx.bind(l,"submit reset",t.formEventDelegate),t.on("reset",()=>{t.resetContent()}),!so(t)||l.submit.nodeType||l.submit.length||l._mceOldSubmit||(l._mceOldSubmit=l.submit,l.submit=()=>(t.editorManager.triggerSave(),t.setDirty(!1),l._mceOldSubmit(l)))),t.windowManager=bX(t),t.notificationManager=bK(t),"xml"===t.options.get("encoding")&&t.on("GetContent",t=>{t.save&&(t.content=kx.encode(t.content))}),sa(t)&&t.on("submit",()=>{t.initialized&&t.save()}),sl(t)&&(t._beforeUnload=()=>{!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),kS(t,t.suffix)})(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return u4(this)}translate(t){return aT.translate(t)}getParam(t,r,n){let o=this.options;return o.isRegistered(t)||(I(n)?o.register(t,{processor:n,default:r}):o.register(t,{processor:ee,default:r})),o.isSet(t)||M(r)?o.get(t):r}hasPlugin(t,r){return!(!el(sm(this),t)||r&&void 0===bY.get(t))}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,r,n){this.editorCommands.addCommand(t,r,n)}addQueryStateHandler(t,r,n){this.editorCommands.addQueryStateHandler(t,r,n)}addQueryValueHandler(t,r,n){this.editorCommands.addQueryValueHandler(t,r,n)}addShortcut(t,r,n,o){this.shortcuts.add(t,r,n,o)}execCommand(t,r,n,o){return this.editorCommands.execCommand(t,r,n,o)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable="true":(Sb.show(this.getContainer()),Sb.hide(this.id)),this.load(),this.dispatch("show"))}hide(){this.hidden||(this.save(),this.inline?(this.getBody().contentEditable="false",this===this.editorManager.focusedEditor&&(this.editorManager.focusedEditor=null)):(Sb.hide(this.getContainer()),Sb.setStyle(this.id,"display",this.orgDisplay)),this.hidden=!0,this.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,r){this.dispatch("ProgressState",{state:t,time:r})}load(t={}){let r=this.getElement();if(this.removed)return"";if(r){let n={...t,load:!0},o=nH(r)?r.value:r.innerHTML,a=this.setContent(o,n);return n.no_events||this.dispatch("LoadContent",{...n,element:r}),a}return""}save(t={}){let r=this,n=r.getElement();if(!n||!r.initialized||r.removed)return"";let o={...t,save:!0,element:n},a=r.getContent(o),l={...o,content:a};if(l.no_events||r.dispatch("SaveContent",l),"raw"===l.format&&r.dispatch("RawSaveContent",l),a=l.content,nH(n))n.value=a;else{!t.is_removing&&r.inline||(n.innerHTML=a);let o=Sb.getParent(r.id,"form");o&&Sy(o.elements,t=>t.name!==r.id||(t.value=a,!1))}return l.element=o.element=n=null,!1!==l.set_dirty&&r.setDirty(!1),a}setContent(t,r){return bk(this,t,r)}getContent(t){return((t,r={})=>{var n;return hW(t,(n=r.format?r.format:"html",{...r,format:n,get:!0,getInner:!0})).fold(W,r=>{let n=bf(t).editor.getContent(r);return hK(t,n,r)})})(this,t)}insertContent(t,r){r&&(t=Sv({content:t},r)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){void 0===t?bk(this,this.startContent,{format:"raw"}):bk(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){let r=!this.isNotDirty;this.isNotDirty=!t,t&&t!==r&&this.dispatch("dirty")}getContainer(){return this.container||(this.container=this.editorContainer||Sb.get(this.id+"_parent")),this.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Sb.get(this.id)),this.targetElm}getWin(){if(!this.contentWindow){let t=this.iframeElement;t&&(this.contentWindow=t.contentWindow)}return this.contentWindow}getDoc(){if(!this.contentDocument){let t=this.getWin();t&&(this.contentDocument=t.document)}return this.contentDocument}getBody(){var t,r;let n=this.getDoc();return null!==(r=null!==(t=this.bodyElement)&&void 0!==t?t:null==n?void 0:n.body)&&void 0!==r?r:null}convertURL(t,r,n){let o=this.options.get,a=sE(this);if(U(a))return a.call(this,t,n,!0,r);if(!o("convert_urls")||"link"===n||O(n)&&"LINK"===n.nodeName||0===t.indexOf("file:")||0===t.length)return t;let l=new hA(t);return"http"!==l.protocol&&"https"!==l.protocol&&""!==l.protocol?t:o("relative_urls")?this.documentBaseURI.toRelative(t):t=this.documentBaseURI.toAbsolute(t,o("remove_script_host"))}addVisual(t){((t,r)=>{bp(t).editor.addVisual(r)})(this,t)}setEditableRoot(t){this._editableRoot!==t&&(this._editableRoot=t,this.readonly||(this.getBody().contentEditable=String(this.hasEditableRoot()),this.nodeChanged()),((t,r)=>{t.dispatch("EditableRootStateChange",{state:r})})(this,t))}hasEditableRoot(){return this._editableRoot}remove(){(t=>{if(!t.removed){let{_selectionOverrides:r,editorUpload:n}=t,o=t.getBody(),a=t.getElement();o&&t.save({is_removing:!0}),t.removed=!0,t.unbindAllNativeEvents(),t.hasHiddenInput&&I(null==a?void 0:a.nextSibling)&&bF.remove(a.nextSibling),(t=>{t.dispatch("remove")})(t),t.editorManager.remove(t),!t.inline&&o&&bF.setStyle(t.id,"display",t.orgDisplay),(t=>{t.dispatch("detach")})(t),bF.remove(t.getContainer()),bI(r),bI(n),t.destroy()}})(this)}destroy(t){((t,r)=>{let{selection:n,dom:o}=t;t.destroyed||(r||t.removed?(r||(t.editorManager.off("beforeunload",t._beforeUnload),t.theme&&t.theme.destroy&&t.theme.destroy(),bI(n),bI(o)),(t=>{let r=t.formElement;r&&(r._mceOldSubmit&&(r.submit=r._mceOldSubmit,delete r._mceOldSubmit),bF.unbind(r,"submit reset",t.formEventDelegate))})(t),(t=>{t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null;let r=t.selection;if(r){let n=r.dom;t.selection=r.win=r.dom=n.doc=null}})(t),t.destroyed=!0):t.remove())})(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}let SE=ax.DOM,Sw=tz.each,Sx,S_=!1,Sk=[],SS=t=>{let r=t.type;Sw(ST.get(),n=>{switch(r){case"scroll":n.dispatch("ScrollWindow",t);break;case"resize":n.dispatch("ResizeWindow",t)}})},SN=t=>{if(t!==S_){let r=ax.DOM;t?(r.bind(window,"resize",SS),r.bind(window,"scroll",SS)):(r.unbind(window,"resize",SS),r.unbind(window,"scroll",SS)),S_=t}},SR=t=>{let r=Sk;return Sk=em(Sk,r=>t!==r),ST.activeEditor===t&&(ST.activeEditor=Sk.length>0?Sk[0]:null),ST.focusedEditor===t&&(ST.focusedEditor=null),r.length!==Sk.length},SA="CSS1Compat"!==document.compatMode,ST={...k9,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"0.1",releaseDate:"2024-04-10",i18n:aT,activeEditor:null,focusedEditor:null,setup(){let t="",r="",n=hA.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/"));let o=window.tinymce||window.tinyMCEPreInit;if(o)t=o.base||o.baseURL,r=o.suffix;else{let n=document.getElementsByTagName("script");for(let o=0;o<n.length;o++){let a=n[o].src||"";if(""===a)continue;let l=a.substring(a.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(a)){-1!==l.indexOf(".min")&&(r=".min"),t=a.substring(0,a.lastIndexOf("/"));break}}if(!t&&document.currentScript){let n=document.currentScript.src;-1!==n.indexOf(".min")&&(r=".min"),t=n.substring(0,n.lastIndexOf("/"))}}this.baseURL=new hA(n).toAbsolute(t),this.documentBaseURL=n,this.baseURI=new hA(this.baseURL),this.suffix=r,this.on("AddEditor",Y(u3,this)),this.on("RemoveEditor",Y(u8,this))},overrideDefaults(t){let r=t.base_url;r&&this._setBaseUrl(r);let n=t.suffix;n&&(this.suffix=n),this.defaultOptions=t;let o=t.plugin_base_urls;void 0!==o&&eP(o,(t,r)=>{aO.PluginManager.urls[r]=t})},init(t){let r;let n=this,o=tz.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),a=t=>{r=t},l=()=>{let r,i=0,s=[];SE.unbind(window,"ready",l),(r=>{let o=t.onpageload;o&&o.apply(n,[])})(),r=eT(tM.browser.isIE()||tM.browser.isEdge()?(b1("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):SA?(b1("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):T(t.selector)?SE.select(t.selector):I(t.target)?[t.target]:[]),tz.each(r,t=>{var r;(r=n.get(t.id))&&r.initialized&&!(r.getContainer()||r.getBody()).parentNode&&(SR(r),r.unbindAllNativeEvents(),r.destroy(!0),r.removed=!0)}),0===(r=tz.grep(r,t=>!n.get(t.id))).length?a([]):Sw(r,l=>{let d;t.inline&&l.tagName.toLowerCase() in o?b1("Could not initialize inline editor on invalid inline target element",l):((t,o,l)=>{let d=new SC(t,o,n);s.push(d),d.on("init",()=>{++i===r.length&&a(s)}),d.targetElm=d.targetElm||l,d.render()})(((d=l.id)||(d=ej(l,"name").filter(t=>!SE.get(t)).getOrThunk(SE.uniqueId),l.setAttribute("id",d)),d),t,l)})};return SE.bind(window,"ready",l),new Promise(t=>{r?t(r):a=r=>{t(r)}})},get(t){return 0==arguments.length?Sk.slice(0):T(t)?eh(Sk,r=>r.id===t).getOr(null):z(t)&&Sk[t]?Sk[t]:null},add(t){let r=this,n=r.get(t.id);return n===t||(null===n&&Sk.push(t),SN(!0),r.activeEditor=t,r.dispatch("AddEditor",{editor:t}),Sx||(Sx=t=>{let n=r.dispatch("BeforeUnload");if(n.returnValue)return t.preventDefault(),t.returnValue=n.returnValue,n.returnValue},window.addEventListener("beforeunload",Sx))),t},createEditor(t,r){return this.add(new SC(t,r,this))},remove(t){let r;let n=this;if(t){if(!T(t))return r=t,D(n.get(r.id))?null:(SR(r)&&n.dispatch("RemoveEditor",{editor:r}),0===Sk.length&&window.removeEventListener("beforeunload",Sx),r.remove(),SN(Sk.length>0),r);Sw(SE.select(t),t=>{(r=n.get(t.id))&&n.remove(r)})}else for(let t=Sk.length-1;t>=0;t--)n.remove(Sk[t])},execCommand(t,r,n){var o;let a=O(n)?null!==(o=n.id)&&void 0!==o?o:n.index:n;switch(t){case"mceAddEditor":return this.get(a)||new SC(a,n.options,this).render(),!0;case"mceRemoveEditor":{let t=this.get(a);return t&&t.remove(),!0}case"mceToggleEditor":{let t=this.get(a);return t?t.isHidden()?t.show():t.hide():this.execCommand("mceAddEditor",!1,n),!0}}return!!this.activeEditor&&this.activeEditor.execCommand(t,r,n)},triggerSave:()=>{Sw(Sk,t=>{t.save()})},addI18n:(t,r)=>{aT.add(t,r)},translate:t=>aT.translate(t),setActive(t){let r=this.activeEditor;this.activeEditor!==t&&(r&&r.dispatch("deactivate",{relatedTarget:t}),t.dispatch("activate",{relatedTarget:r})),this.activeEditor=t},_setBaseUrl(t){this.baseURL=new hA(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new hA(this.baseURL)}};ST.setup();let SO=(()=>{let t=aP();return{FakeClipboardItem:t=>({items:t,types:eO(t),getType:r=>ej(t,r).getOrUndefined()}),write:r=>{t.set(r)},read:()=>t.get().getOrUndefined(),clear:t.clear}})(),SB=Math.min,SP=Math.max,SD=Math.round,SL=(t,r,n)=>{let o=r.x,a=r.y,l=t.w,i=t.h,s=r.w,d=r.h,c=(n||"").split("");return"b"===c[0]&&(a+=d),"r"===c[1]&&(o+=s),"c"===c[0]&&(a+=SD(d/2)),"c"===c[1]&&(o+=SD(s/2)),"b"===c[3]&&(a-=i),"r"===c[4]&&(o-=l),"c"===c[3]&&(a-=SD(i/2)),"c"===c[4]&&(o-=SD(l/2)),SM(o,a,l,i)},SM=(t,r,n,o)=>({x:t,y:r,w:n,h:o}),SF=(()=>{let t={},r={},n={};return{load:(n,o)=>{let a=`Script at URL "${o}" failed to load`,l=`Script at URL "${o}" did not call \`tinymce.Resource.add('${n}', data)\` within 1 second`;if(void 0!==t[n])return t[n];{let i=new Promise((t,i)=>{let s=((t,r,n=1e3)=>{let o=!1,a=null,l=t=>(...r)=>{o||(o=!0,null!==a&&(clearTimeout(a),a=null),t.apply(null,r))},i=l(t),s=l(r);return{start:(...t)=>{o||null!==a||(a=setTimeout(()=>s.apply(null,t),n))},resolve:i,reject:s}})(t,i);r[n]=s.resolve,ak.ScriptLoader.loadScript(o).then(()=>s.start(l),()=>s.reject(a))});return t[n]=i,i}},add:(o,a)=>{void 0!==r[o]&&(r[o](a),delete r[o]),t[o]=Promise.resolve(a),n[o]=a},has:t=>t in n,get:t=>n[t],unload:r=>{delete t[r],delete n[r]}}})();try{let t="__storage_test__";(n=window.localStorage).setItem(t,t),n.removeItem(t)}catch(t){n=(()=>{let t={},r=[],n={getItem:r=>t[r]||null,setItem:(n,o)=>{r.push(n),t[n]=String(o)},key:t=>r[t],removeItem:n=>{r=r.filter(t=>t===n),delete t[n]},clear:()=>{r=[],t={}},length:0};return Object.defineProperty(n,"length",{get:()=>r.length,configurable:!1,enumerable:!1}),n})()}let SI={geom:{Rect:{inflate:(t,r,n)=>SM(t.x-r,t.y-n,t.w+2*r,t.h+2*n),relativePosition:SL,findBestRelativePosition:(t,r,n,o)=>{for(let a=0;a<o.length;a++){let l=SL(t,r,o[a]);if(l.x>=n.x&&l.x+l.w<=n.w+n.x&&l.y>=n.y&&l.y+l.h<=n.h+n.y)return o[a]}return null},intersect:(t,r)=>{let n=SP(t.x,r.x),o=SP(t.y,r.y),a=SB(t.x+t.w,r.x+r.w),l=SB(t.y+t.h,r.y+r.h);return a-n<0||l-o<0?null:SM(n,o,a-n,l-o)},clamp:(t,r,n)=>{let o=t.x,a=t.y,l=t.x+t.w,i=t.y+t.h,s=r.x+r.w,d=r.y+r.h,c=SP(0,r.x-o),u=SP(0,r.y-a),m=SP(0,l-s),g=SP(0,i-d);return o+=c,a+=u,n&&(l+=c,i+=u,o-=m,a-=g),SM(o,a,(l-=m)-o,(i-=g)-a)},create:SM,fromClientRect:t=>SM(t.left,t.top,t.width,t.height)}},util:{Delay:uQ,Tools:tz,VK:cZ,URI:hA,EventDispatcher:k6,Observable:k9,I18n:aT,LocalStorage:n,ImageUploader:t=>{let r=b7(t,b5());return{upload:(n,o=!0)=>r.upload(n,o?b9(t):void 0)}}},dom:{EventUtils:ag,TreeWalker:nS,TextSeeker:aJ,DOMUtils:ax,ScriptLoader:ak,RangeUtils:uy,Serializer:b_,StyleSheetLoader:ox,ControlSelection:c2,BookmarkManager:cH,Selection:bE,Event:ag.Event},html:{Styles:ao,Entities:oj,Node:mc,Schema:o8,DomParser:h$,Writer:mR,Serializer:mA},Env:tM,AddOnManager:aO,Annotator:cj,Formatter:vc,UndoManager:vm,EditorCommands:kQ,WindowManager:bX,NotificationManager:bK,EditorObservable:Sn,Shortcuts:Sp,Editor:SC,FocusManager:uZ,EditorManager:ST,DOM:ax.DOM,ScriptLoader:ak.ScriptLoader,PluginManager:bY,ThemeManager:bG,ModelManager:bz,IconManager:bU,Resource:SF,FakeClipboard:SO,trim:tz.trim,isArray:tz.isArray,is:tz.is,toArray:tz.toArray,makeMap:tz.makeMap,each:tz.each,map:tz.map,grep:tz.grep,inArray:tz.inArray,extend:tz.extend,walk:tz.walk,resolve:tz.resolve,explode:tz.explode,_addCacheSuffix:tz._addCacheSuffix},SU=tz.extend(ST,SI);window.tinymce=SU,window.tinyMCE=SU,(t=>{if("object"==typeof module)try{module.exports=t}catch(t){}})(SU)}();