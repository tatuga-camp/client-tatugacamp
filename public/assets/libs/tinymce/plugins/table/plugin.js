!function(){"use strict";var e,t,o=tinymce.util.Tools.resolve("tinymce.PluginManager");let l=(e,t,o)=>{var l;return!!o(e,t.prototype)||(null===(l=e.constructor)||void 0===l?void 0:l.name)===t.name},r=e=>{let t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&l(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t},n=e=>t=>r(t)===e,a=e=>t=>typeof t===e,s=n("string"),i=n("array"),c=a("boolean"),m=(e=void 0,t=>e===t),d=e=>null==e,u=e=>!d(e),p=a("function"),b=a("number"),g=()=>{},h=(e,t)=>o=>e(t(o)),f=e=>()=>e,y=e=>e,w=(e,t)=>e===t;function S(e,...t){return(...o)=>{let l=t.concat(o);return e.apply(null,l)}}let C=e=>{e()},T=f(!1),v=f(!0);class x{constructor(e,t){this.tag=e,this.value=t}static some(e){return new x(!0,e)}static none(){return x.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?x.some(e(this.value)):x.none()}bind(e){return this.tag?e(this.value):x.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:x.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(null!=e?e:"Called getOrDie on None")}static from(e){return u(e)?x.some(e):x.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}x.singletonNone=new x(!1);let A=Object.keys,R=Object.hasOwnProperty,O=(e,t)=>{let o=A(e);for(let l=0,r=o.length;l<r;l++){let r=o[l];t(e[r],r)}},_=e=>(t,o)=>{e[o]=t},D=(e,t,o,l)=>{O(e,(e,r)=>{(t(e,r)?o:l)(e,r)})},I=(e,t)=>{let o={};return D(e,t,_(o),g),o},N=(e,t)=>{let o=[];return O(e,(e,l)=>{o.push(t(e,l))}),o},M=e=>N(e,y),P=e=>A(e).length,k=(e,t)=>E(e,t)?x.from(e[t]):x.none(),E=(e,t)=>R.call(e,t),B=(e,t)=>E(e,t)&&void 0!==e[t]&&null!==e[t],F=e=>{for(let t in e)if(R.call(e,t))return!1;return!0},q=Array.prototype.indexOf,j=Array.prototype.push,L=(e,t)=>q.call(e,t),H=(e,t)=>L(e,t)>-1,V=(e,t)=>{for(let o=0,l=e.length;o<l;o++)if(t(e[o],o))return!0;return!1},$=(e,t)=>{let o=[];for(let l=0;l<e;l++)o.push(t(l));return o},W=(e,t)=>{let o=e.length,l=Array(o);for(let r=0;r<o;r++){let o=e[r];l[r]=t(o,r)}return l},z=(e,t)=>{for(let o=0,l=e.length;o<l;o++)t(e[o],o)},U=(e,t)=>{for(let o=e.length-1;o>=0;o--)t(e[o],o)},G=(e,t)=>{let o=[],l=[];for(let r=0,n=e.length;r<n;r++){let n=e[r];(t(n,r)?o:l).push(n)}return{pass:o,fail:l}},K=(e,t)=>{let o=[];for(let l=0,r=e.length;l<r;l++){let r=e[l];t(r,l)&&o.push(r)}return o},J=(e,t,o)=>(U(e,(e,l)=>{o=t(o,e,l)}),o),Q=(e,t,o)=>(z(e,(e,l)=>{o=t(o,e,l)}),o),X=(e,t,o)=>{for(let l=0,r=e.length;l<r;l++){let r=e[l];if(t(r,l))return x.some(r);if(o(r,l))break}return x.none()},Y=(e,t)=>X(e,t,T),Z=e=>{let t=[];for(let o=0,l=e.length;o<l;++o){if(!i(e[o]))throw Error("Arr.flatten item "+o+" was not an array, input: "+e);j.apply(t,e[o])}return t},ee=(e,t)=>Z(W(e,t)),et=(e,t)=>{for(let o=0,l=e.length;o<l;++o)if(!0!==t(e[o],o))return!1;return!0},eo=(e,t)=>{let o={};for(let l=0,r=e.length;l<r;l++){let r=e[l];o[String(r)]=t(r,l)}return o},el=(e,t)=>t>=0&&t<e.length?x.some(e[t]):x.none(),er=e=>el(e,0),en=e=>el(e,e.length-1),ea=(e,t)=>{for(let o=0;o<e.length;o++){let l=t(e[o],o);if(l.isSome())return l}return x.none()},es=e=>{if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}},ei={fromHtml:(e,t)=>{let o=(t||document).createElement("div");if(o.innerHTML=e,!o.hasChildNodes()||o.childNodes.length>1){let t="HTML does not have a single root node";throw console.error(t,e),Error(t)}return es(o.childNodes[0])},fromTag:(e,t)=>es((t||document).createElement(e)),fromText:(e,t)=>es((t||document).createTextNode(e)),fromDom:es,fromPoint:(e,t,o)=>x.from(e.dom.elementFromPoint(t,o)).map(es)},ec=(e,t)=>{let o=e.dom;if(1!==o.nodeType)return!1;if(void 0!==o.matches)return o.matches(t);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(t);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(t);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(t);throw Error("Browser lacks native selectors")},em=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,ed=(e,t)=>{let o=void 0===t?document:t.dom;return em(o)?[]:W(o.querySelectorAll(e),ei.fromDom)},eu=(e,t)=>{let o=void 0===t?document:t.dom;return em(o)?x.none():x.from(o.querySelector(e)).map(ei.fromDom)},ep=(e,t)=>e.dom===t.dom;"undefined"!=typeof window?window:Function("return this;")();let eb=e=>e.dom.nodeName.toLowerCase(),eg=e=>e.dom.nodeType,eh=e=>t=>eg(t)===e,ef=eh(1),ey=eh(3),ew=eh(9),eS=eh(11),eC=e=>t=>ef(t)&&eb(t)===e,eT=e=>ei.fromDom(e.dom.ownerDocument),ev=e=>ew(e)?e:eT(e),ex=e=>x.from(e.dom.parentNode).map(ei.fromDom),eA=e=>x.from(e.dom.nextSibling).map(ei.fromDom),eR=e=>W(e.dom.childNodes,ei.fromDom),eO=(e,t)=>{let o=e.dom.childNodes;return x.from(o[t]).map(ei.fromDom)},e_=e=>eO(e,0),eD=e=>eS(e)&&u(e.dom.host),eI=p(Element.prototype.attachShadow)&&p(Node.prototype.getRootNode)?e=>ei.fromDom(e.dom.getRootNode()):ev,eN=e=>{let t=eI(e);return eD(t)?x.some(t):x.none()},eM=e=>ei.fromDom(e.dom.host),eP=e=>{let t=ey(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;let o=t.ownerDocument;return eN(ei.fromDom(t)).fold(()=>o.body.contains(t),h(eP,eM))};var ek=(e,t,o,l,r)=>e(o,l)?x.some(o):p(r)&&r(o)?x.none():t(o,l,r);let eE=(e,t,o)=>{let l=e.dom,r=p(o)?o:T;for(;l.parentNode;){l=l.parentNode;let e=ei.fromDom(l);if(t(e))return x.some(e);if(r(e))break}return x.none()},eB=(e,t,o)=>ek((e,t)=>t(e),eE,e,t,o),eF=(e,t)=>Y(e.dom.childNodes,e=>t(ei.fromDom(e))).map(ei.fromDom),eq=(e,t,o)=>eE(e,e=>ec(e,t),o),ej=(e,t)=>eF(e,e=>ec(e,t)),eL=(e,t)=>eu(t,e),eH=(e,t,o)=>ek((e,t)=>ec(e,t),eq,e,t,o),eV=e=>eH(e,"[contenteditable]"),e$=(e,t=!1)=>eP(e)?e.dom.isContentEditable:eV(e).fold(f(t),e=>"true"===eW(e)),eW=e=>e.dom.contentEditable,ez=e=>e.nodeName.toLowerCase(),eU=e=>ei.fromDom(e.getBody()),eG=e=>t=>ep(t,eU(e)),eK=e=>e?e.replace(/px$/,""):"",eJ=e=>/^\d+(\.\d+)?$/.test(e)?e+"px":e,eQ=e=>ei.fromDom(e.selection.getStart()),eX=e=>ei.fromDom(e.selection.getEnd()),eY=e=>eB(e,eC("table")).forall(e$),eZ=(e,t)=>K(eR(e),t),e0=(e,t)=>{let o=[];return z(eR(e),e=>{t(e)&&(o=o.concat([e])),o=o.concat(e0(e,t))}),o},e1=(e,t)=>eZ(e,e=>ec(e,t)),e2=(e,t)=>ed(t,e),e3=(e,t,o)=>{if(s(o)||c(o)||b(o))e.setAttribute(t,o+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",o,":: Element ",e),Error("Attribute value was not simple")},e4=(e,t)=>{let o=e.dom;O(t,(e,t)=>{e3(o,t,e)})},e5=(e,t)=>{let o=e.dom.getAttribute(t);return null===o?void 0:o},e6=(e,t)=>x.from(e5(e,t)),e9=(e,t)=>{e.dom.removeAttribute(t)},e8=e=>Q(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),e7=(e,t,o=w)=>e.exists(e=>o(e,t)),te=e=>{let t=[],o=e=>{t.push(e)};for(let t=0;t<e.length;t++)e[t].each(o);return t},tt=(e,t,o)=>e.isSome()&&t.isSome()?x.some(o(e.getOrDie(),t.getOrDie())):x.none(),to=e=>e.bind(y),tl=(e,t)=>e?x.some(t):x.none(),tr=(e,t)=>e.substring(t),tn=(e,t,o)=>""===t||e.length>=t.length&&e.substr(o,o+t.length)===t,ta=(e,t)=>ts(e,t)?tr(e,t.length):e,ts=(e,t)=>tn(e,t,0),ti=(t=/^\s+|\s+$/g,e=>e.replace(t,"")),tc=e=>e.length>0,tm=e=>!tc(e),td=(e,t=10)=>{let o=parseInt(e,t);return isNaN(o)?x.none():x.some(o)},tu=e=>{let t=parseFloat(e);return isNaN(t)?x.none():x.some(t)},tp=e=>void 0!==e.style&&p(e.style.getPropertyValue),tb=(e,t,o)=>{if(!s(o))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",o,":: Element ",e),Error("CSS value must be a string: "+o);tp(e)&&e.style.setProperty(t,o)},tg=(e,t)=>{tp(e)&&e.style.removeProperty(t)},th=(e,t)=>{let o=e.dom,l=window.getComputedStyle(o).getPropertyValue(t);return""!==l||eP(e)?l:tf(o,t)},tf=(e,t)=>tp(e)?e.style.getPropertyValue(t):"",ty=(e,t)=>{let o=tf(e.dom,t);return x.from(o).filter(e=>e.length>0)},tw=(e,t,o=0)=>e6(e,t).map(e=>parseInt(e,10)).getOr(o),tS=(e,t)=>tC(e,t,v),tC=(e,t,o)=>ee(eR(e),e=>ec(e,t)?o(e)?[e]:[]:tC(e,t,o)),tT=["tfoot","thead","tbody","colgroup"],tv=e=>H(tT,e),tx=(e,t)=>({rows:e,columns:t}),tA=(e,t,o)=>({element:e,rowspan:t,colspan:o}),tR=(e,t,o,l,r,n)=>({element:e,rowspan:t,colspan:o,row:l,column:r,isLocked:n}),tO=(e,t,o)=>({element:e,cells:t,section:o}),t_=(e,t,o,l)=>({startRow:e,startCol:t,finishRow:o,finishCol:l}),tD=(e,t,o)=>({element:e,colspan:t,column:o}),tI=(e,t)=>({element:e,columns:t}),tN=(e,t,o=T)=>o(t)?x.none():H(e,eb(t))?x.some(t):eq(t,e.join(","),e=>ec(e,"table")||o(e)),tM=(e,t)=>tN(["td","th"],e,t),tP=e=>tS(e,"th,td"),tk=e=>ec(e,"colgroup")?e1(e,"col"):ee(tF(e),e=>e1(e,"col")),tE=(e,t)=>eH(e,"table",t),tB=e=>tS(e,"tr"),tF=e=>tE(e).fold(f([]),e=>e1(e,"colgroup")),tq=(e,t)=>W(e,e=>{if("colgroup"===eb(e)){let t=W(tk(e),e=>{let t=tw(e,"span",1);return tA(e,1,t)});return tO(e,t,"colgroup")}{let o=W(tP(e),e=>{let t=tw(e,"rowspan",1),o=tw(e,"colspan",1);return tA(e,t,o)});return tO(e,o,t(e))}}),tj=e=>ex(e).map(e=>{let t=eb(e);return tv(t)?t:"tbody"}).getOr("tbody"),tL=e=>{let t=tB(e);return tq([...tF(e),...t],tj)},tH=e=>e6(e,"data-snooker-locked-cols").bind(e=>x.from(e.match(/\d+/g))).map(e=>eo(e,v)),tV=(e,t)=>e+","+t,t$=(e,t)=>K(ee(e.all,e=>e.cells),t),tW=e=>{let t={},o=0;return z(e.cells,e=>{let l=e.colspan;$(l,r=>{let n=o+r;t[n]=tD(e.element,l,n)}),o+=l}),t},tz=e=>{let t={},o=[],l=er(e).map(e=>e.element).bind(tE).bind(tH).getOr({}),r=0,n=0,a=0,{pass:s,fail:i}=G(e,e=>"colgroup"===e.section);z(i,e=>{let s=[];z(e.cells,e=>{let o=0;for(;void 0!==t[tV(a,o)];)o++;let r=B(l,o.toString()),i=tR(e.element,e.rowspan,e.colspan,a,o,r);for(let l=0;l<e.colspan;l++)for(let r=0;r<e.rowspan;r++){let e=o+l;t[tV(a+r,e)]=i,n=Math.max(n,e+1)}s.push(i)}),r++,o.push(tO(e.element,s,e.section)),a++});let{columns:c,colgroups:m}=en(s).map(e=>{let t=tW(e);return{colgroups:[tI(e.element,M(t))],columns:t}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:tx(r,n),access:t,all:o,columns:c,colgroups:m}},tU={fromTable:e=>tz(tL(e)),generate:tz,getAt:(e,t,o)=>x.from(e.access[tV(t,o)]),findItem:(e,t,o)=>{let l=t$(e,e=>o(t,e.element));return l.length>0?x.some(l[0]):x.none()},filterItems:t$,justCells:e=>ee(e.all,e=>e.cells),justColumns:e=>M(e.columns),hasColumns:e=>A(e.columns).length>0,getColumnAt:(e,t)=>x.from(e.columns[t])};var tG=tinymce.util.Tools.resolve("tinymce.util.Tools");let tK=(e,t,o)=>{let l;let r=e.select("td,th",t);for(let t=0;t<r.length;t++){let n=e.getStyle(r[t],o);if(m(l)&&(l=n),l!==n)return""}return l},tJ=(e,t,o)=>{tG.each("left center right".split(" "),l=>{l!==o&&e.formatter.remove("align"+l,{},t)}),o&&e.formatter.apply("align"+o,{},t)},tQ=(e,t,o)=>{tG.each("top middle bottom".split(" "),l=>{l!==o&&e.formatter.remove("valign"+l,{},t)}),o&&e.formatter.apply("valign"+o,{},t)},tX=(e,t,o)=>{e.dispatch("TableModified",{...o,table:t})},tY=(e,t)=>tu(e).getOr(t),tZ=(e,t,o)=>tY(th(e,t),o),t0=(e,t,o,l)=>{let r=tZ(e,`padding-${o}`,0);return t-r-tZ(e,`padding-${l}`,0)-tZ(e,`border-${o}-width`,0)-tZ(e,`border-${l}-width`,0)},t1=(e,t)=>{let o=e.dom,l=o.getBoundingClientRect().width||o.offsetWidth;return"border-box"===t?l:t0(e,l,"left","right")},t2=e=>t1(e,"content-box");var t3=tinymce.util.Tools.resolve("tinymce.Env");let t4=$(5,e=>{let t=`${e+1}px`;return{title:t,value:t}}),t5=W(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],e=>({title:e,value:e.toLowerCase()})),t6="100%",t9=e=>{var t;let o=e.dom,l=null!==(t=o.getParent(e.selection.getStart(),o.isBlock))&&void 0!==t?t:e.getBody();return t2(ei.fromDom(l))+"px"},t8=(e,t)=>oy(e)||!om(e)?t:of(e)?{...t,width:t9(e)}:{...t,width:t6},t7=(e,t)=>oy(e)||om(e)?t:of(e)?{...t,width:t9(e)}:{...t,width:t6},oe=e=>t=>t.options.get(e),ot=e=>{let t=e.options.register;t("table_border_widths",{processor:"object[]",default:t4}),t("table_border_styles",{processor:"object[]",default:t5}),t("table_cell_advtab",{processor:"boolean",default:!0}),t("table_row_advtab",{processor:"boolean",default:!0}),t("table_advtab",{processor:"boolean",default:!0}),t("table_appearance_options",{processor:"boolean",default:!0}),t("table_grid",{processor:"boolean",default:!t3.deviceType.isTouch()}),t("table_cell_class_list",{processor:"object[]",default:[]}),t("table_row_class_list",{processor:"object[]",default:[]}),t("table_class_list",{processor:"object[]",default:[]}),t("table_toolbar",{processor:"string",default:"tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"}),t("table_background_color_map",{processor:"object[]",default:[]}),t("table_border_color_map",{processor:"object[]",default:[]})},oo=oe("table_sizing_mode"),ol=oe("table_border_widths"),or=oe("table_border_styles"),on=oe("table_cell_advtab"),oa=oe("table_row_advtab"),os=oe("table_advtab"),oi=oe("table_appearance_options"),oc=oe("table_grid"),om=oe("table_style_by_css"),od=oe("table_cell_class_list"),ou=oe("table_row_class_list"),op=oe("table_class_list"),ob=oe("table_toolbar"),og=oe("table_background_color_map"),oh=oe("table_border_color_map"),of=e=>"fixed"===oo(e),oy=e=>"responsive"===oo(e),ow=e=>{let t=e.options,o=t.get("table_default_styles");return t.isSet("table_default_styles")?o:t8(e,o)},oS=e=>{let t=e.options,o=t.get("table_default_attributes");return t.isSet("table_default_attributes")?o:t7(e,o)},oC=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,oT=(e,t)=>{let o=!0,l=S(oC,t);for(let r=t.startRow;r<=t.finishRow;r++)for(let n=t.startCol;n<=t.finishCol;n++)o=o&&tU.getAt(e,r,n).exists(l);return o?x.some(t):x.none()},ov=(e,t)=>t_(Math.min(e.row,t.row),Math.min(e.column,t.column),Math.max(e.row+e.rowspan-1,t.row+t.rowspan-1),Math.max(e.column+e.colspan-1,t.column+t.colspan-1)),ox=(e,t,o)=>{let l=tU.findItem(e,t,ep),r=tU.findItem(e,o,ep);return l.bind(e=>r.map(t=>ov(e,t)))},oA=(e,t,o)=>ox(e,t,o).bind(t=>oT(e,t)),oR=(e,t,o)=>oA(oO(e),t,o),oO=tU.fromTable,o_=(e,t)=>{ex(e).each(o=>{o.dom.insertBefore(t.dom,e.dom)})},oD=(e,t)=>{eA(e).fold(()=>{ex(e).each(e=>{oI(e,t)})},e=>{o_(e,t)})},oI=(e,t)=>{e.dom.appendChild(t.dom)},oN=(e,t)=>{z(t,(o,l)=>{oD(0===l?e:t[l-1],o)})},oM=e=>{let t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},oP=((e,t)=>{let o=t=>e(t)?x.from(t.dom.nodeValue):x.none();return{get:l=>{if(!e(l))throw Error("Can only get "+t+" value of a "+t+" node");return o(l).getOr("")},getOption:o,set:(o,l)=>{if(!e(o))throw Error("Can only set raw "+t+" value of a "+t+" node");o.dom.nodeValue=l}}})(ey,"text");var ok=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];let oE=(e,t,o,l)=>l(e,t,o[0],o.slice(1)),oB=(e,t,o,l)=>J(l,(o,l)=>{let r=t(e,l);return oF(e,o,r)},t(e,o)),oF=(e,t,o)=>t.bind(t=>o.filter(S(e.eq,t))),oq=(e,t,o)=>o.length>0?oE(e,t,o,oB):x.none(),oj={up:f({selector:eq,closest:eH,predicate:eE,all:(e,t)=>{let o=p(t)?t:T,l=e.dom,r=[];for(;null!==l.parentNode&&void 0!==l.parentNode;){let e=l.parentNode,t=ei.fromDom(e);if(r.push(t),!0===o(t))break;l=e}return r}}),down:f({selector:e2,predicate:e0}),styles:f({get:th,getRaw:ty,set:(e,t,o)=>{tb(e.dom,t,o)},remove:(e,t)=>{tg(e.dom,t),e7(e6(e,"style").map(ti),"")&&e9(e,"style")}}),attrs:f({get:e5,set:(e,t,o)=>{e3(e.dom,t,o)},remove:e9,copyTo:(e,t)=>{e4(t,e8(e))}}),insert:f({before:o_,after:oD,afterAll:oN,append:oI,appendAll:(e,t)=>{z(t,t=>{oI(e,t)})},prepend:(e,t)=>{e_(e).fold(()=>{oI(e,t)},o=>{e.dom.insertBefore(t.dom,o.dom)})},wrap:(e,t)=>{o_(e,t),oI(t,e)}}),remove:f({unwrap:e=>{let t=eR(e);t.length>0&&oN(e,t),oM(e)},remove:oM}),create:f({nu:ei.fromTag,clone:e=>ei.fromDom(e.dom.cloneNode(!1)),text:ei.fromText}),query:f({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:e=>x.from(e.dom.previousSibling).map(ei.fromDom),nextSibling:eA}),property:f({children:eR,name:eb,parent:ex,document:e=>ev(e).dom,isText:ey,isComment:e=>8===eg(e)||"#comment"===eb(e),isElement:ef,isSpecial:e=>H(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],eb(e)),getLanguage:e=>ef(e)?e6(e,"lang"):x.none(),getText:e=>oP.get(e),setText:(e,t)=>oP.set(e,t),isBoundary:e=>!!ef(e)&&("body"===eb(e)||H(ok,eb(e))),isEmptyTag:e=>!!ef(e)&&H(["br","img","hr","input"],eb(e)),isNonEditable:e=>ef(e)&&"false"===e5(e,"contenteditable")}),eq:ep,is:ec},oL=(e,t)=>oq(oj,(t,o)=>e(o),t),oH=e=>eq(e,"table"),oV=(e,t)=>{let o=e2(e,t);return o.length>0?x.some(o):x.none()},o$=(e,t,o)=>eL(e,t).bind(t=>eL(e,o).bind(e=>oL(oH,[t,e]).map(o=>({first:t,last:e,table:o})))),oW=(e,t)=>oV(e,t),oz=(e,t,o)=>o$(e,t,o).bind(t=>{let o=t=>ep(e,t),l="thead,tfoot,tbody,table",r=eq(t.first,l,o),n=eq(t.last,l,o);return r.bind(e=>n.bind(o=>ep(e,o)?oR(t.table,t.first,t.last):x.none()))}),oU=e=>W(e,ei.fromDom),oG="data-mce-selected",oK="data-mce-first-selected",oJ="data-mce-last-selected",oQ={selected:oG,selectedSelector:"td["+oG+"],th["+oG+"]",firstSelected:oK,firstSelectedSelector:"td["+oK+"],th["+oK+"]",lastSelected:oJ,lastSelectedSelector:"td["+oJ+"],th["+oJ+"]"},oX=e=>tE(e).bind(e=>oW(e,oQ.firstSelectedSelector)).fold(f(e),e=>e[0]),oY=e=>(t,o)=>{let l=eb(t);return eH("col"===l||"colgroup"===l?oX(t):t,e,o)},oZ=oY("th,td,caption"),o0=oY("th,td"),o1=e=>oU(e.model.table.getSelectedCells()),o2=(e,t)=>{let o=o0(e),l=o.bind(e=>tE(e)).map(e=>tB(e));return tt(o,l,(e,o)=>K(o,o=>V(oU(o.dom.cells),o=>"1"===e5(o,t)||ep(o,e)))).getOr([])},o3=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],o4=e=>({value:o8(e)}),o5=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,o6=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,o9=e=>o5.test(e)||o6.test(e),o8=e=>ta(e,"#").toUpperCase(),o7=e=>o9(e)?x.some({value:o8(e)}):x.none(),le=e=>{let t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},lt=e=>o4(le(e.red)+le(e.green)+le(e.blue)),lo=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,ll=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,lr=(e,t,o,l)=>({red:e,green:t,blue:o,alpha:l}),ln=(e,t,o,l)=>{let r=parseInt(e,10);return lr(r,parseInt(t,10),parseInt(o,10),parseFloat(l))},la=e=>{if("transparent"===e)return x.some(lr(0,0,0,0));let t=lo.exec(e);if(null!==t)return x.some(ln(t[1],t[2],t[3],"1"));let o=ll.exec(e);return null!==o?x.some(ln(o[1],o[2],o[3],o[4])):x.none()},ls=e=>o7(e).orThunk(()=>la(e).map(lt)).getOrThunk(()=>{let t=document.createElement("canvas");t.height=1,t.width=1;let o=t.getContext("2d");o.clearRect(0,0,t.width,t.height),o.fillStyle="#FFFFFF",o.fillStyle=e,o.fillRect(0,0,1,1);let l=o.getImageData(0,0,1,1).data,r=l[0];return lt(lr(r,l[1],l[2],l[3]))}),li=e=>la(e).map(lt).map(e=>"#"+e.value).getOr(e),lc=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},lm=e=>{let t=lc(x.none()),o=()=>t.get().each(e);return{clear:()=>{o(),t.set(x.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{o(),t.set(x.some(e))}}},ld=()=>lm(e=>e.unbind()),lu=(e,t,o)=>l=>{let r=ld(),n=tm(o),a=()=>{let a=o1(e),s=l=>e.formatter.match(t,{value:o},l.dom,n);n?(l.setActive(!V(a,s)),r.set(e.formatter.formatChanged(t,e=>l.setActive(!e),!0))):(l.setActive(et(a,s)),r.set(e.formatter.formatChanged(t,l.setActive,!1,{value:o})))};return e.initialized?a():e.on("init",a),r.clear},lp=e=>B(e,"menu"),lb=e=>W(e,e=>{let t=e.text||e.title||"";return lp(e)?{text:t,items:lb(e.menu)}:{text:t,value:e.value}}),lg=e=>e.length?x.some(lb([{text:"Select...",value:"mce-no-match"},...e])):x.none(),lh=(e,t,o,l)=>W(t,t=>{let r=t.text||t.title;return lp(t)?{type:"nestedmenuitem",text:r,getSubmenuItems:()=>lh(e,t.menu,o,l)}:{text:r,type:"togglemenuitem",onAction:()=>l(t.value),onSetup:lu(e,o,t.value)}}),lf=(e,t)=>o=>{e.execCommand("mceTableApplyCellStyle",!1,{[t]:o})},ly=e=>ee(e,e=>lp(e)?[{...e,menu:ly(e.menu)}]:tc(e.value)?[e]:[]),lw=(e,t,o,l)=>r=>r(lh(e,t,o,l)),lS=(e,t,o)=>{let l=W(t,e=>({text:e.title,value:"#"+ls(e.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:l.length>0?l:void 0,allowCustomColors:!1},onAction:t=>{let l="remove"===t.value?"":t.value;e.execCommand("mceTableApplyCellStyle",!1,{[o]:l})}}]},lC=e=>()=>{let t=e.queryCommandValue("mceTableRowType");e.execCommand("mceTableRowType",!1,{type:"header"===t?"body":"header"})},lT=e=>()=>{let t=e.queryCommandValue("mceTableColType");e.execCommand("mceTableColType",!1,{type:"th"===t?"td":"th"})},lv=e=>lg(od(e)).map(e=>({name:"class",type:"listbox",label:"Class",items:e})),lx=[{name:"width",type:"input",label:"Width"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:o3}],lA=e=>lx.concat(lv(e).toArray()),lR=(e,t)=>{let o=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(lb(or(e)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===t?[{name:"borderwidth",type:"input",label:"Border width"}].concat(o):o}},lO={normal:(e,t)=>{let o=e.dom;return{setAttrib:(e,l)=>{o.setAttrib(t,e,l)},setStyle:(e,l)=>{o.setStyle(t,e,l)},setFormat:(o,l)=>{""===l?e.formatter.remove(o,{value:null},t,!0):e.formatter.apply(o,{value:l},t)}}}},l_=eC("th"),lD=(e,t)=>e&&t?"sectionCells":e?"section":"cells",lI=e=>{let t="thead"===e.section,o=e7(lN(e.cells),"th");return"tfoot"===e.section?{type:"footer"}:t||o?{type:"header",subType:lD(t,o)}:{type:"body"}},lN=e=>{let t=K(e,e=>l_(e.element));return 0===t.length?x.some("td"):t.length===e.length?x.some("th"):x.none()},lM=e=>{let t=W(e,e=>lI(e).type),o=H(t,"header"),l=H(t,"footer");if(!o&&!l)return x.some("body");{let e=H(t,"body");return!o||e||l?o||e||!l?x.none():x.some("footer"):x.some("header")}},lP=e=>{let t,o=!1;return(...l)=>(o||(o=!0,t=e.apply(null,l)),t)},lk=(e,t)=>ea(e.all,e=>Y(e.cells,e=>ep(t,e.element))),lE=(e,t,o)=>{let l=te(W(t.selection,t=>tM(t).bind(t=>lk(e,t)).filter(o)));return tl(l.length>0,l)},lB=(e,t)=>t.mergable,lF=(e,t)=>t.unmergable,lq=(e,t)=>lE(e,t,v),lj=(e,t)=>lk(e,t).exists(e=>!e.isLocked),lL=(e,t)=>et(t,t=>lj(e,t)),lH=(e,t)=>lB(e,t).filter(t=>lL(e,t.cells)),lV=(e,t)=>lF(e,t).filter(t=>lL(e,t));({...({generate:e=>{if(!i(e))throw Error("cases must be an array");if(0===e.length)throw Error("there must be at least one case");let t=[],o={};return z(e,(l,r)=>{let n=A(l);if(1!==n.length)throw Error("one and only one name per case");let a=n[0],s=l[a];if(void 0!==o[a])throw Error("duplicate key detected:"+a);if("cata"===a)throw Error("cannot have a case named cata (sorry)");if(!i(s))throw Error("case arguments must be an array");t.push(a),o[a]=(...o)=>{let l=o.length;if(l!==s.length)throw Error("Wrong number of arguments to case "+a+". Expected "+s.length+" ("+s+"), got "+l);return{fold:(...t)=>{if(t.length!==e.length)throw Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);return t[r].apply(null,o)},match:e=>{let l=A(e);if(t.length!==l.length)throw Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+l.join(","));if(!et(t,e=>H(l,e)))throw Error("Not all branches were specified when using match. Specified: "+l.join(", ")+"\nRequired: "+t.join(", "));return e[a].apply(null,o)},log:e=>{console.log(e,{constructors:t,constructor:a,params:o})}}}}),o}}).generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])});let l$=(e,t)=>{let o=tU.fromTable(e);return lq(o,t).bind(e=>{let t=e[e.length-1],l=e[0].row,r=t.row+t.rowspan;return lM(o.all.slice(l,r))}).getOr("")},lW=e=>ts(e,"rgb")?li(e):e,lz=e=>{let t=ei.fromDom(e);return{borderwidth:ty(t,"border-width").getOr(""),borderstyle:ty(t,"border-style").getOr(""),bordercolor:ty(t,"border-color").map(lW).getOr(""),backgroundcolor:ty(t,"background-color").map(lW).getOr("")}},lU=e=>{let t=e[0];return z(e.slice(1),e=>{z(A(t),o=>{O(e,(e,l)=>{let r=t[o];""!==r&&o===l&&r!==e&&(t[o]="class"===o?"mce-no-match":"")})})}),t},lG=(e,t,o,l)=>Y(e,e=>!m(o.formatter.matchNode(l,t+e))).getOr(""),lK=S(lG,["left","center","right"],"align"),lJ=S(lG,["top","middle","bottom"],"valign"),lQ=(e,t)=>{let o=ow(e),l=oS(e),r=t?{borderstyle:k(o,"border-style").getOr(""),bordercolor:lW(k(o,"border-color").getOr("")),backgroundcolor:lW(k(o,"background-color").getOr(""))}:{};return{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:"",...o,...l,...r,...(()=>{let t=o["border-width"];return om(e)&&t?{border:t}:k(l,"border").fold(()=>({}),e=>({border:e}))})(),...(()=>{let e=k(o,"border-spacing").or(k(l,"cellspacing")).fold(()=>({}),e=>({cellspacing:e})),t=k(o,"border-padding").or(k(l,"cellpadding")).fold(()=>({}),e=>({cellpadding:e}));return{...e,...t}})()}},lX=e=>tE(ei.fromDom(e)).map(t=>l$(t,{selection:oU(e.cells)})).getOr(""),lY=(e,t,o)=>{let l=e.dom,r=om(e)?l.getStyle(t,"border-spacing")||l.getAttrib(t,"cellspacing"):l.getAttrib(t,"cellspacing")||l.getStyle(t,"border-spacing"),n=om(e)?tK(l,t,"padding")||l.getAttrib(t,"cellpadding"):l.getAttrib(t,"cellpadding")||tK(l,t,"padding");return{width:l.getStyle(t,"width")||l.getAttrib(t,"width"),height:l.getStyle(t,"height")||l.getAttrib(t,"height"),cellspacing:null!=r?r:"",cellpadding:null!=n?n:"",border:((t,o)=>{let l=ty(ei.fromDom(o),"border-width");return om(e)&&l.isSome()?l.getOr(""):t.getAttrib(o,"border")||tK(e.dom,o,"border-width")||tK(e.dom,o,"border")||""})(l,t),caption:!!l.select("caption",t)[0],class:l.getAttrib(t,"class",""),align:lK(e,t),...o?lz(t):{}}},lZ=(e,t,o)=>{let l=e.dom;return{height:l.getStyle(t,"height")||l.getAttrib(t,"height"),class:l.getAttrib(t,"class",""),type:lX(t),align:lK(e,t),...o?lz(t):{}}},l0=(e,t,o,l)=>{var r;let n=e.dom,a=l.getOr(t);return{width:(r="width",n.getStyle(a,r)||n.getAttrib(a,r)),scope:n.getAttrib(t,"scope"),celltype:ez(t),class:n.getAttrib(t,"class",""),halign:lK(e,t),valign:lJ(e,t),...o?lz(t):{}}},l1=(e,t)=>{let o=tU.fromTable(e);return W(K(tU.justCells(o),e=>V(t,t=>ep(e.element,t))),e=>({element:e.element.dom,column:tU.getColumnAt(o,e.column).map(e=>e.element.dom)}))},l2=(e,t,o,l)=>{l("scope")&&e.setAttrib("scope",o.scope),l("class")&&"mce-no-match"!==o.class&&e.setAttrib("class",o.class),l("width")&&t.setStyle("width",eJ(o.width))},l3=(e,t,o)=>{o("backgroundcolor")&&e.setFormat("tablecellbackgroundcolor",t.backgroundcolor),o("bordercolor")&&e.setFormat("tablecellbordercolor",t.bordercolor),o("borderstyle")&&e.setFormat("tablecellborderstyle",t.borderstyle),o("borderwidth")&&e.setFormat("tablecellborderwidth",eJ(t.borderwidth))},l4=(e,t,o,l)=>{let r=1===t.length;z(t,t=>{let n=t.element,a=r?v:l,s=lO.normal(e,n),i=t.column.map(t=>lO.normal(e,t)).getOr(s);l2(s,i,o,a),on(e)&&l3(s,o,a),l("halign")&&tJ(e,n,o.halign),l("valign")&&tQ(e,n,o.valign)})},l5=(e,t)=>{e.execCommand("mceTableCellType",!1,{type:t.celltype,no_events:!0})},l6=(e,t,o,l)=>{let r=I(l,(e,t)=>o[t]!==e);P(r)>0&&t.length>=1&&tE(t[0]).each(o=>{let n=l1(o,t),a=P(I(r,(e,t)=>"scope"!==t&&"celltype"!==t))>0,s=E(r,"celltype");(a||E(r,"scope"))&&l4(e,n,l,S(E,r)),s&&l5(e,l),tX(e,o.dom,{structure:s,style:a})})},l9=(e,t,o,l)=>{let r=l.getData();l.close(),e.undoManager.transact(()=>{l6(e,t,o,r),e.focus()})},l8=(e,t)=>lU(tE(t[0]).map(o=>W(l1(o,t),t=>l0(e,t.element,on(e),t.column))).getOrDie()),l7=e=>{let t=o1(e);if(0===t.length)return;let o=l8(e,t),l={type:"tabpanel",tabs:[{title:"General",name:"general",items:lA(e)},lR(e,"cell")]},r={type:"panel",items:[{type:"grid",columns:2,items:lA(e)}]};e.windowManager.open({title:"Cell Properties",size:"normal",body:on(e)?l:r,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o,onSubmit:S(l9,e,t,o)})},re=e=>lg(ou(e)).map(e=>({name:"class",type:"listbox",label:"Class",items:e})),rt=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],ro=e=>rt.concat(re(e).toArray()),rl=(e,t,o)=>{o("class")&&"mce-no-match"!==t.class&&e.setAttrib("class",t.class),o("height")&&e.setStyle("height",eJ(t.height))},rr=(e,t,o)=>{o("backgroundcolor")&&e.setStyle("background-color",t.backgroundcolor),o("bordercolor")&&e.setStyle("border-color",t.bordercolor),o("borderstyle")&&e.setStyle("border-style",t.borderstyle)},rn=(e,t,o,l)=>{let r=1===t.length?v:l;z(t,t=>{let n=e1(ei.fromDom(t),"td,th"),a=lO.normal(e,t);rl(a,o,r),oa(e)&&rr(a,o,r),l("height")&&z(n,t=>{e.dom.setStyle(t.dom,"height",null)}),l("align")&&tJ(e,t,o.align)})},ra=(e,t)=>{e.execCommand("mceTableRowType",!1,{type:t.type,no_events:!0})},rs=(e,t,o,l)=>{let r=I(l,(e,t)=>o[t]!==e);if(P(r)>0){let o=E(r,"type"),n=!o||P(r)>1;n&&rn(e,t,l,S(E,r)),o&&ra(e,l),tE(ei.fromDom(t[0])).each(t=>tX(e,t.dom,{structure:o,style:n}))}},ri=(e,t,o,l)=>{let r=l.getData();l.close(),e.undoManager.transact(()=>{rs(e,t,o,r),e.focus()})},rc=e=>{let t=o2(eQ(e),oQ.selected);if(0===t.length)return;let o=lU(W(t,t=>lZ(e,t.dom,oa(e)))),l={type:"tabpanel",tabs:[{title:"General",name:"general",items:ro(e)},lR(e,"row")]},r={type:"panel",items:[{type:"grid",columns:2,items:ro(e)}]};e.windowManager.open({title:"Row Properties",size:"normal",body:oa(e)?l:r,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o,onSubmit:S(ri,e,W(t,e=>e.dom),o)})},rm=(e,t,o)=>{let l=oi(e)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],r=t.length>0?[{name:"class",type:"listbox",label:"Class",items:t}]:[];return(o?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[]).concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(l).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(r)},rd=(e,t,o,l)=>{if("TD"===t.tagName||"TH"===t.tagName)s(o)&&u(l)?e.setStyle(t,o,l):e.setStyles(t,o);else if(t.children)for(let r=0;r<t.children.length;r++)rd(e,t.children[r],o,l)},ru=(e,t,o,l)=>{let r=e.dom,n={},a={},s=om(e),i=os(e),c=0===parseFloat(o.border);if(m(o.class)||"mce-no-match"===o.class||(n.class=o.class),a.height=eJ(o.height),s?a.width=eJ(o.width):r.getAttrib(t,"width")&&(n.width=eK(o.width)),s?(c?(n.border=0,a["border-width"]=""):(a["border-width"]=eJ(o.border),n.border=1),a["border-spacing"]=eJ(o.cellspacing)):(n.border=c?0:o.border,n.cellpadding=o.cellpadding,n.cellspacing=o.cellspacing),s&&t.children){let e={};if(c?e["border-width"]="":l.border&&(e["border-width"]=eJ(o.border)),l.cellpadding&&(e.padding=eJ(o.cellpadding)),i&&l.bordercolor&&(e["border-color"]=o.bordercolor),!F(e))for(let o=0;o<t.children.length;o++)rd(r,t.children[o],e)}i&&(a["background-color"]=o.backgroundcolor,a["border-color"]=o.bordercolor,a["border-style"]=o.borderstyle),r.setStyles(t,{...ow(e),...a}),r.setAttribs(t,{...oS(e),...n})},rp=(e,t,o,l)=>{let r=e.dom,n=l.getData(),a=I(n,(e,t)=>o[t]!==e);l.close(),e.undoManager.transact(()=>{if(!t){let o=td(n.cols).getOr(1),l=td(n.rows).getOr(1);e.execCommand("mceInsertTable",!1,{rows:l,columns:o}),t=o0(eQ(e),eG(e)).bind(t=>tE(t,eG(e))).map(e=>e.dom).getOrDie()}if(P(a)>0){let o={border:E(a,"border"),bordercolor:E(a,"bordercolor"),cellpadding:E(a,"cellpadding")};ru(e,t,n,o);let l=r.select("caption",t)[0];(l&&!n.caption||!l&&n.caption)&&e.execCommand("mceTableToggleCaption"),tJ(e,t,n.align)}if(e.focus(),e.addVisual(),P(a)>0){let o=E(a,"caption"),l=!o||P(a)>1;tX(e,t,{structure:o,style:l})}})},rb=(e,t)=>{let o;let l=e.dom,r=lQ(e,os(e));t?(r.cols="1",r.rows="1",os(e)&&(r.borderstyle="",r.bordercolor="",r.backgroundcolor="")):(o=l.getParent(e.selection.getStart(),"table",e.getBody()))?r=lY(e,o,os(e)):os(e)&&(r.borderstyle="",r.bordercolor="",r.backgroundcolor="");let n=lg(op(e));n.isSome()&&r.class&&(r.class=r.class.replace(/\s*mce\-item\-table\s*/g,""));let a={type:"grid",columns:2,items:rm(e,n.getOr([]),t)},s=os(e)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[a]},lR(e,"table")]}:{type:"panel",items:[a]};e.windowManager.open({title:"Table Properties",size:"normal",body:s,onSubmit:S(rp,e,o,r),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r})},rg=e=>{let t=t=>{eY(eQ(e))&&t()};O({mceTableProps:S(rb,e,!1),mceTableRowProps:S(rc,e),mceTableCellProps:S(l7,e),mceInsertTableDialog:S(rb,e,!0)},(o,l)=>e.addCommand(l,()=>t(o)))},rh=(e,t)=>ej(e,t).isSome(),rf=e=>{let t=(e,t)=>e6(e,t).exists(e=>parseInt(e,10)>1);return e.length>0&&et(e,e=>t(e,"rowspan")||t(e,"colspan"))?x.some(e):x.none()},ry=(e,t,o)=>t.length<=1?x.none():oz(e,o.firstSelectedSelector,o.lastSelectedSelector).map(e=>({bounds:e,cells:t})),rw=e=>({element:e,mergable:x.none(),unmergable:x.none(),selection:[e]}),rS=(e,t,o)=>({element:o,mergable:ry(t,e,oQ),unmergable:rf(e),selection:y(e)}),rC=e=>{let t=lc(x.none()),o=lc([]),l=x.none(),r=eC("caption"),n=e=>l.forall(t=>!t[e]),a=()=>oZ(eQ(e),eG(e)),s=()=>oZ(eX(e),eG(e)),i=()=>a().bind(t=>to(tt(tE(t),s().bind(tE),(o,l)=>ep(o,l)?r(t)?x.some(rw(t)):x.some(rS(o1(e),o,t)):x.none()))),c=e=>tE(e.element).map(t=>{let o=tU.fromTable(t),l=Q(lq(o,e).getOr([]),(e,t)=>(t.isLocked&&(e.onAny=!0,0===t.column?e.onFirst=!0:t.column+t.colspan>=o.grid.columns&&(e.onLast=!0)),e),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:lH(o,e).isSome(),unmergeable:lV(o,e).isSome(),locked:l}}),m=()=>{t.set(lP(i)()),l=t.get().bind(c),z(o.get(),C)},d=e=>(e(),o.set(o.get().concat([e])),()=>{o.set(K(o.get(),t=>t!==e))}),u=(o,l)=>d(()=>t.get().fold(()=>{o.setEnabled(!1)},t=>{o.setEnabled(!l(t)&&e.selection.isEditable())})),p=(o,l,r)=>d(()=>t.get().fold(()=>{o.setEnabled(!1),o.setActive(!1)},t=>{o.setEnabled(!l(t)&&e.selection.isEditable()),o.setActive(r(t))})),b=e=>l.exists(t=>t.locked[e]),g=(t,o)=>l=>p(l,e=>r(e.element),()=>e.queryCommandValue(t)===o),h=g("mceTableRowType","header"),f=g("mceTableColType","th");return e.on("NodeChange ExecCommand TableSelectorChange",m),{onSetupTable:e=>u(e,e=>!1),onSetupCellOrRow:e=>u(e,e=>r(e.element)),onSetupColumn:e=>t=>u(t,t=>r(t.element)||b(e)),onSetupPasteable:e=>t=>u(t,t=>r(t.element)||e().isNone()),onSetupPasteableColumn:(e,t)=>o=>u(o,o=>r(o.element)||e().isNone()||b(t)),onSetupMergeable:e=>u(e,e=>n("mergeable")),onSetupUnmergeable:e=>u(e,e=>n("unmergeable")),resetTargets:m,onSetupTableWithCaption:t=>p(t,T,t=>tE(t.element,eG(e)).exists(e=>rh(e,"caption"))),onSetupTableRowHeaders:h,onSetupTableColumnHeaders:f,targets:t.get}};var rT=tinymce.util.Tools.resolve("tinymce.FakeClipboard");let rv="x-tinymce/dom-table-",rx=rv+"rows",rA=rv+"columns",rR=e=>{var t;return ea(null!==(t=rT.read())&&void 0!==t?t:[],t=>x.from(t.getType(e)))},rO=()=>rR(rx),r_=()=>rR(rA),rD=e=>t=>{let o=()=>{t.setEnabled(e.selection.isEditable())};return e.on("NodeChange",o),o(),()=>{e.off("NodeChange",o)}},rI=(e,t)=>{e.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:rD(e),fetch:e=>e("inserttable | cell row column | advtablesort | tableprops deletetable")});let o=t=>()=>e.execCommand(t),l=(t,l)=>{e.queryCommandSupported(l.command)&&e.ui.registry.addButton(t,{...l,onAction:p(l.onAction)?l.onAction:o(l.command)})},r=(t,l)=>{e.queryCommandSupported(l.command)&&e.ui.registry.addToggleButton(t,{...l,onAction:p(l.onAction)?l.onAction:o(l.command)})};l("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:t.onSetupTable}),l("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:t.onSetupTable}),l("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:t.onSetupCellOrRow}),l("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:t.onSetupMergeable}),l("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:t.onSetupUnmergeable}),l("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:t.onSetupCellOrRow}),l("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:t.onSetupCellOrRow}),l("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:t.onSetupCellOrRow}),l("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:t.onSetupCellOrRow}),l("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:t.onSetupColumn("onFirst")}),l("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:t.onSetupColumn("onLast")}),l("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:t.onSetupColumn("onAny")}),l("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:t.onSetupCellOrRow}),l("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:t.onSetupCellOrRow}),l("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:t.onSetupPasteable(rO)}),l("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:t.onSetupPasteable(rO)}),l("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:t.onSetupColumn("onAny")}),l("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:t.onSetupColumn("onAny")}),l("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:t.onSetupPasteableColumn(r_,"onFirst")}),l("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:t.onSetupPasteableColumn(r_,"onLast")}),l("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:rD(e)});let n=ly(op(e));0!==n.length&&e.queryCommandSupported("mceTableToggleClass")&&e.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:lw(e,n,"tableclass",t=>e.execCommand("mceTableToggleClass",!1,t)),onSetup:t.onSetupTable});let a=ly(od(e));0!==a.length&&e.queryCommandSupported("mceTableCellToggleClass")&&e.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:lw(e,a,"tablecellclass",t=>e.execCommand("mceTableCellToggleClass",!1,t)),onSetup:t.onSetupCellOrRow}),e.queryCommandSupported("mceTableApplyCellStyle")&&(e.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:lw(e,o3,"tablecellverticalalign",lf(e,"vertical-align")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:lw(e,ol(e),"tablecellborderwidth",lf(e,"border-width")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:lw(e,or(e),"tablecellborderstyle",lf(e,"border-style")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:t=>t(lS(e,og(e),"background-color")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:t=>t(lS(e,oh(e),"border-color")),onSetup:t.onSetupCellOrRow})),r("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:t.onSetupTableWithCaption}),r("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:lC(e),onSetup:t.onSetupTableRowHeaders}),r("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:lT(e),onSetup:t.onSetupTableColumnHeaders})},rN=e=>{let t=ob(e);t.length>0&&e.ui.registry.addContextToolbar("table",{predicate:t=>e.dom.is(t,"table")&&e.getBody().contains(t)&&e.dom.isEditable(t.parentNode),items:t,scope:"node",position:"node"})},rM=e=>t=>{let o=()=>{t.setEnabled(e.selection.isEditable())};return e.on("NodeChange",o),o(),()=>{e.off("NodeChange",o)}},rP=(e,t)=>{let o=t=>()=>e.execCommand(t),l=(t,l)=>!!e.queryCommandSupported(l.command)&&(e.ui.registry.addMenuItem(t,{...l,onAction:p(l.onAction)?l.onAction:o(l.command)}),!0),r=(t,l)=>{e.queryCommandSupported(l.command)&&e.ui.registry.addToggleMenuItem(t,{...l,onAction:p(l.onAction)?l.onAction:o(l.command)})},n=t=>{e.execCommand("mceInsertTable",!1,{rows:t.numRows,columns:t.numColumns})},a=[l("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:t.onSetupCellOrRow}),l("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:t.onSetupCellOrRow}),l("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:t.onSetupCellOrRow}),l("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:t.onSetupCellOrRow}),l("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:t.onSetupCellOrRow}),l("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:t.onSetupCellOrRow}),l("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:t.onSetupPasteable(rO)}),l("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:t.onSetupPasteable(rO)})],s=[l("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:t.onSetupColumn("onFirst")}),l("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:t.onSetupColumn("onLast")}),l("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:t.onSetupColumn("onAny")}),l("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:t.onSetupColumn("onAny")}),l("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:t.onSetupColumn("onAny")}),l("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:t.onSetupPasteableColumn(r_,"onFirst")}),l("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:t.onSetupPasteableColumn(r_,"onLast")})],i=[l("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:t.onSetupCellOrRow}),l("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:t.onSetupMergeable}),l("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:t.onSetupUnmergeable})];oc(e)?e.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:n}],onSetup:rM(e)}):e.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:o("mceInsertTableDialog"),onSetup:rM(e)}),e.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:o("mceInsertTableDialog"),onSetup:rM(e)}),l("tableprops",{text:"Table properties",onSetup:t.onSetupTable,command:"mceTableProps"}),l("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:t.onSetupTable,command:"mceTableDelete"}),H(a,!0)&&e.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:f("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),H(s,!0)&&e.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:f("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),H(i,!0)&&e.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:f("tablecellprops tablemergecells tablesplitcells")}),e.ui.registry.addContextMenu("table",{update:()=>(t.resetTargets(),t.targets().fold(f(""),e=>"caption"===eb(e.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});let c=ly(op(e));0!==c.length&&e.queryCommandSupported("mceTableToggleClass")&&e.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>lh(e,c,"tableclass",t=>e.execCommand("mceTableToggleClass",!1,t)),onSetup:t.onSetupTable});let m=ly(od(e));0!==m.length&&e.queryCommandSupported("mceTableCellToggleClass")&&e.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>lh(e,m,"tablecellclass",t=>e.execCommand("mceTableCellToggleClass",!1,t)),onSetup:t.onSetupCellOrRow}),e.queryCommandSupported("mceTableApplyCellStyle")&&(e.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>lh(e,o3,"tablecellverticalalign",lf(e,"vertical-align")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>lh(e,ol(e),"tablecellborderwidth",lf(e,"border-width")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>lh(e,or(e),"tablecellborderstyle",lf(e,"border-style")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>lS(e,og(e),"background-color"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>lS(e,oh(e),"border-color"),onSetup:t.onSetupCellOrRow})),r("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:t.onSetupTableWithCaption}),r("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:lC(e),onSetup:t.onSetupTableRowHeaders}),r("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:lT(e),onSetup:t.onSetupTableRowHeaders})};o.add("table",e=>{let t=rC(e);ot(e),rg(e),rP(e,t),rI(e,t),rN(e)})}();