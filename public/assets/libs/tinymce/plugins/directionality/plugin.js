!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");let t=(e,t,o)=>{var r;return!!o(e,t.prototype)||(null===(r=e.constructor)||void 0===r?void 0:r.name)===t.name},o=e=>{let o=typeof e;return null===e?"null":"object"===o&&Array.isArray(e)?"array":"object"===o&&t(e,String,(e,t)=>t.isPrototypeOf(e))?"string":o},r=e=>t=>typeof t===e,n=e=>"string"===o(e),i=r("boolean"),l=e=>null==e,s=e=>!l(e),a=r("function"),d=r("number"),u=(e,t)=>o=>e(t(o)),m=()=>!1;class c{constructor(e,t){this.tag=e,this.value=t}static some(e){return new c(!0,e)}static none(){return c.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?c.some(e(this.value)):c.none()}bind(e){return this.tag?e(this.value):c.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:c.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(null!=e?e:"Called getOrDie on None")}static from(e){return s(e)?c.some(e):c.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}c.singletonNone=new c(!1);let h=(e,t)=>{let o=e.length,r=Array(o);for(let n=0;n<o;n++){let o=e[n];r[n]=t(o,n)}return r},g=(e,t)=>{for(let o=0,r=e.length;o<r;o++)t(e[o],o)},f=(e,t)=>{let o=[];for(let r=0,n=e.length;r<n;r++){let n=e[r];t(n,r)&&o.push(n)}return o},v=e=>{if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}},y={fromHtml:(e,t)=>{let o=(t||document).createElement("div");if(o.innerHTML=e,!o.hasChildNodes()||o.childNodes.length>1){let t="HTML does not have a single root node";throw console.error(t,e),Error(t)}return v(o.childNodes[0])},fromTag:(e,t)=>v((t||document).createElement(e)),fromText:(e,t)=>v((t||document).createTextNode(e)),fromDom:v,fromPoint:(e,t,o)=>c.from(e.dom.elementFromPoint(t,o)).map(v)},p=(e,t)=>{let o=e.dom;if(1!==o.nodeType)return!1;if(void 0!==o.matches)return o.matches(t);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(t);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(t);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(t);throw Error("Browser lacks native selectors")};"undefined"!=typeof window?window:Function("return this;")();let w=e=>e.dom.nodeName.toLowerCase(),N=e=>e.dom.nodeType,b=e=>t=>N(t)===e,D=b(1),S=b(3),T=b(9),E=b(11),A=e=>y.fromDom(e.dom.ownerDocument),C=e=>c.from(e.dom.parentNode).map(y.fromDom),M=e=>h(e.dom.childNodes,y.fromDom),L=(e,t,o)=>{if(n(o)||i(o)||d(o))e.setAttribute(t,o+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",o,":: Element ",e),Error("Attribute value was not simple")},O=(e,t,o)=>{L(e.dom,t,o)},k=(e,t)=>{e.dom.removeAttribute(t)},P=e=>E(e)&&s(e.dom.host),R=a(Element.prototype.attachShadow)&&a(Node.prototype.getRootNode)?e=>y.fromDom(e.dom.getRootNode()):e=>T(e)?e:A(e),x=e=>{let t=R(e);return P(t)?c.some(t):c.none()},B=e=>y.fromDom(e.dom.host),V=e=>{let t=S(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;let o=t.ownerDocument;return x(y.fromDom(t)).fold(()=>o.body.contains(t),u(V,B))},H=(e,t,o)=>{let r=e.dom,n=a(o)?o:m;for(;r.parentNode;){r=r.parentNode;let e=y.fromDom(r);if(t(e))return c.some(e);if(n(e))break}return c.none()},j=(e,t,o)=>H(e,e=>p(e,t),o),z=e=>void 0!==e.style&&a(e.style.getPropertyValue),F=(e,t)=>{let o=e.dom,r=window.getComputedStyle(o).getPropertyValue(t);return""!==r||V(e)?r:I(o,t)},I=(e,t)=>z(e)?e.style.getPropertyValue(t):"",K=e=>"rtl"===F(e,"direction")?"rtl":"ltr",U=(e,t)=>f(M(e),t),$=(e,t)=>U(e,e=>p(e,t)),q=e=>C(e).filter(D),G=(e,t)=>(t?j(e,"ol,ul"):c.some(e)).getOr(e),J=e=>D(e)&&"li"===w(e),Q=(e,t,o)=>{g(t,t=>{let r=y.fromDom(t),n=J(r),i=G(r,n);q(i).each(t=>{e.setStyle(i.dom,"direction",null),K(t)===o?k(i,"dir"):O(i,"dir",o),K(i)!==o&&e.setStyle(i.dom,"direction",o),n&&g($(i,"li[dir],li[style]"),t=>{k(t,"dir"),e.setStyle(t.dom,"direction",null)})})})},W=(e,t)=>{e.selection.isEditable()&&(Q(e.dom,e.selection.getSelectedBlocks(),t),e.nodeChanged())},X=e=>{e.addCommand("mceDirectionLTR",()=>{W(e,"ltr")}),e.addCommand("mceDirectionRTL",()=>{W(e,"rtl")})},Y=(e,t)=>o=>{let r=r=>{let n=y.fromDom(r.element);o.setActive(K(n)===t),o.setEnabled(e.selection.isEditable())};return e.on("NodeChange",r),o.setEnabled(e.selection.isEditable()),()=>e.off("NodeChange",r)},Z=e=>{e.ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:()=>e.execCommand("mceDirectionLTR"),onSetup:Y(e,"ltr")}),e.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:()=>e.execCommand("mceDirectionRTL"),onSetup:Y(e,"rtl")})};e.add("directionality",e=>{X(e),Z(e)})}();