!function(){"use strict";var e,t=tinymce.util.Tools.resolve("tinymce.PluginManager");let r=(e,t,r)=>{var n;return!!r(e,t.prototype)||(null===(n=e.constructor)||void 0===n?void 0:n.name)===t.name},n=e=>{let t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&r(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t},o=e=>t=>n(t)===e,l=e=>t=>typeof t===e,i=o("string"),s=o("object"),a=o("array"),d=l("boolean"),m=e=>null==e,u=e=>!m(e),c=l("function"),p=l("number"),f=()=>{},g=(e,t)=>r=>e(t(r)),h=e=>()=>e,y=(e,t)=>e===t,C=e=>t=>!e(t),b=h(!1);class v{constructor(e,t){this.tag=e,this.value=t}static some(e){return new v(!0,e)}static none(){return v.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?v.some(e(this.value)):v.none()}bind(e){return this.tag?e(this.value):v.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:v.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(null!=e?e:"Called getOrDie on None")}static from(e){return u(e)?v.some(e):v.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}v.singletonNone=new v(!1);let N=Array.prototype.slice,S=Array.prototype.indexOf,L=Array.prototype.push,D=(e,t)=>S.call(e,t),T=(e,t)=>D(e,t)>-1,O=(e,t)=>{for(let r=0,n=e.length;r<n;r++)if(t(e[r],r))return!0;return!1},E=(e,t)=>{let r=e.length,n=Array(r);for(let o=0;o<r;o++){let r=e[o];n[o]=t(r,o)}return n},k=(e,t)=>{for(let r=0,n=e.length;r<n;r++)t(e[r],r)},A=(e,t)=>{let r=[];for(let n=0,o=e.length;n<o;n++){let o=e[n];t(o,n)&&r.push(o)}return r},x=(e,t)=>{if(0===e.length)return[];{let r=t(e[0]),n=[],o=[];for(let l=0,i=e.length;l<i;l++){let i=e[l],s=t(i);s!==r&&(n.push(o),o=[]),r=s,o.push(i)}return 0!==o.length&&n.push(o),n}},w=(e,t,r)=>(k(e,(e,n)=>{r=t(r,e,n)}),r),B=(e,t,r)=>{for(let n=0,o=e.length;n<o;n++){let o=e[n];if(t(o,n))return v.some(o);if(r(o,n))break}return v.none()},P=(e,t)=>B(e,t,b),M=e=>{let t=[];for(let r=0,n=e.length;r<n;++r){if(!a(e[r]))throw Error("Arr.flatten item "+r+" was not an array, input: "+e);L.apply(t,e[r])}return t},I=(e,t)=>M(E(e,t)),R=e=>{let t=N.call(e,0);return t.reverse(),t},U=(e,t)=>t>=0&&t<e.length?v.some(e[t]):v.none(),$=e=>U(e,0),H=e=>U(e,e.length-1),F=(e,t)=>{let r=[],n=c(t)?e=>O(r,r=>t(r,e)):e=>T(r,e);for(let t=0,o=e.length;t<o;t++){let o=e[t];n(o)||r.push(o)}return r},_=(e,t,r=y)=>e.exists(e=>r(e,t)),V=(e,t,r=y)=>j(e,t,r).getOr(e.isNone()&&t.isNone()),j=(e,t,r)=>e.isSome()&&t.isSome()?v.some(r(e.getOrDie(),t.getOrDie())):v.none(),K=e=>{if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}},z={fromHtml:(e,t)=>{let r=(t||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){let t="HTML does not have a single root node";throw console.error(t,e),Error(t)}return K(r.childNodes[0])},fromTag:(e,t)=>K((t||document).createElement(e)),fromText:(e,t)=>K((t||document).createTextNode(e)),fromDom:K,fromPoint:(e,t,r)=>v.from(e.dom.elementFromPoint(t,r)).map(K)},Q=(e,t)=>{let r=e.dom;if(1!==r.nodeType)return!1;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw Error("Browser lacks native selectors")},W=(e,t)=>e.dom===t.dom,q=(e,t)=>{let r=e.dom,n=t.dom;return r!==n&&r.contains(n)},Z="undefined"!=typeof window?window:Function("return this;")(),G=(e,t)=>{let r=null!=t?t:Z;for(let t=0;t<e.length&&null!=r;++t)r=r[e[t]];return r},J=(e,t)=>G(e.split("."),t),X=(e,t)=>J(e,t),Y=(e,t)=>{let r=X(e,t);if(null==r)throw Error(e+" not available on this browser");return r},ee=Object.getPrototypeOf,et=e=>Y("HTMLElement",e),er=e=>{let t=J("ownerDocument.defaultView",e);return s(e)&&(et(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(ee(e).constructor.name))},en=e=>e.dom.nodeName.toLowerCase(),eo=e=>e.dom.nodeType,el=e=>t=>eo(t)===e,ei=e=>8===eo(e)||"#comment"===en(e),es=e=>ea(e)&&er(e.dom),ea=el(1),ed=el(3),em=el(9),eu=el(11),ec=e=>t=>ea(t)&&en(t)===e,ep=e=>z.fromDom(e.dom.ownerDocument),ef=e=>v.from(e.dom.parentNode).map(z.fromDom),eg=e=>v.from(e.dom.parentElement).map(z.fromDom),eh=e=>v.from(e.dom.nextSibling).map(z.fromDom),ey=e=>E(e.dom.childNodes,z.fromDom),eC=(e,t)=>{let r=e.dom.childNodes;return v.from(r[t]).map(z.fromDom)},eb=e=>eC(e,0),ev=e=>eC(e,e.dom.childNodes.length-1),eN=e=>eu(e)&&u(e.dom.host),eS=c(Element.prototype.attachShadow)&&c(Node.prototype.getRootNode)?e=>z.fromDom(e.dom.getRootNode()):e=>em(e)?e:ep(e),eL=e=>{let t=eS(e);return eN(t)?v.some(t):v.none()},eD=e=>z.fromDom(e.dom.host),eT=e=>{let t=ed(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;let r=t.ownerDocument;return eL(z.fromDom(t)).fold(()=>r.body.contains(t),g(eT,eD))};var eO=(e,t,r,n,o)=>e(r,n)?v.some(r):c(o)&&o(r)?v.none():t(r,n,o);let eE=(e,t,r)=>{let n=e.dom,o=c(r)?r:b;for(;n.parentNode;){n=n.parentNode;let e=z.fromDom(n);if(t(e))return v.some(e);if(o(e))break}return v.none()},ek=(e,t,r)=>eO((e,t)=>t(e),eE,e,t,r),eA=(e,t,r)=>eE(e,e=>Q(e,t),r),ex=(e,t,r)=>eO((e,t)=>Q(e,t),eA,e,t,r),ew=e=>ex(e,"[contenteditable]"),eB=(e,t=!1)=>eT(e)?e.dom.isContentEditable:ew(e).fold(h(t),e=>"true"===eP(e)),eP=e=>e.dom.contentEditable,eM=(e,t)=>{ef(e).each(r=>{r.dom.insertBefore(t.dom,e.dom)})},eI=(e,t)=>{eh(e).fold(()=>{ef(e).each(e=>{eU(e,t)})},e=>{eM(e,t)})},eR=(e,t)=>{eb(e).fold(()=>{eU(e,t)},r=>{e.dom.insertBefore(t.dom,r.dom)})},eU=(e,t)=>{e.dom.appendChild(t.dom)},e$=(e,t)=>{k(t,t=>{eM(e,t)})},eH=(e,t)=>{k(t,t=>{eU(e,t)})},eF=e=>{e.dom.textContent="",k(ey(e),e=>{e_(e)})},e_=e=>{let t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)};var eV=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),ej=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),eK=tinymce.util.Tools.resolve("tinymce.util.VK");let ez=e=>E(e,z.fromDom),eQ=Object.keys,eW=(e,t)=>{let r=eQ(e);for(let n=0,o=r.length;n<o;n++){let o=r[n];t(e[o],o)}},eq=e=>(t,r)=>{e[r]=t},eZ=(e,t,r,n)=>{eW(e,(e,o)=>{(t(e,o)?r:n)(e,o)})},eG=(e,t)=>{let r={};return eZ(e,t,eq(r),f),r},eJ=(e,t,r)=>{if(i(r)||d(r)||p(r))e.setAttribute(t,r+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),Error("Attribute value was not simple")},eX=(e,t)=>{let r=e.dom;eW(t,(e,t)=>{eJ(r,t,e)})},eY=e=>w(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),e0=(e,t)=>z.fromDom(e.dom.cloneNode(t)),e1=e=>e0(e,!0),e2=(e,t)=>{let r=z.fromTag(t);return eX(r,eY(e)),r},e3=(e,t)=>{let r=e2(e,t);return eI(e,r),eH(r,ey(e)),e_(e),r};var e6=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),e4=tinymce.util.Tools.resolve("tinymce.util.Tools");let e5=e=>t=>u(t)&&t.nodeName.toLowerCase()===e,e9=e=>t=>u(t)&&e.test(t.nodeName),e8=e=>u(e)&&3===e.nodeType,e7=e=>u(e)&&1===e.nodeType,te=e9(/^(OL|UL|DL)$/),tt=e9(/^(OL|UL)$/),tr=e5("ol"),tn=e9(/^(LI|DT|DD)$/),to=e9(/^(DT|DD)$/),tl=e9(/^(TH|TD)$/),ti=e5("br"),ts=e=>{var t;return(null===(t=e.parentNode)||void 0===t?void 0:t.firstChild)===e},ta=(e,t)=>u(t)&&t.nodeName in e.schema.getTextBlockElements(),td=(e,t)=>u(e)&&e.nodeName in t,tm=(e,t)=>u(t)&&t.nodeName in e.schema.getVoidElements(),tu=(e,t)=>!!ti(t)&&e.isBlock(t.nextSibling)&&!ti(t.previousSibling),tc=(e,t,r)=>{let n=e.isEmpty(t);return(!r||!(e.select("span[data-mce-type=bookmark]",t).length>0))&&n},tp=(e,t)=>e.isChildOf(t,e.getRoot()),tf=e=>t=>t.options.get(e),tg=e=>{(0,e.options.register)("lists_indent_on_tab",{processor:"boolean",default:!0})},th=tf("lists_indent_on_tab"),ty=tf("forced_root_block"),tC=tf("forced_root_block_attrs"),tb=(e,t)=>{let r,n;let o=e.dom,l=e.schema.getBlockElements(),i=o.createFragment(),s=ty(e),a=tC(e),d=!1;for(n=o.create(s,a),td(t.firstChild,l)||i.appendChild(n);r=t.firstChild;){let e=r.nodeName;d||"SPAN"===e&&"bookmark"===r.getAttribute("data-mce-type")||(d=!0),td(r,l)?(i.appendChild(r),n=null):(n||(n=o.create(s,a),i.appendChild(n)),n.appendChild(r))}return!d&&n&&n.appendChild(o.create("br",{"data-mce-bogus":"1"})),i},tv=e6.DOM,tN=(e,t,r)=>{let n=tv.select('span[data-mce-type="bookmark"]',t),o=tb(e,r),l=tv.createRng();l.setStartAfter(r),l.setEndAfter(t);let i=l.extractContents();for(let t=i.firstChild;t;t=t.firstChild)if("LI"===t.nodeName&&e.dom.isEmpty(t)){tv.remove(t);break}e.dom.isEmpty(i)||tv.insertAfter(i,t),tv.insertAfter(o,t);let s=r.parentElement;s&&tc(e.dom,s)&&(e=>{let t=e.parentNode;t&&e4.each(n,e=>{t.insertBefore(e,r.parentNode)}),tv.remove(e)})(s),tv.remove(r),tc(e.dom,t)&&tv.remove(t)},tS=ec("dd"),tL=ec("dt"),tD=(e,t)=>{tS(t)?e3(t,"dt"):tL(t)&&eg(t).each(r=>tN(e,r.dom,t.dom))},tT=e=>{tL(e)&&e3(e,"dd")},tO=(e,t,r)=>{"Indent"===t?k(r,tT):k(r,t=>tD(e,t))},tE=(e,t)=>{if(e8(e))return{container:e,offset:t};let r=eV.getNode(e,t);return e8(r)?{container:r,offset:t>=e.childNodes.length?r.data.length:0}:r.previousSibling&&e8(r.previousSibling)?{container:r.previousSibling,offset:r.previousSibling.data.length}:r.nextSibling&&e8(r.nextSibling)?{container:r.nextSibling,offset:0}:{container:e,offset:t}},tk=e=>{let t=e.cloneRange(),r=tE(e.startContainer,e.startOffset);t.setStart(r.container,r.offset);let n=tE(e.endContainer,e.endOffset);return t.setEnd(n.container,n.offset),t},tA=["OL","UL","DL"],tx=tA.join(","),tw=(e,t)=>{let r=t||e.selection.getStart(!0);return e.dom.getParent(r,tx,tF(e,r))},tB=(e,t)=>u(e)&&1===t.length&&t[0]===e,tP=e=>A(e.querySelectorAll(tx),te),tM=e=>{let t=tw(e),r=e.selection.getSelectedBlocks();return tB(t,r)?tP(t):A(r,e=>te(e)&&t!==e)},tI=(e,t)=>F(e4.map(t,t=>e.dom.getParent(t,"li,dd,dt",tF(e,t))||t)),tR=e=>{let t=e.selection.getSelectedBlocks();return A(tI(e,t),tn)},tU=e=>A(tR(e),to),t$=(e,t)=>{let r=e.dom.getParents(t,"TD,TH");return r.length>0?r[0]:e.getBody()},tH=(e,t)=>!te(t)&&!tn(t)&&O(tA,r=>e.isValidChild(t.nodeName,r)),tF=(e,t)=>{let r=e.dom.getParents(t,e.dom.isBlock),n=t=>t.nodeName.toLowerCase()!==ty(e);return P(r,t=>n(t)&&tH(e.schema,t)).getOr(e.getBody())},t_=e=>ef(e).exists(e=>tn(e.dom)&&eb(e).exists(e=>!te(e.dom))&&ev(e).exists(e=>!te(e.dom))),tV=(e,t)=>H(e.dom.getParents(t,"ol,ul",tF(e,t))),tj=e=>{let t=tV(e,e.selection.getStart()),r=A(e.selection.getSelectedBlocks(),tt);return t.toArray().concat(r)},tK=e=>{let t=e.selection.getStart();return e.dom.getParents(t,"ol,ul",tF(e,t))},tz=e=>{let t=tj(e);return P(tK(e),e=>t_(z.fromDom(e))).fold(()=>tQ(e,t),e=>[e])},tQ=(e,t)=>F(E(t,t=>tV(e,t).getOr(t))),tW=e=>/\btox\-/.test(e.className),tq=(e,t)=>B(e,te,tl).exists(e=>e.nodeName===t&&!tW(e)),tZ=(e,t)=>null!==t&&!e.dom.isEditable(t),tG=e=>{let t=tw(e);return tZ(e,t)},tJ=(e,t)=>{let r=e.dom.getParent(t,"ol,ul,dl");return tZ(e,r)},tX=(e,t)=>{let r=e.selection.getNode();return t({parents:e.dom.getParents(r),element:r}),e.on("NodeChange",t),()=>e.off("NodeChange",t)},tY=(e,t)=>{let r=(t||document).createDocumentFragment();return k(e,e=>{r.appendChild(e.dom)}),z.fromDom(r)},t0=(e,t,r)=>e.dispatch("ListMutation",{action:t,element:r}),t1=(e=/^\s+|\s+$/g,t=>t.replace(e,"")),t2=e=>e.length>0,t3=e=>!t2(e),t6=e=>void 0!==e.style&&c(e.style.getPropertyValue),t4=(e,t,r)=>{if(!i(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),Error("CSS value must be a string: "+r);t6(e)&&e.style.setProperty(t,r)},t5=(e,t,r)=>{t4(e.dom,t,r)},t9=e=>Q(e,"OL,UL"),t8=e=>Q(e,"LI"),t7=e=>eb(e).exists(t9),re=e=>ev(e).exists(t9),rt=e=>"listAttributes"in e,rr=e=>"isComment"in e,rn=e=>"isFragment"in e,ro=e=>e.depth>0,rl=e=>e.isSelected,ri=e=>{let t=ey(e);return E(re(e)?t.slice(0,-1):t,e1)},rs=(e,t,r)=>ef(e).filter(ea).map(n=>({depth:t,dirty:!1,isSelected:r,content:ri(e),itemAttributes:eY(e),listAttributes:eY(n),listType:en(n),isInPreviousLi:!1})),ra=(e,t)=>{eU(e.item,t.list)},rd=e=>{for(let t=1;t<e.length;t++)ra(e[t-1],e[t])},rm=(e,t)=>{j(H(e),$(t),ra)},ru=(e,t)=>{let r={list:z.fromTag(t,e),item:z.fromTag("li",e)};return eU(r.list,r.item),r},rc=(e,t,r)=>{let n=[];for(let o=0;o<r;o++)n.push(ru(e,rt(t)?t.listType:t.parentListType));return n},rp=(e,t)=>{for(let t=0;t<e.length-1;t++)t5(e[t].item,"list-style-type","none");H(e).each(e=>{rt(t)&&(eX(e.list,t.listAttributes),eX(e.item,t.itemAttributes)),eH(e.item,t.content)})},rf=(e,t)=>{en(e.list)!==t.listType&&(e.list=e3(e.list,t.listType)),eX(e.list,t.listAttributes)},rg=(e,t,r)=>{let n=z.fromTag("li",e);return eX(n,t),eH(n,r),n},rh=(e,t)=>{eU(e.list,t),e.item=t},ry=(e,t,r)=>{let n=t.slice(0,r.depth);return H(n).each(t=>{if(rt(r))rh(t,rg(e,r.itemAttributes,r.content)),rf(t,r);else if(rn(r))eH(t.item,r.content);else{let e=z.fromHtml(`<!--${r.content}-->`);eU(t.list,e)}}),n},rC=(e,t,r)=>{let n=rc(e,r,r.depth-t.length);return rd(n),rp(n,r),rm(t,n),t.concat(n)},rb=(e,t)=>{let r=v.none(),n=w(t,(t,n,o)=>rr(n)?0===o?(r=v.some(n),t):ry(e,t,n):n.depth>t.length?rC(e,t,n):ry(e,t,n),[]);return r.each(e=>{let t=z.fromHtml(`<!--${e.content}-->`);$(n).each(e=>{eR(e.list,t)})}),$(n).map(e=>e.list)},rv=(e,t)=>{switch(e){case"Indent":t.depth++;break;case"Outdent":t.depth--;break;case"Flatten":t.depth=0}t.dirty=!0},rN=(e,t)=>{rt(e)&&rt(t)&&(e.listType=t.listType,e.listAttributes={...t.listAttributes})},rS=e=>{e.listAttributes=eG(e.listAttributes,(e,t)=>"start"!==t)},rL=(e,t)=>{let r=e[t].depth,n=e=>e.depth===r&&!e.dirty,o=e=>e.depth<r;return B(R(e.slice(0,t)),n,o).orThunk(()=>B(e.slice(t+1),n,o))},rD=e=>(k(e,(t,r)=>{rL(e,r).fold(()=>{t.dirty&&rt(t)&&rS(t)},e=>rN(t,e))}),e),rT=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},rO=(e,t,r,n)=>{var o;if(ei(n))return[{depth:e+1,content:null!==(o=n.dom.nodeValue)&&void 0!==o?o:"",dirty:!1,isSelected:!1,isComment:!0}];t.each(e=>{W(e.start,n)&&r.set(!0)});let l=rs(n,e,r.get());t.each(e=>{W(e.end,n)&&r.set(!1)});let i=ev(n).filter(t9).map(n=>rk(e,t,r,n)).getOr([]);return l.toArray().concat(i)},rE=(e,t,r,n)=>eb(n).filter(t9).fold(()=>rO(e,t,r,n),o=>{let l=w(ey(n),(n,l,i)=>{if(0===i)return n;if(t8(l))return n.concat(rO(e,t,r,l));{let t={isFragment:!0,depth:e,content:[l],isSelected:!1,dirty:!1,parentListType:en(o)};return n.concat(t)}},[]);return rk(e,t,r,o).concat(l)}),rk=(e,t,r,n)=>I(ey(n),n=>(t9(n)?rk:rE)(e+1,t,r,n)),rA=(e,t)=>{let r=rT(!1);return E(e,e=>({sourceList:e,entries:rk(0,t,r,e)}))},rx=(e,t)=>E(rD(t),t=>{let r=rr(t)?tY([z.fromHtml(`<!--${t.content}-->`)]):tY(t.content);return z.fromDom(tb(e,r.dom))}),rw=(e,t)=>{let r=rD(t);return rb(e.contentDocument,r).toArray()},rB=(e,t)=>I(x(t,ro),t=>$(t).exists(ro)?rw(e,t):rx(e,t)),rP=(e,t)=>{k(A(e,rl),e=>rv(t,e))},rM=e=>{let t=E(tR(e),z.fromDom);return j(P(t,C(t7)),P(R(t),C(t7)),(e,t)=>({start:e,end:t}))},rI=(e,t,r)=>{k(rA(t,rM(e)),t=>{rP(t.entries,r);let n=rB(e,t.entries);k(n,t=>{t0(e,"Indent"===r?"IndentList":"OutdentList",t.dom)}),e$(t.sourceList,n),e_(t.sourceList)})},rR=(e,t)=>{let r=ez(tz(e)),n=ez(tU(e)),o=!1;if(r.length||n.length){let l=e.selection.getBookmark();rI(e,r,t),tO(e,t,n),e.selection.moveToBookmark(l),e.selection.setRng(tk(e.selection.getRng())),e.nodeChanged(),o=!0}return o},rU=(e,t)=>!tG(e)&&rR(e,t),r$=e=>rU(e,"Indent"),rH=e=>rU(e,"Outdent"),rF=e=>rU(e,"Flatten"),r_=e=>"\uFEFF"===e,rV=(e,t,r)=>eE(e,t,r).isSome(),rj=(e,t)=>rV(e,function(e,...t){return(...r)=>{let n=t.concat(r);return e.apply(null,n)}}(W,t));var rK=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");let rz=e6.DOM,rQ=e=>{let t={},r=r=>{let n=e[r?"startContainer":"endContainer"],o=e[r?"startOffset":"endOffset"];if(e7(n)){let e=rz.create("span",{"data-mce-type":"bookmark"});n.hasChildNodes()?(o=Math.min(o,n.childNodes.length-1),r?n.insertBefore(e,n.childNodes[o]):rz.insertAfter(e,n.childNodes[o])):n.appendChild(e),n=e,o=0}t[r?"startContainer":"endContainer"]=n,t[r?"startOffset":"endOffset"]=o};return r(!0),e.collapsed||r(),t},rW=e=>{let t=t=>{let r=e[t?"startContainer":"endContainer"],n=e[t?"startOffset":"endOffset"];if(r){if(e7(r)&&r.parentNode){let e=r;n=(e=>{var t;let r=null===(t=e.parentNode)||void 0===t?void 0:t.firstChild,n=0;for(;r;){if(r===e)return n;(!e7(r)||"bookmark"!==r.getAttribute("data-mce-type"))&&n++,r=r.nextSibling}return -1})(r),r=r.parentNode,rz.remove(e),!r.hasChildNodes()&&rz.isBlock(r)&&r.appendChild(rz.create("br"))}e[t?"startContainer":"endContainer"]=r,e[t?"startOffset":"endOffset"]=n}};t(!0),t();let r=rz.createRng();return r.setStart(e.startContainer,e.startOffset),e.endContainer&&r.setEnd(e.endContainer,e.endOffset),tk(r)},rq=e=>{switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},rZ=(e,t,r)=>{let n=r["list-style-type"]?r["list-style-type"]:null;e.setStyle(t,"list-style-type",n)},rG=(e,t)=>{e4.each(t,(t,r)=>{e.setAttribute(r,t)})},rJ=(e,t,r)=>{rG(t,r["list-attributes"]),e4.each(e.select("li",t),e=>{rG(e,r["list-item-attributes"])})},rX=(e,t,r)=>{rZ(e,t,r),rJ(e,t,r)},rY=(e,t,r)=>{e4.each(r,r=>e.setStyle(t,r,""))},r0=(e,t)=>u(t)&&!td(t,e.schema.getBlockElements()),r1=(e,t,r,n)=>{let o=t[r?"startContainer":"endContainer"],l=t[r?"startOffset":"endOffset"];e7(o)&&(o=o.childNodes[Math.min(l,o.childNodes.length-1)]||o),!r&&ti(o.nextSibling)&&(o=o.nextSibling);let i=t=>{for(;!e.dom.isBlock(t)&&t.parentNode&&n!==t;)t=t.parentNode;return t},s=(t,r)=>{var n;let o;let l=new ej(t,i(t)),s=r?"next":"prev";for(;o=l[s]();)if(!(tm(e,o)||r_(o.textContent)||(null===(n=o.textContent)||void 0===n?void 0:n.length)===0))return v.some(o);return v.none()};if(r&&e8(o)){if(r_(o.textContent))o=s(o,!1).getOr(o);else for(null!==o.parentNode&&r0(e,o.parentNode)&&(o=o.parentNode);null!==o.previousSibling&&(r0(e,o.previousSibling)||e8(o.previousSibling));)o=o.previousSibling}if(!r&&e8(o)){if(r_(o.textContent))o=s(o,!0).getOr(o);else for(null!==o.parentNode&&r0(e,o.parentNode)&&(o=o.parentNode);null!==o.nextSibling&&(r0(e,o.nextSibling)||e8(o.nextSibling));)o=o.nextSibling}for(;o.parentNode!==n;){let t=o.parentNode;if(ta(e,o)||/^(TD|TH)$/.test(t.nodeName))break;o=t}return o},r2=(e,t,r)=>{let n;let o=[],l=e.dom,i=r1(e,t,!0,r),s=r1(e,t,!1,r),a=[];for(let e=i;e&&(a.push(e),e!==s);e=e.nextSibling);return e4.each(a,t=>{var i;if(ta(e,t)){o.push(t),n=null;return}if(l.isBlock(t)||ti(t)){ti(t)&&l.remove(t),n=null;return}let s=t.nextSibling;if(rK.isBookmarkNode(t)&&(te(s)||ta(e,s)||!s&&t.parentNode===r)){n=null;return}n||(n=l.create("p"),null===(i=t.parentNode)||void 0===i||i.insertBefore(n,t),o.push(n)),n.appendChild(t)}),o},r3=(e,t,r)=>{let n=e.getStyle(t,"list-style-type"),o=r?r["list-style-type"]:"";return n===(o=null===o?"":o)},r6=(e,t)=>{let r=e.selection.getStart(!0),n=r1(e,t,!0,e.getBody());return rj(z.fromDom(n),z.fromDom(t.commonAncestorContainer))?t.commonAncestorContainer:r},r4=(e,t,r)=>{let n=e.selection.getRng(),o="LI",l=tF(e,r6(e,n)),i=e.dom;if("false"===i.getContentEditable(e.selection.getNode()))return;"DL"===(t=t.toUpperCase())&&(o="DT");let s=rQ(n),a=A(r2(e,n,l),e.dom.isEditable);e4.each(a,n=>{let l;let s=n.previousSibling,a=n.parentNode;tn(a)||(s&&te(s)&&s.nodeName===t&&r3(i,s,r)?(l=s,n=i.rename(n,o),s.appendChild(n)):(l=i.create(t),a.insertBefore(l,n),l.appendChild(n),n=i.rename(n,o)),rY(i,n,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),rX(i,l,r),ne(e.dom,l))}),e.selection.setRng(rW(s))},r5=(e,t)=>te(e)&&e.nodeName===(null==t?void 0:t.nodeName),r9=(e,t,r)=>e.getStyle(t,"list-style-type",!0)===e.getStyle(r,"list-style-type",!0),r8=(e,t)=>e.className===t.className,r7=(e,t,r)=>r5(t,r)&&r9(e,t,r)&&r8(t,r),ne=(e,t)=>{let r;let n=t.nextSibling;if(r7(e,t,n)){let o=n;for(;r=o.firstChild;)t.appendChild(r);e.remove(o)}if(n=t.previousSibling,r7(e,t,n)){let o=n;for(;r=o.lastChild;)t.insertBefore(r,t.firstChild);e.remove(o)}},nt=(e,t,r,n)=>{if(t.nodeName!==r){let o=e.dom.rename(t,r);rX(e.dom,o,n),t0(e,rq(r),o)}else rX(e.dom,t,n),t0(e,rq(r),t)},nr=(e,t,r,n)=>{if(t.classList.forEach((e,r,n)=>{e.startsWith("tox-")&&(n.remove(e),0===n.length&&t.removeAttribute("class"))}),t.nodeName!==r){let o=e.dom.rename(t,r);rX(e.dom,o,n),t0(e,rq(r),o)}else rX(e.dom,t,n),t0(e,rq(r),t)},nn=(e,t,r,n,o)=>{let l=te(t);if(!l||t.nodeName!==n||no(o)||tW(t)){r4(e,n,o);let i=rQ(e.selection.getRng()),s=l?[t,...r]:r,a=l&&tW(t)?nr:nt;e4.each(s,t=>{a(e,t,n,o)}),e.selection.setRng(rW(i))}else rF(e)},no=e=>"list-style-type"in e,nl=(e,t,r,n)=>{if(t!==e.getBody()){if(t){if(t.nodeName!==r||no(n)||tW(t)){let o=rQ(e.selection.getRng());tW(t)&&t.classList.forEach((e,r,n)=>{e.startsWith("tox-")&&(n.remove(e),0===n.length&&t.removeAttribute("class"))}),rX(e.dom,t,n);let l=e.dom.rename(t,r);ne(e.dom,l),e.selection.setRng(rW(o)),r4(e,r,n),t0(e,rq(r),l)}else rF(e)}else r4(e,r,n),t0(e,rq(r),t)}},ni=(e,t,r)=>{let n=tw(e);if(tJ(e,n))return;let o=tM(e),l=s(r)?r:{};o.length>0?nn(e,n,o,t,l):nl(e,n,t,l)},ns=e6.DOM,na=(e,t)=>{let r=t.parentElement;if(r&&"LI"===r.nodeName&&r.firstChild===t){let n=r.previousSibling;n&&"LI"===n.nodeName?(n.appendChild(t),tc(e,r)&&ns.remove(r)):ns.setStyle(r,"listStyleType","none")}if(te(r)){let e=r.previousSibling;e&&"LI"===e.nodeName&&e.appendChild(t)}},nd=(e,t)=>{let r=e4.grep(e.select("ol,ul",t));e4.each(r,t=>{na(e,t)})},nm=(e,t,r,n)=>{let o=t.startContainer,l=t.startOffset;if(e8(o)&&(r?l<o.data.length:l>0))return o;let i=e.schema.getNonEmptyElements();e7(o)&&(o=eV.getNode(o,l));let s=new ej(o,n);r&&tu(e.dom,o)&&s.next();let a=r?s.next.bind(s):s.prev2.bind(s);for(;o=a();)if("LI"===o.nodeName&&!o.hasChildNodes()||i[o.nodeName]||e8(o)&&o.data.length>0)return o;return null},nu=(e,t)=>{let r=t.childNodes;return 1===r.length&&!te(r[0])&&e.isBlock(r[0])},nc=e=>v.from(e).map(z.fromDom).filter(es).exists(e=>eB(e)&&!T(["details"],en(e))),np=(e,t)=>{nu(e,t)&&nc(t.firstChild)&&e.remove(t.firstChild,!0)},nf=(e,t,r)=>{let n;let o=nu(e,r)?r.firstChild:r;if(np(e,t),!tc(e,t,!0))for(;n=t.firstChild;)o.appendChild(n)},ng=(e,t,r)=>{let n;let o=t.parentNode;if(!tp(e,t)||!tp(e,r))return;te(r.lastChild)&&(n=r.lastChild),o===r.lastChild&&ti(o.previousSibling)&&e.remove(o.previousSibling);let l=r.lastChild;l&&ti(l)&&t.hasChildNodes()&&e.remove(l),tc(e,r,!0)&&eF(z.fromDom(r)),nf(e,t,r),n&&r.appendChild(n);let i=q(z.fromDom(r),z.fromDom(t))?e.getParents(t,te,r):[];e.remove(t),k(i,t=>{tc(e,t)&&t!==e.getRoot()&&e.remove(t)})},nh=(e,t,r)=>{eF(z.fromDom(r)),ng(e.dom,t,r),e.selection.setCursorLocation(r,0)},ny=(e,t,r,n)=>{let o=e.dom;if(o.isEmpty(n))nh(e,r,n);else{let l=rQ(t);ng(o,r,n),e.selection.setRng(rW(l))}},nC=(e,t,r,n)=>{let o=rQ(t);ng(e.dom,r,n);let l=rW(o);e.selection.setRng(l)},nb=(e,t)=>{let r=e.dom,n=e.selection,o=t$(e,n.getStart()),l=r.getParent(n.getStart(),"LI",o);if(l){let i=l.parentElement;if(i===e.getBody()&&tc(r,i))return!0;let s=tk(n.getRng()),a=r.getParent(nm(e,s,t,o),"LI",o),d=a&&(t?r.isChildOf(l,a):r.isChildOf(a,l));if(a&&a!==l&&!d)return e.undoManager.transact(()=>{t?ny(e,s,a,l):ts(l)?rH(e):nC(e,s,l,a)}),!0;if(d&&!t&&a!==l)return e.undoManager.transact(()=>{if(s.commonAncestorContainer.parentElement){let t=rQ(s),n=s.commonAncestorContainer.parentElement;nf(r,s.commonAncestorContainer.parentElement,a),n.remove();let o=rW(t);e.selection.setRng(o)}}),!0;if(!a&&!t&&0===s.startOffset&&0===s.endOffset)return e.undoManager.transact(()=>{rF(e)}),!0}return!1},nv=(e,t,r)=>{let n=e.getParent(t.parentNode,e.isBlock,r);e.remove(t),n&&e.isEmpty(n)&&e.remove(n)},nN=(e,t)=>{let r=e.dom,n=e.selection.getStart(),o=t$(e,n),l=r.getParent(n,r.isBlock,o);if(l&&r.isEmpty(l,void 0,{checkRootAsContent:!0})){let n=tk(e.selection.getRng()),i=r.getParent(nm(e,n,t,o),"LI",o);if(i){let s=e=>T(["td","th","caption"],en(e)),a=e=>e.dom===o;return!!V(ek(z.fromDom(i),s,a),ek(z.fromDom(n.startContainer),s,a),W)&&(e.undoManager.transact(()=>{let n=i.parentNode;nv(r,l,o),ne(r,n),e.selection.select(i,!0),e.selection.collapse(t)}),!0)}}return!1},nS=(e,t)=>nb(e,t)||nN(e,t),nL=e=>{let t=e.selection.getStart(),r=t$(e,t);return e.dom.getParent(t,"LI,DT,DD",r)||tR(e).length>0},nD=e=>!!nL(e)&&(e.undoManager.transact(()=>{e.execCommand("Delete"),nd(e.dom,e.getBody())}),!0),nT=(e,t)=>{let r=e.selection;return!tJ(e,r.getNode())&&(r.isCollapsed()?nS(e,t):nD(e))},nO=e=>{e.on("ExecCommand",t=>{let r=t.command.toLowerCase();("delete"===r||"forwarddelete"===r)&&nL(e)&&nd(e.dom,e.getBody())}),e.on("keydown",t=>{t.keyCode===eK.BACKSPACE?nT(e,!1)&&t.preventDefault():t.keyCode===eK.DELETE&&nT(e,!0)&&t.preventDefault()})},nE=e=>({backspaceDelete:t=>{nT(e,t)}}),nk=(e,t)=>{let r=tw(e);null===r||tJ(e,r)||e.undoManager.transact(()=>{s(t.styles)&&e.dom.setStyles(r,t.styles),s(t.attrs)&&eW(t.attrs,(t,n)=>e.dom.setAttrib(r,n,t))})},nA=e=>w(E(R(t1(e).split("")),(e,t)=>Math.pow(26,t)*(e.toUpperCase().charCodeAt(0)-65+1)),(e,t)=>e+t,0),nx=e=>{if(--e<0)return"";{let t=e%26;return nx(Math.floor(e/26))+String.fromCharCode(65+t)}},nw=e=>/^[A-Z]+$/.test(e),nB=e=>/^[a-z]+$/.test(e),nP=e=>/^[0-9]+$/.test(e),nM=e=>nP(e)?2:nw(e)?0:nB(e)?1:t3(e)?3:4,nI=e=>{switch(nM(e)){case 2:return v.some({listStyleType:v.none(),start:e});case 0:return v.some({listStyleType:v.some("upper-alpha"),start:nA(e).toString()});case 1:return v.some({listStyleType:v.some("lower-alpha"),start:nA(e).toString()});case 3:return v.some({listStyleType:v.none(),start:""});case 4:return v.none()}},nR=e=>{let t=parseInt(e.start,10);return _(e.listStyleType,"upper-alpha")?nx(t):_(e.listStyleType,"lower-alpha")?nx(t).toLowerCase():e.start},nU=e=>{let t=tw(e);!tr(t)||tJ(e,t)||e.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:nR({start:e.dom.getAttrib(t,"start","1"),listStyleType:v.from(e.dom.getStyle(t,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:t=>{nI(t.getData().start).each(t=>{e.execCommand("mceListUpdate",!1,{attrs:{start:"1"===t.start?"":t.start},styles:{"list-style-type":t.listStyleType.getOr("")}})}),t.close()}})},n$=(e,t)=>()=>{let r=tw(e);return u(r)&&r.nodeName===t},nH=e=>{e.addCommand("mceListProps",()=>{nU(e)})},nF=e=>{e.on("BeforeExecCommand",t=>{let r=t.command.toLowerCase();"indent"===r?r$(e):"outdent"===r&&rH(e)}),e.addCommand("InsertUnorderedList",(t,r)=>{ni(e,"UL",r)}),e.addCommand("InsertOrderedList",(t,r)=>{ni(e,"OL",r)}),e.addCommand("InsertDefinitionList",(t,r)=>{ni(e,"DL",r)}),e.addCommand("RemoveList",()=>{rF(e)}),nH(e),e.addCommand("mceListUpdate",(t,r)=>{s(r)&&nk(e,r)}),e.addQueryStateHandler("InsertUnorderedList",n$(e,"UL")),e.addQueryStateHandler("InsertOrderedList",n$(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",n$(e,"DL"))};var n_=tinymce.util.Tools.resolve("tinymce.html.Node");let nV=e=>3===e.type,nj=e=>0===e.length,nK=e=>{let t=(t,r)=>{let n=n_.create("li");k(t,e=>n.append(e)),r?e.insert(n,r,!0):e.append(n)},r=w(e.children(),(e,r)=>nV(r)?[...e,r]:nj(e)||nV(r)?e:(t(e,r),[]),[]);nj(r)||t(r)},nz=e=>{e.on("PreInit",()=>{let{parser:t}=e;t.addNodeFilter("ul,ol",e=>k(e,nK))})},nQ=e=>{e.on("keydown",t=>{t.keyCode!==eK.TAB||eK.metaKeyPressed(t)||e.undoManager.transact(()=>{(t.shiftKey?rH(e):r$(e))&&t.preventDefault()})})},nW=e=>{th(e)&&nQ(e),nO(e)},nq=(e,t)=>r=>(r.setEnabled(e.selection.isEditable()),tX(e,n=>{r.setActive(tq(n.parents,t)),r.setEnabled(!tJ(e,n.element)&&e.selection.isEditable())})),nZ=e=>{let t=t=>()=>e.execCommand(t);e.hasPlugin("advlist")||(e.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:t("InsertOrderedList"),onSetup:nq(e,"OL")}),e.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:t("InsertUnorderedList"),onSetup:nq(e,"UL")}))},nG=(e,t)=>r=>tX(e,n=>r.setEnabled(tq(n.parents,t)&&!tJ(e,n.element))),nJ=e=>{let t={text:"List properties...",icon:"ordered-list",onAction:()=>e.execCommand("mceListProps"),onSetup:nG(e,"OL")};e.ui.registry.addMenuItem("listprops",t),e.ui.registry.addContextMenu("lists",{update:t=>tr(tw(e,t))?["listprops"]:[]})};t.add("lists",e=>(tg(e),nz(e),e.hasPlugin("rtc",!0)?nH(e):(nW(e),nF(e)),nZ(e),nJ(e),nE(e)))}();