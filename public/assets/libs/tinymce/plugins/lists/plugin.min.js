!function(){"use strict";var e,t=tinymce.util.Tools.resolve("tinymce.PluginManager");let n=e=>t=>(e=>{var t,n;let r=typeof e;return null===e?"null":"object"===r&&Array.isArray(e)?"array":"object"===r&&((t=String).prototype.isPrototypeOf(e)||(null===(n=e.constructor)||void 0===n?void 0:n.name)===t.name)?"string":r})(t)===e,r=e=>t=>typeof t===e,o=n("string"),l=n("object"),i=n("array"),s=r("boolean"),a=e=>null!=e,d=r("function"),m=r("number"),u=()=>{},c=e=>()=>e,p=(e,t)=>e===t,g=e=>t=>!e(t),h=c(!1);class f{constructor(e,t){this.tag=e,this.value=t}static some(e){return new f(!0,e)}static none(){return f.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?f.some(e(this.value)):f.none()}bind(e){return this.tag?e(this.value):f.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:f.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(null!=e?e:"Called getOrDie on None")}static from(e){return a(e)?f.some(e):f.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}f.singletonNone=new f(!1);let y=Array.prototype.slice,v=Array.prototype.indexOf,C=Array.prototype.push,b=(e,t)=>v.call(e,t)>-1,N=(e,t)=>{for(let n=0,r=e.length;n<r;n++)if(t(e[n],n))return!0;return!1},S=(e,t)=>{let n=e.length,r=Array(n);for(let o=0;o<n;o++){let n=e[o];r[o]=t(n,o)}return r},L=(e,t)=>{for(let n=0,r=e.length;n<r;n++)t(e[n],n)},O=(e,t)=>{let n=[];for(let r=0,o=e.length;r<o;r++){let o=e[r];t(o,r)&&n.push(o)}return n},T=(e,t,n)=>(L(e,(e,r)=>{n=t(n,e,r)}),n),E=(e,t,n)=>{for(let r=0,o=e.length;r<o;r++){let o=e[r];if(t(o,r))return f.some(o);if(n(o,r))break}return f.none()},k=(e,t)=>E(e,t,h),A=(e,t)=>(e=>{let t=[];for(let n=0,r=e.length;n<r;++n){if(!i(e[n]))throw Error("Arr.flatten item "+n+" was not an array, input: "+e);C.apply(t,e[n])}return t})(S(e,t)),x=e=>{let t=y.call(e,0);return t.reverse(),t},w=(e,t)=>t>=0&&t<e.length?f.some(e[t]):f.none(),D=e=>w(e,0),B=e=>w(e,e.length-1),M=(e,t)=>{let n=[],r=d(t)?e=>N(n,n=>t(n,e)):e=>b(n,e);for(let t=0,o=e.length;t<o;t++){let o=e[t];r(o)||n.push(o)}return n},P=(e,t,n=p)=>e.exists(e=>n(e,t)),I=(e,t,n)=>e.isSome()&&t.isSome()?f.some(n(e.getOrDie(),t.getOrDie())):f.none(),R=e=>{if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}},U=(e,t)=>{let n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){let t="HTML does not have a single root node";throw console.error(t,e),Error(t)}return R(n.childNodes[0])},$=(e,t)=>R((t||document).createElement(e)),F=(e,t)=>{let n=e.dom;if(1!==n.nodeType)return!1;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw Error("Browser lacks native selectors")},_=(e,t)=>e.dom===t.dom,H="undefined"!=typeof window?window:Function("return this;")(),V=(e,t)=>((e,t)=>{let n=null!=t?t:H;for(let t=0;t<e.length&&null!=n;++t)n=n[e[t]];return n})(e.split("."),t),j=Object.getPrototypeOf,K=e=>{let t=V("ownerDocument.defaultView",e);return l(e)&&(((e,t)=>{let n=V(e,t);if(null==n)throw Error(e+" not available on this browser");return n})("HTMLElement",t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(j(e).constructor.name))},z=e=>e.dom.nodeName.toLowerCase(),Q=e=>e.dom.nodeType,W=e=>t=>Q(t)===e,q=e=>Z(e)&&K(e.dom),Z=W(1),G=W(3),J=W(9),X=W(11),Y=e=>t=>Z(t)&&z(t)===e,ee=e=>f.from(e.dom.parentNode).map(R),et=e=>S(e.dom.childNodes,R),en=(e,t)=>{let n=e.dom.childNodes;return f.from(n[t]).map(R)},er=e=>en(e,0),eo=e=>en(e,e.dom.childNodes.length-1),el=d(Element.prototype.attachShadow)&&d(Node.prototype.getRootNode)?e=>R(e.dom.getRootNode()):e=>J(e)?e:R(e.dom.ownerDocument),ei=e=>R(e.dom.host),es=e=>{let t=G(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;let n=t.ownerDocument;return(e=>{let t=el(e);return X(t)&&a(t.dom.host)?f.some(t):f.none()})(R(t)).fold(()=>n.body.contains(t),e=>es(ei(e)))};var ea=(e,t,n,r,o)=>e(n,r)?f.some(n):d(o)&&o(n)?f.none():t(n,r,o);let ed=(e,t,n)=>{let r=e.dom,o=d(n)?n:h;for(;r.parentNode;){let e=R(r=r.parentNode);if(t(e))return f.some(e);if(o(e))break}return f.none()},em=(e,t,n)=>ea((e,t)=>t(e),ed,e,t,n),eu=(e,t,n)=>ed(e,e=>F(e,t),n),ec=(e,t)=>{ee(e).each(n=>{n.dom.insertBefore(t.dom,e.dom)})},ep=(e,t)=>{e.dom.appendChild(t.dom)},eg=(e,t)=>{L(t,t=>{ep(e,t)})},eh=e=>{e.dom.textContent="",L(et(e),e=>{ef(e)})},ef=e=>{let t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)};var ey=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),ev=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),eC=tinymce.util.Tools.resolve("tinymce.util.VK");let eb=e=>S(e,R),eN=Object.keys,eS=(e,t)=>{let n=eN(e);for(let r=0,o=n.length;r<o;r++){let o=n[r];t(e[o],o)}},eL=(e,t)=>{let n=e.dom;eS(t,(e,t)=>{((e,t,n)=>{if(!(o(n)||s(n)||m(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),Error("Attribute value was not simple");e.setAttribute(t,n+"")})(n,t,e)})},eO=e=>T(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),eT=e=>R(e.dom.cloneNode(!0)),eE=(e,t)=>{let n=((e,t)=>{let n=$(t);return eL(n,eO(e)),n})(e,t);return f.from(e.dom.nextSibling).map(R).fold(()=>{ee(e).each(e=>{ep(e,n)})},e=>{ec(e,n)}),eg(n,et(e)),ef(e),n};var ek=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),eA=tinymce.util.Tools.resolve("tinymce.util.Tools");let ex=e=>t=>a(t)&&t.nodeName.toLowerCase()===e,ew=e=>t=>a(t)&&e.test(t.nodeName),eD=e=>a(e)&&3===e.nodeType,eB=e=>a(e)&&1===e.nodeType,eM=ew(/^(OL|UL|DL)$/),eP=ew(/^(OL|UL)$/),eI=ex("ol"),eR=ew(/^(LI|DT|DD)$/),eU=ew(/^(DT|DD)$/),e$=ew(/^(TH|TD)$/),eF=ex("br"),e_=(e,t)=>a(t)&&t.nodeName in e.schema.getTextBlockElements(),eH=(e,t)=>a(e)&&e.nodeName in t,eV=(e,t)=>a(t)&&t.nodeName in e.schema.getVoidElements(),ej=(e,t,n)=>{let r=e.isEmpty(t);return!(n&&e.select("span[data-mce-type=bookmark]",t).length>0)&&r},eK=(e,t)=>e.isChildOf(t,e.getRoot()),ez=e=>t=>t.options.get(e),eQ=ez("lists_indent_on_tab"),eW=ez("forced_root_block"),eq=ez("forced_root_block_attrs"),eZ=(e,t)=>{let n=e.dom,r=e.schema.getBlockElements(),o=n.createFragment(),l=eW(e),i=eq(e),s,a,d=!1;for(a=n.create(l,i),eH(t.firstChild,r)||o.appendChild(a);s=t.firstChild;){let e=s.nodeName;d||"SPAN"===e&&"bookmark"===s.getAttribute("data-mce-type")||(d=!0),eH(s,r)?(o.appendChild(s),a=null):(a||(a=n.create(l,i),o.appendChild(a)),a.appendChild(s))}return!d&&a&&a.appendChild(n.create("br",{"data-mce-bogus":"1"})),o},eG=ek.DOM,eJ=Y("dd"),eX=Y("dt"),eY=(e,t)=>{eJ(t)?eE(t,"dt"):eX(t)&&f.from(t.dom.parentElement).map(R).each(n=>((e,t,n)=>{let r=eG.select('span[data-mce-type="bookmark"]',t),o=eZ(e,n),l=eG.createRng();l.setStartAfter(n),l.setEndAfter(t);let i=l.extractContents();for(let t=i.firstChild;t;t=t.firstChild)if("LI"===t.nodeName&&e.dom.isEmpty(t)){eG.remove(t);break}e.dom.isEmpty(i)||eG.insertAfter(i,t),eG.insertAfter(o,t);let s=n.parentElement;s&&ej(e.dom,s)&&(e=>{let t=e.parentNode;t&&eA.each(r,e=>{t.insertBefore(e,n.parentNode)}),eG.remove(e)})(s),eG.remove(n),ej(e.dom,t)&&eG.remove(t)})(e,n.dom,t.dom))},e0=e=>{eX(e)&&eE(e,"dd")},e1=(e,t)=>{if(eD(e))return{container:e,offset:t};let n=ey.getNode(e,t);return eD(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&eD(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&eD(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t}},e2=e=>{let t=e.cloneRange(),n=e1(e.startContainer,e.startOffset);t.setStart(n.container,n.offset);let r=e1(e.endContainer,e.endOffset);return t.setEnd(r.container,r.offset),t},e3=["OL","UL","DL"],e6=e3.join(","),e4=(e,t)=>{let n=t||e.selection.getStart(!0);return e.dom.getParent(n,e6,e8(e,n))},e5=e=>{let t=e.selection.getSelectedBlocks();return O(M(eA.map(t,t=>e.dom.getParent(t,"li,dd,dt",e8(e,t))||t)),eR)},e9=(e,t)=>{let n=e.dom.getParents(t,"TD,TH");return n.length>0?n[0]:e.getBody()},e8=(e,t)=>k(e.dom.getParents(t,e.dom.isBlock),t=>{var n;return t.nodeName.toLowerCase()!==eW(e)&&(n=e.schema,!eM(t)&&!eR(t)&&N(e3,e=>n.isValidChild(t.nodeName,e)))}).getOr(e.getBody()),e7=(e,t)=>B(e.dom.getParents(t,"ol,ul",e8(e,t))),te=(e,t)=>M(S(t,t=>e7(e,t).getOr(t))),tt=e=>/\btox\-/.test(e.className),tn=(e,t)=>E(e,eM,e$).exists(e=>e.nodeName===t&&!tt(e)),tr=(e,t)=>null!==t&&!e.dom.isEditable(t),to=(e,t)=>{let n=e.dom.getParent(t,"ol,ul,dl");return tr(e,n)},tl=(e,t)=>{let n=e.selection.getNode();return t({parents:e.dom.getParents(n),element:n}),e.on("NodeChange",t),()=>e.off("NodeChange",t)},ti=(e,t)=>{let n=(t||document).createDocumentFragment();return L(e,e=>{n.appendChild(e.dom)}),R(n)},ts=(e,t,n)=>e.dispatch("ListMutation",{action:t,element:n}),ta=(e=/^\s+|\s+$/g,t=>t.replace(e,"")),td=(e,t,n)=>{((e,t,n)=>{if(!o(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),Error("CSS value must be a string: "+n);void 0!==e.style&&d(e.style.getPropertyValue)&&e.style.setProperty(t,n)})(e.dom,t,n)},tm=e=>F(e,"OL,UL"),tu=e=>er(e).exists(tm),tc=e=>"listAttributes"in e,tp=e=>"isComment"in e,tg=e=>e.depth>0,th=e=>e.isSelected,tf=e=>{let t=et(e);return S(eo(e).exists(tm)?t.slice(0,-1):t,eT)},ty=(e,t)=>{ep(e.item,t.list)},tv=(e,t)=>{let n={list:$(t,e),item:$("li",e)};return ep(n.list,n.item),n},tC=(e,t,n)=>{let r=t.slice(0,n.depth);return B(r).each(t=>{if(tc(n)){let r=((e,t,n)=>{let r=$("li",e);return eL(r,t),eg(r,n),r})(e,n.itemAttributes,n.content);ep(t.list,r),t.item=r,z(t.list)!==n.listType&&(t.list=eE(t.list,n.listType)),eL(t.list,n.listAttributes)}else if("isFragment"in n)eg(t.item,n.content);else{let e=U(`<!--${n.content}-->`);ep(t.list,e)}}),r},tb=(e,t)=>{let n=f.none(),r=T(t,(t,r,o)=>tp(r)?0===o?(n=f.some(r),t):tC(e,t,r):r.depth>t.length?((e,t,n)=>{let r=((e,t,n)=>{let r=[];for(let o=0;o<n;o++)r.push(tv(e,tc(t)?t.listType:t.parentListType));return r})(e,n,n.depth-t.length);return(e=>{for(let t=1;t<e.length;t++)ty(e[t-1],e[t])})(r),((e,t)=>{for(let t=0;t<e.length-1;t++)td(e[t].item,"list-style-type","none");B(e).each(e=>{tc(t)&&(eL(e.list,t.listAttributes),eL(e.item,t.itemAttributes)),eg(e.item,t.content)})})(r,n),I(B(t),D(r),ty),t.concat(r)})(e,t,r):tC(e,t,r),[]);return n.each(e=>{let t=U(`<!--${e.content}-->`);D(r).each(e=>{((e,t)=>{er(e).fold(()=>{ep(e,t)},n=>{e.dom.insertBefore(t.dom,n.dom)})})(e.list,t)})}),D(r).map(e=>e.list)},tN=e=>(L(e,(t,n)=>{((e,t)=>{let n=e[t].depth,r=e=>e.depth===n&&!e.dirty,o=e=>e.depth<n;return E(x(e.slice(0,t)),r,o).orThunk(()=>E(e.slice(t+1),r,o))})(e,n).fold(()=>{t.dirty&&tc(t)&&(t.listAttributes=((e,t)=>{var n;let r={};return n=(e,t)=>{r[t]=e},eS(e,(e,r)=>{(t(e,r)?n:u)(e,r)}),r})(t.listAttributes,(e,t)=>"start"!==t))},e=>{tc(t)&&tc(e)&&(t.listType=e.listType,t.listAttributes={...e.listAttributes})})}),e),tS=(e,t,n,r)=>{var o,l;if(8===Q(r)||"#comment"===z(r))return[{depth:e+1,content:null!==(o=r.dom.nodeValue)&&void 0!==o?o:"",dirty:!1,isSelected:!1,isComment:!0}];t.each(e=>{_(e.start,r)&&n.set(!0)});let i=(l=n.get(),ee(r).filter(Z).map(t=>({depth:e,dirty:!1,isSelected:l,content:tf(r),itemAttributes:eO(r),listAttributes:eO(t),listType:z(t),isInPreviousLi:!1})));t.each(e=>{_(e.end,r)&&n.set(!1)});let s=eo(r).filter(tm).map(r=>tO(e,t,n,r)).getOr([]);return i.toArray().concat(s)},tL=(e,t,n,r)=>er(r).filter(tm).fold(()=>tS(e,t,n,r),o=>{let l=T(et(r),(r,l,i)=>{if(0===i)return r;if(F(l,"LI"))return r.concat(tS(e,t,n,l));{let t={isFragment:!0,depth:e,content:[l],isSelected:!1,dirty:!1,parentListType:z(o)};return r.concat(t)}},[]);return tO(e,t,n,o).concat(l)}),tO=(e,t,n,r)=>A(et(r),r=>(tm(r)?tO:tL)(e+1,t,n,r)),tT=(e,t,n)=>{L(((e,t)=>{let n;let r=(n=!1,{get:()=>n,set:e=>{n=e}});return S(e,e=>({sourceList:e,entries:tO(0,t,r,e)}))})(t,(e=>{let t=S(e5(e),R);return I(k(t,g(tu)),k(x(t),g(tu)),(e,t)=>({start:e,end:t}))})(e)),t=>{var r;L(O(t.entries,th),e=>((e,t)=>{switch(e){case"Indent":t.depth++;break;case"Outdent":t.depth--;break;case"Flatten":t.depth=0}t.dirty=!0})(n,e));let o=A(((e,t)=>{if(0===e.length)return[];{let n=t(e[0]),r=[],o=[];for(let l=0,i=e.length;l<i;l++){let i=e[l],s=t(i);s!==n&&(r.push(o),o=[]),n=s,o.push(i)}return 0!==o.length&&r.push(o),r}})(t.entries,tg),t=>D(t).exists(tg)?((e,t)=>{let n=tN(t);return tb(e.contentDocument,n).toArray()})(e,t):S(tN(t),t=>R(eZ(e,(tp(t)?ti([U(`<!--${t.content}-->`)]):ti(t.content)).dom))));L(o,t=>{ts(e,"Indent"===n?"IndentList":"OutdentList",t.dom)}),r=t.sourceList,L(o,e=>{ec(r,e)}),ef(t.sourceList)})},tE=(e,t)=>{let n=eb((e=>{let t=(e=>{let t=e7(e,e.selection.getStart()),n=O(e.selection.getSelectedBlocks(),eP);return t.toArray().concat(n)})(e);return k((e=>{let t=e.selection.getStart();return e.dom.getParents(t,"ol,ul",e8(e,t))})(e),e=>ee(R(e)).exists(e=>eR(e.dom)&&er(e).exists(e=>!eM(e.dom))&&eo(e).exists(e=>!eM(e.dom)))).fold(()=>te(e,t),e=>[e])})(e)),r=eb(O(e5(e),eU)),o=!1;if(n.length||r.length){let l=e.selection.getBookmark();tT(e,n,t),L(r,"Indent"===t?e0:t=>eY(e,t)),e.selection.moveToBookmark(l),e.selection.setRng(e2(e.selection.getRng())),e.nodeChanged(),o=!0}return o},tk=(e,t)=>!(e=>{let t=e4(e);return tr(e,t)})(e)&&tE(e,t),tA=e=>tk(e,"Indent"),tx=e=>tk(e,"Outdent"),tw=e=>tk(e,"Flatten"),tD=e=>"\uFEFF"===e;var tB=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");let tM=ek.DOM,tP=e=>{let t={},n=n=>{let r=e[n?"startContainer":"endContainer"],o=e[n?"startOffset":"endOffset"];if(eB(r)){let e=tM.create("span",{"data-mce-type":"bookmark"});r.hasChildNodes()?(o=Math.min(o,r.childNodes.length-1),n?r.insertBefore(e,r.childNodes[o]):tM.insertAfter(e,r.childNodes[o])):r.appendChild(e),r=e,o=0}t[n?"startContainer":"endContainer"]=r,t[n?"startOffset":"endOffset"]=o};return n(!0),e.collapsed||n(),t},tI=e=>{let t=t=>{let n=e[t?"startContainer":"endContainer"],r=e[t?"startOffset":"endOffset"];if(n){if(eB(n)&&n.parentNode){let e=n;r=(e=>{var t;let n=null===(t=e.parentNode)||void 0===t?void 0:t.firstChild,r=0;for(;n;){if(n===e)return r;eB(n)&&"bookmark"===n.getAttribute("data-mce-type")||r++,n=n.nextSibling}return -1})(n),n=n.parentNode,tM.remove(e),!n.hasChildNodes()&&tM.isBlock(n)&&n.appendChild(tM.create("br"))}e[t?"startContainer":"endContainer"]=n,e[t?"startOffset":"endOffset"]=r}};t(!0),t();let n=tM.createRng();return n.setStart(e.startContainer,e.startOffset),e.endContainer&&n.setEnd(e.endContainer,e.endOffset),e2(n)},tR=e=>{switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},tU=(e,t)=>{eA.each(t,(t,n)=>{e.setAttribute(n,t)})},t$=(e,t,n)=>{((e,t,n)=>{let r=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",r)})(e,t,n),tU(t,n["list-attributes"]),eA.each(e.select("li",t),e=>{tU(e,n["list-item-attributes"])})},tF=(e,t)=>a(t)&&!eH(t,e.schema.getBlockElements()),t_=(e,t,n,r)=>{let o=t[n?"startContainer":"endContainer"],l=t[n?"startOffset":"endOffset"];eB(o)&&(o=o.childNodes[Math.min(l,o.childNodes.length-1)]||o),!n&&eF(o.nextSibling)&&(o=o.nextSibling);let i=(t,n)=>{var o;let l;let i=new ev(t,(t=>{for(;!e.dom.isBlock(t)&&t.parentNode&&r!==t;)t=t.parentNode;return t})(t)),s=n?"next":"prev";for(;l=i[s]();)if(!eV(e,l)&&!tD(l.textContent)&&0!==(null===(o=l.textContent)||void 0===o?void 0:o.length))return f.some(l);return f.none()};if(n&&eD(o)){if(tD(o.textContent))o=i(o,!1).getOr(o);else for(null!==o.parentNode&&tF(e,o.parentNode)&&(o=o.parentNode);null!==o.previousSibling&&(tF(e,o.previousSibling)||eD(o.previousSibling));)o=o.previousSibling}if(!n&&eD(o)){if(tD(o.textContent))o=i(o,!0).getOr(o);else for(null!==o.parentNode&&tF(e,o.parentNode)&&(o=o.parentNode);null!==o.nextSibling&&(tF(e,o.nextSibling)||eD(o.nextSibling));)o=o.nextSibling}for(;o.parentNode!==r;){let t=o.parentNode;if(e_(e,o)||/^(TD|TH)$/.test(t.nodeName))break;o=t}return o},tH=(e,t,n)=>{let r=e.selection.getRng(),o="LI",l=e8(e,((e,t)=>{let n=e.selection.getStart(!0);return ed(R(t_(e,t,!0,e.getBody())),function(e,...t){return(...n)=>{let r=t.concat(n);return e.apply(null,r)}}(_,R(t.commonAncestorContainer)),void 0).isSome()?t.commonAncestorContainer:n})(e,r)),i=e.dom;if("false"===i.getContentEditable(e.selection.getNode()))return;"DL"===(t=t.toUpperCase())&&(o="DT");let s=tP(r),a=O(((e,t,n)=>{let r;let o=[],l=e.dom,i=t_(e,t,!0,n),s=t_(e,t,!1,n),a=[];for(let e=i;e&&(a.push(e),e!==s);e=e.nextSibling);return eA.each(a,t=>{var i;if(e_(e,t))return o.push(t),void(r=null);if(l.isBlock(t)||eF(t))return eF(t)&&l.remove(t),void(r=null);let s=t.nextSibling;tB.isBookmarkNode(t)&&(eM(s)||e_(e,s)||!s&&t.parentNode===n)?r=null:(r||(r=l.create("p"),null===(i=t.parentNode)||void 0===i||i.insertBefore(r,t),o.push(r)),r.appendChild(t))}),o})(e,r,l),e.dom.isEditable);eA.each(a,r=>{var l;let s;let a=r.previousSibling,d=r.parentNode;eR(d)||(a&&eM(a)&&a.nodeName===t&&((e,t,n)=>{let r=e.getStyle(t,"list-style-type"),o=n?n["list-style-type"]:"";return r===(o=null===o?"":o)})(i,a,n)?(s=a,r=i.rename(r,o),a.appendChild(r)):(s=i.create(t),d.insertBefore(s,r),s.appendChild(r),r=i.rename(r,o)),l=r,eA.each(["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"],e=>i.setStyle(l,e,"")),t$(i,s,n),tj(e.dom,s))}),e.selection.setRng(tI(s))},tV=(e,t,n)=>eM(t)&&t.nodeName===(null==n?void 0:n.nodeName)&&e.getStyle(t,"list-style-type",!0)===e.getStyle(n,"list-style-type",!0)&&t.className===n.className,tj=(e,t)=>{let n,r=t.nextSibling;if(tV(e,t,r)){let o=r;for(;n=o.firstChild;)t.appendChild(n);e.remove(o)}if(r=t.previousSibling,tV(e,t,r)){let o=r;for(;n=o.lastChild;)t.insertBefore(n,t.firstChild);e.remove(o)}},tK=(e,t,n,r)=>{if(t.nodeName!==n){let o=e.dom.rename(t,n);t$(e.dom,o,r),ts(e,tR(n),o)}else t$(e.dom,t,r),ts(e,tR(n),t)},tz=(e,t,n,r)=>{if(t.classList.forEach((e,n,r)=>{e.startsWith("tox-")&&(r.remove(e),0===r.length&&t.removeAttribute("class"))}),t.nodeName!==n){let o=e.dom.rename(t,n);t$(e.dom,o,r),ts(e,tR(n),o)}else t$(e.dom,t,r),ts(e,tR(n),t)},tQ=e=>"list-style-type"in e,tW=(e,t,n)=>{let r=e4(e);if(to(e,r))return;let o=(e=>{let t=e4(e),n=e.selection.getSelectedBlocks();return a(t)&&1===n.length&&n[0]===t?O(t.querySelectorAll(e6),eM):O(n,e=>eM(e)&&t!==e)})(e),i=l(n)?n:{};o.length>0?((e,t,n,r,o)=>{let l=eM(t);if(!l||t.nodeName!==r||tQ(o)||tt(t)){tH(e,r,o);let i=tP(e.selection.getRng()),s=l?[t,...n]:n,a=l&&tt(t)?tz:tK;eA.each(s,t=>{a(e,t,r,o)}),e.selection.setRng(tI(i))}else tw(e)})(e,r,o,t,i):((e,t,n,r)=>{if(t!==e.getBody()){if(t){if(t.nodeName!==n||tQ(r)||tt(t)){let o=tP(e.selection.getRng());tt(t)&&t.classList.forEach((e,n,r)=>{e.startsWith("tox-")&&(r.remove(e),0===r.length&&t.removeAttribute("class"))}),t$(e.dom,t,r);let l=e.dom.rename(t,n);tj(e.dom,l),e.selection.setRng(tI(o)),tH(e,n,r),ts(e,tR(n),l)}else tw(e)}else tH(e,n,r),ts(e,tR(n),t)}})(e,r,t,i)},tq=ek.DOM,tZ=(e,t)=>{let n=eA.grep(e.select("ol,ul",t));eA.each(n,t=>{((e,t)=>{let n=t.parentElement;if(n&&"LI"===n.nodeName&&n.firstChild===t){let r=n.previousSibling;r&&"LI"===r.nodeName?(r.appendChild(t),ej(e,n)&&tq.remove(n)):tq.setStyle(n,"listStyleType","none")}if(eM(n)){let e=n.previousSibling;e&&"LI"===e.nodeName&&e.appendChild(t)}})(e,t)})},tG=(e,t,n,r)=>{var o,l;let i=t.startContainer,s=t.startOffset;if(eD(i)&&(n?s<i.data.length:s>0))return i;let a=e.schema.getNonEmptyElements();eB(i)&&(i=ey.getNode(i,s));let d=new ev(i,r);n&&(o=e.dom,eF(l=i)&&o.isBlock(l.nextSibling)&&!eF(l.previousSibling))&&d.next();let m=n?d.next.bind(d):d.prev2.bind(d);for(;i=m();)if("LI"===i.nodeName&&!i.hasChildNodes()||a[i.nodeName]||eD(i)&&i.data.length>0)return i;return null},tJ=(e,t)=>{let n=t.childNodes;return 1===n.length&&!eM(n[0])&&e.isBlock(n[0])},tX=e=>f.from(e).map(R).filter(q).exists(e=>((e,t=!1)=>es(e)?e.dom.isContentEditable:ea((e,t)=>F(e,t),eu,e,"[contenteditable]",void 0).fold(c(t),e=>"true"===e.dom.contentEditable))(e)&&!b(["details"],z(e))),tY=(e,t,n)=>{let r;let o=tJ(e,n)?n.firstChild:n;if(tJ(e,t)&&tX(t.firstChild)&&e.remove(t.firstChild,!0),!ej(e,t,!0))for(;r=t.firstChild;)o.appendChild(r)},t0=(e,t,n)=>{let r;let o=t.parentNode;if(!eK(e,t)||!eK(e,n))return;eM(n.lastChild)&&(r=n.lastChild),o===n.lastChild&&eF(o.previousSibling)&&e.remove(o.previousSibling);let l=n.lastChild;l&&eF(l)&&t.hasChildNodes()&&e.remove(l),ej(e,n,!0)&&eh(R(n)),tY(e,t,n),r&&n.appendChild(r);let i=((e,t)=>{let n=e.dom,r=t.dom;return n!==r&&n.contains(r)})(R(n),R(t))?e.getParents(t,eM,n):[];e.remove(t),L(i,t=>{ej(e,t)&&t!==e.getRoot()&&e.remove(t)})},t1=(e,t)=>{let n=e.dom,r=e.selection,o=e9(e,r.getStart()),l=n.getParent(r.getStart(),"LI",o);if(l){let i=l.parentElement;if(i===e.getBody()&&ej(n,i))return!0;let s=e2(r.getRng()),a=n.getParent(tG(e,s,t,o),"LI",o),d=a&&(t?n.isChildOf(l,a):n.isChildOf(a,l));if(a&&a!==l&&!d)return e.undoManager.transact(()=>{var n;t?((e,t,n,r)=>{let o=e.dom;if(o.isEmpty(r))eh(R(r)),t0(e.dom,n,r),e.selection.setCursorLocation(r,0);else{let l=tP(t);t0(o,n,r),e.selection.setRng(tI(l))}})(e,s,a,l):(null===(n=l.parentNode)||void 0===n?void 0:n.firstChild)===l?tx(e):((e,t,n,r)=>{let o=tP(t);t0(e.dom,n,r);let l=tI(o);e.selection.setRng(l)})(e,s,l,a)}),!0;if(d&&!t&&a!==l)return e.undoManager.transact(()=>{if(s.commonAncestorContainer.parentElement){let t=tP(s),r=s.commonAncestorContainer.parentElement;tY(n,s.commonAncestorContainer.parentElement,a),r.remove();let o=tI(t);e.selection.setRng(o)}}),!0;if(!a&&!t&&0===s.startOffset&&0===s.endOffset)return e.undoManager.transact(()=>{tw(e)}),!0}return!1},t2=e=>{let t=e.selection.getStart(),n=e9(e,t);return e.dom.getParent(t,"LI,DT,DD",n)||e5(e).length>0},t3=(e,t)=>{let n=e.selection;return!to(e,n.getNode())&&(n.isCollapsed()?t1(e,t)||((e,t)=>{let n=e.dom,r=e.selection.getStart(),o=e9(e,r),l=n.getParent(r,n.isBlock,o);if(l&&n.isEmpty(l,void 0,{checkRootAsContent:!0})){let r=e2(e.selection.getRng()),i=n.getParent(tG(e,r,t,o),"LI",o);if(i){let s=e=>b(["td","th","caption"],z(e)),a=e=>e.dom===o;return!!((e,t,n=p)=>I(e,t,n).getOr(e.isNone()&&t.isNone()))(em(R(i),s,a),em(R(r.startContainer),s,a),_)&&(e.undoManager.transact(()=>{let r=i.parentNode;((e,t,n)=>{let r=e.getParent(t.parentNode,e.isBlock,n);e.remove(t),r&&e.isEmpty(r)&&e.remove(r)})(n,l,o),tj(n,r),e.selection.select(i,!0),e.selection.collapse(t)}),!0)}}return!1})(e,t):!!t2(e)&&(e.undoManager.transact(()=>{e.execCommand("Delete"),tZ(e.dom,e.getBody())}),!0))},t6=e=>T(S(x(ta(e).split("")),(e,t)=>Math.pow(26,t)*(e.toUpperCase().charCodeAt(0)-65+1)),(e,t)=>e+t,0),t4=e=>{if(--e<0)return"";{let t=e%26;return t4(Math.floor(e/26))+String.fromCharCode(65+t)}},t5=e=>{let t=parseInt(e.start,10);return P(e.listStyleType,"upper-alpha")?t4(t):P(e.listStyleType,"lower-alpha")?t4(t).toLowerCase():e.start},t9=(e,t)=>()=>{let n=e4(e);return a(n)&&n.nodeName===t},t8=e=>{e.addCommand("mceListProps",()=>{(e=>{let t=e4(e);eI(t)&&!to(e,t)&&e.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:t5({start:e.dom.getAttrib(t,"start","1"),listStyleType:f.from(e.dom.getStyle(t,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:t=>{(e=>{switch(/^[0-9]+$/.test(e)?2:/^[A-Z]+$/.test(e)?0:/^[a-z]+$/.test(e)?1:e.length>0?4:3){case 2:return f.some({listStyleType:f.none(),start:e});case 0:return f.some({listStyleType:f.some("upper-alpha"),start:t6(e).toString()});case 1:return f.some({listStyleType:f.some("lower-alpha"),start:t6(e).toString()});case 3:return f.some({listStyleType:f.none(),start:""});case 4:return f.none()}})(t.getData().start).each(t=>{e.execCommand("mceListUpdate",!1,{attrs:{start:"1"===t.start?"":t.start},styles:{"list-style-type":t.listStyleType.getOr("")}})}),t.close()}})})(e)})};var t7=tinymce.util.Tools.resolve("tinymce.html.Node");let ne=e=>3===e.type,nt=e=>0===e.length,nn=e=>{let t=(t,n)=>{let r=t7.create("li");L(t,e=>r.append(e)),n?e.insert(r,n,!0):e.append(r)},n=T(e.children(),(e,n)=>ne(n)?[...e,n]:nt(e)||ne(n)?e:(t(e,n),[]),[]);nt(n)||t(n)},nr=(e,t)=>n=>(n.setEnabled(e.selection.isEditable()),tl(e,r=>{n.setActive(tn(r.parents,t)),n.setEnabled(!to(e,r.element)&&e.selection.isEditable())})),no=(e,t)=>n=>tl(e,r=>n.setEnabled(tn(r.parents,t)&&!to(e,r.element)));t.add("lists",e=>((e=>{(0,e.options.register)("lists_indent_on_tab",{processor:"boolean",default:!0})})(e),(e=>{e.on("PreInit",()=>{let{parser:t}=e;t.addNodeFilter("ul,ol",e=>L(e,nn))})})(e),e.hasPlugin("rtc",!0)?t8(e):(eQ(e)&&(e=>{e.on("keydown",t=>{t.keyCode!==eC.TAB||eC.metaKeyPressed(t)||e.undoManager.transact(()=>{(t.shiftKey?tx(e):tA(e))&&t.preventDefault()})})})(e),e.on("ExecCommand",t=>{let n=t.command.toLowerCase();("delete"===n||"forwarddelete"===n)&&t2(e)&&tZ(e.dom,e.getBody())}),e.on("keydown",t=>{t.keyCode===eC.BACKSPACE?t3(e,!1)&&t.preventDefault():t.keyCode===eC.DELETE&&t3(e,!0)&&t.preventDefault()}),e.on("BeforeExecCommand",t=>{let n=t.command.toLowerCase();"indent"===n?tA(e):"outdent"===n&&tx(e)}),e.addCommand("InsertUnorderedList",(t,n)=>{tW(e,"UL",n)}),e.addCommand("InsertOrderedList",(t,n)=>{tW(e,"OL",n)}),e.addCommand("InsertDefinitionList",(t,n)=>{tW(e,"DL",n)}),e.addCommand("RemoveList",()=>{tw(e)}),t8(e),e.addCommand("mceListUpdate",(t,n)=>{l(n)&&((e,t)=>{let n=e4(e);null===n||to(e,n)||e.undoManager.transact(()=>{l(t.styles)&&e.dom.setStyles(n,t.styles),l(t.attrs)&&eS(t.attrs,(t,r)=>e.dom.setAttrib(n,r,t))})})(e,n)}),e.addQueryStateHandler("InsertUnorderedList",t9(e,"UL")),e.addQueryStateHandler("InsertOrderedList",t9(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",t9(e,"DL"))),(e=>{let t=t=>()=>e.execCommand(t);e.hasPlugin("advlist")||(e.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:t("InsertOrderedList"),onSetup:nr(e,"OL")}),e.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:t("InsertUnorderedList"),onSetup:nr(e,"UL")}))})(e),(e=>{let t={text:"List properties...",icon:"ordered-list",onAction:()=>e.execCommand("mceListProps"),onSetup:no(e,"OL")};e.ui.registry.addMenuItem("listprops",t),e.ui.registry.addContextMenu("lists",{update:t=>eI(e4(e,t))?["listprops"]:[]})})(e),{backspaceDelete:t=>{t3(e,t)}}))}();