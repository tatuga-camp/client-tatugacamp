!function(){"use strict";let e,t;let r=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}};var n,o=tinymce.util.Tools.resolve("tinymce.PluginManager");let i=e=>t=>(e=>{var t,r;let n=typeof e;return null===e?"null":"object"===n&&Array.isArray(e)?"array":"object"===n&&((t=String).prototype.isPrototypeOf(e)||(null===(r=e.constructor)||void 0===r?void 0:r.name)===t.name)?"string":n})(t)===e,l=e=>t=>typeof t===e,s=e=>t=>e===t,a=i("string"),u=i("object"),d=i("array"),c=s(null),m=l("boolean"),h=s(void 0),g=e=>null!=e,p=l("function"),f=l("number"),v=()=>{},w=e=>()=>e,b=w(!1),y=w(!0);class S{constructor(e,t){this.tag=e,this.value=t}static some(e){return new S(!0,e)}static none(){return S.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?S.some(e(this.value)):S.none()}bind(e){return this.tag?e(this.value):S.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:S.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(null!=e?e:"Called getOrDie on None")}static from(e){return g(e)?S.some(e):S.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}S.singletonNone=new S(!1);let x=Array.prototype.push,E=(e,t)=>{let r=e.length,n=Array(r);for(let o=0;o<r;o++){let r=e[o];n[o]=t(r,o)}return n},F=(e,t)=>{for(let r=0,n=e.length;r<n;r++)t(e[r],r)},O=(e,t)=>{let r=[];for(let n=0,o=e.length;n<o;n++){let o=e[n];t(o,n)&&r.push(o)}return r},k=(e,t)=>((e,t,r)=>{for(let n=0,o=e.length;n<o;n++){let o=e[n];if(t(o,n))return S.some(o);if(r(o,n))break}return S.none()})(e,t,b),T=e=>{let t=r(S.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(S.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{n(),t.set(S.some(e))}}},C=()=>T(e=>e.unbind()),A=Object.keys,R="undefined"!=typeof window?window:Function("return this;")(),L=(e,t)=>((e,t)=>{let r=null!=t?t:R;for(let t=0;t<e.length&&null!=r;++t)r=r[e[t]];return r})(e.split("."),t),M=Object.getPrototypeOf,P=e=>{let t=L("ownerDocument.defaultView",e);return u(e)&&(((e,t)=>{let r=L(e,t);if(null==r)throw Error(e+" not available on this browser");return r})("HTMLElement",t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(M(e).constructor.name))},D=e=>t=>t.dom.nodeType===e,N=D(1),H=D(3),W=D(9),q=D(11),I=(e,t)=>{let r=e.dom.getAttribute(t);return null===r?void 0:r},V=(e,t)=>{e.dom.removeAttribute(t)},j=(e,t,r=0,n)=>{let o=e.indexOf(t,r);return -1!==o&&(!!h(n)||o+t.length<=n)},B=e=>void 0!==e.style&&p(e.style.getPropertyValue),_=e=>{if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}},z=(e,t)=>{let r=e.dom;if(1!==r.nodeType)return!1;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw Error("Browser lacks native selectors")},$=e=>_(e.dom.ownerDocument),U=e=>E(e.dom.childNodes,_),K=p(Element.prototype.attachShadow)&&p(Node.prototype.getRootNode),X=w(K),Y=K?e=>_(e.dom.getRootNode()):e=>W(e)?e:$(e),G=e=>{let t=Y(e);return q(t)&&g(t.dom.host)?S.some(t):S.none()},J=e=>_(e.dom.host),Q=e=>{let t=H(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;let r=t.ownerDocument;return G(_(t)).fold(()=>r.body.contains(t),e=>Q(J(e)))},Z=(e,t,r)=>{if(!a(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),Error("CSS value must be a string: "+r);B(e)&&e.style.setProperty(t,r)},ee=(e,t,r)=>{Z(e.dom,t,r)},et=(e,t)=>{let r=e.dom;((e,t)=>{let r=A(e);for(let n=0,o=r.length;n<o;n++){let o=r[n];t(e[o],o)}})(t,(e,t)=>{Z(r,t,e)})},er=(e,t)=>{let r=e.dom,n=window.getComputedStyle(r).getPropertyValue(t);return""!==n||Q(e)?n:en(r,t)},en=(e,t)=>B(e)?e.style.getPropertyValue(t):"",eo=e=>{let t=_((e=>{if(X()&&g(e.target)){let t=_(e.target);if(N(t)&&g(t.dom.shadowRoot)&&e.composed&&e.composedPath){let t=e.composedPath();if(t)return 0<t.length?S.some(t[0]):S.none()}}return S.from(e.target)})(e).getOr(e.target)),r=()=>e.stopPropagation(),n=()=>e.preventDefault();return{target:t,x:e.clientX,y:e.clientY,stop:r,prevent:n,kill:(...e)=>n(r.apply(null,e)),raw:e}},ei=(e,t,r,n)=>{e.dom.removeEventListener(t,r,n)},el=(e,t,r)=>((e,t,r,n,o)=>{let i=e=>{r(e)&&n(eo(e))};return e.dom.addEventListener(t,i,o),{unbind:function(e,...t){return(...r)=>{let n=t.concat(r);return e.apply(null,n)}}(ei,e,t,i,o)}})(e,t,y,r,!1),es=()=>ea(0,0),ea=(e,t)=>({major:e,minor:t}),eu={nu:ea,detect:(e,t)=>{let r=String(t).toLowerCase();return 0===e.length?es():((e,t)=>{let r=((e,t)=>{for(let r=0;r<e.length;r++){let n=e[r];if(n.test(t))return n}})(e,t);if(!r)return{major:0,minor:0};let n=e=>Number(t.replace(r,"$"+e));return ea(n(1),n(2))})(e,r)},unknown:es},ed=(e,t)=>{let r=String(t).toLowerCase();return k(e,e=>e.search(r))},ec=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,em=e=>t=>j(t,e),eh=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>j(e,"edge/")&&j(e,"chrome")&&j(e,"safari")&&j(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ec],search:e=>j(e,"chrome")&&!j(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>j(e,"msie")||j(e,"trident")},{name:"Opera",versionRegexes:[ec,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:em("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:em("firefox")},{name:"Safari",versionRegexes:[ec,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(j(e,"safari")||j(e,"mobile/"))&&j(e,"applewebkit")}],eg=[{name:"Windows",search:em("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>j(e,"iphone")||j(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:em("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:em("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:em("linux"),versionRegexes:[]},{name:"Solaris",search:em("sunos"),versionRegexes:[]},{name:"FreeBSD",search:em("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:em("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ep={browsers:w(eh),oses:w(eg)},ef="Edge",ev="Chromium",ew="Opera",eb="Firefox",ey="Safari",eS=e=>{let t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isEdge:n(ef),isChromium:n(ev),isIE:n("IE"),isOpera:n(ew),isFirefox:n(eb),isSafari:n(ey)}},ex=()=>eS({current:void 0,version:eu.unknown()}),eE=(w(ef),w(ev),w("IE"),w(ew),w(eb),w(ey),"Windows"),eF="Android",eO="Linux",ek="macOS",eT="Solaris",eC="FreeBSD",eA="ChromeOS",eR=e=>{let t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isWindows:n(eE),isiOS:n("iOS"),isAndroid:n(eF),isMacOS:n(ek),isLinux:n(eO),isSolaris:n(eT),isFreeBSD:n(eC),isChromeOS:n(eA)}},eL=()=>eR({current:void 0,version:eu.unknown()}),eM=(w(eE),w("iOS"),w(eF),w(eO),w(ek),w(eT),w(eC),w(eA),(e,t,r)=>{let n=ep.browsers(),o=ep.oses(),i=t.bind(e=>((e,t)=>{for(let r=0;r<e.length;r++){let n=t(e[r]);if(n.isSome())return n}return S.none()})(e.brands,e=>{let t=e.brand.toLowerCase();return k(n,e=>{var r;return t===(null===(r=e.brand)||void 0===r?void 0:r.toLowerCase())}).map(t=>({current:t.name,version:eu.nu(parseInt(e.version,10),0)}))})).orThunk(()=>ed(n,e).map(t=>{let r=eu.detect(t.versionRegexes,e);return{current:t.name,version:r}})).fold(ex,eS),l=ed(o,e).map(t=>{let r=eu.detect(t.versionRegexes,e);return{current:t.name,version:r}}).fold(eL,eR),s=((e,t,r,n)=>{let o=e.isiOS()&&!0===/ipad/i.test(r),i=e.isiOS()&&!o,l=e.isiOS()||e.isAndroid(),s=l||n("(pointer:coarse)"),a=o||!i&&l&&n("(min-device-width:768px)"),u=i||l&&!a,d=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(r);return{isiPad:w(o),isiPhone:w(i),isTablet:w(a),isPhone:w(u),isTouch:w(s),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:w(d),isDesktop:w(!u&&!a&&!d)}})(l,i,e,r);return{browser:i,os:l,deviceType:s}}),eP=e=>window.matchMedia(e).matches,eD=(n=()=>eM(navigator.userAgent,S.from(navigator.userAgentData),eP),t=!1,(...r)=>(t||(t=!0,e=n.apply(null,r)),e)),eN=(e,t)=>({left:e,top:t,translate:(r,n)=>eN(e+r,t+n)}),eH=e=>{let t=void 0===e?window:e;return eD().browser.isFirefox()?S.none():S.from(t.visualViewport)},eW=(e,t,r,n)=>({x:e,y:t,width:r,height:n,right:e+r,bottom:t+n}),eq=e=>{let t=void 0===e?window:e,r=(e=>{let t=void 0!==e?e.dom:document;return eN(t.body.scrollLeft||t.documentElement.scrollLeft,t.body.scrollTop||t.documentElement.scrollTop)})(_(t.document));return eH(t).fold(()=>{let e=t.document.documentElement,n=e.clientWidth,o=e.clientHeight;return eW(r.left,r.top,n,o)},e=>eW(Math.max(e.pageLeft,r.left),Math.max(e.pageTop,r.top),e.width,e.height))},eI=(e,t,r)=>eH(r).map(r=>{let n=e=>t(eo(e));return r.addEventListener(e,n),{unbind:()=>r.removeEventListener(e,n)}}).getOrThunk(()=>({unbind:v}));var eV=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ej=tinymce.util.Tools.resolve("tinymce.Env");let eB=(e,t)=>{e.dispatch("FullscreenStateChanged",{state:t}),e.dispatch("ResizeEditor")},e_=e=>e.options.get("fullscreen_native"),ez=e=>{var t;return e.dom===(void 0!==(t=$(e).dom).fullscreenElement?t.fullscreenElement:void 0!==t.msFullscreenElement?t.msFullscreenElement:void 0!==t.webkitFullscreenElement?t.webkitFullscreenElement:null)},e$=(e,t,r)=>O(((e,t)=>{let r=p(t)?t:b,n=e.dom,o=[];for(;null!==n.parentNode&&void 0!==n.parentNode;){let e=n.parentNode,t=_(e);if(o.push(t),!0===r(t))break;n=e}return o})(e,r),e=>z(e,t)),eU=(e,t)=>{var r,n;return r=e,O(S.from(r.dom.parentNode).map(_).map(U).map(e=>O(e,e=>r.dom!==e.dom)).getOr([]),e=>z(e,t))},eK="data-ephox-mobile-fullscreen-style",eX="position:absolute!important;",eY="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",eG=ej.os.isAndroid(),eJ=(e,t,r)=>{let n=t=>r=>{let n=I(r,"style"),o=void 0===n?"no-styles":n.trim();o!==t&&(((e,t,r)=>{if(!(a(r)||m(r)||f(r)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),Error("Attribute value was not simple");e.setAttribute(t,r+"")})(r.dom,eK,o),et(r,e.parseStyle(t)))},o=e$(t,"*"),i=(e=>{let t=[];for(let r=0,n=e.length;r<n;++r){if(!d(e[r]))throw Error("Arr.flatten item "+r+" was not an array, input: "+e);x.apply(t,e[r])}return t})(E(o,e=>eU(e,"*:not(.tox-silver-sink)"))),l=(e=>{let t=er(e,"background-color");return void 0!==t&&""!==t?"background-color:"+t+"!important":"background-color:rgb(255,255,255)!important;"})(r);F(i,n("display:none!important;")),F(o,n(eX+eY+l)),n((!0===eG?"":eX)+eY+l)(t)},eQ=eV.DOM,eZ=eH().fold(()=>({bind:v,unbind:v}),e=>{var t;let r;let n=(()=>{let e=T(v);return{...e,on:t=>e.get().each(t)}})(),o=C(),i=C(),l=(t=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0,window.requestAnimationFrame(()=>{n.on(t=>et(t,{top:e.offsetTop+"px",left:e.offsetLeft+"px",height:e.height+"px",width:e.width+"px"}))})},r=null,{cancel:()=>{c(r)||(clearTimeout(r),r=null)},throttle:(...e)=>{c(r)&&(r=setTimeout(()=>{r=null,t.apply(null,e)},50))}});return{bind:e=>{n.set(e),l.throttle(),o.set(eI("resize",l.throttle)),i.set(eI("scroll",l.throttle))},unbind:()=>{n.on(()=>{o.clear(),i.clear()}),n.clear()}}}),e0=(e,t)=>{var r,n;let o=document.body,i=document.documentElement,l=e.getContainer(),s=_(l),a=S.from(s.dom.nextSibling).map(_).filter(e=>{var t;return N(e)&&P(e.dom)&&void 0!==(t=e).dom.classList&&t.dom.classList.contains("tox-silver-sink")}),u=(e=>{let t=_(e.getElement());return G(t).map(J).getOrThunk(()=>(e=>{let t=e.dom.body;if(null==t)throw Error("Body is not available yet");return _(t)})($(t)))})(e),d=t.get(),c=_(e.getBody()),m=ej.deviceType.isTouch(),h=l.style,g=e.iframeElement,p=null==g?void 0:g.style,f=e=>{e(o,"tox-fullscreen"),e(i,"tox-fullscreen"),e(l,"tox-fullscreen"),G(s).map(e=>J(e).dom).each(t=>{e(t,"tox-fullscreen"),e(t,"tox-shadowhost")})},v=()=>{var r;m&&(r=e.dom,F(((e,t)=>{let r=document;return 1!==r.nodeType&&9!==r.nodeType&&11!==r.nodeType||0===r.childElementCount?[]:E(r.querySelectorAll(e),_)})("["+eK+"]"),e=>{let t=I(e,eK);t&&"no-styles"!==t?et(e,r.parseStyle(t)):V(e,"style"),V(e,eK)})),f(eQ.removeClass),eZ.unbind(),S.from(t.get()).each(e=>e.fullscreenChangeHandler.unbind())};if(d)d.fullscreenChangeHandler.unbind(),e_(e)&&ez(u)&&(e=>{let t=e.dom;t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.webkitCancelFullScreen&&t.webkitCancelFullScreen()})($(u)),p.width=d.iframeWidth,p.height=d.iframeHeight,h.width=d.containerWidth,h.height=d.containerHeight,h.top=d.containerTop,h.left=d.containerLeft,n=d.sinkCssPosition,a.isSome()&&n.isSome()?S.some(void ee(a.getOrDie(),"position",n.getOrDie())):S.none(),v(),r=d.scrollPos,window.scrollTo(r.x,r.y),t.set(null),eB(e,!1),e.off("remove",v);else{let r=el($(u),void 0!==document.fullscreenElement?"fullscreenchange":void 0!==document.msFullscreenElement?"MSFullscreenChange":void 0!==document.webkitFullscreenElement?"webkitfullscreenchange":"fullscreenchange",r=>{e_(e)&&(ez(u)||null===t.get()||e0(e,t))}),n={scrollPos:eq(window),containerWidth:h.width,containerHeight:h.height,containerTop:h.top,containerLeft:h.left,iframeWidth:p.width,iframeHeight:p.height,fullscreenChangeHandler:r,sinkCssPosition:a.map(e=>er(e,"position"))};m&&eJ(e.dom,s,c),p.width=p.height="100%",h.width=h.height="",f(eQ.addClass),a.each(e=>{ee(e,"position","fixed")}),eZ.bind(s),e.on("remove",v),t.set(n),e_(e)&&(e=>{let t=e.dom;t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen()})(u),eB(e,!0)}},e9=(e,t)=>r=>{r.setActive(null!==t.get());let n=e=>r.setActive(e.state);return e.on("FullscreenStateChanged",n),()=>e.off("FullscreenStateChanged",n)};o.add("fullscreen",e=>{let t=r(null);return e.inline||((e=>{(0,e.options.register)("fullscreen_native",{processor:"boolean",default:!1})})(e),((e,t)=>{e.addCommand("mceFullScreen",()=>{e0(e,t)})})(e,t),((e,t)=>{let r=()=>e.execCommand("mceFullScreen");e.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:r,onSetup:e9(e,t)}),e.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:r,onSetup:e9(e,t),shortcut:"Meta+Shift+F"})})(e,t),e.addShortcut("Meta+Shift+F","","mceFullScreen")),{isFullscreen:()=>null!==t.get()}})}();