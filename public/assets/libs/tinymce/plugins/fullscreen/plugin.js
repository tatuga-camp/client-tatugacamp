!function(){"use strict";let e,t;let r=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}};var o,n=tinymce.util.Tools.resolve("tinymce.PluginManager");let i=e=>({isFullscreen:()=>null!==e.get()}),l=(e,t,r)=>{var o;return!!r(e,t.prototype)||(null===(o=e.constructor)||void 0===o?void 0:o.name)===t.name},s=e=>{let t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&l(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t},a=e=>t=>s(t)===e,u=e=>t=>typeof t===e,m=e=>t=>e===t,d=a("string"),c=a("object"),h=a("array"),f=m(null),g=u("boolean"),p=m(void 0),v=e=>null==e,w=e=>!v(e),b=u("function"),y=u("number"),S=()=>{},x=(e,t)=>(...r)=>e(t.apply(null,r)),E=(e,t)=>r=>e(t(r)),F=e=>()=>e,O=F(!1),T=F(!0);class k{constructor(e,t){this.tag=e,this.value=t}static some(e){return new k(!0,e)}static none(){return k.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?k.some(e(this.value)):k.none()}bind(e){return this.tag?e(this.value):k.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:k.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(null!=e?e:"Called getOrDie on None")}static from(e){return w(e)?k.some(e):k.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}k.singletonNone=new k(!1);let C=Array.prototype.push,D=(e,t)=>{let r=e.length,o=Array(r);for(let n=0;n<r;n++){let r=e[n];o[n]=t(r,n)}return o},A=(e,t)=>{for(let r=0,o=e.length;r<o;r++)t(e[r],r)},R=(e,t)=>{let r=[];for(let o=0,n=e.length;o<n;o++){let n=e[o];t(n,o)&&r.push(n)}return r},L=(e,t,r)=>{for(let o=0,n=e.length;o<n;o++){let n=e[o];if(t(n,o))return k.some(n);if(r(n,o))break}return k.none()},M=(e,t)=>L(e,t,O),P=e=>{let t=[];for(let r=0,o=e.length;r<o;++r){if(!h(e[r]))throw Error("Arr.flatten item "+r+" was not an array, input: "+e);C.apply(t,e[r])}return t},N=(e,t)=>P(D(e,t)),H=(e,t)=>t>=0&&t<e.length?k.some(e[t]):k.none(),W=e=>H(e,0),q=(e,t)=>{for(let r=0;r<e.length;r++){let o=t(e[r],r);if(o.isSome())return o}return k.none()},I=(e,t,r)=>e.isSome()&&t.isSome()?k.some(r(e.getOrDie(),t.getOrDie())):k.none(),V=e=>{let t=r(k.none()),o=()=>t.get().each(e);return{clear:()=>{o(),t.set(k.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{o(),t.set(k.some(e))}}},B=()=>V(e=>e.unbind()),j=()=>{let e=V(S);return{...e,on:t=>e.get().each(t)}},_=(e,t)=>{let r=null;return{cancel:()=>{f(r)||(clearTimeout(r),r=null)},throttle:(...o)=>{f(r)&&(r=setTimeout(()=>{r=null,e.apply(null,o)},t))}}},z=Object.keys,$=(e,t)=>{let r=z(e);for(let o=0,n=r.length;o<n;o++){let n=r[o];t(e[n],n)}},U="undefined"!=typeof window?window:Function("return this;")(),K=(e,t)=>{let r=null!=t?t:U;for(let t=0;t<e.length&&null!=r;++t)r=r[e[t]];return r},X=(e,t)=>K(e.split("."),t),Y=(e,t)=>X(e,t),G=(e,t)=>{let r=Y(e,t);if(null==r)throw Error(e+" not available on this browser");return r},J=Object.getPrototypeOf,Q=e=>G("HTMLElement",e),Z=e=>{let t=X("ownerDocument.defaultView",e);return c(e)&&(Q(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(J(e).constructor.name))},ee=e=>e.dom.nodeType,et=e=>t=>ee(t)===e,er=e=>eo(e)&&Z(e.dom),eo=et(1),en=et(3),ei=et(9),el=et(11),es=(e,t,r)=>{if(d(r)||g(r)||y(r))e.setAttribute(t,r+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),Error("Attribute value was not simple")},ea=(e,t,r)=>{es(e.dom,t,r)},eu=(e,t)=>{let r=e.dom.getAttribute(t);return null===r?void 0:r},em=(e,t)=>{e.dom.removeAttribute(t)},ed=e=>void 0!==e.dom.classList,ec=(e,t)=>ed(e)&&e.dom.classList.contains(t),eh=(e,t,r=0,o)=>{let n=e.indexOf(t,r);return -1!==n&&(!!p(o)||n+t.length<=o)},ef=e=>void 0!==e.style&&b(e.style.getPropertyValue),eg=e=>{if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}},ep={fromHtml:(e,t)=>{let r=(t||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){let t="HTML does not have a single root node";throw console.error(t,e),Error(t)}return eg(r.childNodes[0])},fromTag:(e,t)=>eg((t||document).createElement(e)),fromText:(e,t)=>eg((t||document).createTextNode(e)),fromDom:eg,fromPoint:(e,t,r)=>k.from(e.dom.elementFromPoint(t,r)).map(eg)},ev=(e,t)=>{let r=e.dom;if(1!==r.nodeType)return!1;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw Error("Browser lacks native selectors")},ew=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,eb=(e,t)=>{let r=void 0===t?document:t.dom;return ew(r)?[]:D(r.querySelectorAll(e),ep.fromDom)},ey=(e,t)=>e.dom===t.dom,eS=e=>ep.fromDom(e.dom.ownerDocument),ex=e=>k.from(e.dom.parentNode).map(ep.fromDom),eE=(e,t)=>{let r=b(t)?t:O,o=e.dom,n=[];for(;null!==o.parentNode&&void 0!==o.parentNode;){let e=o.parentNode,t=ep.fromDom(e);if(n.push(t),!0===r(t))break;o=e}return n},eF=e=>ex(e).map(eT).map(t=>R(t,t=>!ey(e,t))).getOr([]),eO=e=>k.from(e.dom.nextSibling).map(ep.fromDom),eT=e=>D(e.dom.childNodes,ep.fromDom),ek=e=>el(e)&&w(e.dom.host),eC=b(Element.prototype.attachShadow)&&b(Node.prototype.getRootNode),eD=F(eC),eA=eC?e=>ep.fromDom(e.dom.getRootNode()):e=>ei(e)?e:eS(e),eR=e=>{let t=eA(e);return ek(t)?k.some(t):k.none()},eL=e=>ep.fromDom(e.dom.host),eM=e=>{if(eD()&&w(e.target)){let t=ep.fromDom(e.target);if(eo(t)&&eP(t)&&e.composed&&e.composedPath){let t=e.composedPath();if(t)return W(t)}}return k.from(e.target)},eP=e=>w(e.dom.shadowRoot),eN=e=>{let t=en(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;let r=t.ownerDocument;return eR(ep.fromDom(t)).fold(()=>r.body.contains(t),E(eN,eL))},eH=e=>{let t=e.dom.body;if(null==t)throw Error("Body is not available yet");return ep.fromDom(t)},eW=(e,t,r)=>{if(!d(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),Error("CSS value must be a string: "+r);ef(e)&&e.style.setProperty(t,r)},eq=(e,t,r)=>{eW(e.dom,t,r)},eI=(e,t)=>{let r=e.dom;$(t,(e,t)=>{eW(r,t,e)})},eV=(e,t)=>{let r=e.dom,o=window.getComputedStyle(r).getPropertyValue(t);return""!==o||eN(e)?o:eB(r,t)},eB=(e,t)=>ef(e)?e.style.getPropertyValue(t):"",ej=(e,t,r,o,n,i,l)=>({target:e,x:t,y:r,stop:o,prevent:n,kill:i,raw:l}),e_=e=>{let t=ep.fromDom(eM(e).getOr(e.target)),r=()=>e.stopPropagation(),o=()=>e.preventDefault(),n=x(o,r);return ej(t,e.clientX,e.clientY,r,o,n,e)},ez=(e,t)=>r=>{e(r)&&t(e_(r))},e$=(e,t,r,o,n)=>{let i=ez(r,o);return e.dom.addEventListener(t,i,n),{unbind:function(e,...t){return(...r)=>{let o=t.concat(r);return e.apply(null,o)}}(eK,e,t,i,n)}},eU=(e,t,r,o)=>e$(e,t,r,o,!1),eK=(e,t,r,o)=>{e.dom.removeEventListener(t,r,o)},eX=(e,t,r)=>eU(e,t,T,r),eY=(e,t,r,o)=>{let n=e.isiOS()&&!0===/ipad/i.test(r),i=e.isiOS()&&!n,l=e.isiOS()||e.isAndroid(),s=l||o("(pointer:coarse)"),a=n||!i&&l&&o("(min-device-width:768px)"),u=i||l&&!a,m=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(r);return{isiPad:F(n),isiPhone:F(i),isTablet:F(a),isPhone:F(u),isTouch:F(s),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:F(m),isDesktop:F(!u&&!a&&!m)}},eG=(e,t)=>{for(let r=0;r<e.length;r++){let o=e[r];if(o.test(t))return o}},eJ=(e,t)=>{let r=eG(e,t);if(!r)return{major:0,minor:0};let o=e=>Number(t.replace(r,"$"+e));return eZ(o(1),o(2))},eQ=()=>eZ(0,0),eZ=(e,t)=>({major:e,minor:t}),e0={nu:eZ,detect:(e,t)=>{let r=String(t).toLowerCase();return 0===e.length?eQ():eJ(e,r)},unknown:eQ},e9=(e,t)=>q(t.brands,t=>{let r=t.brand.toLowerCase();return M(e,e=>{var t;return r===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())}).map(e=>({current:e.name,version:e0.nu(parseInt(t.version,10),0)}))}),e1=(e,t)=>{let r=String(t).toLowerCase();return M(e,e=>e.search(r))},e5=(e,t)=>e1(e,t).map(e=>{let r=e0.detect(e.versionRegexes,t);return{current:e.name,version:r}}),e2=(e,t)=>e1(e,t).map(e=>{let r=e0.detect(e.versionRegexes,t);return{current:e.name,version:r}}),e3=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,e6=e=>t=>eh(t,e),e7=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>eh(e,"edge/")&&eh(e,"chrome")&&eh(e,"safari")&&eh(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,e3],search:e=>eh(e,"chrome")&&!eh(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>eh(e,"msie")||eh(e,"trident")},{name:"Opera",versionRegexes:[e3,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:e6("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:e6("firefox")},{name:"Safari",versionRegexes:[e3,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(eh(e,"safari")||eh(e,"mobile/"))&&eh(e,"applewebkit")}],e8=[{name:"Windows",search:e6("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>eh(e,"iphone")||eh(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:e6("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:e6("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:e6("linux"),versionRegexes:[]},{name:"Solaris",search:e6("sunos"),versionRegexes:[]},{name:"FreeBSD",search:e6("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:e6("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],e4={browsers:F(e7),oses:F(e8)},te="Edge",tt="Chromium",tr="Opera",to="Firefox",tn="Safari",ti=e=>{let t=e.current,r=e.version,o=e=>()=>t===e;return{current:t,version:r,isEdge:o(te),isChromium:o(tt),isIE:o("IE"),isOpera:o(tr),isFirefox:o(to),isSafari:o(tn)}},tl={unknown:()=>ti({current:void 0,version:e0.unknown()}),nu:ti,edge:F(te),chromium:F(tt),ie:F("IE"),opera:F(tr),firefox:F(to),safari:F(tn)},ts="Windows",ta="Android",tu="Linux",tm="macOS",td="Solaris",tc="FreeBSD",th="ChromeOS",tf=e=>{let t=e.current,r=e.version,o=e=>()=>t===e;return{current:t,version:r,isWindows:o(ts),isiOS:o("iOS"),isAndroid:o(ta),isMacOS:o(tm),isLinux:o(tu),isSolaris:o(td),isFreeBSD:o(tc),isChromeOS:o(th)}},tg={unknown:()=>tf({current:void 0,version:e0.unknown()}),nu:tf,windows:F(ts),ios:F("iOS"),android:F(ta),linux:F(tu),macos:F(tm),solaris:F(td),freebsd:F(tc),chromeos:F(th)},tp={detect:(e,t,r)=>{let o=e4.browsers(),n=e4.oses(),i=t.bind(e=>e9(o,e)).orThunk(()=>e5(o,e)).fold(tl.unknown,tl.nu),l=e2(n,e).fold(tg.unknown,tg.nu),s=eY(l,i,e,r);return{browser:i,os:l,deviceType:s}}},tv=e=>window.matchMedia(e).matches,tw=(o=()=>tp.detect(navigator.userAgent,k.from(navigator.userAgentData),tv),t=!1,(...r)=>(t||(t=!0,e=o.apply(null,r)),e)),tb=()=>tw(),ty=(e,t)=>({left:e,top:t,translate:(r,o)=>ty(e+r,t+o)}),tS=e=>{let t=void 0!==e?e.dom:document;return ty(t.body.scrollLeft||t.documentElement.scrollLeft,t.body.scrollTop||t.documentElement.scrollTop)},tx=e=>{let t=void 0===e?window:e;return tb().browser.isFirefox()?k.none():k.from(t.visualViewport)},tE=(e,t,r,o)=>({x:e,y:t,width:r,height:o,right:e+r,bottom:t+o}),tF=e=>{let t=void 0===e?window:e,r=t.document,o=tS(ep.fromDom(r));return tx(t).fold(()=>{let e=t.document.documentElement,r=e.clientWidth,n=e.clientHeight;return tE(o.left,o.top,r,n)},e=>tE(Math.max(e.pageLeft,o.left),Math.max(e.pageTop,o.top),e.width,e.height))},tO=(e,t,r)=>tx(r).map(r=>{let o=e=>t(e_(e));return r.addEventListener(e,o),{unbind:()=>r.removeEventListener(e,o)}}).getOrThunk(()=>({unbind:S}));var tT=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),tk=tinymce.util.Tools.resolve("tinymce.Env");let tC=(e,t)=>{e.dispatch("FullscreenStateChanged",{state:t}),e.dispatch("ResizeEditor")},tD=e=>{(0,e.options.register)("fullscreen_native",{processor:"boolean",default:!1})},tA=e=>e.options.get("fullscreen_native"),tR=e=>{let t=ep.fromDom(e.getElement());return eR(t).map(eL).getOrThunk(()=>eH(eS(t)))},tL=e=>void 0!==e.fullscreenElement?e.fullscreenElement:void 0!==e.msFullscreenElement?e.msFullscreenElement:void 0!==e.webkitFullscreenElement?e.webkitFullscreenElement:null,tM=()=>void 0!==document.fullscreenElement?"fullscreenchange":void 0!==document.msFullscreenElement?"MSFullscreenChange":void 0!==document.webkitFullscreenElement?"webkitfullscreenchange":"fullscreenchange",tP=e=>{let t=e.dom;t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen()},tN=e=>{let t=e.dom;t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.webkitCancelFullScreen&&t.webkitCancelFullScreen()},tH=e=>e.dom===tL(eS(e).dom),tW=(e,t,r)=>R(eE(e,r),t),tq=(e,t)=>R(eF(e),t),tI=e=>eb(e),tV=(e,t,r)=>tW(e,e=>ev(e,t),r),tB=(e,t)=>tq(e,e=>ev(e,t)),tj="data-ephox-mobile-fullscreen-style",t_="position:absolute!important;",tz="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",t$=tk.os.isAndroid(),tU=e=>{let t=eV(e,"background-color");return void 0!==t&&""!==t?"background-color:"+t+"!important":"background-color:rgb(255,255,255)!important;"},tK=(e,t,r)=>{let o=t=>r=>{let o=eu(r,"style"),n=void 0===o?"no-styles":o.trim();n!==t&&(ea(r,tj,n),eI(r,e.parseStyle(t)))},n=tV(t,"*"),i=N(n,e=>tB(e,"*:not(.tox-silver-sink)")),l=tU(r);A(i,o("display:none!important;")),A(n,o(t_+tz+l)),o((!0===t$?"":t_)+tz+l)(t)},tX=e=>{A(tI("["+tj+"]"),t=>{let r=eu(t,tj);r&&"no-styles"!==r?eI(t,e.parseStyle(r)):em(t,"style"),em(t,tj)})},tY=tT.DOM,tG=()=>tF(window),tJ=e=>window.scrollTo(e.x,e.y),tQ=tx().fold(()=>({bind:S,unbind:S}),e=>{let t=j(),r=B(),o=B(),n=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},i=()=>{window.requestAnimationFrame(()=>{t.on(t=>eI(t,{top:e.offsetTop+"px",left:e.offsetLeft+"px",height:e.height+"px",width:e.width+"px"}))})},l=_(()=>{n(),i()},50);return{bind:e=>{t.set(e),l.throttle(),r.set(tO("resize",l.throttle)),o.set(tO("scroll",l.throttle))},unbind:()=>{t.on(()=>{r.clear(),o.clear()}),t.clear()}}}),tZ=(e,t)=>{let r=document.body,o=document.documentElement,n=e.getContainer(),i=ep.fromDom(n),l=eO(i).filter(e=>er(e)&&ec(e,"tox-silver-sink")),s=tR(e),a=t.get(),u=ep.fromDom(e.getBody()),m=tk.deviceType.isTouch(),d=n.style,c=e.iframeElement,h=null==c?void 0:c.style,f=e=>{e(r,"tox-fullscreen"),e(o,"tox-fullscreen"),e(n,"tox-fullscreen"),eR(i).map(e=>eL(e).dom).each(t=>{e(t,"tox-fullscreen"),e(t,"tox-shadowhost")})},g=()=>{m&&tX(e.dom),f(tY.removeClass),tQ.unbind(),k.from(t.get()).each(e=>e.fullscreenChangeHandler.unbind())};if(a)a.fullscreenChangeHandler.unbind(),tA(e)&&tH(s)&&tN(eS(s)),h.width=a.iframeWidth,h.height=a.iframeHeight,d.width=a.containerWidth,d.height=a.containerHeight,d.top=a.containerTop,d.left=a.containerLeft,I(l,a.sinkCssPosition,(e,t)=>{eq(e,"position",t)}),g(),tJ(a.scrollPos),t.set(null),tC(e,!1),e.off("remove",g);else{let r=eX(eS(s),tM(),r=>{tA(e)&&!tH(s)&&null!==t.get()&&tZ(e,t)}),o={scrollPos:tG(),containerWidth:d.width,containerHeight:d.height,containerTop:d.top,containerLeft:d.left,iframeWidth:h.width,iframeHeight:h.height,fullscreenChangeHandler:r,sinkCssPosition:l.map(e=>eV(e,"position"))};m&&tK(e.dom,i,u),h.width=h.height="100%",d.width=d.height="",f(tY.addClass),l.each(e=>{eq(e,"position","fixed")}),tQ.bind(i),e.on("remove",g),t.set(o),tA(e)&&tP(s),tC(e,!0)}},t0=(e,t)=>{e.addCommand("mceFullScreen",()=>{tZ(e,t)})},t9=(e,t)=>r=>{r.setActive(null!==t.get());let o=e=>r.setActive(e.state);return e.on("FullscreenStateChanged",o),()=>e.off("FullscreenStateChanged",o)},t1=(e,t)=>{let r=()=>e.execCommand("mceFullScreen");e.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:r,onSetup:t9(e,t)}),e.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:r,onSetup:t9(e,t),shortcut:"Meta+Shift+F"})};n.add("fullscreen",e=>{let t=r(null);return e.inline||(tD(e),t0(e,t),t1(e,t),e.addShortcut("Meta+Shift+F","","mceFullScreen")),i(t)})}();