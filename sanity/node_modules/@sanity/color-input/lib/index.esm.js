var e,l;function n(e,l){return l||(l=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(l)}}))}import{defineType as t,set as o,setIfMissing as a,unset as r,definePlugin as i}from"sanity";import{jsxs as h,jsx as d,Fragment as s}from"react/jsx-runtime";import{useMemo as c,useCallback as u,useRef as p,useState as b,useEffect as m}from"react";import{debounce as g}from"lodash";import{useTheme as y,Flex as f,Box as v,Card as x,Stack as C,Text as w,Inline as z,Button as S}from"@sanity/ui";import{TrashIcon as j,AddIcon as A}from"@sanity/icons";import{EditableInput as L,Saturation as H,Hue as M,Alpha as O,Checkboard as R}from"react-color/lib/components/common";import{CustomPicker as k}from"react-color";import B from"styled-components";import{isValidHex as N}from"react-color/lib/helpers/color";const T=t({title:"Hue Saturation Lightness",name:"hslaColor",type:"object",fields:[{name:"h",type:"number",title:"Hue"},{name:"s",type:"number",title:"Saturation"},{name:"l",type:"number",title:"Lightness"},{name:"a",type:"number",title:"Alpha"}]}),G=t({title:"Red Green Blue (rgb)",name:"rgbaColor",type:"object",fields:[{name:"r",type:"number",title:"Red"},{name:"g",type:"number",title:"Green"},{name:"b",type:"number",title:"Blue"},{name:"a",type:"number",title:"Alpha"}]}),V=e=>{let{onChange:l,rgb:n,hsl:t,hex:o,disableAlpha:a}=e;var r;const{sanity:i}=y(),s=c((()=>({input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px ".concat(i.color.input.default.enabled.border),color:i.color.input.default.enabled.fg,backgroundColor:i.color.input.default.enabled.bg,fontSize:i.fonts.text.sizes[0].fontSize,textAlign:"center"},label:{display:"block",textAlign:"center",fontSize:i.fonts.label.sizes[0].fontSize,color:i.color.base.fg,paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}})),[i]),p=u((e=>{if("hex"in e&&e.hex&&N(e.hex))l({hex:e.hex,source:"hex"});else if(n&&("r"in e&&e.r||"g"in e&&e.g||"b"in e&&e.b))l({r:Number(e.r)||n.r,g:Number(e.g)||n.g,b:Number(e.b)||n.b,a:n.a,source:"rgb"});else if(t&&"a"in e&&e.a){let n=Number(e.a);n<0?n=0:n>100&&(n=100),n/=100,l({h:t.h,s:t.s,l:t.l,a:n,source:"hsl"})}}),[l,t,n]);return h(f,{children:[d(v,{flex:2,marginRight:1,children:d(L,{style:s,label:"hex",value:null==o?void 0:o.replace("#",""),onChange:p})}),d(v,{flex:1,marginRight:1,children:d(L,{style:s,label:"r",value:null==n?void 0:n.r,onChange:p,dragLabel:!0,dragMax:255})}),d(v,{flex:1,marginRight:1,children:d(L,{style:s,label:"g",value:null==n?void 0:n.g,onChange:p,dragLabel:!0,dragMax:255})}),d(v,{flex:1,marginRight:1,children:d(L,{style:s,label:"b",value:null==n?void 0:n.b,onChange:p,dragLabel:!0,dragMax:255})}),!a&&d(v,{flex:1,children:d(L,{style:s,label:"a",value:Math.round(100*(null!=(r=null==n?void 0:n.a)?r:1)),onChange:p,dragLabel:!0,dragMax:100})})]})},_=B(v)(e||(e=n(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n"]))),U=B(f)(l||(l=n(["\n  margin-top: 6rem;\n  background-color: var(--card-bg-color);\n  position: relative;\n  width: 100%;\n"]))),D=k((e=>{var l,n,t;const{width:o,color:{rgb:a,hex:r,hsv:i,hsl:c},onChange:u,onUnset:p,disableAlpha:b,readOnly:m}=e;return c&&i?d("div",{style:{width:o},children:d(x,{padding:1,border:!0,radius:1,children:h(C,{space:2,children:[!m&&h(s,{children:[d(x,{overflow:"hidden",style:{position:"relative",height:"5em"},children:d(H,{onChange:u,hsl:c,hsv:i})}),d(x,{shadow:1,radius:3,overflow:"hidden",style:{position:"relative",height:"10px"},children:d(M,{hsl:c,onChange:!m&&u})}),!b&&d(x,{shadow:1,radius:3,overflow:"hidden",style:{position:"relative",height:"10px"},children:d(O,{rgb:a,hsl:c,onChange:u})})]}),h(f,{children:[h(x,{flex:1,radius:2,overflow:"hidden",style:{position:"relative",minWidth:"4em"},children:[d(R,{}),d(_,{style:{backgroundColor:"rgba(".concat(null==a?void 0:a.r,",").concat(null==a?void 0:a.g,",").concat(null==a?void 0:a.b,",").concat(null==a?void 0:a.a,")")}}),m&&d(U,{padding:2,paddingBottom:1,sizing:"border",justify:"space-between",children:h(C,{space:3,marginTop:1,children:[d(w,{size:3,weight:"bold",children:r}),h(z,{space:3,children:[h(w,{size:1,children:[d("strong",{children:"RGB: "}),null==a?void 0:a.r," ",null==a?void 0:a.g," ",null==a?void 0:a.b]}),h(w,{size:1,children:[d("strong",{children:"HSL: "})," ",Math.round(null!=(l=null==c?void 0:c.h)?l:0)," ",Math.round(null!=(n=null==c?void 0:c.s)?n:0),"%"," ",Math.round(null!=(t=null==c?void 0:c.l)?t:0)]})]})]})})]}),!m&&h(f,{align:"flex-start",marginLeft:2,children:[d(v,{style:{width:200},children:d(V,{rgb:a,hsl:c,hex:r,onChange:u,disableAlpha:b})}),d(v,{marginLeft:2,children:d(S,{onClick:p,title:"Delete color",icon:j,tone:"critical"})})]})]})]})})}):null})),P={hex:"#24a3e3",hsl:{h:200,s:.7732,l:.5156,a:1},hsv:{h:200,s:.8414,v:.8901,a:1},rgb:{r:46,g:163,b:227,a:1},source:"hex"};function W(e){var l;const{onChange:n,readOnly:t}=e,i=e.value,h=e.schemaType,y=p(null),[f,v]=b(i);m((()=>v(i)),[i]);const x=u((e=>{var l;const t=h.fields.filter((l=>l.name in e)).map((l=>{const n=e[l.name],t="object"===l.type.jsonType;return o(t?Object.assign({_type:l.type.name},n):n,[l.name])}));n([a({_type:h.name}),o(h.name,["_type"]),o(null==(l=e.rgb)?void 0:l.a,["alpha"]),...t])}),[n,h]),C=c((()=>g(x,100)),[x]),w=u((e=>{v(e),C(e)}),[C,v]),z=u((()=>{v(P),x(P)}),[x]),j=u((()=>{v(void 0),n(r())}),[n]);return d(s,{children:i&&i.hex?d(D,{color:f,onChange:w,readOnly:t||"boolean"==typeof h.readOnly&&h.readOnly,disableAlpha:!!(null==(l=h.options)?void 0:l.disableAlpha),onUnset:j}):d(S,{icon:A,mode:"ghost",text:"Create color",ref:y,disabled:Boolean(t),onClick:z})})}const q=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return Math.round(100*e)},E=t({name:"color",type:"object",title:"Color",components:{input:W},fields:[{title:"Hex",name:"hex",type:"string"},{title:"Alpha",name:"alpha",type:"number"},{title:"Hue Saturation Lightness",name:"hsl",type:"hslaColor"},{title:"Hue Saturation Value",name:"hsv",type:"hsvaColor"},{title:"Red Green Blue (rgb)",name:"rgb",type:"rgbaColor"}],preview:{select:{title:"hex",alpha:"alpha",hex:"hex",hsl:"hsl"},prepare(e){let{title:l,hex:n,hsl:t,alpha:o}=e,a=n||"No color set";return t&&(a="H:".concat(q(t.h)," S:").concat(q(t.s)," L:").concat(q(t.l)," A:").concat(q(o))),{title:l,subtitle:a,media:()=>d("div",{style:{backgroundColor:null!=n?n:"#000",opacity:null!=o?o:1,position:"absolute",height:"100%",width:"100%",top:"0",left:"0"}})}}}}),F=t({title:"Hue Saturation Value",name:"hsvaColor",type:"object",fields:[{name:"h",type:"number",title:"Hue"},{name:"s",type:"number",title:"Saturation"},{name:"v",type:"number",title:"Value"},{name:"a",type:"number",title:"Alpha"}]}),I=i({name:"@sanity/color-input",schema:{types:[T,F,G,E]}});export{W as ColorInput,E as color,I as colorInput,T as hslaColor,F as hsvaColor,G as rgbaColor};
//# sourceMappingURL=index.esm.js.map
