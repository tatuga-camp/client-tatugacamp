"use strict";var e,l;function t(e,l){return l||(l=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(l)}}))}Object.defineProperty(exports,"__esModule",{value:!0});var n=require("sanity"),a=require("react/jsx-runtime"),r=require("react"),o=require("lodash"),i=require("@sanity/ui"),s=require("@sanity/icons"),d=require("react-color/lib/components/common"),u=require("react-color"),h=require("styled-components"),c=require("react-color/lib/helpers/color");function p(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var x=p(h);const b=n.defineType({title:"Hue Saturation Lightness",name:"hslaColor",type:"object",fields:[{name:"h",type:"number",title:"Hue"},{name:"s",type:"number",title:"Saturation"},{name:"l",type:"number",title:"Lightness"},{name:"a",type:"number",title:"Alpha"}]}),g=n.defineType({title:"Red Green Blue (rgb)",name:"rgbaColor",type:"object",fields:[{name:"r",type:"number",title:"Red"},{name:"g",type:"number",title:"Green"},{name:"b",type:"number",title:"Blue"},{name:"a",type:"number",title:"Alpha"}]}),m=e=>{let{onChange:l,rgb:t,hsl:n,hex:o,disableAlpha:s}=e;var u;const{sanity:h}=i.useTheme(),p=r.useMemo((()=>({input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px ".concat(h.color.input.default.enabled.border),color:h.color.input.default.enabled.fg,backgroundColor:h.color.input.default.enabled.bg,fontSize:h.fonts.text.sizes[0].fontSize,textAlign:"center"},label:{display:"block",textAlign:"center",fontSize:h.fonts.label.sizes[0].fontSize,color:h.color.base.fg,paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}})),[h]),x=r.useCallback((e=>{if("hex"in e&&e.hex&&c.isValidHex(e.hex))l({hex:e.hex,source:"hex"});else if(t&&("r"in e&&e.r||"g"in e&&e.g||"b"in e&&e.b))l({r:Number(e.r)||t.r,g:Number(e.g)||t.g,b:Number(e.b)||t.b,a:t.a,source:"rgb"});else if(n&&"a"in e&&e.a){let t=Number(e.a);t<0?t=0:t>100&&(t=100),t/=100,l({h:n.h,s:n.s,l:n.l,a:t,source:"hsl"})}}),[l,n,t]);return a.jsxs(i.Flex,{children:[a.jsx(i.Box,{flex:2,marginRight:1,children:a.jsx(d.EditableInput,{style:p,label:"hex",value:null==o?void 0:o.replace("#",""),onChange:x})}),a.jsx(i.Box,{flex:1,marginRight:1,children:a.jsx(d.EditableInput,{style:p,label:"r",value:null==t?void 0:t.r,onChange:x,dragLabel:!0,dragMax:255})}),a.jsx(i.Box,{flex:1,marginRight:1,children:a.jsx(d.EditableInput,{style:p,label:"g",value:null==t?void 0:t.g,onChange:x,dragLabel:!0,dragMax:255})}),a.jsx(i.Box,{flex:1,marginRight:1,children:a.jsx(d.EditableInput,{style:p,label:"b",value:null==t?void 0:t.b,onChange:x,dragLabel:!0,dragMax:255})}),!s&&a.jsx(i.Box,{flex:1,children:a.jsx(d.EditableInput,{style:p,label:"a",value:Math.round(100*(null!=(u=null==t?void 0:t.a)?u:1)),onChange:x,dragLabel:!0,dragMax:100})})]})},y=x.default(i.Box)(e||(e=t(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n"]))),f=x.default(i.Flex)(l||(l=t(["\n  margin-top: 6rem;\n  background-color: var(--card-bg-color);\n  position: relative;\n  width: 100%;\n"]))),j=u.CustomPicker((e=>{var l,t,n;const{width:r,color:{rgb:o,hex:u,hsv:h,hsl:c},onChange:p,onUnset:x,disableAlpha:b,readOnly:g}=e;return c&&h?a.jsx("div",{style:{width:r},children:a.jsx(i.Card,{padding:1,border:!0,radius:1,children:a.jsxs(i.Stack,{space:2,children:[!g&&a.jsxs(a.Fragment,{children:[a.jsx(i.Card,{overflow:"hidden",style:{position:"relative",height:"5em"},children:a.jsx(d.Saturation,{onChange:p,hsl:c,hsv:h})}),a.jsx(i.Card,{shadow:1,radius:3,overflow:"hidden",style:{position:"relative",height:"10px"},children:a.jsx(d.Hue,{hsl:c,onChange:!g&&p})}),!b&&a.jsx(i.Card,{shadow:1,radius:3,overflow:"hidden",style:{position:"relative",height:"10px"},children:a.jsx(d.Alpha,{rgb:o,hsl:c,onChange:p})})]}),a.jsxs(i.Flex,{children:[a.jsxs(i.Card,{flex:1,radius:2,overflow:"hidden",style:{position:"relative",minWidth:"4em"},children:[a.jsx(d.Checkboard,{}),a.jsx(y,{style:{backgroundColor:"rgba(".concat(null==o?void 0:o.r,",").concat(null==o?void 0:o.g,",").concat(null==o?void 0:o.b,",").concat(null==o?void 0:o.a,")")}}),g&&a.jsx(f,{padding:2,paddingBottom:1,sizing:"border",justify:"space-between",children:a.jsxs(i.Stack,{space:3,marginTop:1,children:[a.jsx(i.Text,{size:3,weight:"bold",children:u}),a.jsxs(i.Inline,{space:3,children:[a.jsxs(i.Text,{size:1,children:[a.jsx("strong",{children:"RGB: "}),null==o?void 0:o.r," ",null==o?void 0:o.g," ",null==o?void 0:o.b]}),a.jsxs(i.Text,{size:1,children:[a.jsx("strong",{children:"HSL: "})," ",Math.round(null!=(l=null==c?void 0:c.h)?l:0)," ",Math.round(null!=(t=null==c?void 0:c.s)?t:0),"%"," ",Math.round(null!=(n=null==c?void 0:c.l)?n:0)]})]})]})})]}),!g&&a.jsxs(i.Flex,{align:"flex-start",marginLeft:2,children:[a.jsx(i.Box,{style:{width:200},children:a.jsx(m,{rgb:o,hsl:c,hex:u,onChange:p,disableAlpha:b})}),a.jsx(i.Box,{marginLeft:2,children:a.jsx(i.Button,{onClick:x,title:"Delete color",icon:s.TrashIcon,tone:"critical"})})]})]})]})})}):null})),v={hex:"#24a3e3",hsl:{h:200,s:.7732,l:.5156,a:1},hsv:{h:200,s:.8414,v:.8901,a:1},rgb:{r:46,g:163,b:227,a:1},source:"hex"};function C(e){var l;const{onChange:t,readOnly:d}=e,u=e.value,h=e.schemaType,c=r.useRef(null),[p,x]=r.useState(u);r.useEffect((()=>x(u)),[u]);const b=r.useCallback((e=>{var l;const a=h.fields.filter((l=>l.name in e)).map((l=>{const t=e[l.name],a="object"===l.type.jsonType;return n.set(a?Object.assign({_type:l.type.name},t):t,[l.name])}));t([n.setIfMissing({_type:h.name}),n.set(h.name,["_type"]),n.set(null==(l=e.rgb)?void 0:l.a,["alpha"]),...a])}),[t,h]),g=r.useMemo((()=>o.debounce(b,100)),[b]),m=r.useCallback((e=>{x(e),g(e)}),[g,x]),y=r.useCallback((()=>{x(v),b(v)}),[b]),f=r.useCallback((()=>{x(void 0),t(n.unset())}),[t]);return a.jsx(a.Fragment,{children:u&&u.hex?a.jsx(j,{color:p,onChange:m,readOnly:d||"boolean"==typeof h.readOnly&&h.readOnly,disableAlpha:!!(null==(l=h.options)?void 0:l.disableAlpha),onUnset:f}):a.jsx(i.Button,{icon:s.AddIcon,mode:"ghost",text:"Create color",ref:c,disabled:Boolean(d),onClick:y})})}const w=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return Math.round(100*e)},B=n.defineType({name:"color",type:"object",title:"Color",components:{input:C},fields:[{title:"Hex",name:"hex",type:"string"},{title:"Alpha",name:"alpha",type:"number"},{title:"Hue Saturation Lightness",name:"hsl",type:"hslaColor"},{title:"Hue Saturation Value",name:"hsv",type:"hsvaColor"},{title:"Red Green Blue (rgb)",name:"rgb",type:"rgbaColor"}],preview:{select:{title:"hex",alpha:"alpha",hex:"hex",hsl:"hsl"},prepare(e){let{title:l,hex:t,hsl:n,alpha:r}=e,o=t||"No color set";return n&&(o="H:".concat(w(n.h)," S:").concat(w(n.s)," L:").concat(w(n.l)," A:").concat(w(r))),{title:l,subtitle:o,media:()=>a.jsx("div",{style:{backgroundColor:null!=t?t:"#000",opacity:null!=r?r:1,position:"absolute",height:"100%",width:"100%",top:"0",left:"0"}})}}}}),S=n.defineType({title:"Hue Saturation Value",name:"hsvaColor",type:"object",fields:[{name:"h",type:"number",title:"Hue"},{name:"s",type:"number",title:"Saturation"},{name:"v",type:"number",title:"Value"},{name:"a",type:"number",title:"Alpha"}]}),k=n.definePlugin({name:"@sanity/color-input",schema:{types:[b,S,g,B]}});exports.ColorInput=C,exports.color=B,exports.colorInput=k,exports.hslaColor=b,exports.hsvaColor=S,exports.rgbaColor=g;
//# sourceMappingURL=index.js.map
